var SP=Object.defineProperty,RP=Object.defineProperties;var NP=Object.getOwnPropertyDescriptors;var rE=Object.getOwnPropertySymbols,PP=Object.getPrototypeOf,MP=Object.prototype.hasOwnProperty,xP=Object.prototype.propertyIsEnumerable,OP=Reflect.get;var iE=(n,e,t)=>e in n?SP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})MP.call(e,t)&&iE(n,t,e[t]);if(rE)for(var t of rE(e))xP.call(e,t)&&iE(n,t,e[t]);return n},we=(n,e)=>RP(n,NP(e));var jt=(n,e,t)=>OP(PP(n),t,e);var m=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{a(t.next(u))}catch(l){i(l)}},o=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(n,e)).next())});var sE=null;var Rf=1,Nf=Symbol("SIGNAL");function ye(n){let e=sE;return sE=n,e}var oE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kP(n){if(!(xf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Rf)){if(!n.producerMustRecompute(n)&&!Pf(n)){n.dirty=!1,n.lastCleanEpoch=Rf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Rf}}function aE(n){return n&&(n.nextProducerIndex=0),ye(n)}function cE(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Mf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pf(n){cu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(kP(t),r!==t.version))return!0}return!1}function uE(n){if(cu(n),xf(n))for(let e=0;e<n.producerNode.length;e++)Mf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Mf(n,e){if(FP(n),cu(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Mf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];cu(i),i.producerIndexOfThis[r]=e}}function xf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function cu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function FP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function LP(){throw new Error}var VP=LP;function lE(n){VP=n}function Z(n){return typeof n=="function"}function is(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var uu=is(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(s){e=s instanceof uu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{dE(s)}catch(o){e=e??[],o instanceof uu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new uu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)dE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};ke.EMPTY=(()=>{let n=new ke;return n.closed=!0,n})();var Of=ke.EMPTY;function lu(n){return n instanceof ke||n&&"closed"in n&&Z(n.remove)&&Z(n.add)&&Z(n.unsubscribe)}function dE(n){Z(n)?n():n.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ss={setTimeout(n,e,...t){let{delegate:r}=ss;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ss;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function du(n){ss.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(n);else throw n})}function ia(){}var hE=kf("C",void 0,void 0);function fE(n){return kf("E",void 0,n)}function pE(n){return kf("N",n,void 0)}function kf(n,e,t){return{kind:n,value:e,error:t}}var oi=null;function os(n){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}function gE(n){Xt.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}var ai=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lu(e)&&e.add(this)):this.destination=BP}static create(e,t,r){return new as(e,t,r)}next(e){this.isStopped?Lf(pE(e),this):this._next(e)}error(e){this.isStopped?Lf(fE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lf(hE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UP=Function.prototype.bind;function Ff(n,e){return UP.call(n,e)}var Vf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){hu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){hu(r)}else hu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hu(t)}}},as=class extends ai{constructor(e,t,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ff(e.next,s),error:e.error&&Ff(e.error,s),complete:e.complete&&Ff(e.complete,s)}):i=e}this.destination=new Vf(i)}};function hu(n){Xt.useDeprecatedSynchronousErrorHandling?gE(n):du(n)}function jP(n){throw n}function Lf(n,e){let{onStoppedNotification:t}=Xt;t&&ss.setTimeout(()=>t(n,e))}var BP={closed:!0,next:ia,error:jP,complete:ia};var cs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Uf(...n){return jf(n)}function jf(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=HP(t)?t:new as(t,r,i);return os(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=mE(r),new r((i,s)=>{let o=new as({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[cs](){return this}pipe(...t){return jf(t)(this)}toPromise(t){return t=mE(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mE(n){var e;return(e=n??Xt.Promise)!==null&&e!==void 0?e:Promise}function $P(n){return n&&Z(n.next)&&Z(n.error)&&Z(n.complete)}function HP(n){return n&&n instanceof ai||$P(n)&&lu(n)}function Bf(n){return Z(n?.lift)}function he(n){return e=>{if(Bf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new $f(n,e,t,r,i)}var $f=class extends ai{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function us(){return he((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ls=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Bf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return us()(this)}};var yE=is(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yE}next(t){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Of:(this.currentObservers=null,s.push(t),new ke(()=>{this.currentObservers=null,si(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new fu(e,t),n})(),fu=class extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Of}};var Je=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Hf={now(){return(Hf.delegate||Date).now()},delegate:void 0};var pu=class extends ke{constructor(e,t){super()}schedule(e,t=0){return this}};var sa={setInterval(n,e,...t){let{delegate:r}=sa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ds=class extends pu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&sa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var hs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};hs.now=Hf.now;var fs=class extends hs{constructor(e,t=hs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var qf=new fs(ds);var gu=class extends ds{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var mu=class extends fs{};var zf=new mu(gu);var Mt=new ae(n=>n.complete());function vE(n){return n&&Z(n.schedule)}function _E(n){return n[n.length-1]}function yu(n){return Z(_E(n))?n.pop():void 0}function mr(n){return vE(_E(n))?n.pop():void 0}function ui(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wE(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function IE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(n){return this instanceof ci?(this.v=n,this):new ci(n)}function EE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(R){return new Promise(function(N,O){s.push([_,R,N,O])>1||u(_,R)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(R){y(s[0][3],R)}}function l(_){_.value instanceof ci?Promise.resolve(_.value.v).then(h,p):y(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function TE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof IE=="function"?IE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var vu=n=>n&&typeof n.length=="number"&&typeof n!="function";function _u(n){return Z(n?.then)}function Iu(n){return Z(n[cs])}function wu(n){return Symbol.asyncIterator&&Z(n?.[Symbol.asyncIterator])}function Eu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tu=qP();function bu(n){return Z(n?.[Tu])}function Du(n){return EE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ci(t.read());if(i)return yield ci(void 0);yield yield ci(r)}}finally{t.releaseLock()}})}function Cu(n){return Z(n?.getReader)}function Fe(n){if(n instanceof ae)return n;if(n!=null){if(Iu(n))return zP(n);if(vu(n))return GP(n);if(_u(n))return WP(n);if(wu(n))return bE(n);if(bu(n))return KP(n);if(Cu(n))return QP(n)}throw Eu(n)}function zP(n){return new ae(e=>{let t=n[cs]();if(Z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GP(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function WP(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,du)})}function KP(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bE(n){return new ae(e=>{YP(n,e).catch(t=>e.error(t))})}function QP(n){return bE(Du(n))}function YP(n,e){var t,r,i,s;return wE(this,void 0,void 0,function*(){try{for(t=TE(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Tt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function yr(n,e=0){return he((t,r)=>{t.subscribe(ce(r,i=>Tt(r,n,()=>r.next(i),e),()=>Tt(r,n,()=>r.complete(),e),i=>Tt(r,n,()=>r.error(i),e)))})}function vr(n,e=0){return he((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function DE(n,e){return Fe(n).pipe(vr(e),yr(e))}function CE(n,e){return Fe(n).pipe(vr(e),yr(e))}function AE(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function SE(n,e){return new ae(t=>{let r;return Tt(t,e,()=>{r=n[Tu](),Tt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Au(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{Tt(t,e,()=>{let r=n[Symbol.asyncIterator]();Tt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function RE(n,e){return Au(Du(n),e)}function NE(n,e){if(n!=null){if(Iu(n))return DE(n,e);if(vu(n))return AE(n,e);if(_u(n))return CE(n,e);if(wu(n))return Au(n,e);if(bu(n))return SE(n,e);if(Cu(n))return RE(n,e)}throw Eu(n)}function Ne(n,e){return e?NE(n,e):Fe(n)}function G(...n){let e=mr(n);return Ne(n,e)}function ps(n,e){let t=Z(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function Gf(n){return!!n&&(n instanceof ae||Z(n.lift)&&Z(n.subscribe))}var Ln=is(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return he((t,r)=>{let i=0;t.subscribe(ce(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:JP}=Array;function XP(n,e){return JP(e)?n(...e):n(e)}function Su(n){return ne(e=>XP(n,e))}var{isArray:ZP}=Array,{getPrototypeOf:eM,prototype:tM,keys:nM}=Object;function Ru(n){if(n.length===1){let e=n[0];if(ZP(e))return{args:e,keys:null};if(rM(e)){let t=nM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rM(n){return n&&typeof n=="object"&&eM(n)===tM}function Nu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function oa(...n){let e=mr(n),t=yu(n),{args:r,keys:i}=Ru(n);if(r.length===0)return Ne([],e);let s=new ae(iM(r,e,i?o=>Nu(i,o):Pt));return t?s.pipe(Su(t)):s}function iM(n,e,t=Pt){return r=>{PE(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)PE(e,()=>{let l=Ne(n[u],e),h=!1;l.subscribe(ce(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function PE(n,e,t){n?Tt(t,n,e):e()}function ME(n,e,t,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=R=>l<r?A(R):u.push(R),A=R=>{s&&e.next(R),l++;let N=!1;Fe(t(R,h++)).subscribe(ce(e,O=>{i?.(O),s?_(O):e.next(O)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let O=u.shift();o?Tt(e,o,()=>A(O)):A(O)}y()}catch(O){e.error(O)}}))};return n.subscribe(ce(e,_,()=>{p=!0,y()})),()=>{a?.()}}function Le(n,e,t=1/0){return Z(e)?Le((r,i)=>ne((s,o)=>e(r,s,i,o))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),he((r,i)=>ME(r,i,n,t)))}function gs(n=1/0){return Le(Pt,n)}function xE(){return gs(1)}function ms(...n){return xE()(Ne(n,mr(n)))}function Pu(n){return new ae(e=>{Fe(n()).subscribe(e)})}function Wf(...n){let e=yu(n),{args:t,keys:r}=Ru(n),i=new ae(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Fe(t[h]).subscribe(ce(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Nu(r,a):a),s.complete())}))}});return e?i.pipe(Su(e)):i}function bt(n,e){return he((t,r)=>{let i=0;t.subscribe(ce(r,s=>n.call(e,s,i++)&&r.next(s)))})}function _r(n){return he((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ce(t,void 0,void 0,o=>{s=Fe(n(o,_r(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function OE(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(ce(o,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Vn(n,e){return Z(e)?Le(n,e,1):Le(n,1)}function Ir(n){return he((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Un(n){return n<=0?()=>Mt:he((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Kf(n){return ne(()=>n)}function Mu(n=sM){return he((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sM(){return new Ln}function li(n){return he((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function dn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,s)=>n(i,s,r)):Pt,Un(1),t?Ir(e):Mu(()=>new Ln))}function ys(n){return n<=0?()=>Mt:he((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,s)=>n(i,s,r)):Pt,ys(1),t?Ir(e):Mu(()=>new Ln))}function Yf(n,e){return he(OE(n,e,arguments.length>=2,!0))}function Jf(...n){let e=mr(n);return he((t,r)=>{(e?ms(n,t,e):ms(n,t)).subscribe(r)})}function Dt(n,e){return he((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=s++;Fe(n(u,h)).subscribe(i=ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xf(n){return he((e,t)=>{Fe(n).subscribe(ce(t,()=>t.complete(),ia)),!t.closed&&e.subscribe(t)})}function Ve(n,e,t){let r=Z(n)||e||t?{next:n,error:e,complete:t}:n;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ce(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var oM="https://g.co/ng/security#xss",H=class extends Error{constructor(e,t){super(al(e,t)),this.code=e}};function al(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function _a(n){return{toString:n}.toString()}var xu="__parameters__";function aM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function yT(n,e,t){return _a(()=>{let r=aM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(xu)?u[xu]:Object.defineProperty(u,xu,{value:[]})[xu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var aa=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function cM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(vt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function pp(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var uM=be({__forward_ref__:be});function Os(n){return n.__forward_ref__=Os,n.toString=function(){return vt(this())},n}function mt(n){return vT(n)?n():n}function vT(n){return typeof n=="function"&&n.hasOwnProperty(uM)&&n.__forward_ref__===Os}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $n(n){return{providers:n.providers||[],imports:n.imports||[]}}function cl(n){return kE(n,IT)||kE(n,wT)}function _T(n){return cl(n)!==null}function kE(n,e){return n.hasOwnProperty(e)?n[e]:null}function lM(n){let e=n&&(n[IT]||n[wT]);return e||null}function FE(n){return n&&(n.hasOwnProperty(LE)||n.hasOwnProperty(dM))?n[LE]:null}var IT=be({\u0275prov:be}),LE=be({\u0275inj:be}),wT=be({ngInjectableDef:be}),dM=be({ngInjectorDef:be}),B=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ET(n){return n&&!!n.\u0275providers}var hM=be({\u0275cmp:be}),fM=be({\u0275dir:be}),pM=be({\u0275pipe:be}),gM=be({\u0275mod:be}),Bu=be({\u0275fac:be}),ca=be({__NG_ELEMENT_ID__:be}),VE=be({__NG_ENV_ID__:be});function Es(n){return typeof n=="string"?n:n==null?"":String(n)}function mM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Es(n)}function yM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new H(-200,n)}function ag(n,e){throw new H(-201,!1)}var ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ie||{}),gp;function TT(){return gp}function Bt(n){let e=gp;return gp=n,e}function bT(n,e,t){let r=cl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ie.Optional)return null;if(e!==void 0)return e;ag(n,"Injector")}var vM={},ua=vM,mp="__NG_DI_FLAG__",$u="ngTempTokenPath",_M="ngTokenPath",IM=/\n/gm,wM="\u0275",UE="__source",Ts;function EM(){return Ts}function wr(n){let e=Ts;return Ts=n,e}function TM(n,e=ie.Default){if(Ts===void 0)throw new H(-203,!1);return Ts===null?bT(n,void 0,e):Ts.get(n,e&ie.Optional?null:void 0,e)}function $(n,e=ie.Default){return(TT()||TM)(mt(n),e)}function M(n,e=ie.Default){return $(n,ul(e))}function ul(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function yp(n){let e=[];for(let t=0;t<n.length;t++){let r=mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],u=bM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push($(i,s))}else e.push($(r))}return e}function DT(n,e){return n[mp]=e,n.prototype[mp]=e,n}function bM(n){return n[mp]}function DM(n,e,t,r){let i=n[$u];throw e[UE]&&i.unshift(e[UE]),n.message=CM(`
`+n.message,i,t,r),n[_M]=i,n[$u]=null,n}function CM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==wM?n.slice(2):n;let i=vt(e);if(Array.isArray(e))i=e.map(vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):vt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IM,`
  `)}`}var Xe=DT(yT("Optional"),8);var ll=DT(yT("SkipSelf"),4);function Ds(n,e){let t=n.hasOwnProperty(Bu);return t?n[Bu]:null}function cg(n,e){n.forEach(t=>Array.isArray(t)?cg(t,e):e(t))}function CT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function AM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ug(n,e,t){let r=Ia(n,e);return r>=0?n[r|1]=t:(r=~r,AM(n,r,e,t)),r}function Zf(n,e){let t=Ia(n,e);if(t>=0)return n[t|1]}function Ia(n,e){return SM(n,e,1)}function SM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Cs={},Ct=[],As=new B(""),AT=new B("",-1),ST=new B(""),qu=class{get(e,t=ua){if(t===ua){let r=new Error(`NullInjectorError: No provider for ${vt(e)}!`);throw r.name="NullInjectorError",r}return t}},RT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(RT||{}),pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(pn||{}),Ht=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ht||{});function RM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function vp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];PM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function NM(n){return n===3||n===4||n===6}function PM(n){return n.charCodeAt(0)===64}function la(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?jE(n,t,i,null,e[++r]):jE(n,t,i,null,null))}}return n}function jE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var NT="ng-template";function MM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(lg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function lg(n){return n.type===4&&n.value!==NT}function xM(n,e,t){let r=n.type===4&&!t?NT:n.value;return e===r}function OM(n,e,t){let r=4,i=n.attrs,s=i!==null?LM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Zt(r)&&!Zt(u))return!1;if(o&&Zt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!xM(n,u,t)||u===""&&e.length===1){if(Zt(r))return!1;o=!0}}else if(r&8){if(i===null||!MM(n,i,u,t)){if(Zt(r))return!1;o=!0}}else{let l=e[++a],h=kM(u,i,lg(n),t);if(h===-1){if(Zt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;o=!0}}}}return Zt(r)||o}function Zt(n){return(n&1)===0}function kM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return VM(e,n)}function FM(n,e,t=!1){for(let r=0;r<e.length;r++)if(OM(n,e[r],t))return!0;return!1}function LM(n){for(let e=0;e<n.length;e++){let t=n[e];if(NM(t))return e}return n.length}function VM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BE(n,e){return n?":not("+e.trim()+")":e}function UM(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zt(o)&&(e+=BE(s,i),i=""),r=o,s=s||!Zt(r);t++}return i!==""&&(e+=BE(s,i)),e}function jM(n){return n.map(UM).join(",")}function BM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Zt(i))break;i=s}r++}return{attrs:e,classes:t}}function Ar(n){return _a(()=>{let e=kT(n),t=we(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||pn.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""});FT(t);let r=n.dependencies;return t.directiveDefs=HE(r,!1),t.pipeDefs=HE(r,!0),t.id=qM(t),t})}function $M(n){return Tr(n)||PT(n)}function HM(n){return n!==null}function Hn(n){return _a(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $E(n,e){if(n==null)return Cs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Ht.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Ht.None?[r,a]:r,e[s]=o):t[s]=r}return t}function At(n){return _a(()=>{let e=kT(n);return FT(e),e})}function Tr(n){return n[hM]||null}function PT(n){return n[fM]||null}function MT(n){return n[pM]||null}function xT(n){let e=Tr(n)||PT(n)||MT(n);return e!==null?e.standalone:!1}function OT(n,e){let t=n[gM]||null;if(!t&&e===!0)throw new Error(`Type ${vt(n)} does not have '\u0275mod' property.`);return t}function kT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Cs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$E(n.inputs,e),outputs:$E(n.outputs),debugInfo:null}}function FT(n){n.features?.forEach(e=>e(n))}function HE(n,e){if(!n)return null;let t=e?MT:$M;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(HM)}function qM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qt(n){return{\u0275providers:n}}function zM(...n){return{\u0275providers:LT(!0,n),\u0275fromNgModule:!0}}function LT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return cg(e,o=>{let a=o;_p(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&VT(i,s),t}function VT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];dg(i,s=>{e(s,r)})}}function _p(n,e,t,r){if(n=mt(n),!n)return!1;let i=null,s=FE(n),o=!s&&Tr(n);if(!s&&!o){let u=n.ngModule;if(s=FE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)_p(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{cg(s.imports,h=>{_p(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&VT(l,e)}if(!a){let l=Ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:ST,useValue:i,multi:!0},i),e({provide:As,useValue:()=>$(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;dg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function dg(n,e){for(let t of n)ET(t)&&(t=t.\u0275providers),Array.isArray(t)?dg(t,e):e(t)}var GM=be({provide:String,useValue:be});function UT(n){return n!==null&&typeof n=="object"&&GM in n}function WM(n){return!!(n&&n.useExisting)}function KM(n){return!!(n&&n.useFactory)}function Ss(n){return typeof n=="function"}function QM(n){return!!n.useClass}var dl=new B(""),Fu={},YM={},ep;function hg(){return ep===void 0&&(ep=new qu),ep}var it=class{},da=class extends it{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wp(e,o=>this.processProvider(o)),this.records.set(AT,vs(void 0,this)),i.has("environment")&&this.records.set(it,vs(void 0,this));let s=this.records.get(dl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ST,Ct,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wr(this),r=Bt(void 0),i;try{return e()}finally{wr(t),Bt(r)}}get(e,t=ua,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VE))return e[VE](this);r=ul(r);let i,s=wr(this),o=Bt(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=tx(e)&&cl(e);l&&this.injectableDefInScope(l)?u=vs(Ip(e),Fu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?hg():this.parent;return t=r&ie.Optional&&t===ua?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$u]=a[$u]||[]).unshift(vt(e)),s)throw a;return DM(a,e,"R3InjectorError",this.source)}else throw a}finally{Bt(o),wr(s)}}resolveInjectorInitializers(){let e=ye(null),t=wr(this),r=Bt(void 0),i;try{let s=this.get(As,Ct,ie.Self);for(let o of s)o()}finally{wr(t),Bt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=mt(e);let t=Ss(e)?e:mt(e&&e.provide),r=XM(e);if(!Ss(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vs(void 0,Fu,!0),i.factory=()=>yp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===Fu&&(t.value=YM,t.value=t.factory()),typeof t.value=="object"&&t.value&&ex(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ip(n){let e=cl(n),t=e!==null?e.factory:Ds(n);if(t!==null)return t;if(n instanceof B)throw new H(204,!1);if(n instanceof Function)return JM(n);throw new H(204,!1)}function JM(n){if(n.length>0)throw new H(204,!1);let t=lM(n);return t!==null?()=>t.factory(n):()=>new n}function XM(n){if(UT(n))return vs(void 0,n.useValue);{let e=jT(n);return vs(e,Fu)}}function jT(n,e,t){let r;if(Ss(n)){let i=mt(n);return Ds(i)||Ip(i)}else if(UT(n))r=()=>mt(n.useValue);else if(KM(n))r=()=>n.useFactory(...yp(n.deps||[]));else if(WM(n))r=()=>$(mt(n.useExisting));else{let i=mt(n&&(n.useClass||n.provide));if(ZM(n))r=()=>new i(...yp(n.deps));else return Ds(i)||Ip(i)}return r}function vs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZM(n){return!!n.deps}function ex(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tx(n){return typeof n=="function"||typeof n=="object"&&n instanceof B}function wp(n,e){for(let t of n)Array.isArray(t)?wp(t,e):t&&ET(t)?wp(t.\u0275providers,e):e(t)}function rn(n,e){n instanceof da&&n.assertNotDestroyed();let t,r=wr(n),i=Bt(void 0);try{return e()}finally{wr(r),Bt(i)}}function BT(){return TT()!==void 0||EM()!=null}function nx(n){if(!BT())throw new H(-203,!1)}function rx(n){return typeof n=="function"}var qn=0,de=1,Q=2,st=3,tn=4,sn=5,zu=6,ha=7,nn=8,Rs=9,gn=10,Ue=11,fa=12,qE=13,ks=14,mn=15,hl=16,_s=17,Ns=18,fl=19,$T=20,Er=21,tp=22,fi=23,br=25,HT=1;var pi=7,Gu=8,Wu=9,$t=10,fg=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(fg||{});function di(n){return Array.isArray(n)&&typeof n[HT]=="object"}function zn(n){return Array.isArray(n)&&n[HT]===!0}function qT(n){return(n.flags&4)!==0}function pl(n){return n.componentOffset>-1}function pg(n){return(n.flags&1)===1}function Dr(n){return!!n.template}function ix(n){return(n[Q]&512)!==0}var Ep=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function zT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ii(){return GT}function GT(n){return n.type.prototype.ngOnChanges&&(n.setInput=ox),sx}Ii.ngInherit=!0;function sx(){let n=KT(this),e=n?.current;if(e){let t=n.previous;if(t===Cs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ox(n,e,t,r,i){let s=this.declaredInputs[r],o=KT(n)||ax(n,{previous:Cs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Ep(l&&l.currentValue,t,u===Cs),zT(n,e,i,t)}var WT="__ngSimpleChanges__";function KT(n){return n[WT]||null}function ax(n,e){return n[WT]=e}var zE=null;var hn=function(n,e,t){zE?.(n,e,t)},cx="svg",ux="math",lx=!1;function dx(){return lx}function yn(n){for(;Array.isArray(n);)n=n[qn];return n}function QT(n,e){return yn(e[n])}function zt(n,e){return yn(e[n.index])}function YT(n,e){return n.data[e]}function Sr(n,e){let t=e[n];return di(t)?t:t[qn]}function gg(n){return(n[Q]&128)===128}function hx(n){return zn(n[st])}function Ku(n,e){return e==null?null:n[e]}function JT(n){n[_s]=0}function fx(n){n[Q]&1024||(n[Q]|=1024,gg(n)&&pa(n))}function px(n,e){for(;n>0;)e=e[ks],n--;return e}function mg(n){return!!(n[Q]&9216||n[fi]?.dirty)}function Tp(n){n[gn].changeDetectionScheduler?.notify(1),mg(n)?pa(n):n[Q]&64&&(dx()?(n[Q]|=1024,pa(n)):n[gn].changeDetectionScheduler?.notify())}function pa(n){n[gn].changeDetectionScheduler?.notify();let e=ga(n);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!gg(e)));)e=ga(e)}function XT(n,e){if((n[Q]&256)===256)throw new H(911,!1);n[Er]===null&&(n[Er]=[]),n[Er].push(e)}function gx(n,e){if(n[Er]===null)return;let t=n[Er].indexOf(e);t!==-1&&n[Er].splice(t,1)}function ga(n){let e=n[st];return zn(e)?e[st]:e}var se={lFrame:sb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function mx(){return se.lFrame.elementDepthCount}function yx(){se.lFrame.elementDepthCount++}function vx(){se.lFrame.elementDepthCount--}function ZT(){return se.bindingsEnabled}function _x(){return se.skipHydrationRootTNode!==null}function Ix(n){return se.skipHydrationRootTNode===n}function wx(){se.skipHydrationRootTNode=null}function De(){return se.lFrame.lView}function St(){return se.lFrame.tView}function ot(n){return se.lFrame.contextLView=n,n[nn]}function at(n){return se.lFrame.contextLView=null,n}function xt(){let n=eb();for(;n!==null&&n.type===64;)n=n.parent;return n}function eb(){return se.lFrame.currentTNode}function Ex(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function wa(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function tb(){return se.lFrame.isParent}function Tx(){se.lFrame.isParent=!1}function bx(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Dx(){return se.lFrame.bindingIndex}function Cx(n){return se.lFrame.bindingIndex=n}function gl(){return se.lFrame.bindingIndex++}function yg(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ax(){return se.lFrame.inI18n}function Sx(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,bp(e)}function Rx(){return se.lFrame.currentDirectiveIndex}function bp(n){se.lFrame.currentDirectiveIndex=n}function Nx(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function nb(n){se.lFrame.currentQueryIndex=n}function Px(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function rb(n,e,t){if(t&ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ie.Host);)if(i=Px(s),i===null||(s=s[ks],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=se.lFrame=ib();return r.currentTNode=e,r.lView=n,!0}function vg(n){let e=ib(),t=n[de];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ib(){let n=se.lFrame,e=n===null?null:n.child;return e===null?sb(n):e}function sb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ob(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ab=ob;function _g(){let n=ob();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mx(n){return(se.lFrame.contextLView=px(n,se.lFrame.contextLView))[nn]}function Rr(){return se.lFrame.selectedIndex}function gi(n){se.lFrame.selectedIndex=n}function Ig(){let n=se.lFrame;return YT(n.tView,n.selectedIndex)}function xx(){return se.lFrame.currentNamespace}var cb=!0;function wg(){return cb}function Eg(n){cb=n}function Ox(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=GT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Tg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Lu(n,e,t){ub(n,e,3,t)}function Vu(n,e,t,r){(n[Q]&3)===t&&ub(n,e,t,r)}function np(n,e){let t=n[Q];(t&3)===e&&(t&=16383,t+=1,n[Q]=t)}function ub(n,e,t,r){let i=r!==void 0?n[_s]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[_s]+=65536),(a<s||s==-1)&&(kx(n,t,e,u),n[_s]=(n[_s]&4294901760)+u+2),u++}function GE(n,e){hn(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),hn(5,n,e)}}function kx(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Q]>>14<n[_s]>>16&&(n[Q]&3)===e&&(n[Q]+=16384,GE(a,s)):GE(a,s)}var bs=-1,mi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Fx(n){return n instanceof mi}function Lx(n){return(n.flags&8)!==0}function Vx(n){return(n.flags&16)!==0}function lb(n){return n!==bs}function Qu(n){return n&32767}function Ux(n){return n>>16}function Yu(n,e){let t=Ux(n),r=e;for(;t>0;)r=r[ks],t--;return r}var Dp=!0;function WE(n){let e=Dp;return Dp=n,e}var jx=256,db=jx-1,hb=5,Bx=0,fn={};function $x(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ca)&&(r=t[ca]),r==null&&(r=t[ca]=Bx++);let i=r&db,s=1<<i;e.data[n+(i>>hb)]|=s}function Ju(n,e){let t=fb(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,rp(r.data,n),rp(e,null),rp(r.blueprint,null));let i=bg(n,e),s=n.injectorIndex;if(lb(i)){let o=Qu(i),a=Yu(i,e),u=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function rp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function bg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vb(i),r===null)return bs;if(t++,i=i[ks],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return bs}function Cp(n,e,t){$x(n,e,t)}function pb(n,e,t){if(t&ie.Optional||n!==void 0)return n;ag(e,"NodeInjector")}function gb(n,e,t,r){if(t&ie.Optional&&r===void 0&&(r=null),!(t&(ie.Self|ie.Host))){let i=n[Rs],s=Bt(void 0);try{return i?i.get(e,r,t&ie.Optional):bT(e,r,t&ie.Optional)}finally{Bt(s)}}return pb(r,e,t)}function mb(n,e,t,r=ie.Default,i){if(n!==null){if(e[Q]&2048&&!(r&ie.Self)){let o=Wx(n,e,t,r,fn);if(o!==fn)return o}let s=yb(n,e,t,r,fn);if(s!==fn)return s}return gb(e,t,r,i)}function yb(n,e,t,r,i){let s=zx(t);if(typeof s=="function"){if(!rb(e,n,r))return r&ie.Host?pb(i,t,r):gb(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))ag(t);else return o}finally{ab()}}else if(typeof s=="number"){let o=null,a=fb(n,e),u=bs,l=r&ie.Host?e[mn][sn]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?bg(n,e):e[a+8],u===bs||!QE(r,!1)?a=-1:(o=e[de],a=Qu(u),e=Yu(u,e)));a!==-1;){let h=e[de];if(KE(s,a,h.data)){let p=Hx(a,e,t,o,r,l);if(p!==fn)return p}u=e[a+8],u!==bs&&QE(r,e[de].data[a+8]===l)&&KE(s,a,e)?(o=h,a=Qu(u),e=Yu(u,e)):a=-1}}return i}function Hx(n,e,t,r,i,s){let o=e[de],a=o.data[n+8],u=r==null?pl(a)&&Dp:r!=o&&(a.type&3)!==0,l=i&ie.Host&&s===a,h=qx(a,o,t,u,l);return h!==null?Ps(e,o,h,a):fn}function qx(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let A=o[_];if(_<u&&t===A||_>=u&&A.type===t)return _}if(i){let _=o[u];if(_&&Dr(_)&&_.type===t)return u}return null}function Ps(n,e,t,r){let i=n[t],s=e.data;if(Fx(i)){let o=i;o.resolving&&yM(mM(s[t]));let a=WE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Bt(o.injectImpl):null,h=rb(n,r,ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ox(t,s[t],e)}finally{l!==null&&Bt(l),WE(a),o.resolving=!1,ab()}}return i}function zx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ca)?n[ca]:void 0;return typeof e=="number"?e>=0?e&db:Gx:e}function KE(n,e,t){let r=1<<n;return!!(t[e+(n>>hb)]&r)}function QE(n,e){return!(n&ie.Self)&&!(n&ie.Host&&e)}var hi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mb(this._tNode,this._lView,e,ul(r),t)}};function Gx(){return new hi(xt(),De())}function Fs(n){return _a(()=>{let e=n.prototype.constructor,t=e[Bu]||Ap(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Bu]||Ap(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ap(n){return vT(n)?()=>{let e=Ap(mt(n));return e&&e()}:Ds(n)}function Wx(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=yb(s,o,t,r|ie.Self,fn);if(a!==fn)return a;let u=s.parent;if(!u){let l=o[$T];if(l){let h=l.get(t,fn,r);if(h!==fn)return h}u=vb(o),o=o[ks]}s=u}return i}function vb(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function YE(n,e=null,t=null,r){let i=_b(n,e,t,r);return i.resolveInjectorInitializers(),i}function _b(n,e=null,t=null,r,i=new Set){let s=[t||Ct,zM(n)];return r=r||(typeof n=="object"?void 0:vt(n)),new da(s,e||hg(),r||null,i)}var _t=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ua}static{this.NULL=new qu}static create(t,r){if(Array.isArray(t))return YE({name:""},r,t,"");{let i=t.name??"";return YE({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=U({token:n,providedIn:"any",factory:()=>$(AT)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var Kx="ngOriginalError";function ip(n){return n[Kx]}var vn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ip(e);for(;t&&ip(t);)t=ip(t);return t||null}},Ib=new B("",{providedIn:"root",factory:()=>M(vn).handleError.bind(void 0)}),Dg=(()=>{class n{static{this.__NG_ELEMENT_ID__=Qx}static{this.__NG_ENV_ID__=t=>t}}return n})(),Sp=class extends Dg{constructor(e){super(),this._lView=e}onDestroy(e){return XT(this._lView,e),()=>gx(this._lView,e)}};function Qx(){return new Sp(De())}function Yx(){return ml(xt(),De())}function ml(n,e){return new Nr(zt(n,e))}var Nr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Yx}}return n})();var Rp=class extends gt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,BT()&&(this.destroyRef=M(Dg,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=sp(s),i&&(i=sp(i)),o&&(o=sp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ke&&e.add(a),a}};function sp(n){return e=>{setTimeout(n,void 0,e)}}var yt=Rp;function wb(n){return(n.flags&128)===128}var Eb=new Map,Jx=0;function Xx(){return Jx++}function Zx(n){Eb.set(n[fl],n)}function eO(n){Eb.delete(n[fl])}var JE="__ngContext__";function yi(n,e){di(e)?(n[JE]=e[fl],Zx(e)):n[JE]=e}function Tb(n){return Db(n[fa])}function bb(n){return Db(n[tn])}function Db(n){for(;n!==null&&!zn(n);)n=n[tn];return n}var Np;function Cb(n){Np=n}function tO(){if(Np!==void 0)return Np;if(typeof document<"u")return document;throw new H(210,!1)}var Cg=new B("",{providedIn:"root",factory:()=>nO}),nO="ng",Ag=new B(""),Gt=new B("",{providedIn:"platform",factory:()=>"unknown"});var Sg=new B("",{providedIn:"root",factory:()=>tO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rO="h",iO="b";var sO=()=>null;function Rg(n,e,t=!1){return sO(n,e,t)}var Ab=!1,oO=new B("",{providedIn:"root",factory:()=>Ab});var Pp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oM})`}};function yl(n){return n instanceof Pp?n.changingThisBreaksApplicationSecurity:n}function Sb(n){return n instanceof Function?n():n}function aO(n){return(n??M(_t)).get(Gt)==="browser"}var _n=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_n||{}),cO;function Ng(n,e){return cO(n,e)}function Is(n,e,t,r,i){if(r!=null){let s,o=!1;zn(r)?s=r:di(r)&&(o=!0,r=r[qn]);let a=yn(r);n===0&&t!==null?i==null?xb(e,t,a):Xu(e,t,a,i||null,!0):n===1&&t!==null?Xu(e,t,a,i||null,!0):n===2?DO(e,a,o):n===3&&e.destroyNode(a),s!=null&&AO(e,n,s,t,i)}}function uO(n,e){return n.createText(e)}function lO(n,e,t){n.setValue(e,t)}function Rb(n,e,t){return n.createElement(e,t)}function dO(n,e){Nb(n,e),e[qn]=null,e[sn]=null}function hO(n,e,t,r,i,s){r[qn]=i,r[sn]=e,vl(n,r,t,1,i,s)}function Nb(n,e){e[gn].changeDetectionScheduler?.notify(1),vl(n,e,e[Ue],2,null,null)}function fO(n){let e=n[fa];if(!e)return op(n[de],n);for(;e;){let t=null;if(di(e))t=e[fa];else{let r=e[$t];r&&(t=r)}if(!t){for(;e&&!e[tn]&&e!==n;)di(e)&&op(e[de],e),e=e[st];e===null&&(e=n),di(e)&&op(e[de],e),t=e&&e[tn]}e=t}}function pO(n,e,t,r){let i=$t+r,s=t.length;r>0&&(t[i-1][tn]=e),r<s-$t?(e[tn]=t[i],CT(t,$t+r,e)):(t.push(e),e[tn]=null),e[st]=t;let o=e[hl];o!==null&&t!==o&&gO(o,e);let a=e[Ns];a!==null&&a.insertView(n),Tp(e),e[Q]|=128}function gO(n,e){let t=n[Wu],i=e[st][st][mn];e[mn]!==i&&(n[Q]|=fg.HasTransplantedViews),t===null?n[Wu]=[e]:t.push(e)}function Pb(n,e){let t=n[Wu],r=t.indexOf(e);t.splice(r,1)}function Mp(n,e){if(n.length<=$t)return;let t=$t+e,r=n[t];if(r){let i=r[hl];i!==null&&i!==n&&Pb(i,r),e>0&&(n[t-1][tn]=r[tn]);let s=Hu(n,$t+e);dO(r[de],r);let o=s[Ns];o!==null&&o.detachView(s[de]),r[st]=null,r[tn]=null,r[Q]&=-129}return r}function Mb(n,e){if(!(e[Q]&256)){let t=e[Ue];t.destroyNode&&vl(n,e,t,3,null,null),fO(e)}}function op(n,e){if(e[Q]&256)return;let t=ye(null);try{e[Q]&=-129,e[Q]|=256,e[fi]&&uE(e[fi]),yO(n,e),mO(n,e),e[de].type===1&&e[Ue].destroy();let r=e[hl];if(r!==null&&zn(e[st])){r!==e[st]&&Pb(r,e);let i=e[Ns];i!==null&&i.detachView(n)}eO(e)}finally{ye(t)}}function mO(n,e){let t=n.cleanup,r=e[ha];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ha]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function yO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];hn(4,a,u);try{u.call(a)}finally{hn(5,a,u)}}else{hn(4,i,s);try{s.call(i)}finally{hn(5,i,s)}}}}}function vO(n,e,t){return _O(n,e.parent,t)}function _O(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===pn.None||s===pn.Emulated)return null}return zt(r,t)}}function Xu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function xb(n,e,t){n.appendChild(e,t)}function XE(n,e,t,r,i){r!==null?Xu(n,e,t,r,i):xb(n,e,t)}function IO(n,e,t,r){n.removeChild(e,t,r)}function Pg(n,e){return n.parentNode(e)}function wO(n,e){return n.nextSibling(e)}function EO(n,e,t){return bO(n,e,t)}function TO(n,e,t){return n.type&40?zt(n,t):null}var bO=TO,ZE;function Mg(n,e,t,r){let i=vO(n,r,e),s=e[Ue],o=r.parent||e[sn],a=EO(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)XE(s,i,t[u],a,!1);else XE(s,i,t,a,!1);ZE!==void 0&&ZE(s,r,e,t,i)}function Uu(n,e){if(e!==null){let t=e.type;if(t&3)return zt(e,n);if(t&4)return xp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Uu(n,r);{let i=n[e.index];return zn(i)?xp(-1,i):yn(i)}}else{if(t&32)return Ng(e,n)()||yn(n[e.index]);{let r=Ob(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ga(n[mn]);return Uu(i,r)}else return Uu(n,e.next)}}}return null}function Ob(n,e){if(e!==null){let r=n[mn][sn],i=e.projection;return r.projection[i]}return null}function xp(n,e){let t=$t+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Uu(r,i)}return e[pi]}function DO(n,e,t){let r=Pg(n,e);r&&IO(n,r,e,t)}function xg(n,e,t,r,i,s,o){for(;t!=null;){let a=r[t.index],u=t.type;if(o&&e===0&&(a&&yi(yn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)xg(n,e,t.child,r,i,s,!1),Is(e,n,i,a,s);else if(u&32){let l=Ng(t,r),h;for(;h=l();)Is(e,n,i,h,s);Is(e,n,i,a,s)}else u&16?CO(n,e,r,t,i,s):Is(e,n,i,a,s);t=o?t.projectionNext:t.next}}function vl(n,e,t,r,i,s){xg(t,r,n.firstChild,e,i,s,!1)}function CO(n,e,t,r,i,s){let o=t[mn],u=o[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Is(e,n,i,h,s)}else{let l=u,h=o[st];wb(r)&&(l.flags|=128),xg(n,e,l,h,i,s,!0)}}function AO(n,e,t,r,i){let s=t[pi],o=yn(t);s!==o&&Is(e,n,r,s,i);for(let a=$t;a<t.length;a++){let u=t[a];vl(u[de],u,n,e,r,s)}}function SO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:_n.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_n.Important),n.setStyle(t,r,i,s))}}function RO(n,e,t){n.setAttribute(e,"style",t)}function kb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Fb(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&vp(n,e,r),i!==null&&kb(n,e,i),s!==null&&RO(n,e,s)}var on={};function je(n=1){Lb(St(),De(),Rr()+n,!1)}function Lb(n,e,t,r){if(!r)if((e[Q]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Lu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Vu(e,s,0,t)}gi(t)}function _e(n,e=ie.Default){let t=De();if(t===null)return $(n,e);let r=xt();return mb(r,t,mt(n),e)}function Vb(){let n="invalid";throw new Error(n)}function Ub(n,e,t,r,i,s){let o=ye(null);try{let a=null;i&Ht.SignalBased&&(a=e[r][Nf]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ht.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):zT(e,a,r,s)}finally{ye(o)}}function NO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gi(~i);else{let s=i,o=t[++r],a=t[++r];Sx(o,s);let u=e[s];a(2,u)}}}finally{gi(-1)}}function _l(n,e,t,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[qn]=i,p[Q]=r|4|128|8|64,(l!==null||n&&n[Q]&2048)&&(p[Q]|=2048),JT(p),p[st]=p[ks]=n,p[nn]=t,p[gn]=o||n&&n[gn],p[Ue]=a||n&&n[Ue],p[Rs]=u||n&&n[Rs]||null,p[sn]=s,p[fl]=Xx(),p[zu]=h,p[$T]=l,p[mn]=e.type==2?n[mn]:p,p}function Il(n,e,t,r,i){let s=n.data[e];if(s===null)s=PO(n,e,t,r,i),Ax()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Ex();s.injectorIndex=o===null?-1:o.injectorIndex}return wa(s,!0),s}function PO(n,e,t,r,i){let s=eb(),o=tb(),a=o?s:s&&s.parent,u=n.data[e]=FO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function jb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Bb(n,e,t,r,i){let s=Rr(),o=r&2;try{gi(-1),o&&e.length>br&&Lb(n,e,br,!1),hn(o?2:0,i),t(r,i)}finally{gi(s),hn(o?3:1,i)}}function $b(n,e,t){if(qT(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{ye(r)}}}function Hb(n,e,t){ZT()&&($O(n,e,t,zt(t,e)),(t.flags&64)===64&&Qb(n,e,t))}function qb(n,e,t=zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function zb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Og(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Og(n,e,t,r,i,s,o,a,u,l,h){let p=br+r,y=p+i,_=MO(p,y),A=typeof l=="function"?l():l;return _[de]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function MO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:on);return t}function xO(n,e,t,r){let s=r.get(oO,Ab)||t===pn.ShadowDom,o=n.selectRootElement(e,s);return OO(o),o}function OO(n){kO(n)}var kO=()=>null;function FO(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return _x()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function eT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Ht.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?tT(r,t,l,a,u):tT(r,t,l,a)}return r}function tT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function LO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=t?t.get(p):null,_=y?y.inputs:null,A=y?y.outputs:null;u=eT(0,p.inputs,h,u,_),l=eT(1,p.outputs,h,l,A);let R=u!==null&&o!==null&&!lg(e)?ZO(u,h,o):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function VO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Gb(n,e,t,r,i,s,o,a){let u=zt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(kg(n,t,h,r,i),pl(e)&&UO(t,e.index)):e.type&3?(r=VO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function UO(n,e){let t=Sr(e,n);t[Q]&16||(t[Q]|=64)}function Wb(n,e,t,r){if(ZT()){let i=r===null?null:{"":-1},s=qO(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Kb(n,e,t,o,i,a),i&&zO(t,r,i)}t.mergedAttrs=la(t.mergedAttrs,t.attrs)}function Kb(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Cp(Ju(t,e),n,r[l].type);WO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=jb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=la(t.mergedAttrs,h.hostAttrs),KO(n,t,e,u,h),GO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}LO(n,t,s)}function jO(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;BO(o)!=a&&o.push(a),o.push(t,r,s)}}function BO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $O(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;pl(t)&&QO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ju(t,e),yi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let u=n.data[a],l=Ps(e,n,a,t);if(yi(l,e),o!==null&&XO(e,a-i,l,u,t,o),Dr(u)){let h=Sr(t.index,e);h[nn]=Ps(e,n,a,t)}}}function Qb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Rx();try{gi(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];bp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&HO(u,l)}}finally{gi(-1),bp(o)}}function HO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function qO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(FM(e,o.selectors,!1))if(r||(r=[]),Dr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Op(n,e,u)}else r.unshift(o),Op(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Op(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function zO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function GO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Dr(e)&&(t[""]=n)}}function WO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function KO(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ds(i.type,!0)),o=new mi(s,Dr(i),_e);n.blueprint[r]=o,t[r]=o,jO(n,e,r,jb(n,t,i.hostVars,on),i)}function QO(n,e,t){let r=zt(e,n),i=zb(t),s=n[gn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=wl(n,_l(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function YO(n,e,t,r,i,s){let o=zt(n,e);JO(e[Ue],o,s,n.value,t,r,i)}function JO(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Es(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function XO(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Ub(r,t,u,l,h,p)}}function ZO(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function Yb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Jb(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];nb(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function wl(n,e){return n[fa]?n[qE][tn]=e:n[fa]=e,n[qE]=e,e}function kp(n,e,t){nb(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function ek(n){return n[ha]||(n[ha]=[])}function tk(n){return n.cleanup||(n.cleanup=[])}function Xb(n,e){let t=n[Rs],r=t?t.get(vn,null):null;r&&r.handleError(e)}function kg(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],u=t[s++],l=e[o],h=n.data[o];Ub(h,l,r,a,u,i)}}function Zb(n,e,t){let r=QT(e,n);lO(n[Ue],r,t)}function nk(n,e){let t=Sr(e,n),r=t[de];rk(r,t);let i=t[qn];i!==null&&t[zu]===null&&(t[zu]=Rg(i,t[Rs])),Fg(r,t,t[nn])}function rk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Fg(n,e,t){vg(e);try{let r=n.viewQuery;r!==null&&kp(1,r,t);let i=n.template;i!==null&&Bb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ns]?.finishViewCreation(n),n.staticContentQueries&&Jb(n,e),n.staticViewQueries&&kp(2,n.viewQuery,t);let s=n.components;s!==null&&ik(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Q]&=-5,_g()}}function ik(n,e){for(let t=0;t<e.length;t++)nk(n,e[t])}function sk(n,e,t,r){let i=ye(null);try{let s=e.tView,a=n[Q]&4096?4096:16,u=_l(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[hl]=l;let h=n[Ns];return h!==null&&(u[Ns]=h.createEmbeddedView(s)),Fg(s,u,t),u}finally{ye(i)}}function nT(n,e){return!e||e.firstChild===null||wb(n)}function ok(n,e,t,r=!0){let i=e[de];if(pO(i,e,n,t),r){let o=xp(t,n),a=e[Ue],u=Pg(a,n[pi]);u!==null&&hO(i,n[sn],a,e,u,o)}let s=e[zu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zu(n,e,t,r,i=!1){for(;t!==null;){let s=e[t.index];s!==null&&r.push(yn(s)),zn(s)&&ak(s,r);let o=t.type;if(o&8)Zu(n,e,t.child,r);else if(o&32){let a=Ng(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Ob(e,t);if(Array.isArray(a))r.push(...a);else{let u=ga(e[mn]);Zu(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ak(n,e){for(let t=$t;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Zu(r[de],r,i,e)}n[pi]!==n[qn]&&e.push(n[pi])}var eD=[];function ck(n){return n[fi]??uk(n)}function uk(n){let e=eD.pop()??Object.create(dk);return e.lView=n,e}function lk(n){n.lView[fi]!==n&&(n.lView=null,eD.push(n))}var dk=we(L({},oE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{pa(n.lView)},consumerOnSignalRead(){this.lView[fi]=this}}),tD=100;function nD(n,e=!0,t=0){let r=n[gn],i=r.rendererFactory,s=!1;s||i.begin?.();try{hk(n,t)}catch(o){throw e&&Xb(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function hk(n,e){Fp(n,e);let t=0;for(;mg(n);){if(t===tD)throw new H(103,!1);t++,Fp(n,1)}}function fk(n,e,t,r){let i=e[Q];if((i&256)===256)return;let s=!1;!s&&e[gn].inlineEffectRunner?.flush(),vg(e);let o=null,a=null;!s&&pk(n)&&(a=ck(e),o=aE(a));try{JT(e),Cx(n.bindingStartIndex),t!==null&&Bb(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&Lu(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Vu(e,p,0,null),np(e,0)}if(gk(e),rD(e,0),n.contentQueries!==null&&Jb(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&Lu(e,p)}else{let p=n.contentHooks;p!==null&&Vu(e,p,1),np(e,1)}NO(n,e);let l=n.components;l!==null&&sD(e,l,0);let h=n.viewQuery;if(h!==null&&kp(2,h,r),!s)if(u){let p=n.viewCheckHooks;p!==null&&Lu(e,p)}else{let p=n.viewHooks;p!==null&&Vu(e,p,2),np(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[tp]){for(let p of e[tp])p();e[tp]=null}s||(e[Q]&=-73)}catch(u){throw pa(e),u}finally{a!==null&&(cE(a,o),lk(a)),_g()}}function pk(n){return n.type!==2}function rD(n,e){for(let t=Tb(n);t!==null;t=bb(t))for(let r=$t;r<t.length;r++){let i=t[r];iD(i,e)}}function gk(n){for(let e=Tb(n);e!==null;e=bb(e)){if(!(e[Q]&fg.HasTransplantedViews))continue;let t=e[Wu];for(let r=0;r<t.length;r++){let i=t[r],s=i[st];fx(i)}}}function mk(n,e,t){let r=Sr(e,n);iD(r,t)}function iD(n,e){gg(n)&&Fp(n,e)}function Fp(n,e){let r=n[de],i=n[Q],s=n[fi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Pf(s)),s&&(s.dirty=!1),n[Q]&=-9217,o)fk(r,n,r.template,n[nn]);else if(i&8192){rD(n,1);let a=r.components;a!==null&&sD(n,a,1)}}function sD(n,e,t){for(let r=0;r<e.length;r++)mk(n,e[r],t)}function Lg(n){for(n[gn].changeDetectionScheduler?.notify();n;){n[Q]|=64;let e=ga(n);if(ix(n)&&!e)return n;n=e}return null}var vi=class{get rootNodes(){let e=this._lView,t=e[de];return Zu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[st];if(zn(e)){let t=e[Gu],r=t?t.indexOf(this):-1;r>-1&&(Mp(e,r),Hu(t,r))}this._attachedToViewContainer=!1}Mb(this._lView[de],this._lView)}onDestroy(e){XT(this._lView,e)}markForCheck(){Lg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){Tp(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,nD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Nb(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,Tp(this._lView)}},El=(()=>{class n{static{this.__NG_ELEMENT_ID__=_k}}return n})(),yk=El,vk=class extends yk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=sk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vi(i)}};function _k(){return Ik(xt(),De())}function Ik(n,e){return n.type&4?new vk(e,n,ml(n,e)):null}var C8=new RegExp(`^(\\d+)*(${iO}|${rO})*(.*)`);var wk=()=>null;function rT(n,e){return wk(n,e)}var el=class{},Lp=class{},tl=class{};function Ek(n){let e=Error(`No component factory found for ${vt(n)}.`);return e[Tk]=n,e}var Tk="ngComponent";var Vp=class{resolveComponentFactory(e){throw Ek(e)}},Tl=(()=>{class n{static{this.NULL=new Vp}}return n})(),ma=class{},wi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>bk()}}return n})();function bk(){let n=De(),e=xt(),t=Sr(e.index,n);return(di(t)?t:n)[Ue]}var Dk=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>null})}}return n})(),ap={};var iT=new Set;function bl(n){iT.has(n)||(iT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function sT(...n){}function Ck(){let n=typeof aa.requestAnimationFrame=="function",e=aa[n?"requestAnimationFrame":"setTimeout"],t=aa[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ge=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Ck().nativeRequestAnimationFrame,Rk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ak,sT,sT);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ak={};function Vg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sk(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(aa,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Up(n),n.isCheckStableRunning=!0,Vg(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Up(n))}function Rk(n){let e=()=>{Sk(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(Nk(a))return t.invokeTask(i,s,o,a);try{return oT(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),aT(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return oT(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),aT(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Up(n),Vg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Up(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function oT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aT(n){n._nesting--,Vg(n)}function Nk(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var ws=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ws||{}),Pk={destroy(){}};function Dl(n,e){!e&&nx(Dl);let t=e?.injector??M(_t);if(!aO(t))return Pk;bl("NgAfterNextRender");let r=t.get(Ug),i=r.handler??=new Bp,s=e?.phase??ws.MixedReadWrite,o=()=>{i.unregister(u),a()},a=t.get(Dg).onDestroy(o),u=rn(t,()=>new jp(s,()=>{o(),n()}));return i.register(u),{destroy:o}}var jp=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=M(ge),this.errorHandler=M(vn,{optional:!0}),M(el,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Bp=class{constructor(){this.executingCallbacks=!1,this.buckets={[ws.EarlyRead]:new Set,[ws.Write]:new Set,[ws.MixedReadWrite]:new Set,[ws.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Ug=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})();function $p(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=pp(i,a);else if(s==2){let u=a,l=e[++o];r=pp(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var nl=class extends Tl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Tr(e);return new Ms(t,this.ngModule)}};function cT(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function Mk(n){let e=n.toLowerCase();return e==="svg"?cx:e==="math"?ux:null}var Hp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ul(r);let i=this.injector.get(e,ap,r);return i!==ap||t===ap?i:this.parentInjector.get(e,t,r)}},Ms=class extends tl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=cT(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return cT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof it?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Hp(e,o):e,u=a.get(ma,null);if(u===null)throw new H(407,!1);let l=a.get(Dk,null),h=a.get(Ug,null),p=a.get(el,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?xO(_,r,this.componentDef.encapsulation,a):Rb(_,A,Mk(A)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let O=null;R!==null&&(O=Rg(R,a,!0));let z=Og(0,null,null,1,0,null,null,null,null,null,null),F=_l(null,z,null,N,null,null,y,_,a,null,O);vg(F);let ee,Ee;try{let W=this.componentDef,T,v=null;W.findHostDirectiveDefs?(T=[],v=new Map,W.findHostDirectiveDefs(W,T,v),T.push(W)):T=[W];let I=xk(F,R),E=Ok(I,R,W,T,F,y,_);Ee=YT(z,br),R&&Lk(_,W,R,r),t!==void 0&&Vk(Ee,this.ngContentSelectors,t),ee=Fk(E,W,T,v,F,[Uk]),Fg(z,F,null)}finally{_g()}return new qp(this.componentType,ee,ml(Ee,F),F,Ee)}finally{ye(s)}}},qp=class extends Lp{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;kg(s[de],s,i,e,t),this.previousInputValues.set(e,t);let o=Sr(this._tNode.index,s);Lg(o)}}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xk(n,e){let t=n[de],r=br;return n[r]=e,Il(t,r,2,"#host",null)}function Ok(n,e,t,r,i,s,o){let a=i[de];kk(r,n,e,o);let u=null;e!==null&&(u=Rg(e,i[Rs]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=_l(i,zb(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&Op(a,n,r.length-1),wl(i,p),i[n.index]=p}function kk(n,e,t,r){for(let i of n)e.mergedAttrs=la(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&($p(e,e.mergedAttrs,!0),t!==null&&Fb(r,t,e))}function Fk(n,e,t,r,i,s){let o=xt(),a=i[de],u=zt(o,i);Kb(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,y=Ps(i,a,p,o);yi(y,i)}Qb(a,i,o),u&&yi(u,i);let l=Ps(i,a,o.directiveStart+o.componentOffset,o);if(n[nn]=i[nn]=l,s!==null)for(let h of s)h(l,e);return $b(a,o,i),l}function Lk(n,e,t,r){if(r)vp(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=BM(e.selectors[0]);i&&vp(n,t,i),s&&s.length>0&&kb(n,t,s.join(" "))}}function Vk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Uk(){let n=xt();Tg(De()[de],n)}var Ls=(()=>{class n{static{this.__NG_ELEMENT_ID__=jk}}return n})();function jk(){let n=xt();return $k(n,De())}var Bk=Ls,oD=class extends Bk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ml(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=bg(this._hostTNode,this._hostLView);if(lb(e)){let t=Yu(e,this._hostLView),r=Qu(e),i=t[de].data[r+8];return new hi(i,t)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=uT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$t}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=rT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,nT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!rx(e),a;if(o)a=t;else{let A=t||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Ms(Tr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(it,null);R&&(s=R)}let h=Tr(u.componentType??{}),p=rT(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,s);return this.insertImpl(_.hostView,a,nT(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[st],l=new oD(u,u[sn],u[st]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ok(o,i,s,r),e.attachToViewContainerRef(),CT(cp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=uT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Mp(this._lContainer,t);r&&(Hu(cp(this._lContainer),t),Mb(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Mp(this._lContainer,t);return r&&Hu(cp(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uT(n){return n[Gu]}function cp(n){return n[Gu]||(n[Gu]=[])}function $k(n,e){let t,r=e[n.index];return zn(r)?t=r:(t=Yb(r,e,null,n),e[n.index]=t,wl(e,t)),qk(t,e,n,r),new oD(t,n,e)}function Hk(n,e){let t=n[Ue],r=t.createComment(""),i=zt(e,n),s=Pg(t,i);return Xu(t,s,r,wO(t,i),!1),r}var qk=Wk,zk=()=>!1;function Gk(n,e,t){return zk(n,e,t)}function Wk(n,e,t,r){if(n[pi])return;let i;t.type&8?i=yn(r):i=Hk(e,t),n[pi]=i}function Kk(n){return typeof n=="function"&&n[Nf]!==void 0}function aD(n){return Kk(n)&&typeof n.set=="function"}function Qk(n){return Object.getPrototypeOf(n.prototype).constructor}function Ei(n){let e=Qk(n.type),t=!0,r=[n];for(;e;){let i;if(Dr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Ou(n.inputs),o.inputTransforms=Ou(n.inputTransforms),o.declaredInputs=Ou(n.declaredInputs),o.outputs=Ou(n.outputs);let a=i.hostBindings;a&&e1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Xk(n,u),l&&Zk(n,l),Yk(n,i),cM(n.outputs,i.outputs),Dr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ei&&(t=!1)}}e=Object.getPrototypeOf(e)}Jk(r)}function Yk(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Jk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=la(i.hostAttrs,t=la(t,i.hostAttrs))}}function Ou(n){return n===Cs?{}:n===Ct?[]:n}function Xk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Zk(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function e1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Cr=class{},ya=class{};var zp=class extends Cr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nl(this);let i=OT(e);this._bootstrapComponents=Sb(i.bootstrap),this._r3Injector=_b(e,t,[{provide:Cr,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver},...r],vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gp=class extends ya{constructor(e){super(),this.moduleType=e}create(e){return new zp(this.moduleType,e,[])}};var rl=class extends Cr{constructor(e){super(),this.componentFactoryResolver=new nl(this),this.instance=null;let t=new da([...e.providers,{provide:Cr,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver}],e.parent||hg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cl(n,e,t=null){return new rl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Vs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cD(n){return jg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function t1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function jg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function n1(n,e,t){return n[e]=t}function jn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function uD(n,e,t,r){let i=jn(n,e,t);return jn(n,e+1,r)||i}function r1(n,e,t,r,i){let s=uD(n,e,t,r);return jn(n,e+2,i)||s}function i1(n){return(n.flags&32)===32}function s1(n,e,t,r,i,s,o,a,u){let l=e.consts,h=Il(e,n,4,o||null,Ku(l,a));Wb(e,t,h,Ku(l,u)),Tg(e,h);let p=h.tView=Og(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Pr(n,e,t,r,i,s,o,a){let u=De(),l=St(),h=n+br,p=l.firstCreatePass?s1(h,l,u,e,t,r,i,s,o):l.data[h];wa(p,!1);let y=o1(l,u,p,n);wg()&&Mg(l,u,y,p),yi(y,u);let _=Yb(y,u,y,p);return u[h]=_,wl(u,_),Gk(_,p,u),pg(p)&&Hb(l,u,p),o!=null&&qb(u,p,a),Pr}var o1=a1;function a1(n,e,t,r){return Eg(!0),e[Ue].createComment("")}function Al(n,e,t,r){let i=De(),s=gl();if(jn(i,s,e)){let o=St(),a=Ig();YO(a,i,n,e,t,r)}return Al}function c1(n,e,t,r){return jn(n,gl(),t)?e+Es(t)+r:on}function u1(n,e,t,r,i,s,o,a){let u=Dx(),l=r1(n,u,t,i,o);return yg(3),l?e+Es(t)+r+Es(i)+s+Es(o)+a:on}function ku(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function l1(n){return(n&2)==2}function d1(n,e){return n&131071|e<<17}function Wp(n){return n|2}function xs(n){return(n&131068)>>2}function up(n,e){return n&-131069|e<<2}function h1(n){return(n&1)===1}function Kp(n){return n|1}function f1(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_i(o),u=xs(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ia(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=_i(n[a+1]);n[r+1]=ku(y,a),y!==0&&(n[y+1]=up(n[y+1],r)),n[a+1]=d1(n[a+1],r)}else n[r+1]=ku(a,0),a!==0&&(n[a+1]=up(n[a+1],r)),a=r;else n[r+1]=ku(u,0),a===0?a=r:n[u+1]=up(n[u+1],r),u=r;l&&(n[r+1]=Wp(n[r+1])),lT(n,h,r,!0),lT(n,h,r,!1),p1(e,h,n,r,s),o=ku(a,u),s?e.classBindings=o:e.styleBindings=o}function p1(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ia(s,e)>=0&&(t[r+1]=Kp(t[r+1]))}function lT(n,e,t,r){let i=n[t+1],s=e===null,o=r?_i(i):xs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],l=n[o+1];g1(u,e)&&(a=!0,n[o+1]=r?Kp(l):Wp(l)),o=r?_i(l):xs(l)}a&&(n[t+1]=r?Wp(i):Kp(i))}function g1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ia(n,e)>=0:!1}var en={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function m1(n){return n.substring(en.key,en.keyEnd)}function y1(n){return v1(n),lD(n,dD(n,0,en.textEnd))}function lD(n,e){let t=en.textEnd;return t===e?-1:(e=en.keyEnd=_1(n,en.key=e,t),dD(n,e,t))}function v1(n){en.key=0,en.keyEnd=0,en.value=0,en.valueEnd=0,en.textEnd=n.length}function dD(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function _1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ct(n,e,t){let r=De(),i=gl();if(jn(r,i,e)){let s=St(),o=Ig();Gb(s,o,r,n,e,r[Ue],t,!1)}return ct}function Qp(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";kg(n,t,s[o],o,r)}function Sl(n,e,t){return hD(n,e,t,!1),Sl}function Bg(n,e){return hD(n,e,null,!0),Bg}function Rl(n){w1(A1,I1,n,!0)}function I1(n,e){for(let t=y1(e);t>=0;t=lD(e,t))ug(n,m1(e),!0)}function hD(n,e,t,r){let i=De(),s=St(),o=yg(2);if(s.firstUpdatePass&&pD(s,n,o,r),e!==on&&jn(i,o,e)){let a=s.data[Rr()];gD(s,a,i,i[Ue],n,i[o+1]=R1(e,t),r,o)}}function w1(n,e,t,r){let i=St(),s=yg(2);i.firstUpdatePass&&pD(i,null,s,r);let o=De();if(t!==on&&jn(o,s,t)){let a=i.data[Rr()];if(mD(a,r)&&!fD(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=pp(u,t||"")),Qp(i,a,o,t,r)}else S1(i,a,o,o[Ue],o[s+1],o[s+1]=C1(n,e,t),r,s)}}function fD(n,e){return e>=n.expandoStartIndex}function pD(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Rr()],o=fD(n,t);mD(s,r)&&e===null&&!o&&(e=!1),e=E1(i,s,e,r),f1(i,s,e,t,o,r)}}function E1(n,e,t,r){let i=Nx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=lp(null,n,e,t,r),t=va(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=lp(i,n,e,t,r),s===null){let u=T1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=lp(null,n,e,u[1],r),u=va(u,e.attrs,r),b1(n,e,r,u))}else s=D1(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function T1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(xs(r)!==0)return n[_i(r)]}function b1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function D1(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=va(r,o,t)}return va(r,e.attrs,t)}function lp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=va(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function va(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ug(n,o,t?!0:e[++s]))}return n===void 0?null:n}function C1(n,e,t){if(t==null||t==="")return Ct;let r=[],i=yl(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function A1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ug(n,r,t)}function S1(n,e,t,r,i,s,o,a){i===on&&(i=Ct);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,_=l<s.length?s[l+1]:void 0,A=null,R;h===p?(u+=2,l+=2,y!==_&&(A=p,R=_)):p===null||h!==null&&h<p?(u+=2,A=h):(l+=2,A=p,R=_),A!==null&&gD(n,e,t,r,A,R,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function gD(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=h1(l)?dT(u,e,t,i,xs(l),o):void 0;if(!il(h)){il(s)||l1(l)&&(s=dT(u,null,t,i,a,o));let p=QT(Rr(),t);SO(r,o,p,i,s)}}function dT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===on&&(y=p?Ct:void 0);let _=p?Zf(y,r):h===r?y:void 0;if(l&&!il(_)&&(_=Zf(u,r)),il(_)&&(a=_,o))return a;let A=n[i+1];i=o?_i(A):xs(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Zf(u,r))}return a}function il(n){return n!==void 0}function R1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vt(yl(n)))),n}function mD(n,e){return(n.flags&(e?8:16))!==0}function N1(n,e,t,r,i,s){let o=e.consts,a=Ku(o,i),u=Il(e,n,2,r,a);return Wb(e,t,u,Ku(o,s)),u.attrs!==null&&$p(u,u.attrs,!1),u.mergedAttrs!==null&&$p(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ce(n,e,t,r){let i=De(),s=St(),o=br+n,a=i[Ue],u=s.firstCreatePass?N1(o,s,i,e,t,r):s.data[o],l=P1(s,i,u,a,e,n);i[o]=l;let h=pg(u);return wa(u,!0),Fb(a,l,u),!i1(u)&&wg()&&Mg(s,i,l,u),mx()===0&&yi(l,i),yx(),h&&(Hb(s,i,u),$b(s,u,i)),r!==null&&qb(i,u),Ce}function Ae(){let n=xt();tb()?Tx():(n=n.parent,wa(n,!1));let e=n;Ix(e)&&wx(),vx();let t=St();return t.firstCreatePass&&(Tg(t,n),qT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Lx(e)&&Qp(t,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Vx(e)&&Qp(t,e,De(),e.stylesWithoutHost,!1),Ae}function Ti(n,e,t,r){return Ce(n,e,t,r),Ae(),Ti}var P1=(n,e,t,r,i,s)=>(Eg(!0),Rb(r,i,xx()));function bi(){return De()}var sl="en-US";var M1=sl;function x1(n){typeof n=="string"&&(M1=n.toLowerCase().replace(/_/g,"-"))}function It(n,e,t,r){let i=De(),s=St(),o=xt();return yD(s,i,i[Ue],o,n,e,r),It}function O1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ha],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function yD(n,e,t,r,i,s,o){let a=pg(r),l=n.firstCreatePass&&tk(n),h=e[nn],p=ek(e),y=!0;if(r.type&3||o){let R=zt(r,e),N=o?o(R):R,O=p.length,z=o?ee=>o(yn(ee[r.index])):r.index,F=null;if(!o&&a&&(F=O1(n,e,i,r.index)),F!==null){let ee=F.__ngLastListenerFn__||F;ee.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,y=!1}else{s=fT(r,e,h,s,!1);let ee=t.listen(N,i,s);p.push(s,ee),l&&l.push(i,z,O,O+1)}}else s=fT(r,e,h,s,!1);let _=r.outputs,A;if(y&&_!==null&&(A=_[i])){let R=A.length;if(R)for(let N=0;N<R;N+=2){let O=A[N],z=A[N+1],Ee=e[O][z].subscribe(s),W=p.length;p.push(s,Ee),l&&l.push(i,r.index,W,-(W+1))}}}function hT(n,e,t,r){let i=ye(null);try{return hn(6,e,t),t(r)!==!1}catch(s){return Xb(n,s),!1}finally{hn(7,e,t),ye(i)}}function fT(n,e,t,r,i){return function s(o){if(o===Function)return r;let a=n.componentOffset>-1?Sr(n.index,e):e;Lg(a);let u=hT(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=hT(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function oe(n=1){return Mx(n)}function ze(n,e=""){let t=De(),r=St(),i=n+br,s=r.firstCreatePass?Il(r,i,1,e,null):r.data[i],o=k1(r,t,s,e,n);t[i]=o,wg()&&Mg(r,t,o,s),wa(s,!1)}var k1=(n,e,t,r,i)=>(Eg(!0),uO(e[Ue],r));function Nl(n){return Mr("",n,""),Nl}function Mr(n,e,t){let r=De(),i=c1(r,n,e,t);return i!==on&&Zb(r,Rr(),i),Mr}function $g(n,e,t,r,i,s,o){let a=De(),u=u1(a,n,e,t,r,i,s,o);return u!==on&&Zb(a,Rr(),u),$g}function Pl(n,e,t){aD(e)&&(e=e());let r=De(),i=gl();if(jn(r,i,e)){let s=St(),o=Ig();Gb(s,o,r,n,e,r[Ue],t,!1)}return Pl}function Hg(n,e){let t=aD(n);return t&&n.set(e),t}function Ml(n,e){let t=De(),r=St(),i=xt();return yD(r,t,t[Ue],i,n,e),Ml}function F1(n,e,t){let r=St();if(r.firstCreatePass){let i=Dr(n);Yp(t,r.data,r.blueprint,i,!0),Yp(e,r.data,r.blueprint,i,!1)}}function Yp(n,e,t,r,i){if(n=mt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Yp(n[s],e,t,r,i);else{let s=St(),o=De(),a=xt(),u=Ss(n)?n:mt(n.provide),l=jT(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Ss(n)||!n.multi){let _=new mi(l,i,_e),A=hp(u,e,i?h:h+y,p);A===-1?(Cp(Ju(a,o),s,u),dp(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[A]=_,o[A]=_)}else{let _=hp(u,e,h+y,p),A=hp(u,e,h,h+y),R=_>=0&&t[_],N=A>=0&&t[A];if(i&&!N||!i&&!R){Cp(Ju(a,o),s,u);let O=U1(i?V1:L1,t.length,i,r,l);!i&&N&&(t[A].providerFactory=O),dp(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=vD(t[i?A:_],l,!i&&r);dp(s,n,_>-1?_:A,O)}!i&&r&&N&&t[A].componentProviders++}}}function dp(n,e,t,r){let i=Ss(e),s=QM(e);if(i||s){let u=(s?mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function vD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function L1(n,e,t,r){return Jp(this.multi,[])}function V1(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ps(t,t[de],this.providerFactory.index,r);s=a.slice(0,o),Jp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Jp(i,s);return s}function Jp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function U1(n,e,t,r,i){let s=new mi(n,t,_e);return s.multi=[],s.index=e,s.componentProviders=0,vD(s,i,r&&!t),s}function xl(n,e=[]){return t=>{t.providersResolver=(r,i)=>F1(r,i?i(n):n,e)}}var j1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=LT(!1,t.type),i=r.length>0?Cl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n($(it))})}}return n})();function Us(n){bl("NgStandalone"),n.getStandaloneInjector=e=>e.get(j1).getOrCreateStandaloneInjector(n)}function _D(n,e,t,r,i){return $1(De(),bx(),n,e,t,r,i)}function B1(n,e){let t=n[e];return t===on?void 0:t}function $1(n,e,t,r,i,s,o){let a=e+t;return uD(n,a,i,s)?n1(n,a+2,o?r.call(o,i,s):r(i,s)):B1(n,a+2)}var Bn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ID=new Bn("17.3.12"),Ol=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var wD=new B("");function Di(n){return!!n&&typeof n.then=="function"}function ED(n){return!!n&&typeof n.subscribe=="function"}var kl=new B(""),TD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=M(kl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Di(s))t.push(s);else if(ED(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ea=new B("");function H1(){lE(()=>{throw new H(600,!1)})}function q1(n){return n.isBoundToModule}function z1(n,e,t){try{let r=t();return Di(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var js=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(Ib),this.afterRenderEffectManager=M(Ug),this.externalTestViews=new Set,this.beforeRender=new gt,this.afterTick=new gt,this.componentTypes=[],this.components=[],this.isStable=M(Vs).hasPendingTasks.pipe(ne(t=>!t)),this._injector=M(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof tl;if(!this._injector.get(TD).done){let y=!i&&xT(t),_=!1;throw new H(405,_)}let o;i?o=t:o=this._injector.get(Tl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=q1(o)?void 0:this._injector.get(Cr),u=r||o.selector,l=o.create(_t.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(wD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),fp(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new H(101,!1);let r=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ye(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===tD)throw new H(103,!1);if(t){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)G1(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Xp(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Xp(s))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;fp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ea,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>fp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function G1(n,e,t){!e&&!Xp(n)||W1(n,t,e)}function Xp(n){return mg(n)}function W1(n,e,t){let r;t?(r=0,n[Q]|=1024):n[Q]&64?r=0:r=1,nD(n,e,r)}var Zp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Fl=(()=>{class n{compileModuleSync(t){return new Gp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=OT(t),s=Sb(i.declarations).reduce((o,a)=>{let u=Tr(a);return u&&o.push(new Ms(u)),o},[]);return new Zp(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var K1=(()=>{class n{constructor(){this.zone=M(ge),this.applicationRef=M(js)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q1(n){return[{provide:ge,useFactory:n},{provide:As,multi:!0,useFactory:()=>{let e=M(K1,{optional:!0});return()=>e.initialize()}},{provide:As,multi:!0,useFactory:()=>{let e=M(Z1);return()=>{e.initialize()}}},{provide:Ib,useFactory:Y1}]}function Y1(){let n=M(ge),e=M(vn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function J1(n){let e=Q1(()=>new ge(X1(n)));return qt([[],e])}function X1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Z1=(()=>{class n{constructor(){this.subscription=new ke,this.initialized=!1,this.zone=M(ge),this.pendingTasks=M(Vs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eF(){return typeof $localize<"u"&&$localize.locale||sl}var qg=new B("",{providedIn:"root",factory:()=>M(qg,ie.Optional|ie.SkipSelf)||eF()});var bD=new B("");var ju=null;function tF(n=[],e){return _t.create({name:e,providers:[{provide:dl,useValue:"platform"},{provide:bD,useValue:new Set([()=>ju=null])},...n]})}function nF(n=[]){if(ju)return ju;let e=tF(n);return ju=e,H1(),rF(e),e}function rF(n){n.get(Ag,null)?.forEach(t=>t())}var Ci=(()=>{class n{static{this.__NG_ELEMENT_ID__=iF}}return n})();function iF(n){return sF(xt(),De(),(n&16)===16)}function sF(n,e,t){if(pl(n)&&!t){let r=Sr(n.index,e);return new vi(r,r)}else if(n.type&47){let r=e[mn];return new vi(r,e)}return null}var eg=class{constructor(){}supports(e){return cD(e)}create(e){return new tg(e)}},oF=(n,e)=>e,tg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<pT(r,i,s)?t:r,a=pT(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<s.length?s[y]:s[y]=0,A=_+y;h<=A&&A<l&&(s[y]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cD(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,t1(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new ng(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ol),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ol),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ng=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},rg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ol=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new rg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var ig=class{constructor(){}supports(e){return e instanceof Map||jg(e)}create(){return new sg}},sg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||jg(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new og(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},og=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function gT(){return new zg([new eg])}var zg=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:gT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gT()),deps:[[n,new ll,new Xe]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new H(901,!1)}}return n})();function mT(){return new Gg([new ig])}var Gg=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:mT})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mT()),deps:[[n,new ll,new Xe]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new H(901,!1)}}return n})();function DD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=nF(r),s=[J1(),...t||[]],a=new rl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ge);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(vn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>a.destroy(),y=i.get(bD);return y.add(p),a.onDestroy(()=>{h.unsubscribe(),y.delete(p)}),z1(l,u,()=>{let _=a.get(TD);return _.runInitializers(),_.donePromise.then(()=>{let A=a.get(qg,sl);x1(A||sl);let R=a.get(js);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Ll(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function CD(n){let e=Tr(n);if(!e)return null;let t=new Ms(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var PD=null;function Wn(){return PD}function MD(n){PD??=n}var Vl=class{};var ut=new B(""),Jg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(uF),providedIn:"platform"})}}return n})(),xD=new B(""),uF=(()=>{class n extends Jg{constructor(){super(),this._doc=M(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wn().getBaseHref(this._doc)}onPopState(t){let r=Wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Xg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function AD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Gn(n){return n&&n[0]!=="?"?"?"+n:n}var Ai=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(Zg),providedIn:"root"})}}return n})(),OD=new B(""),Zg=(()=>{class n extends Ai{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Gn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Gn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Gn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(Jg),$(OD,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kD=(()=>{class n extends Ai{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Xg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Gn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Gn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(Jg),$(OD,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),$s=(()=>{class n{constructor(t){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=hF(AD(SD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Gn(r))}normalize(t){return n.stripTrailingSlash(dF(this._basePath,SD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Gn}static{this.joinWithSlash=Xg}static{this.stripTrailingSlash=AD}static{this.\u0275fac=function(r){return new(r||n)($(Ai))}}static{this.\u0275prov=U({token:n,factory:()=>lF(),providedIn:"root"})}}return n})();function lF(){return new $s($(Ai))}function dF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SD(n){return n.replace(/\/index.html$/,"")}function hF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Ul(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Wg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},FD=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wg(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),RD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);RD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(_e(Ls),_e(El),_e(zg))}}static{this.\u0275dir=At({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function RD(n,e){n.context.$implicit=e.item}var LD=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Kg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ND("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ND("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(_e(Ls),_e(El))}}static{this.\u0275dir=At({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Kg=class{constructor(){this.$implicit=null,this.ngIf=null}};function ND(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${vt(e)}'.`)}var VD=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:_n.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(_e(Nr),_e(Gg),_e(wi))}}static{this.\u0275dir=At({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var em=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Hn({type:n})}static{this.\u0275inj=$n({})}}return n})(),tm="browser",fF="server";function pF(n){return n===tm}function jl(n){return n===fF}var UD=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>pF(M(Gt))?new Qg(M(ut),window):new Yg})}}return n})(),Qg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=gF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function gF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Yg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Bs=class{};var ba=class{},$l=class{},Si=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var rm=class{encodeKey(e){return BD(e)}encodeValue(e){return BD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function vF(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}var _F=/%(\d[a-f0-9])/gi,IF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BD(n){return encodeURIComponent(n).replace(_F,(e,t)=>IF[t]??e)}function Bl(n){return`${n}`}var xr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=vF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Bl):[Bl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Bl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Bl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var im=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function wF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function $D(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function HD(n){return typeof Blob<"u"&&n instanceof Blob}function qD(n){return typeof FormData<"u"&&n instanceof FormData}function EF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ta=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(wF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Si,this.context??=new im,!this.params)this.params=new xr,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||$D(this.body)||HD(this.body)||qD(this.body)||EF(this.body)?this.body:this.body instanceof xr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qD(this.body)?null:HD(this.body)?this.body.type||null:$D(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof xr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,_)=>y.set(_,e.setHeaders[_]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,_)=>y.set(_,e.setParams[_]),h)),new n(t,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Hs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hs||{}),Da=class{constructor(e,t=zl.Ok,r="OK"){this.headers=e.headers||new Si,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},sm=class n extends Da{constructor(e={}){super(e),this.type=Hs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Hl=class n extends Da{constructor(e={}){super(e),this.type=Hs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ql=class extends Da{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(zl||{});function nm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var TF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ta)s=t;else{let u;i.headers instanceof Si?u=i.headers:u=new Si(i.headers);let l;i.params&&(i.params instanceof xr?l=i.params:l=new xr({fromObject:i.params})),s=new Ta(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=G(s).pipe(Vn(u=>this.handler.handle(u)));if(t instanceof Ta||i.observe==="events")return o;let a=o.pipe(bt(u=>u instanceof Hl));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new xr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,nm(i,r))}post(t,r,i={}){return this.request("POST",t,nm(i,r))}put(t,r,i={}){return this.request("PUT",t,nm(i,r))}static{this.\u0275fac=function(r){return new(r||n)($(ba))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function bF(n,e){return e(n)}function DF(n,e,t){return(r,i)=>rn(t,()=>e(r,s=>n(s,i)))}var WD=new B(""),CF=new B(""),AF=new B("");var zD=(()=>{class n extends ba{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=M(Vs);let i=M(AF,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(WD),...this.injector.get(CF,[])]));this.chain=i.reduceRight((s,o)=>DF(s,o,this.injector),bF)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(li(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)($($l),$(it))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();var SF=/^\)\]\}',?\n/;function RF(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var GD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new H(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ne(r.\u0275loadImpl()):G(null)).pipe(Dt(()=>new ae(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((R,N)=>o.setRequestHeader(R,N.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let R=t.detectContentTypeHeader();R!==null&&o.setRequestHeader("Content-Type",R)}if(t.responseType){let R=t.responseType.toLowerCase();o.responseType=R!=="json"?R:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=o.statusText||"OK",N=new Si(o.getAllResponseHeaders()),O=RF(o)||t.url;return u=new sm({headers:N,status:o.status,statusText:R,url:O}),u},h=()=>{let{headers:R,status:N,statusText:O,url:z}=l(),F=null;N!==zl.NoContent&&(F=typeof o.response>"u"?o.responseText:o.response),N===0&&(N=F?zl.Ok:0);let ee=N>=200&&N<300;if(t.responseType==="json"&&typeof F=="string"){let Ee=F;F=F.replace(SF,"");try{F=F!==""?JSON.parse(F):null}catch(W){F=Ee,ee&&(ee=!1,F={error:W,text:F})}}ee?(s.next(new Hl({body:F,headers:R,status:N,statusText:O,url:z||void 0})),s.complete()):s.error(new ql({error:F,headers:R,status:N,statusText:O,url:z||void 0}))},p=R=>{let{url:N}=l(),O=new ql({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:N||void 0});s.error(O)},y=!1,_=R=>{y||(s.next(l()),y=!0);let N={type:Hs.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),t.responseType==="text"&&o.responseText&&(N.partialText=o.responseText),s.next(N)},A=R=>{let N={type:Hs.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),s.next(N)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",_),a!==null&&o.upload&&o.upload.addEventListener("progress",A)),o.send(a),s.next({type:Hs.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",_),a!==null&&o.upload&&o.upload.removeEventListener("progress",A)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)($(Bs))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),KD=new B(""),NF="XSRF-TOKEN",PF=new B("",{providedIn:"root",factory:()=>NF}),MF="X-XSRF-TOKEN",xF=new B("",{providedIn:"root",factory:()=>MF}),Gl=class{},OF=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ul(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)($(ut),$(Gt),$(PF))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function kF(n,e){let t=n.url.toLowerCase();if(!M(KD)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=M(Gl).getToken(),i=M(xF);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function QD(...n){let e=[TF,GD,zD,{provide:ba,useExisting:zD},{provide:$l,useExisting:GD},{provide:WD,useValue:kF,multi:!0},{provide:KD,useValue:!0},{provide:Gl,useClass:OF}];for(let t of n)e.push(...t.\u0275providers);return qt(e)}var cm=class extends Vl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},um=class n extends cm{static makeCurrent(){MD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FF();return t==null?null:LF(t)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ul(document.cookie,e)}},Ca=null;function FF(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}function LF(n){return new URL(n,document.baseURI).pathname}var VF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),lm=new B(""),ZD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)($(lm),$(ge))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Wl=class{constructor(e){this._doc=e}},om="ng-app-id",eC=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jl(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${om}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(om),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(om,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)($(ut),$(Cg),$(Sg,8),$(Gt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),am={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hm=/%COMP%/g,tC="%COMP%",UF=`_nghost-${tC}`,jF=`_ngcontent-${tC}`,BF=!0,$F=new B("",{providedIn:"root",factory:()=>BF});function HF(n){return jF.replace(hm,n)}function qF(n){return UF.replace(hm,n)}function nC(n,e){return e.map(t=>t.replace(hm,n))}var YD=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=jl(a),this.defaultRenderer=new Aa(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===pn.ShadowDom&&(r=we(L({},r),{encapsulation:pn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Kl?i.applyToHost(t):i instanceof Sa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case pn.Emulated:s=new Kl(u,l,r,this.appId,h,o,a,p);break;case pn.ShadowDom:return new dm(u,l,t,r,o,a,this.nonce,p);default:s=new Sa(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)($(ZD),$(eC),$(Cg),$($F),$(ut),$(Gt),$(ge),$(Sg))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Aa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(am[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(JD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(JD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=am[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=am[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(t,r,i&_n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Wn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function JD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var dm=class extends Aa{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sa=class extends Aa{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?nC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kl=class extends Sa{constructor(e,t,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=HF(l),this.hostAttr=qF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},zF=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)($(ut))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),XD=["alt","control","meta","shift"],GF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KF=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),XD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=GF[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),XD.forEach(o=>{if(o!==i){let a=WF[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)($(ut))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function rC(n,e){return DD(L({rootComponent:n},QF(e)))}function QF(n){return{appProviders:[...eL,...n?.providers??[]],platformProviders:ZF}}function YF(){um.makeCurrent()}function JF(){return new vn}function XF(){return Cb(document),document}var ZF=[{provide:Gt,useValue:tm},{provide:Ag,useValue:YF,multi:!0},{provide:ut,useFactory:XF,deps:[]}];var eL=[{provide:dl,useValue:"root"},{provide:vn,useFactory:JF,deps:[]},{provide:lm,useClass:zF,multi:!0,deps:[ut,ge,Gt]},{provide:lm,useClass:KF,multi:!0,deps:[ut]},YD,eC,ZD,{provide:ma,useExisting:YD},{provide:Bs,useClass:VF,deps:[]},[]];var iC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)($(ut))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var re="primary",qa=Symbol("RouteTitle"),ym=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ks(n){return new ym(n)}function nL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wn(n[t],e[t]))return!1;return!0}function wn(n,e){let t=n?vm(n):void 0,r=e?vm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!fC(n[i],e[i]))return!1;return!0}function vm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function fC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function pC(n){return n.length>0?n[n.length-1]:null}function Lr(n){return Gf(n)?n:Di(n)?Ne(Promise.resolve(n)):G(n)}var iL={exact:mC,subset:yC},gC={exact:sL,subset:oL,ignored:()=>!0};function sC(n,e,t){return iL[t.paths](n.root,e.root,t.matrixParams)&&gC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sL(n,e){return wn(n,e)}function mC(n,e,t){if(!Ni(n.segments,e.segments)||!Jl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!mC(n.children[r],e.children[r],t))return!1;return!0}function oL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fC(n[t],e[t]))}function yC(n,e,t){return vC(n,e,e.segments,t)}function vC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ni(i,t)||e.hasChildren()||!Jl(i,t,r))}else if(n.segments.length===t.length){if(!Ni(n.segments,t)||!Jl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!yC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ni(n.segments,i)||!Jl(n.segments,i,r)||!n.children[re]?!1:vC(n.children[re],e,s,r)}}function Jl(n,e,t){return e.every((r,i)=>gC[t](n[i].parameters,r.parameters))}var Or=class{constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){return uL.serialize(this)}},ve=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xl(this)}},Ri=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ks(this.parameters),this._parameterMap}toString(){return IC(this)}};function aL(n,e){return Ni(n,e)&&n.every((t,r)=>wn(t.parameters,e[r].parameters))}function Ni(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function cL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var za=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new ka,providedIn:"root"})}}return n})(),ka=class{parse(e){let t=new Im(e);return new Or(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ra(e.root,!0)}`,r=hL(e.queryParams),i=typeof e.fragment=="string"?`#${lL(e.fragment)}`:"";return`${t}${r}${i}`}},uL=new ka;function Xl(n){return n.segments.map(e=>IC(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Xl(n);if(e){let t=n.children[re]?Ra(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${Ra(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=cL(n,(r,i)=>i===re?[Ra(n.children[re],!1)]:[`${i}:${Ra(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Xl(n)}/${t[0]}`:`${Xl(n)}/(${t.join("//")})`}}function _C(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ql(n){return _C(n).replace(/%3B/gi,";")}function lL(n){return encodeURI(n)}function _m(n){return _C(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(n){return decodeURIComponent(n)}function oC(n){return Zl(n.replace(/\+/g,"%20"))}function IC(n){return`${_m(n.path)}${dL(n.parameters)}`}function dL(n){return Object.entries(n).map(([e,t])=>`;${_m(e)}=${_m(t)}`).join("")}function hL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ql(t)}=${Ql(i)}`).join("&"):`${Ql(t)}=${Ql(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var fL=/^[^\/()?;#]+/;function fm(n){let e=n.match(fL);return e?e[0]:""}var pL=/^[^\/()?;=#]+/;function gL(n){let e=n.match(pL);return e?e[0]:""}var mL=/^[^=?&#]+/;function yL(n){let e=n.match(mL);return e?e[0]:""}var vL=/^[^&#]+/;function _L(n){let e=n.match(vL);return e?e[0]:""}var Im=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ve(e,t)),r}parseSegment(){let e=fm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Ri(Zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=gL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=fm(this.remaining);i&&(r=i,this.capture(r))}e[Zl(t)]=Zl(r)}parseQueryParam(e){let t=yL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=_L(this.remaining);o&&(r=o,this.capture(r))}let i=oC(t),s=oC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[re]:new ve([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function wC(n){return n.segments.length>0?new ve([],{[re]:n}):n}function EC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=EC(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ve(n.segments,e);return IL(t)}function IL(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ve(n.segments.concat(e.segments),e.children)}return n}function Qs(n){return n instanceof Or}function wL(n,e,t=null,r=null){let i=TC(n);return bC(i,e,t,r)}function TC(n){let e;function t(s){let o={};for(let u of s.children){let l=t(u);o[u.outlet]=l}let a=new ve(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=wC(r);return e??i}function bC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return pm(i,i,i,t,r);let s=EL(e);if(s.toRoot())return pm(i,i,new ve([],{}),t,r);let o=TL(s,i,n),a=o.processChildren?Ma(o.segmentGroup,o.index,s.commands):CC(o.segmentGroup,o.index,s.commands);return pm(i,o.segmentGroup,a,t,r)}function ed(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fa(n){return typeof n=="object"&&n!=null&&n.outlets}function pm(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=DC(n,e,t);let a=wC(EC(o));return new Or(a,s,i)}function DC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=DC(s,e,t)}),new ve(n.segments,r)}var td=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ed(r[0]))throw new H(4003,!1);let i=r.find(Fa);if(i&&i!==pC(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new td(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new td(t,e,r)}var Gs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function TL(n,e,t){if(n.isAbsolute)return new Gs(e,!0,0);if(!t)return new Gs(e,!1,NaN);if(t.parent===null)return new Gs(t,!0,0);let r=ed(n.commands[0])?0:1,i=t.segments.length-1+r;return bL(t,i,n.numberOfDoubleDots)}function bL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Gs(r,!1,i-s)}function DL(n){return Fa(n[0])?n[0].outlets:{[re]:n}}function CC(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return Ma(n,e,t);let r=CL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ve(n.segments.slice(0,r.pathIndex),{});return s.children[re]=new ve(n.segments.slice(r.pathIndex),n.children),Ma(s,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?wm(n,e,t):r.match?Ma(n,0,i):wm(n,e,t)}function Ma(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=DL(t),i={};if(Object.keys(r).some(s=>s!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let s=Ma(n.children[re],e,t);return new ve(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=CC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ve(n.segments,i)}}function CL(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Fa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!cC(u,l,o))return s;r+=2}else{if(!cC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function wm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Fa(s)){let u=AL(s.outlets);return new ve(r,u)}if(i===0&&ed(t[0])){let u=n.segments[e];r.push(new Ri(u.path,aC(t[0]))),i++;continue}let o=Fa(s)?s.outlets[re]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ed(a)?(r.push(new Ri(o,aC(a))),i+=2):(r.push(new Ri(o,{})),i++)}return new ve(r,{})}function AL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=wm(new ve([],{}),0,r))}),e}function aC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function cC(n,e,t){return n==t.path&&wn(e,t.parameters)}var xa="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),Wt=class{constructor(e,t){this.id=e,this.url=t}},Ys=class extends Wt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ge.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends Wt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ge.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(kt||{}),nd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(nd||{}),kr=class extends Wt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ge.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Wt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ge.NavigationSkipped}},La=class extends Wt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ge.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rd=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Em=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends Wt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ge.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bm=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ge.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cm=class{constructor(e){this.route=e,this.type=Ge.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Am=class{constructor(e){this.route=e,this.type=Ge.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sm=class{constructor(e){this.snapshot=e,this.type=Ge.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rm=class{constructor(e){this.snapshot=e,this.type=Ge.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=Ge.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=Ge.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ge.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Va=class{},Ua=class{constructor(e){this.url=e}};var Mm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ga,this.attachRef=null}},Ga=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Mm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Om(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Om(e,this._root).map(t=>t.value)}};function xm(n,e){if(n===e.value)return e;for(let t of e.children){let r=xm(n,t);if(r)return r}return null}function Om(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Om(n,t);if(r.length)return r.unshift(e),r}return[]}var Ot=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var od=class extends sd{constructor(e,t){super(e),this.snapshot=t,qm(this,e)}toString(){return this.snapshot.toString()}};function AC(n){let e=SL(n),t=new Je([new Ri("",{})]),r=new Je({}),i=new Je({}),s=new Je({}),o=new Je(""),a=new Pi(t,r,s,o,i,re,n,e.root);return a.snapshot=e.root,new od(new Ot(a,[]),e)}function SL(n){let e={},t={},r={},i="",s=new ja([],e,r,i,t,re,n,null,{});return new ad("",new Ot(s,[]))}var Pi=class{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[qa]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Ks(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Ks(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&RC(i)&&(r.resolve[qa]=i.title),r}var ja=class{get title(){return this.data?.[qa]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ks(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ad=class extends sd{constructor(e,t){super(t),this.url=e,qm(this,t)}toString(){return SC(this._root)}};function qm(n,e){e.value._routerState=n,e.children.forEach(t=>qm(n,t))}function SC(n){let e=n.children.length>0?` { ${n.children.map(SC).join(", ")} } `:"";return`${n.value}${e}`}function gm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wn(e.params,t.params)||n.paramsSubject.next(t.params),rL(e.url,t.url)||n.urlSubject.next(t.url),wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function km(n,e){let t=wn(n.params,e.params)&&aL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||km(n.parent,e.parent))}function RC(n){return typeof n.title=="string"||n.title===null}var zm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=M(Ga),this.location=M(Ls),this.changeDetector=M(Ci),this.environmentInjector=M(it),this.inputBinder=M(dd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Fm(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=At({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ii]})}}return n})(),Fm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pi?this.route:e===Ga?this.childContexts:this.parent.get(e,t)}},dd=new B(""),uC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=oa([r.queryParams,r.params,r.data]).pipe(Dt(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=CD(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function RL(n,e,t){let r=Ba(n,e._root,t?t._root:void 0);return new od(r,e)}function Ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=NL(n,e,t);return new Ot(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ba(n,a)),o}}let r=PL(e.value),i=e.children.map(s=>Ba(n,s));return new Ot(r,i)}}function NL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ba(n,r,i);return Ba(n,r)})}function PL(n){return new Pi(new Je(n.url),new Je(n.params),new Je(n.queryParams),new Je(n.fragment),new Je(n.data),n.outlet,n.component,n)}var NC="ngNavigationCancelingError";function PC(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=MC(!1,kt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function MC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NC]=!0,t.cancellationCode=e,t}function ML(n){return xC(n)&&Qs(n.url)}function xC(n){return!!n&&n[NC]}var xL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ar({type:n,selectors:[["ng-component"]],standalone:!0,features:[Us],decls:1,vars:0,template:function(r,i){r&1&&Ti(0,"router-outlet")},dependencies:[zm],encapsulation:2})}}return n})();function OL(n,e){return n.providers&&!n._injector&&(n._injector=Cl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gm(n){let e=n.children&&n.children.map(Gm),t=e?we(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=xL),t}function En(n){return n.outlet||re}function kL(n,e){let t=n.filter(r=>En(r)===e);return t.push(...n.filter(r=>En(r)!==e)),t}function Wa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var FL=(n,e,t,r)=>ne(i=>(new Lm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Lm=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),gm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zs(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Pm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(gm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),gm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Wa(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},cd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{constructor(e,t){this.component=e,this.route=t}};function LL(n,e,t){let r=n._root,i=e?e._root:null;return Na(r,i,t,[r.value])}function VL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!_T(n)?n:e.get(n):r}function Na(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=zs(e);return n.children.forEach(o=>{UL(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Oa(a,t.getContext(o),i)),i}function UL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=jL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new cd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Na(n,e,a?a.children:null,r,i):Na(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,o))}else o&&Oa(e,a,i),i.canActivateChecks.push(new cd(r)),s.component?Na(n,null,a?a.children:null,r,i):Na(n,null,t,r,i);return i}function jL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ni(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ni(n.url,e.url)||!wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!km(n,e)||!wn(n.queryParams,e.queryParams);case"paramsChange":default:return!km(n,e)}}function Oa(n,e,t){let r=zs(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Oa(o,e.children.getContext(s),t):Oa(o,null,t):Oa(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ws(e.outlet.component,i)):t.canDeactivateChecks.push(new Ws(null,i)):t.canDeactivateChecks.push(new Ws(null,i))}function Ka(n){return typeof n=="function"}function BL(n){return typeof n=="boolean"}function $L(n){return n&&Ka(n.canLoad)}function HL(n){return n&&Ka(n.canActivate)}function qL(n){return n&&Ka(n.canActivateChild)}function zL(n){return n&&Ka(n.canDeactivate)}function GL(n){return n&&Ka(n.canMatch)}function OC(n){return n instanceof Ln||n?.name==="EmptyError"}var Yl=Symbol("INITIAL_VALUE");function Js(){return Dt(n=>oa(n.map(e=>e.pipe(Un(1),Jf(Yl)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Yl)return Yl;if(t===!1||t instanceof Or)return t}return!0}),bt(e=>e!==Yl),Un(1)))}function WL(n,e){return Le(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?G(we(L({},t),{guardsResult:!0})):KL(o,r,i,n).pipe(Le(a=>a&&BL(a)?QL(r,s,n,e):G(a)),ne(a=>we(L({},t),{guardsResult:a})))})}function KL(n,e,t,r){return Ne(n).pipe(Le(i=>eV(i.component,i.route,t,e,r)),dn(i=>i!==!0,!0))}function QL(n,e,t,r){return Ne(e).pipe(Vn(i=>ms(JL(i.route.parent,r),YL(i.route,r),ZL(n,i.path,t),XL(n,i.route,t))),dn(i=>i!==!0,!0))}function YL(n,e){return n!==null&&e&&e(new Nm(n)),G(!0)}function JL(n,e){return n!==null&&e&&e(new Sm(n)),G(!0)}function XL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Pu(()=>{let o=Wa(e)??t,a=Xs(s,o),u=HL(a)?a.canActivate(e,n):rn(o,()=>a(e,n));return Lr(u).pipe(dn())}));return G(i).pipe(Js())}function ZL(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>VL(o)).filter(o=>o!==null).map(o=>Pu(()=>{let a=o.guards.map(u=>{let l=Wa(o.node)??t,h=Xs(u,l),p=qL(h)?h.canActivateChild(r,n):rn(l,()=>h(r,n));return Lr(p).pipe(dn())});return G(a).pipe(Js())}));return G(s).pipe(Js())}function eV(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=Wa(e)??i,l=Xs(a,u),h=zL(l)?l.canDeactivate(n,e,t,r):rn(u,()=>l(n,e,t,r));return Lr(h).pipe(dn())});return G(o).pipe(Js())}function tV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=Xs(o,n),u=$L(a)?a.canLoad(e,t):rn(n,()=>a(e,t));return Lr(u)});return G(s).pipe(Js(),kC(r))}function kC(n){return Uf(Ve(e=>{if(Qs(e))throw PC(n,e)}),ne(e=>e===!0))}function nV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=Xs(o,n),u=GL(a)?a.canMatch(e,t):rn(n,()=>a(e,t));return Lr(u)});return G(s).pipe(Js(),kC(r))}var $a=class{constructor(e){this.segmentGroup=e||null}},ud=class extends Error{constructor(e){super(),this.urlTree=e}};function qs(n){return ps(new $a(n))}function rV(n){return ps(new H(4e3,!1))}function iV(n){return ps(MC(!1,kt.GuardRejected))}var Vm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return rV(e.redirectTo);i=i.children[re]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new ud(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Or(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ve(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Um={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sV(n,e,t,r,i){let s=Wm(n,e,t);return s.matched?(r=OL(e,r),nV(r,e,t,i).pipe(ne(o=>o===!0?s:L({},Um)))):G(s)}function Wm(n,e,t){if(e.path==="**")return oV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Um):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nL)(t,n,e);if(!i)return L({},Um);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function oV(n){return{matched:!0,parameters:n.length>0?pC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lC(n,e,t,r){return t.length>0&&uV(n,t,r)?{segmentGroup:new ve(e,cV(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&lV(n,t,r)?{segmentGroup:new ve(n.segments,aV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function aV(n,e,t,r){let i={};for(let s of t)if(hd(n,e,s)&&!r[En(s)]){let o=new ve([],{});i[En(s)]=o}return L(L({},r),i)}function cV(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&En(r)!==re){let i=new ve([],{});t[En(r)]=i}return t}function uV(n,e,t){return t.some(r=>hd(n,e,r)&&En(r)!==re)}function lV(n,e,t){return t.some(r=>hd(n,e,r))}function hd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function dV(n,e,t,r){return En(n)!==r&&(r===re||!hd(e,t,n))?!1:Wm(e,n,t).matched}function hV(n,e,t){return e.length===0&&!n.children[t]}var jm=class{};function fV(n,e,t,r,i,s,o="emptyOnly"){return new Bm(n,e,t,r,i,o,s).recognize()}var pV=31,Bm=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Vm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=lC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(t=>{let r=new ja([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),i=new Ot(r,t),s=new ad("",i),o=wL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(_r(r=>{if(r instanceof ud)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $a?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Hm(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(ne(s=>s instanceof Ot?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ne(i).pipe(Vn(s=>{let o=r.children[s],a=kL(t,s);return this.processSegmentGroup(e,a,o,s)}),Yf((s,o)=>(s.push(...o),s)),Ir(null),Qf(),Le(s=>{if(s===null)return qs(r);let o=FC(s);return gV(o),G(o)}))}processSegment(e,t,r,i,s,o){return Ne(t).pipe(Vn(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(_r(u=>{if(u instanceof $a)return G(null);throw u}))),dn(a=>!!a),_r(a=>{if(OC(a))return hV(r,i,s)?G(new jm):qs(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return dV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):qs(i):qs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Wm(t,i,s);if(!a)return qs(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pV&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Le(y=>this.processSegment(e,r,t,y.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=sV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(Dt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Dt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:y}=a,_=new ja(h,y,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,yV(r),En(r),r.component??r._loadedComponent??null,r,vV(r)),{segmentGroup:A,slicedSegments:R}=lC(t,h,p,u);if(R.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(ne(O=>O===null?null:new Ot(_,O)));if(u.length===0&&R.length===0)return G(new Ot(_,[]));let N=En(r)===s;return this.processSegment(l,u,A,R,N?re:s,!0).pipe(ne(O=>new Ot(_,O instanceof Ot?[O]:[])))}))):qs(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):tV(e,t,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,t).pipe(Ve(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):iV(t))):G({routes:[],injector:e})}};function gV(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function mV(n){let e=n.value.routeConfig;return e&&e.path===""}function FC(n){let e=[],t=new Set;for(let r of n){if(!mV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=FC(r.children);e.push(new Ot(r.value,i))}return e.filter(r=>!t.has(r))}function yV(n){return n.data||{}}function vV(n){return n.resolve||{}}function _V(n,e,t,r,i,s){return Le(o=>fV(n,e,t,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>we(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function IV(n,e){return Le(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of LC(u))o.add(l);let a=0;return Ne(o).pipe(Vn(u=>s.has(u)?wV(u,r,n,e):(u.data=Hm(u,u.parent,n).resolve,G(void 0))),Ve(()=>a++),ys(1),Le(u=>a===o.size?G(t):Mt))})}function LC(n){let e=n.children.map(t=>LC(t)).flat();return[n,...e]}function wV(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!RC(i)&&(s[qa]=i.title),EV(s,n,e,r).pipe(ne(o=>(n._resolvedData=o,n.data=Hm(n,n.parent,t).resolve,null)))}function EV(n,e,t,r){let i=vm(n);if(i.length===0)return G({});let s={};return Ne(i).pipe(Le(o=>TV(n[o],e,t,r).pipe(dn(),Ve(a=>{s[o]=a}))),ys(1),Kf(s),_r(o=>OC(o)?Mt:ps(o)))}function TV(n,e,t,r){let i=Wa(e)??r,s=Xs(n,i),o=s.resolve?s.resolve(e,t):rn(i,()=>s(e,t));return Lr(o)}function mm(n){return Dt(e=>{let t=n(e);return t?Ne(t).pipe(ne(()=>e)):G(e)})}var VC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[qa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(bV),providedIn:"root"})}}return n})(),bV=(()=>{class n extends VC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)($(iC))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qa=new B("",{providedIn:"root",factory:()=>({})}),Ha=new B(""),Km=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(Fl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe(ne(UC),Ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),li(()=>{this.componentLoaders.delete(t)})),i=new ls(r,()=>new gt).pipe(us());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=DV(r,this.compiler,t,this.onLoadEndListener).pipe(li(()=>{this.childrenLoaders.delete(r)})),o=new ls(s,()=>new gt).pipe(us());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DV(n,e,t,r){return Lr(n.loadChildren()).pipe(ne(UC),Le(i=>i instanceof ya||Array.isArray(i)?G(i):Ne(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Ha,[],{optional:!0,self:!0}).flat()),{routes:o.map(Gm),injector:s}}))}function CV(n){return n&&typeof n=="object"&&"default"in n}function UC(n){return CV(n)?n.default:n}var Qm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(AV),providedIn:"root"})}}return n})(),AV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jC=new B(""),BC=new B("");function SV(n,e,t){let r=n.get(BC),i=n.get(ut);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),RV(n))),{onViewTransitionCreated:u}=r;return u&&rn(n,()=>u({transition:a,from:e,to:t})),o})}function RV(n){return new Promise(e=>{Dl(e,{injector:n})})}var Ym=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.transitionAbortSubject=new gt,this.configLoader=M(Km),this.environmentInjector=M(it),this.urlSerializer=M(za),this.rootContexts=M(Ga),this.location=M($s),this.inputBindingEnabled=M(dd,{optional:!0})!==null,this.titleStrategy=M(VC),this.options=M(Qa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Qm),this.createViewTransition=M(jC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Cm(i)),r=i=>this.events.next(new Am(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(we(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(s=>s.id!==0),ne(s=>we(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Dt(s=>{let o=!1,a=!1;return G(s).pipe(Dt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",kt.SupersededByNewNavigation),Mt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?we(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Fr(u.id,this.urlSerializer.serialize(u.rawUrl),p,nd.IgnoredSameUrlNavigation)),u.resolve(null),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(Dt(p=>{let y=this.transitions?.getValue();return this.events.next(new Ys(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Mt:Promise.resolve(p)}),_V(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=we(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new rd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:A,extras:R}=u,N=new Ys(p,this.urlSerializer.serialize(y),_,A);this.events.next(N);let O=AC(this.rootComponentType).snapshot;return this.currentTransition=s=we(L({},u),{targetSnapshot:O,urlAfterRedirects:y,extras:we(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,G(s)}else{let p="";return this.events.next(new Fr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,nd.IgnoredByUrlHandlingStrategy)),u.resolve(null),Mt}}),Ve(u=>{let l=new Em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=s=we(L({},u),{guards:LL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),WL(this.environmentInjector,u=>this.events.next(u)),Ve(u=>{if(s.guardsResult=u.guardsResult,Qs(u.guardsResult))throw PC(this.urlSerializer,u.guardsResult);let l=new Tm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),bt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",kt.GuardRejected),!1)),mm(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Ve(l=>{let h=new bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Dt(l=>{let h=!1;return G(l).pipe(IV(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",kt.NoDataFromResolver)}}))}),Ve(l=>{let h=new Dm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),mm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ve(y=>{h.component=y}),ne(()=>{})));for(let y of h.children)p.push(...l(y));return p};return oa(l(u.targetSnapshot.root)).pipe(Ir(null),Un(1))}),mm(()=>this.afterPreactivation()),Dt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ne(h).pipe(ne(()=>s)):G(s)}),ne(u=>{let l=RL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=we(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ve(()=>{this.events.next(new Va)}),FL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Un(1),Ve({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Xf(this.transitionAbortSubject.pipe(Ve(u=>{throw u}))),li(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",kt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(u=>{if(a=!0,xC(u))this.events.next(new kr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),ML(u)?this.events.next(new Ua(u.url)):s.resolve(!1);else{this.events.next(new La(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return Mt}))}))}cancelNavigationTransition(t,r,i){let s=new kr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NV(n){return n!==xa}var PV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(MV),providedIn:"root"})}}return n})(),$m=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},MV=(()=>{class n extends $m{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$C=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(xV),providedIn:"root"})}}return n})(),xV=(()=>{class n extends $C{constructor(){super(...arguments),this.location=M($s),this.urlSerializer=M(za),this.options=M(Qa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Qm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=AC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ys)this.stateMemento=this.createStateMemento();else if(t instanceof Fr)this.rawUrlTree=r.initialUrl;else if(t instanceof rd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Va?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof kr&&(t.code===kt.GuardRejected||t.code===kt.NoDataFromResolver)?this.restoreHistory(r):t instanceof La?this.restoreHistory(r,!0):t instanceof Kn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pa||{});function HC(n,e){n.events.pipe(bt(t=>t instanceof Kn||t instanceof kr||t instanceof La||t instanceof Fr),ne(t=>t instanceof Kn||t instanceof Fr?Pa.COMPLETE:(t instanceof kr?t.code===kt.Redirect||t.code===kt.SupersededByNewNavigation:!1)?Pa.REDIRECTING:Pa.FAILED),bt(t=>t!==Pa.REDIRECTING),Un(1)).subscribe(()=>{e()})}function OV(n){throw n}var kV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(Ol),this.stateManager=M($C),this.options=M(Qa,{optional:!0})||{},this.pendingTasks=M(Vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(Ym),this.urlSerializer=M(za),this.location=M($s),this.urlHandlingStrategy=M(Qm),this._events=new gt,this.errorHandler=this.options.errorHandler||OV,this.navigated=!1,this.routeReuseStrategy=M(PV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(Ha,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(dd,{optional:!0}),this.eventsSubscription=new ke,this.isNgZoneEnabled=M(ge)instanceof ge&&ge.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof kr&&r.code!==kt.Redirect&&r.code!==kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kn)this.navigated=!0;else if(r instanceof Ua){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||NV(i.source)};this.scheduleNavigation(o,xa,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=TC(y)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return bC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,xa,null,r)}navigate(t,r={skipLocationChange:!1}){return LV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},kV):r===!1?i=L({},FV):i=r,Qs(t))return sC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return sC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return HC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}function VV(n){return!(n instanceof Va)&&!(n instanceof Ua)}var ld=class{};var UV=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bt(t=>t instanceof Kn),Vn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Cl(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ne(i).pipe(gs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let s=i.pipe(Le(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ne([s,o]).pipe(gs())}else return s})}static{this.\u0275fac=function(r){return new(r||n)($(Rt),$(Fl),$(it),$(ld),$(Km))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qC=new B(""),jV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=M(it),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fr&&t.code===nd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof id&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>m(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Dl(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new id(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Vb()}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function zC(n,...e){return qt([{provide:Ha,multi:!0,useValue:n},[],{provide:Pi,useFactory:GC,deps:[Rt]},{provide:Ea,multi:!0,useFactory:WC},e.map(t=>t.\u0275providers)])}function GC(n){return n.routerState.root}function Ya(n,e){return{\u0275kind:n,\u0275providers:e}}function WC(){let n=M(_t);return e=>{let t=n.get(js);if(e!==t.components[0])return;let r=n.get(Rt),i=n.get(KC);n.get(Jm)===1&&r.initialNavigation(),n.get(QC,null,ie.Optional)?.setUpPreloading(),n.get(qC,null,ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KC=new B("",{factory:()=>new gt}),Jm=new B("",{providedIn:"root",factory:()=>1});function BV(){return Ya(2,[{provide:Jm,useValue:0},{provide:kl,multi:!0,deps:[_t],useFactory:e=>{let t=e.get(xD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Rt),s=e.get(KC);HC(i,()=>{r(!0)}),e.get(Ym).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function $V(){return Ya(3,[{provide:kl,multi:!0,useFactory:()=>{let e=M(Rt);return()=>{e.setUpLocationChangeListener()}}},{provide:Jm,useValue:2}])}var QC=new B("");function HV(n){return Ya(0,[{provide:QC,useExisting:UV},{provide:ld,useExisting:n}])}function qV(){return Ya(8,[uC,{provide:dd,useExisting:uC}])}function zV(n){let e=[{provide:jC,useValue:SV},{provide:BC,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ya(9,e)}var dC=new B("ROUTER_FORROOT_GUARD"),GV=[$s,{provide:za,useClass:ka},Rt,Ga,{provide:Pi,useFactory:GC,deps:[Rt]},Km,[]],YC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[GV,[],{provide:Ha,multi:!0,useValue:t},{provide:dC,useFactory:YV,deps:[[Rt,new Xe,new ll]]},{provide:Qa,useValue:r||{}},r?.useHash?KV():QV(),WV(),r?.preloadingStrategy?HV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?JV(r):[],r?.bindToComponentInputs?qV().\u0275providers:[],r?.enableViewTransitions?zV().\u0275providers:[],XV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ha,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)($(dC,8))}}static{this.\u0275mod=Hn({type:n})}static{this.\u0275inj=$n({})}}return n})();function WV(){return{provide:qC,useFactory:()=>{let n=M(UD),e=M(ge),t=M(Qa),r=M(Ym),i=M(za);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jV(i,r,n,e,t)}}}function KV(){return{provide:Ai,useClass:kD}}function QV(){return{provide:Ai,useClass:Zg}}function YV(n){return"guarded"}function JV(n){return[n.initialNavigation==="disabled"?$V().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BV().\u0275providers:[]]}var hC=new B("");function XV(){return[{provide:hC,useFactory:WC},{provide:Ea,multi:!0,useExisting:hC}]}var JC=(()=>{class n{constructor(){this.title="Varenie \u{1F9D1}\u200D\u{1F373}"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ar({type:n,selectors:[["app-root"]],standalone:!0,features:[Us],decls:9,vars:0,consts:[[1,"container"],[1,"header"],[1,"content"],[1,"footer"]],template:function(r,i){r&1&&(Ce(0,"div",0)(1,"header",1)(2,"h1"),ze(3,"\u{1F372} V\xEDkendov\xE9 varenie \u{1F9D1}\u200D\u{1F373}"),Ae()(),Ce(4,"main",2),Ti(5,"router-outlet"),Ae(),Ce(6,"footer",3)(7,"p"),ze(8,"Barto\u0161ovci"),Ae()()())},dependencies:[YC,zm],styles:[".container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;flex-direction:column;height:50vh;background-color:#fff;color:#333;padding-top:80px;padding-bottom:60px}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#7c9a92;color:#fff;text-align:center;padding:10px;font-size:2em;z-index:1000}.content[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#fff;border-top:2px solid #7c9a92;margin-top:80px;margin-bottom:60px}.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#2a4d33;color:#fff;text-align:center;padding:10px;font-size:1.2em;z-index:1000}"]})}}return n})();var XC={production:!1,firebaseConfig:{apiKey:"AIzaSyDHAdvxfmROp0o_zVQ8ijjcilahLMBOAOs",authDomain:"fir-backend-8e4cb.firebaseapp.com",projectId:"fir-backend-8e4cb",storageBucket:"fir-backend-8e4cb.firebasestorage.app",messagingSenderId:"812493462141",appId:"1:812493462141:web:82f1b452f3b11aeff66f14",measurementId:"G-PG0CKVD1D4"}};var e0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},t0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(e0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new ey;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ey=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eU=function(n){let e=e0(n);return t0.encodeByteArray(e,!0)},Ja=function(n){return eU(n).replace(/\./g,"")},ny=function(n){try{return t0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nU=()=>tU().__FIREBASE_DEFAULTS__,rU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ny(n[1]);return e&&JSON.parse(e)},pd=()=>{try{return nU()||rU()||iU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ry=n=>{var e,t;return(t=(e=pd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},n0=n=>{let e=ry(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iy=()=>{var n;return(n=pd())===null||n===void 0?void 0:n.config},sy=n=>{var e;return(e=pd())===null||e===void 0?void 0:e[`_${n}`]};var fd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function r0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ja(JSON.stringify(t)),Ja(JSON.stringify(o)),""].join(".")}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function sU(){var n;let e=(n=pd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function a0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c0(){let n=We();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function u0(){return!sU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oy(){try{return typeof indexedDB=="object"}catch{return!1}}function l0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var oU="FirebaseError",Ft=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qn.prototype.create)}},Qn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?aU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ft(i,a,r)}};function aU(n,e){return n.replace(cU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cU=/\{\$([^}]+)}/g;function d0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(ZC(s)&&ZC(o)){if(!Mi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ZC(n){return n!==null&&typeof n=="object"}function Xa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function h0(n,e){let t=new ty(n,e);return t.subscribe.bind(t)}var ty=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");uU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zm),i.error===void 0&&(i.error=Zm),i.complete===void 0&&(i.complete=Zm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zm(){}var o7=4*60*60*1e3;function Ke(n){return n&&n._delegate?n._delegate:n}var Kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xi="[DEFAULT]";var ay=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new fd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dU(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lU(n){return n===xi?void 0:n}function dU(n){return n.instantiationMode==="EAGER"}var gd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ay(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var hU=[],ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ue||{}),fU={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},pU=ue.INFO,gU={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},mU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=gU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vr=class{constructor(e){this.name=e,this._logLevel=pU,this._logHandler=mU,this._userLogHandler=null,hU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var yU=(n,e)=>e.some(t=>n instanceof t),f0,p0;function vU(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _U(){return p0||(p0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var g0=new WeakMap,uy=new WeakMap,m0=new WeakMap,cy=new WeakMap,dy=new WeakMap;function IU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Tn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&g0.set(t,n)}).catch(()=>{}),dy.set(e,n),e}function wU(n){if(uy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});uy.set(n,e)}var ly={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||m0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function y0(n){ly=n(ly)}function EU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(md(this),e,...t);return m0.set(r,e.sort?e.sort():[e]),Tn(r)}:_U().includes(n)?function(...e){return n.apply(md(this),e),Tn(g0.get(this))}:function(...e){return Tn(n.apply(md(this),e))}}function TU(n){return typeof n=="function"?EU(n):(n instanceof IDBTransaction&&wU(n),yU(n,vU())?new Proxy(n,ly):n)}function Tn(n){if(n instanceof IDBRequest)return IU(n);if(cy.has(n))return cy.get(n);let e=TU(n);return e!==n&&(cy.set(n,e),dy.set(e,n)),e}var md=n=>dy.get(n);function yd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Tn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Tn(o.result),u.oldVersion,u.newVersion,Tn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var bU=["get","getKey","getAll","getAllKeys","count"],DU=["put","add","delete","clear"],hy=new Map;function v0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hy.get(e))return hy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=DU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bU.includes(t)))return;let s=function(o,...a){return m(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return hy.set(e,s),s}y0(n=>we(L({},n),{get:(e,t,r)=>v0(e,t)||n.get(e,t,r),has:(e,t)=>!!v0(e,t)||n.has(e,t)}));var py=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function CU(n){let e=n.getComponent();return e?.type==="VERSION"}var gy="@firebase/app",_0="0.10.13";var Yn=new Vr("@firebase/app"),AU="@firebase/app-compat",SU="@firebase/analytics-compat",RU="@firebase/analytics",NU="@firebase/app-check-compat",PU="@firebase/app-check",MU="@firebase/auth",xU="@firebase/auth-compat",OU="@firebase/database",kU="@firebase/data-connect",FU="@firebase/database-compat",LU="@firebase/functions",VU="@firebase/functions-compat",UU="@firebase/installations",jU="@firebase/installations-compat",BU="@firebase/messaging",$U="@firebase/messaging-compat",HU="@firebase/performance",qU="@firebase/performance-compat",zU="@firebase/remote-config",GU="@firebase/remote-config-compat",WU="@firebase/storage",KU="@firebase/storage-compat",QU="@firebase/firestore",YU="@firebase/vertexai-preview",JU="@firebase/firestore-compat",XU="firebase",ZU="10.14.1";var my="[DEFAULT]",ej={[gy]:"fire-core",[AU]:"fire-core-compat",[RU]:"fire-analytics",[SU]:"fire-analytics-compat",[PU]:"fire-app-check",[NU]:"fire-app-check-compat",[MU]:"fire-auth",[xU]:"fire-auth-compat",[OU]:"fire-rtdb",[kU]:"fire-data-connect",[FU]:"fire-rtdb-compat",[LU]:"fire-fn",[VU]:"fire-fn-compat",[UU]:"fire-iid",[jU]:"fire-iid-compat",[BU]:"fire-fcm",[$U]:"fire-fcm-compat",[HU]:"fire-perf",[qU]:"fire-perf-compat",[zU]:"fire-rc",[GU]:"fire-rc-compat",[WU]:"fire-gcs",[KU]:"fire-gcs-compat",[QU]:"fire-fst",[JU]:"fire-fst-compat",[YU]:"fire-vertex","fire-js":"fire-js",[XU]:"fire-js-all"};var Za=new Map,tj=new Map,yy=new Map;function I0(n,e){try{n.container.addComponent(e)}catch(t){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jr(n){let e=n.name;if(yy.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,n);for(let t of Za.values())I0(t,n);for(let t of tj.values())I0(t,n);return!0}function tc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jn(n){return n.settings!==void 0}var nj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Qn("app","Firebase",nj);var vy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}};var Br=ZU;function wy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:my,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(t||(t=iy()),!t)throw Ur.create("no-options");let s=Za.get(i);if(s){if(Mi(t,s.options)&&Mi(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}let o=new gd(i);for(let u of yy.values())o.addComponent(u);let a=new vy(t,r,o);return Za.set(i,a),a}function Zs(n=my){let e=Za.get(n);if(!e&&n===my&&iy())return wy();if(!e)throw Ur.create("no-app",{appName:n});return e}function vd(){return Array.from(Za.values())}function He(n,e,t){var r;let i=(r=ej[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}jr(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var rj="firebase-heartbeat-database",ij=1,ec="firebase-heartbeat-store",fy=null;function b0(){return fy||(fy=yd(rj,ij,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ec)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ur.create("idb-open",{originalErrorMessage:n.message})})),fy}function sj(n){return m(this,null,function*(){try{let t=(yield b0()).transaction(ec),r=yield t.objectStore(ec).get(D0(n));return yield t.done,r}catch(e){if(e instanceof Ft)Yn.warn(e.message);else{let t=Ur.create("idb-get",{originalErrorMessage:e?.message});Yn.warn(t.message)}}})}function w0(n,e){return m(this,null,function*(){try{let r=(yield b0()).transaction(ec,"readwrite");yield r.objectStore(ec).put(e,D0(n)),yield r.done}catch(t){if(t instanceof Ft)Yn.warn(t.message);else{let r=Ur.create("idb-set",{originalErrorMessage:t?.message});Yn.warn(r.message)}}})}function D0(n){return`${n.name}!${n.options.appId}`}var oj=1024,aj=30*24*60*60*1e3,_y=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Iy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=aj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=E0(),{heartbeatsToSend:r,unsentEntries:i}=cj(this._heartbeatsCache.heartbeats),s=Ja(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Yn.warn(t),""}})}};function E0(){return new Date().toISOString().substring(0,10)}function cj(n,e=oj){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),T0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),T0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Iy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return oy()?l0().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function T0(n){return Ja(JSON.stringify({version:2,heartbeats:n})).length}function uj(n){jr(new Kt("platform-logger",e=>new py(e),"PRIVATE")),jr(new Kt("heartbeat",e=>new _y(e),"PRIVATE")),He(gy,_0,n),He(gy,_0,"esm2017"),He("fire-js","")}uj("");var lj="firebase",dj="10.14.1";He(lj,dj,"app");var ki=new Bn("ANGULARFIRE2_VERSION");function Id(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var nc=(n,e)=>{let t=e?[e]:vd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},to=class{constructor(){return nc(hj)}},hj="app-check";function eo(){}var _d=class{zone;delegate;constructor(e,t=zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Ey=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo)),t.pipe(Ve({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},no=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _d(Zone.current)),this.insideAngular=t.run(()=>new _d(Zone.current,qf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)($(ge))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function fj(n){return wd().ngZone.runOutsideAngular(()=>n())}function Oi(n){return wd().ngZone.run(()=>n())}function pj(n){return gj(wd())(n)}function gj(n){return function(t){return t=t.lift(new Ey(n.ngZone)),t.pipe(vr(n.outsideAngular),yr(n.insideAngular))}}var mj=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Oi(()=>n.apply(void 0,r))},Lt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eo,{},eo,eo))),r[s]=mj(r[s],t));let i=fj(()=>n.apply(this,r));if(!e)if(i instanceof ae){let s=wd();return i.pipe(vr(s.outsideAngular),yr(s.insideAngular))}else return Oi(()=>i);return i instanceof ae?i.pipe(pj):i instanceof Promise?Oi(()=>new Promise((s,o)=>i.then(a=>Oi(()=>s(a)),a=>Oi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Oi(()=>i)};var Xn=class{constructor(e){return e}},Fi=class{constructor(){return vd()}};function yj(n){return n&&n.length===1?n[0]:new Xn(Zs())}var Ty=new B("angularfire2._apps"),vj={provide:Xn,useFactory:yj,deps:[[new Xe,Ty]]},_j={provide:Fi,deps:[[new Xe,Ty]]};function Ij(n){return(e,t)=>{let r=t.get(Gt);He("angularfire",ki.full,"core"),He("angularfire",ki.full,"app"),He("angular",ID.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xn(i)}}function C0(n,...e){return qt([vj,_j,{provide:Ty,useFactory:Ij(n),multi:!0,deps:[ge,_t,no,...e]}])}var A0=Lt(wy,!0);var S0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},wj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},R0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(S0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Dy;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Dy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ej=function(n){let e=S0(n);return R0.encodeByteArray(e,!0)},Ay=function(n){return Ej(n).replace(/\./g,"")},Ed=function(n){try{return R0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bj=()=>Tj().__FIREBASE_DEFAULTS__,Dj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Cj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ed(n[1]);return e&&JSON.parse(e)},Aj=()=>{try{return bj()||Dj()||Cj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var N0=n=>{var e;return(e=Aj())===null||e===void 0?void 0:e[`_${n}`]};function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function M0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function O0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k0(){try{return typeof indexedDB=="object"}catch{return!1}}function F0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Sj="FirebaseError",an=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Sj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zn.prototype.create)}},Zn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Rj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new an(i,a,r)}};function Rj(n,e){return n.replace(Nj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Nj=/\{\$([^}]+)}/g;function L0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ro(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V0(n,e){let t=new Cy(n,e);return t.subscribe.bind(t)}var Cy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Pj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=by),i.error===void 0&&(i.error=by),i.complete===void 0&&(i.complete=by);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Pj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function by(){}var K7=4*60*60*1e3;function rc(n){return n&&n._delegate?n._delegate:n}var er=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mj=[],Se=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Se||{}),xj={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Oj=Se.INFO,kj={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},Fj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=kj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},io=class{constructor(e){this.name=e,this._logLevel=Oj,this._logHandler=Fj,this._userLogHandler=null,Mj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var Ry=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Vj(n){let e=n.getComponent();return e?.type==="VERSION"}var Ny="@firebase/app",U0="0.11.1";var tr=new io("@firebase/app"),Uj="@firebase/app-compat",jj="@firebase/analytics-compat",Bj="@firebase/analytics",$j="@firebase/app-check-compat",Hj="@firebase/app-check",qj="@firebase/auth",zj="@firebase/auth-compat",Gj="@firebase/database",Wj="@firebase/data-connect",Kj="@firebase/database-compat",Qj="@firebase/functions",Yj="@firebase/functions-compat",Jj="@firebase/installations",Xj="@firebase/installations-compat",Zj="@firebase/messaging",e2="@firebase/messaging-compat",t2="@firebase/performance",n2="@firebase/performance-compat",r2="@firebase/remote-config",i2="@firebase/remote-config-compat",s2="@firebase/storage",o2="@firebase/storage-compat",a2="@firebase/firestore",c2="@firebase/vertexai",u2="@firebase/firestore-compat",l2="firebase",d2="11.3.1";var h2={[Ny]:"fire-core",[Uj]:"fire-core-compat",[Bj]:"fire-analytics",[jj]:"fire-analytics-compat",[Hj]:"fire-app-check",[$j]:"fire-app-check-compat",[qj]:"fire-auth",[zj]:"fire-auth-compat",[Gj]:"fire-rtdb",[Wj]:"fire-data-connect",[Kj]:"fire-rtdb-compat",[Qj]:"fire-fn",[Yj]:"fire-fn-compat",[Jj]:"fire-iid",[Xj]:"fire-iid-compat",[Zj]:"fire-fcm",[e2]:"fire-fcm-compat",[t2]:"fire-perf",[n2]:"fire-perf-compat",[r2]:"fire-rc",[i2]:"fire-rc-compat",[s2]:"fire-gcs",[o2]:"fire-gcs-compat",[a2]:"fire-fst",[u2]:"fire-fst-compat",[c2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};var f2=new Map,p2=new Map,j0=new Map;function B0(n,e){try{n.container.addComponent(e)}catch(t){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function oo(n){let e=n.name;if(j0.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;j0.set(e,n);for(let t of f2.values())B0(t,n);for(let t of p2.values())B0(t,n);return!0}function Qt(n){return n==null?!1:n.settings!==void 0}var g2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xy=new Zn("app","Firebase",g2);var ao=d2;function so(n,e,t){var r;let i=(r=h2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}oo(new er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var m2="firebase-heartbeat-database",y2=1,ic="firebase-heartbeat-store",Sy=null;function z0(){return Sy||(Sy=yd(m2,y2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw xy.create("idb-open",{originalErrorMessage:n.message})})),Sy}function v2(n){return m(this,null,function*(){try{let t=(yield z0()).transaction(ic),r=yield t.objectStore(ic).get(G0(n));return yield t.done,r}catch(e){if(e instanceof an)tr.warn(e.message);else{let t=xy.create("idb-get",{originalErrorMessage:e?.message});tr.warn(t.message)}}})}function $0(n,e){return m(this,null,function*(){try{let r=(yield z0()).transaction(ic,"readwrite");yield r.objectStore(ic).put(e,G0(n)),yield r.done}catch(t){if(t instanceof an)tr.warn(t.message);else{let r=xy.create("idb-set",{originalErrorMessage:t?.message});tr.warn(r.message)}}})}function G0(n){return`${n.name}!${n.options.appId}`}var _2=1024,I2=30,Py=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new My(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>I2){let o=E2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=H0(),{heartbeatsToSend:r,unsentEntries:i}=w2(this._heartbeatsCache.heartbeats),s=Ay(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return tr.warn(t),""}})}};function H0(){return new Date().toISOString().substring(0,10)}function w2(n,e=_2){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),q0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),q0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var My=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return k0()?F0().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield v2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return $0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return $0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function q0(n){return Ay(JSON.stringify({version:2,heartbeats:n})).length}function E2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function T2(n){oo(new er("platform-logger",e=>new Ry(e),"PRIVATE")),oo(new er("heartbeat",e=>new Py(e),"PRIVATE")),so(Ny,U0,n),so(Ny,U0,"esm2017"),so("fire-js","")}T2("");function iA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sA=iA,oA=new Zn("auth","Firebase",iA());var Sd=new io("@firebase/auth");function b2(n,...e){Sd.logLevel<=Se.WARN&&Sd.warn(`Auth (${ao}): ${n}`,...e)}function bd(n,...e){Sd.logLevel<=Se.ERROR&&Sd.error(`Auth (${ao}): ${n}`,...e)}function ir(n,...e){throw Yy(n,...e)}function cn(n,...e){return Yy(n,...e)}function Qy(n,e,t){let r=Object.assign(Object.assign({},sA()),{[e]:t});return new Zn("auth","Firebase",r).create(e,{appName:n.name})}function Hr(n){return Qy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aA(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ir(n,"argument-error"),Qy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oA.create(n,...e)}function J(n,e,...t){if(!n)throw Yy(e,...t)}function nr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw bd(e),new Error(e)}function sr(n,e){n||nr(e)}function Fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function D2(){return W0()==="http:"||W0()==="https:"}function W0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function C2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D2()||x0()||"connection"in navigator)?navigator.onLine:!0}function A2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Li=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,sr(t>e,"Short delay should be less than long delay!"),this.isMobile=P0()||O0()}get(){return C2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Jy(n,e){sr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Rd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var S2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var R2=new Li(3e4,6e4);function Xy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ho(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){return cA(n,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ro(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return M0()||(_.referrerPolicy="no-referrer"),Rd.fetch()(uA(n,n.config.apiHost,t,p),_)}))})}function cA(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},S2),e);try{let i=new Ly(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Td(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Td(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Td(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Td(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Qy(n,h,l);ir(n,h)}}catch(i){if(i instanceof an)throw i;ir(n,"network-request-failed",{message:String(i)})}})}function N2(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){let l=yield ho(n,e,t,r,i);return"mfaPendingCredential"in l&&ir(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function uA(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Jy(n.config,i):`${n.config.apiScheme}://${i}`}var Ly=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),R2.get())})}};function Td(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=cn(n,e,r);return i.customData._tokenResponse=t,i}function P2(n,e){return m(this,null,function*(){return ho(n,"POST","/v1/accounts:delete",e)})}function lA(n,e){return m(this,null,function*(){return ho(n,"POST","/v1/accounts:lookup",e)})}function sc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function dA(n,e=!1){return m(this,null,function*(){let t=rc(n),r=yield t.getIdToken(e),i=Zy(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:sc(Oy(i.auth_time)),issuedAtTime:sc(Oy(i.iat)),expirationTime:sc(Oy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Oy(n){return Number(n)*1e3}function Zy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ed(t);return i?JSON.parse(i):(bd("Failed to decode base64 JWT payload"),null)}catch(i){return bd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function K0(n){let e=Zy(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ac(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof an&&M2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function M2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var cc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nd(n){return m(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ac(n,lA(t,{idToken:r}));J(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fA(s.providerUserInfo):[],a=x2(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function hA(n){return m(this,null,function*(){let e=rc(n);yield Nd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function x2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fA(n){return n.map(e=>{var{providerId:t}=e,r=ui(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function O2(n,e){return m(this,null,function*(){let t=yield cA(n,{},()=>m(this,null,function*(){let r=ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=uA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Rd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function k2(n,e){return m(this,null,function*(){return ho(n,"POST","/v2/accounts:revokeToken",Xy(n,e))})}var oc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=K0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield O2(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return nr("not implemented")}};function $r(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var uo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ui(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield ac(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return dA(this,e)}reload(){return hA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Nd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Qt(this.auth.app))return Promise.reject(Hr(this.auth));let e=yield this.getIdToken();return yield ac(this,P2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:Ee,providerData:W,stsTokenManager:T}=t;J(F&&T,e,"internal-error");let v=oc.fromJSON(this.name,T);J(typeof F=="string",e,"internal-error"),$r(p,e.name),$r(y,e.name),J(typeof ee=="boolean",e,"internal-error"),J(typeof Ee=="boolean",e,"internal-error"),$r(_,e.name),$r(A,e.name),$r(R,e.name),$r(N,e.name),$r(O,e.name),$r(z,e.name);let I=new n({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:Ee,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return m(this,null,function*(){let i=new oc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return m(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new oc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var Q0=new Map;function rr(n){sr(n instanceof Function,"Expected a class definition");let e=Q0.get(n);return e?(sr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Q0.set(n,e),e)}var F2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,r){return m(this,null,function*(){this.storage[t]=r})}_get(t){return m(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Uy=F2;function Dd(n,e,t){return`firebase:${n}:${e}:${t}`}var Pd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Dd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(this,null,function*(){if(!t.length)return new n(rr(Uy),e,r);let i=(yield Promise.all(t.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||rr(Uy),o=Dd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=uo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function Y0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_A(e))return"Blackberry";if(IA(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||mA(e))&&!e.includes("edge/"))return"Chrome";if(vA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pA(n=wt()){return/firefox\//i.test(n)}function gA(n=wt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mA(n=wt()){return/crios\//i.test(n)}function yA(n=wt()){return/iemobile/i.test(n)}function vA(n=wt()){return/android/i.test(n)}function _A(n=wt()){return/blackberry/i.test(n)}function IA(n=wt()){return/webos/i.test(n)}function ev(n=wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L2(n=wt()){var e;return ev(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function V2(n=wt()){return ev(n)||vA(n)||IA(n)||_A(n)||/windows phone/i.test(n)||yA(n)}function wA(n,e=[]){let t;switch(n){case"Browser":t=Y0(wt());break;case"Worker":t=`${Y0(wt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ao}/${r}`}var jy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function U2(t){return m(this,arguments,function*(n,e={}){return ho(n,"GET","/v2/passwordPolicy",Xy(n,e))})}var j2=6,By=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:j2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $y=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Md(this),this.idTokenSubscription=new Md(this),this.beforeStateQueue=new jy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Pd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield lA(this,{idToken:e}),r=yield uo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(Qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Nd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=A2()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Qt(this.app))return Promise.reject(Hr(this));let t=e?rc(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Qt(this.app)?Promise.reject(Hr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qt(this.app)?Promise.reject(Hr(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield U2(this),t=new By(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield k2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&rr(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield Pd.create(this,[rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return m(this,null,function*(){var e;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&b2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function hc(n){return rc(n)}var Md=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=V0(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B2(n){tv=n}function $2(n){return tv.loadJS(n)}function H2(){return tv.gapiScript}function EA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function q2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(rr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var uc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,t){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}};function co(n,e){return m(this,null,function*(){return N2(n,"POST","/v1/accounts:signInWithIdp",Xy(n,e))})}var z2="http://localhost",xd=class n extends uc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ui(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return co(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,co(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,co(e,t)}buildRequest(){let e={requestUri:z2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ro(t)}return e}};var lo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Od=class extends lo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ld=(()=>{class n extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return xd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var lc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(this,null,function*(){let s=yield uo._fromIdTokenResponse(e,r,i),o=J0(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=J0(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function J0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Hy=class n extends an{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function TA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hy._fromErrorAndOperation(n,s,e,r):s})}function G2(n,e,t=!1){return m(this,null,function*(){let r=yield ac(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return lc._forOperation(n,"link",r)})}function W2(n,e,t=!1){return m(this,null,function*(){let{auth:r}=n;if(Qt(r.app))return Promise.reject(Hr(r));let i="reauthenticate";try{let s=yield ac(n,TA(r,i,e,n),t);J(s.idToken,r,"internal-error");let o=Zy(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(n.uid===a,r,"user-mismatch"),lc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ir(r,"user-mismatch"),s}})}function K2(n,e,t=!1){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Hr(n));let r="signIn",i=yield TA(n,r,e),s=yield lc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}var X0="__sak";var qy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(X0,"1"),this.storage.removeItem(X0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Q2=(()=>{class n extends qy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),bA=Q2;function DA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}function qr(){return window}function Y2(n){qr().location.href=n}var DQ=EA("rcb"),CQ=new Li(3e4,6e4);function nv(n,e){return e?rr(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dc=class extends uc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function J2(n){return K2(n.auth,new dc(n),n.bypassAuthState)}function X2(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),W2(t,new dc(n),n.bypassAuthState)}function Z2(n){return m(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),G2(t,new dc(n),n.bypassAuthState)})}var kd=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J2;case"linkViaPopup":case"linkViaRedirect":return Z2;case"reauthViaPopup":case"reauthViaRedirect":return X2;default:ir(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var eB=new Li(2e3,1e4);function rv(n,e,t){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(cn(n,"operation-not-supported-in-this-environment"));let r=hc(n);aA(n,e,lo);let i=nv(r,t);return new tB(r,"signInViaPopup",e,i).executeNotNull()})}var tB=(()=>{class n extends kd{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let t=yield this.execute();return J(t,this.auth,"internal-error"),t})}onExecution(){return m(this,null,function*(){sr(this.filter.length===1,"Popup operations only handle one event");let t=DA();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,eB.get())};t()}}n.currentPopupAction=null;return n})(),nB="pendingRedirect",Cd=new Map,zy=class n extends kd{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=Cd.get(this.auth._key());if(!e){try{let r=(yield rB(this.resolver,this.auth))?yield jt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return jt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,jt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function rB(n,e){return m(this,null,function*(){let t=AA(e),r=CA(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function iB(n,e){return m(this,null,function*(){return CA(n)._set(AA(e),"true")})}function sB(n,e){Cd.set(n._key(),e)}function CA(n){return rr(n._redirectPersistence)}function AA(n){return Dd(nB,n.config.apiKey,n.name)}function iv(n,e,t){return oB(n,e,t)}function oB(n,e,t){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Hr(n));let r=hc(n);aA(n,e,lo),yield r._initializationPromise;let i=nv(r,t);return yield iB(i,r),i._openRedirect(r,e,"signInViaRedirect")})}function sv(n,e){return m(this,null,function*(){return yield hc(n)._initializationPromise,SA(n,e,!1)})}function SA(n,e,t=!1){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Hr(n));let r=hc(n),i=nv(r,e),o=yield new zy(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var aB=10*60*1e3,Gy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!RA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(cn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aB&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}};function Z0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RA(n);default:return!1}}function uB(t){return m(this,arguments,function*(n,e={}){return ho(n,"GET","/v1/projects",e)})}var lB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dB=/^https?/;function hB(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uB(n);for(let t of e)try{if(fB(t))return}catch{}ir(n,"unauthorized-domain")})}function fB(n){let e=Fy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!dB.test(t))return!1;if(lB.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var pB=new Li(3e4,6e4);function eA(){let n=qr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gB(n){return new Promise((e,t)=>{var r,i,s;function o(){eA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eA(),t(cn(n,"network-request-failed"))},timeout:pB.get()})}if(!((i=(r=qr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qr().gapi)===null||s===void 0)&&s.load)o();else{let a=EA("iframefcb");return qr()[a]=()=>{gapi.load?o():t(cn(n,"network-request-failed"))},$2(`${H2()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Ad=null,e})}var Ad=null;function mB(n){return Ad=Ad||gB(n),Ad}var yB=new Li(5e3,15e3),vB="__/auth/iframe",_B="emulator/auth/iframe",IB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EB(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Jy(e,_B):`https://${n.config.authDomain}/${vB}`,r={apiKey:e.apiKey,appName:n.name,v:ao},i=wB.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ro(r).slice(1)}`}function TB(n){return m(this,null,function*(){let e=yield mB(n),t=qr().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:EB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IB,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=cn(n,"network-request-failed"),a=qr().setTimeout(()=>{s(o)},yB.get());function u(){qr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var bB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DB=500,CB=600,AB="_blank",SB="http://localhost",Fd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function RB(n,e,t,r=DB,i=CB){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},bB),{width:r.toString(),height:i.toString(),top:s,left:o}),l=wt().toLowerCase();t&&(a=mA(l)?AB:t),pA(l)&&(e=e||SB,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(L2(l)&&a!=="_self")return NB(e||"",a),new Fd(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new Fd(p)}function NB(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var PB="__/auth/handler",MB="emulator/auth/handler",xB=encodeURIComponent("fac");function tA(n,e,t,r,i,s){return m(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ao,eventId:i};if(e instanceof lo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",L0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Od){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${xB}=${encodeURIComponent(u)}`:"";return`${OB(n)}?${ro(a).slice(1)}${l}`})}function OB({config:n}){return n.emulator?Jy(n,MB):`https://${n.authDomain}/${PB}`}var ky="webStorageSupport",Wy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bA,this._completeRedirectFn=SA,this._overrideRedirectResult=sB}_openPopup(e,t,r,i){return m(this,null,function*(){var s;sr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield tA(e,t,r,Fy(),i);return RB(e,o,DA())})}_openRedirect(e,t,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield tA(e,t,r,Fy(),i);return Y2(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(sr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return m(this,null,function*(){let t=yield TB(e),r=new Gy(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ky,{type:ky},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ky];o!==void 0&&t(!!o),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return V2()||gA()||ev()}},Vd=Wy;var nA="@firebase/auth",rA="1.9.0";var Ky=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FB(n){oo(new er("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA(n)},l=new $y(r,i,s,u);return q2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),oo(new er("auth-internal",e=>{let t=hc(e.getProvider("auth").getImmediate());return(r=>new Ky(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),so(nA,rA,kB(n)),so(nA,rA,"esm2017")}var LB=5*60,AQ=N0("authIdTokenMaxAge")||LB;function VB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}B2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=cn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",VB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FB("Browser");function qA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zA=qA,GA=new Qn("auth","Firebase",qA());var qd=new Vr("@firebase/auth");function UB(n,...e){qd.logLevel<=ue.WARN&&qd.warn(`Auth (${Br}): ${n}`,...e)}function jd(n,...e){qd.logLevel<=ue.ERROR&&qd.error(`Auth (${Br}): ${n}`,...e)}function Gr(n,...e){throw Dv(n,...e)}function Ui(n,...e){return Dv(n,...e)}function WA(n,e,t){let r=Object.assign(Object.assign({},zA()),{[e]:t});return new Qn("auth","Firebase",r).create(e,{appName:n.name})}function Vi(n){return WA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return GA.create(n,...e)}function Y(n,e,...t){if(!n)throw Dv(e,...t)}function or(n){let e="INTERNAL ASSERTION FAILED: "+n;throw jd(e),new Error(e)}function Wr(n,e){n||or(e)}function uv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jB(){return NA()==="http:"||NA()==="https:"}function NA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function BB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jB()||o0()||"connection"in navigator)?navigator.onLine:!0}function $B(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ji=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=i0()||a0()}get(){return BB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Cv(n,e){Wr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var zd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var HB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qB=new ji(3e4,6e4);function Av(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function po(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){return KA(n,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Xa(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return s0()||(_.referrerPolicy="no-referrer"),zd.fetch()(QA(n,n.config.apiHost,t,p),_)}))})}function KA(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},HB),e);try{let i=new lv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ud(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ud(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WA(n,h,l);Gr(n,h)}}catch(i){if(i instanceof Ft)throw i;Gr(n,"network-request-failed",{message:String(i)})}})}function zB(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){let l=yield po(n,e,t,r,i);return"mfaPendingCredential"in l&&Gr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function QA(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Cv(n.config,i):`${n.config.apiScheme}://${i}`}var lv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ui(this.auth,"network-request-failed")),qB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ud(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ui(n,e,r);return i.customData._tokenResponse=t,i}function GB(n,e){return m(this,null,function*(){return po(n,"POST","/v1/accounts:delete",e)})}function YA(n,e){return m(this,null,function*(){return po(n,"POST","/v1/accounts:lookup",e)})}function fc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sv(n,e=!1){return m(this,null,function*(){let t=Ke(n),r=yield t.getIdToken(e),i=Rv(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:fc(ov(i.auth_time)),issuedAtTime:fc(ov(i.iat)),expirationTime:fc(ov(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ov(n){return Number(n)*1e3}function Rv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=ny(t);return i?JSON.parse(i):(jd("Failed to decode base64 JWT payload"),null)}catch(i){return jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function PA(n){let e=Rv(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gc(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ft&&WB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function WB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Gd(n){return m(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield gc(n,YA(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?JA(s.providerUserInfo):[],a=KB(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Nv(n){return m(this,null,function*(){let e=Ke(n);yield Gd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JA(n){return n.map(e=>{var{providerId:t}=e,r=ui(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function QB(n,e){return m(this,null,function*(){let t=yield KA(n,{},()=>m(this,null,function*(){let r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=QA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function YB(n,e){return m(this,null,function*(){return po(n,"POST","/v2/accounts:revokeToken",Av(n,e))})}var pc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=PA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield QB(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return or("not implemented")}};function zr(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ui(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield gc(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Sv(this,e)}reload(){return Nv(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Gd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Jn(this.auth.app))return Promise.reject(Vi(this.auth));let e=yield this.getIdToken();return yield gc(this,GB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:Ee,providerData:W,stsTokenManager:T}=t;Y(F&&T,e,"internal-error");let v=pc.fromJSON(this.name,T);Y(typeof F=="string",e,"internal-error"),zr(p,e.name),zr(y,e.name),Y(typeof ee=="boolean",e,"internal-error"),Y(typeof Ee=="boolean",e,"internal-error"),zr(_,e.name),zr(A,e.name),zr(R,e.name),zr(N,e.name),zr(O,e.name),zr(z,e.name);let I=new n({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:Ee,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return m(this,null,function*(){let i=new pc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Gd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return m(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?JA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new pc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var MA=new Map;function ar(n){Wr(n instanceof Function,"Expected a class definition");let e=MA.get(n);return e?(Wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MA.set(n,e),e)}var JB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,r){return m(this,null,function*(){this.storage[t]=r})}_get(t){return m(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),hv=JB;function Bd(n,e,t){return`firebase:${n}:${e}:${t}`}var Wd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Bd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(this,null,function*(){if(!t.length)return new n(ar(hv),e,r);let i=(yield Promise.all(t.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ar(hv),o=Bd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=fo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function xA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rS(e))return"Blackberry";if(iS(e))return"Webos";if(ZA(e))return"Safari";if((e.includes("chrome/")||eS(e))&&!e.includes("edge/"))return"Chrome";if(nS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function XA(n=We()){return/firefox\//i.test(n)}function ZA(n=We()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eS(n=We()){return/crios\//i.test(n)}function tS(n=We()){return/iemobile/i.test(n)}function nS(n=We()){return/android/i.test(n)}function rS(n=We()){return/blackberry/i.test(n)}function iS(n=We()){return/webos/i.test(n)}function Pv(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XB(n=We()){var e;return Pv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZB(){return c0()&&document.documentMode===10}function sS(n=We()){return Pv(n)||nS(n)||iS(n)||rS(n)||/windows phone/i.test(n)||tS(n)}function oS(n,e=[]){let t;switch(n){case"Browser":t=xA(We());break;case"Worker":t=`${xA(We())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Br}/${r}`}var fv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function e$(t){return m(this,arguments,function*(n,e={}){return po(n,"GET","/v2/passwordPolicy",Av(n,e))})}var t$=6,pv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:t$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var gv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kd(this),this.idTokenSubscription=new Kd(this),this.beforeStateQueue=new fv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ar(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Wd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield YA(this,{idToken:e}),r=yield fo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(Jn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Gd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$B()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Jn(this.app))return Promise.reject(Vi(this));let t=e?Ke(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Jn(this.app)?Promise.reject(Vi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Jn(this.app)?Promise.reject(Vi(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield e$(this),t=new pv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield YB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ar(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield Wd.create(this,[ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&UB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Mv(n){return Ke(n)}var Kd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=h0(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n$(n){xv=n}function r$(n){return xv.loadJS(n)}function i$(){return xv.gapiScript}function aS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Ov(n,e){let t=tc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Mi(s,e??{}))return i;Gr(i,"already-initialized")}return t.initialize({options:e})}function s$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ar);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function kv(n,e,t){let r=Mv(n);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=cS(e),{host:o,port:a}=o$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||a$()}function cS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o$(n){let e=cS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:OA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:OA(o)}}}function OA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function a$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};function av(n,e){return m(this,null,function*(){return zB(n,"POST","/v1/accounts:signInWithIdp",Av(n,e))})}var Yd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var mv=class extends Yd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(this,null,function*(){let s=yield fo._fromIdTokenResponse(e,r,i),o=kA(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function kA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var yv=class n extends Ft{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function uS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yv._fromErrorAndOperation(n,s,e,r):s})}function c$(n,e,t=!1){return m(this,null,function*(){let r=yield gc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return yc._forOperation(n,"link",r)})}function u$(n,e,t=!1){return m(this,null,function*(){let{auth:r}=n;if(Jn(r.app))return Promise.reject(Vi(r));let i="reauthenticate";try{let s=yield gc(n,uS(r,i,e,n),t);Y(s.idToken,r,"internal-error");let o=Rv(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(n.uid===a,r,"user-mismatch"),yc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Gr(r,"user-mismatch"),s}})}function l$(n,e,t=!1){return m(this,null,function*(){if(Jn(n.app))return Promise.reject(Vi(n));let r="signIn",i=yield uS(n,r,e),s=yield yc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Fv(n,e,t,r){return Ke(n).onIdTokenChanged(e,t,r)}function Lv(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}function Vv(n,e,t,r){return Ke(n).onAuthStateChanged(e,t,r)}var Jd="__sak";var Xd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var d$=1e3,h$=10,f$=(()=>{class n extends Xd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);ZB()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,h$):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},d$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return m(this,null,function*(){yield jt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return m(this,null,function*(){let r=yield jt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return m(this,null,function*(){yield jt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),lS=f$;var p$=(()=>{class n extends Xd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Uv=p$;function g$(n){return Promise.all(n.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var m$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return m(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield g$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function dS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var vv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=dS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function bn(){return window}function y$(n){bn().location.href=n}function hS(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function v$(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function _$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function I$(){return hS()?self:null}var fS="firebaseLocalStorageDb",w$=1,Zd="firebaseLocalStorage",pS="fbase_key",Bi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function th(n,e){return n.transaction([Zd],e?"readwrite":"readonly").objectStore(Zd)}function E$(){let n=indexedDB.deleteDatabase(fS);return new Bi(n).toPromise()}function _v(){let n=indexedDB.open(fS,w$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Zd,{keyPath:pS})}catch(i){t(i)}}),n.addEventListener("success",()=>m(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Zd)?e(r):(r.close(),yield E$(),e(yield _v()))}))})}function FA(n,e,t){return m(this,null,function*(){let r=th(n,!0).put({[pS]:e,value:t});return new Bi(r).toPromise()})}function T$(n,e){return m(this,null,function*(){let t=th(n,!1).get(e),r=yield new Bi(t).toPromise();return r===void 0?null:r.value})}function LA(n,e){let t=th(n,!0).delete(e);return new Bi(t).toPromise()}var b$=800,D$=3,C$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield _v(),this.db)})}_withRetries(t){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>D$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return hS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=m$._getInstance(I$()),this.receiver._subscribe("keyChanged",(t,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var t,r;if(this.activeServiceWorker=yield v$(),!this.activeServiceWorker)return;this.sender=new vv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||_$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let t=yield _v();return yield FA(t,Jd,"1"),yield LA(t,Jd),!0}catch{}return!1})}_withPendingWrite(t){return m(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>FA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return m(this,null,function*(){let r=yield this._withRetries(i=>T$(i,t));return this.localCache[t]=r,r})}_remove(t){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>LA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return m(this,null,function*(){let t=yield this._withRetries(s=>{let o=th(s,!1).getAll();return new Bi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),b$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),gS=C$;var uJ=aS("rcb"),lJ=new ji(3e4,6e4);function A$(n,e){return e?ar(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var vc=class extends Qd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return av(e,this._buildIdpRequest())}_linkToIdToken(e,t){return av(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return av(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function S$(n){return l$(n.auth,new vc(n),n.bypassAuthState)}function R$(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),u$(t,new vc(n),n.bypassAuthState)}function N$(n){return m(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),c$(t,new vc(n),n.bypassAuthState)})}var Iv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S$;case"linkViaPopup":case"linkViaRedirect":return N$;case"reauthViaPopup":case"reauthViaRedirect":return R$;default:Gr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dJ=new ji(2e3,1e4);var P$="pendingRedirect",$d=new Map,wv=class n extends Iv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=$d.get(this.auth._key());if(!e){try{let r=(yield M$(this.resolver,this.auth))?yield jt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$d.set(this.auth._key(),e)}return this.bypassAuthState||$d.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return jt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,jt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function M$(n,e){return m(this,null,function*(){let t=k$(e),r=O$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function x$(n,e){$d.set(n._key(),e)}function O$(n){return ar(n._redirectPersistence)}function k$(n){return Bd(P$,n.config.apiKey,n.name)}function F$(n,e,t=!1){return m(this,null,function*(){if(Jn(n.app))return Promise.reject(Vi(n));let r=Mv(n),i=A$(r,e),o=yield new wv(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var L$=10*60*1e3,Ev=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ui(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L$&&this.cachedEventUids.clear(),this.cachedEventUids.has(VA(e))}saveEventToCache(e){this.cachedEventUids.add(VA(e)),this.lastProcessedEventTime=Date.now()}};function VA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function V$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(n);default:return!1}}function U$(t){return m(this,arguments,function*(n,e={}){return po(n,"GET","/v1/projects",e)})}var j$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B$=/^https?/;function $$(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield U$(n);for(let t of e)try{if(H$(t))return}catch{}Gr(n,"unauthorized-domain")})}function H$(n){let e=uv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!B$.test(t))return!1;if(j$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var q$=new ji(3e4,6e4);function UA(){let n=bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function z$(n){return new Promise((e,t)=>{var r,i,s;function o(){UA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UA(),t(Ui(n,"network-request-failed"))},timeout:q$.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{let a=aS("iframefcb");return bn()[a]=()=>{gapi.load?o():t(Ui(n,"network-request-failed"))},r$(`${i$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Hd=null,e})}var Hd=null;function G$(n){return Hd=Hd||z$(n),Hd}var W$=new ji(5e3,15e3),K$="__/auth/iframe",Q$="emulator/auth/iframe",Y$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X$(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Cv(e,Q$):`https://${n.config.authDomain}/${K$}`,r={apiKey:e.apiKey,appName:n.name,v:Br},i=J$.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Xa(r).slice(1)}`}function Z$(n){return m(this,null,function*(){let e=yield G$(n),t=bn().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:X$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y$,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Ui(n,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},W$.get());function u(){bn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var eH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tH=500,nH=600,rH="_blank",iH="http://localhost",eh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sH(n,e,t,r=tH,i=nH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},eH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=We().toLowerCase();t&&(a=eS(l)?rH:t),XA(l)&&(e=e||iH,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(XB(l)&&a!=="_self")return oH(e||"",a),new eh(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new eh(p)}function oH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var aH="__/auth/handler",cH="emulator/auth/handler",uH=encodeURIComponent("fac");function jA(n,e,t,r,i,s){return m(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Br,eventId:i};if(e instanceof Yd){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",d0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof mv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${uH}=${encodeURIComponent(u)}`:"";return`${lH(n)}?${Xa(a).slice(1)}${l}`})}function lH({config:n}){return n.emulator?Cv(n,cH):`https://${n.authDomain}/${aH}`}var cv="webStorageSupport",Tv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uv,this._completeRedirectFn=F$,this._overrideRedirectResult=x$}_openPopup(e,t,r,i){return m(this,null,function*(){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield jA(e,t,r,uv(),i);return sH(e,o,dS())})}_openRedirect(e,t,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield jA(e,t,r,uv(),i);return y$(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return m(this,null,function*(){let t=yield Z$(e),r=new Ev(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cv,{type:cv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[cv];o!==void 0&&t(!!o),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sS()||ZA()||Pv()}},yS=Tv;var BA="@firebase/auth",$A="1.7.9";var bv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hH(n){jr(new Kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oS(n)},l=new gv(r,i,s,u);return s$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jr(new Kt("auth-internal",e=>{let t=Mv(e.getProvider("auth").getImmediate());return(r=>new bv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(BA,$A,dH(n)),He(BA,$A,"esm2017")}var fH=5*60,pH=sy("authIdTokenMaxAge")||fH,HA=null,gH=n=>e=>m(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pH)return;let i=t?.token;HA!==i&&(HA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jv(n=Zs()){let e=tc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ov(n,{popupRedirectResolver:yS,persistence:[gS,lS,Uv]}),r=sy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=gH(s.toString());Lv(t,o,()=>o(t.currentUser)),Fv(t,a=>o(a))}}let i=ry("auth");return i&&kv(t,`http://${i}`),t}function mH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}n$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Ui("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hH("Browser");var vS="auth",un=class{constructor(e){return e}},_c=class{constructor(){return nc(vS)}};var Bv=new B("angularfire2.auth-instances");function uq(n,e){let t=Id(vS,n,e);return t&&new un(t)}function lq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new un(r)}}var dq={provide:_c,deps:[[new Xe,Bv]]},hq={provide:un,useFactory:uq,deps:[[new Xe,Bv],Xn]};function _S(n,...e){return He("angularfire",ki.full,"auth"),qt([hq,dq,{provide:Bv,useFactory:lq(n),multi:!0,deps:[ge,_t,no,Fi,[new Xe,to],...e]}])}var IS=Lt(jv,!0);var wS=Lt(Vv,!0);var ES=()=>{let n=M(un),e=M(Rt);return new Promise(t=>{wS(n,r=>{r?(console.log("\u2705 User is logged in:",r.email),t(!0)):(console.log("\u274C User is NOT logged in, redirecting..."),e.navigate(["/auth"]),t(!1))})})};var TS=(()=>{class n{constructor(t){this.router=t,this.auth=M(un),this.allowedUsers=["bartos.jan454@gmail.com","peterbartos17@gmail.com","pavolbartos411@gmail.com","veronika.bartosova26@gmail.com","jan.bartos051@gmail.com"]}setAuthStateChangeListener(t){this.auth.onAuthStateChanged(r=>m(this,null,function*(){console.log("h1",r,t.feedbackMessage),yield this.handleRedirectSignIn()}))}signinWithRedirect(){let t=new Ld;try{return iv(this.auth,t,Vd),{status:!0,msg:"Prebieha presmerovanie na prihl\xE1senie",color:"blue"}}catch(r){return console.error("Error starting Google login redirect:",r),{status:!1,msg:"Chyba pri presmerovan\xED, sk\xFAs to znova",color:"red"}}}handleRedirectSignIn(){return m(this,null,function*(){return sv(this.auth).then(t=>{if(console.log(t),t){let r=t.user;return this.allowedUsers.includes(r.email??"")?(console.log("Logged in successfully with Google:",r),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie!",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Neautorizovan\xE1 emailov\xE1 adresa!",color:"red"})}else return{status:!1,msg:"\u017Diadny v\xFDsledok prihl\xE1senia sa nena\u0161iel",color:"gray"}}).catch(t=>(console.error("Error handling login redirect:",t),{status:!1,msg:"Chyba pri prihlasovan\xED, sk\xFAs to znova",color:"red"}))})}signInWithPopup(){return m(this,null,function*(){let t=new Ld;try{let i=(yield rv(this.auth,t,Vd)).user;return this.allowedUsers.includes(i.email??"")?(console.log("Logged in successfully with Google!"),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Nepovolen\xE1 emailov\xE1 adresa",color:"red"})}catch(r){return r.code==="auth/cancelled-popup-request"?(console.log("User closed the popup!"),{status:!1,msg:"Prihlasovacie okno bolo zatvoren\xE9, sk\xFAs to znova",color:"red"}):(console.error("Error logging in with Google:",r),{status:!1,msg:"Pri prihlasovan\xED do\u0161lo k chybe, sk\xFAs to znova",color:"red"})}})}logOut(){return m(this,null,function*(){try{yield this.auth.signOut(),console.log("Logged out successfully"),this.router.navigate(["/auth"])}catch(t){console.error("Error logging out:",t)}})}getCurrentUser(){return this.auth.currentUser}static{this.\u0275fac=function(r){return new(r||n)($(Rt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bS=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.feedbackMessage="Pri prihlasovan\xED vysko\u010D\xED okno pre prihlasovanie, je potrebn\xE9 povoli\u0165 vyskakovacie okn\xE1 v prehliada\u010Di",this.feedbackMessageColor="gray"}signIn(){return m(this,null,function*(){let t=yield this.authService.signInWithPopup();this.feedbackMessage=t.msg,this.feedbackMessageColor=t.color,t.status&&this.router.navigate(["/"])})}static{this.\u0275fac=function(r){return new(r||n)(_e(TS),_e(Rt))}}static{this.\u0275cmp=Ar({type:n,selectors:[["app-login"]],decls:10,vars:3,consts:[[1,"login-container"],[1,"login-h"],[1,"error-message"],[3,"click"],[1,"login-subtext"]],template:function(r,i){r&1&&(Ce(0,"div",0)(1,"h2",1),ze(2,"Prihl\xE1si\u0165 sa \u27A1\uFE0F\u{1F513}"),Ae(),Ce(3,"div",2),ze(4),Ae(),Ce(5,"button",3),It("click",function(){return i.signIn()}),ze(6,"cez Gmail \u{1F4E7}"),Ae(),Ce(7,"div",4)(8,"span"),ze(9,"Potrebn\xE9 pre overenie toto\u017Enosti, \u017Ee si Barto\u0161 \u{1F609}"),Ae()()()),r&2&&(je(3),Sl("color",i.feedbackMessageColor),je(),Mr(" ",i.feedbackMessage," "))},styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto auto;padding:20px;background:#f9f9f9;box-shadow:0 2px 4px #0000001a;border-radius:8px;text-align:center}button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#357ae8}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-bottom:20px}.login-subtext[_ngcontent-%COMP%]{margin-top:20px;color:gray}.login-h[_ngcontent-%COMP%]{color:#357ae8}"]})}}return n})();var DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CS={};var Kr,$v;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(E,b,C){for(var w=Array(arguments.length-2),On=2;On<arguments.length;On++)w[On-2]=arguments[On];return v.prototype[b].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)E[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var C=T.g[3],w=v+(C^I&(b^C))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[1]+3905402710&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[2]+606105819&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[5]+1200080426&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[6]+2821735955&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[9]+2336552879&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[10]+4294925233&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[13]+4254626195&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[14]+2792965006&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^C&(I^b))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[6]+3225465664&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[11]+643717713&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[10]+38016083&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[15]+3634488961&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[14]+3275163606&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[3]+4107603335&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[2]+4243563512&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[7]+1735328473&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^C)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[8]+2272392833&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[11]+1839030562&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[4]+1272893353&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[7]+4139469664&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[0]+3936430074&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[3]+3572445317&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[12]+3873151461&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[15]+530742520&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~C))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[7]+1126891415&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[14]+2878612391&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[3]+2399980690&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[10]+4293915773&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[15]+4264355552&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[6]+2734768916&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[11]+3174756917&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[2]+718787259&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,E=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(E[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,E),b=0;break}}else for(;C<v;)if(E[b++]=T[C++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)T[I++]=this.g[v]>>>E&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],E=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;E&&C==v||(I[b]=C,E=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,E=0;T>=I;E++)v[E]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),y=u(1),_=u(16777216);n=o.prototype,n.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);T+=(0<=E?E:4294967296+E)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,E="";;){var b=ee(I,v).g;I=O(I,b.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,A(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=O(this,T),R(T)?-1:A(T)?0:1};function N(T){for(var v=T.g.length,I=[],E=0;E<v;E++)I[E]=~T.g[E];return new o(I,~T.h).add(y)}n.abs=function(){return R(this)?N(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0,b=0;b<=v;b++){var C=E+(this.i(b)&65535)+(T.i(b)&65535),w=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);E=w>>>16,C&=65535,w&=65535,I[b]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(N(v))}n.j=function(T){if(A(this)||A(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<T.g.length;b++){var C=this.i(E)>>>16,w=this.i(E)&65535,On=T.i(b)>>>16,Uo=T.i(b)&65535;I[2*E+2*b]+=w*Uo,z(I,2*E+2*b),I[2*E+2*b+1]+=C*Uo,z(I,2*E+2*b+1),I[2*E+2*b+1]+=w*On,z(I,2*E+2*b+1),I[2*E+2*b+2]+=C*On,z(I,2*E+2*b+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function z(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function F(T,v){this.g=T,this.h=v}function ee(T,v){if(A(v))throw Error("division by zero");if(A(T))return new F(p,p);if(R(T))return v=ee(N(T),v),new F(N(v.g),N(v.h));if(R(v))return v=ee(T,N(v)),new F(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,E=v;0>=E.l(T);)I=Ee(I),E=Ee(E);var b=W(I,1),C=W(E,1);for(E=W(E,2),I=W(I,2);!A(E);){var w=C.add(E);0>=w.l(T)&&(b=b.add(I),C=w),E=W(E,1),I=W(I,1)}return v=O(T,b.j(v)),new F(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),w=C.j(v);R(w)||0<w.l(T);)I-=E,C=l(I),w=C.j(v);A(C)&&(C=y),b=b.add(C),T=O(T,w)}return new F(b,T)}n.A=function(T){return ee(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function Ee(T){for(var v=T.g.length+1,I=[],E=0;E<v;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function W(T,v){var I=v>>5;v%=32;for(var E=T.g.length-I,b=[],C=0;C<E;C++)b[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$v=CS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Kr=CS.Integer=o}).apply(typeof DS<"u"?DS:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr={};var Hv,pq,go,qv,Ic,rh,zv,Gv,Wv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,S){for(var k=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)k[Te-2]=arguments[Te];return d.prototype[D].apply(g,k)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,S=g.length||0;c.length=D+S;for(let k=0;k<S;k++)c[D+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var Ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function W(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let S=0;S<I.length;S++)f=I[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function w(){var c=rf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class On{constructor(){this.h=this.g=null}add(d,f){let g=Uo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Uo=new O(()=>new KN,c=>c.reset());class KN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let jo,Bo=!1,rf=new On,nw=()=>{let c=a.Promise.resolve(void 0);jo=()=>{c.then(QN)}};var QN=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){C(f)}var d=Uo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Bo=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var YN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function $o(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ee){e:{try{ee(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&$o.aa.h.call(this)}}A($o,et);var JN={2:"touch",3:"pen",4:"mouse"};$o.prototype.h=function(){$o.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ho="closure_listenable_"+(1e6*Math.random()|0),XN=0;function ZN(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++XN,this.da=this.fa=!1}function zc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gc(c){this.src=c,this.g={},this.h=0}Gc.prototype.add=function(c,d,f,g,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var k=of(c,d,g,D);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new ZN(d,this.src,S,!!g,D),d.fa=f,c.push(d)),d};function sf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(zc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function of(c,d,f,g){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var af="closure_lm_"+(1e6*Math.random()|0),cf={};function rw(c,d,f,g,D){if(g&&g.once)return sw(c,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)rw(c,d[S],f,g,D);return null}return f=hf(f),c&&c[Ho]?c.K(d,f,l(g)?!!g.capture:!!g,D):iw(c,d,f,!1,g,D)}function iw(c,d,f,g,D,S){if(!d)throw Error("Invalid event type");var k=l(D)?!!D.capture:!!D,Te=lf(c);if(Te||(c[af]=Te=new Gc(c)),f=Te.add(d,f,g,k,S),f.proxy)return f;if(g=eP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)YN||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(aw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function eP(){function c(f){return d.call(c.src,c.listener,f)}let d=tP;return c}function sw(c,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)sw(c,d[S],f,g,D);return null}return f=hf(f),c&&c[Ho]?c.L(d,f,l(g)?!!g.capture:!!g,D):iw(c,d,f,!0,g,D)}function ow(c,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)ow(c,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=hf(f),c&&c[Ho]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=of(S,f,g,D),-1<f&&(zc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=lf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=of(d,f,g,D)),(f=-1<c?d[c]:null)&&uf(f))}function uf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ho])sf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(aw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=lf(d))?(sf(f,c),f.h==0&&(f.src=null,d[af]=null)):zc(c)}}}function aw(c){return c in cf?cf[c]:cf[c]="on"+c}function tP(c,d){if(c.da)c=!0;else{d=new $o(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&uf(c),c=f.call(g,d)}return c}function lf(c){return c=c[af],c instanceof Gc?c:null}var df="__closure_events_fn_"+(1e9*Math.random()>>>0);function hf(c){return typeof c=="function"?c:(c[df]||(c[df]=function(d){return c.handleEvent(d)}),c[df])}function tt(){hr.call(this),this.i=new Gc(this),this.M=this,this.F=null}A(tt,hr),tt.prototype[Ho]=!0,tt.prototype.removeEventListener=function(c,d,f,g){ow(this,c,d,f,g)};function ft(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var D=d;d=new et(g,c),E(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var k=d.g=f[S];D=Wc(k,g,!0,d)&&D}if(k=d.g=c,D=Wc(k,g,!0,d)&&D,D=Wc(k,g,!1,d)&&D,f)for(S=0;S<f.length;S++)k=d.g=f[S],D=Wc(k,g,!1,d)&&D}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)zc(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Wc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var k=d[S];if(k&&!k.da&&k.capture==f){var Te=k.listener,Ye=k.ha||k.src;k.fa&&sf(c.i,k),D=Te.call(Ye,g)!==!1&&D}}return D&&!g.defaultPrevented}function cw(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function uw(c){c.g=cw(()=>{c.g=null,c.i&&(c.i=!1,uw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nP extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(c){hr.call(this),this.h=c,this.g={}}A(qo,hr);var lw=[];function dw(c){W(c.g,function(d,f){this.g.hasOwnProperty(f)&&uf(d)},c),c.g={}}qo.prototype.N=function(){qo.aa.N.call(this),dw(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ff=a.JSON.stringify,rP=a.JSON.parse,iP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function pf(){}pf.prototype.h=null;function hw(c){return c.h||(c.h=c.i())}function fw(){}var zo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gf(){et.call(this,"d")}A(gf,et);function mf(){et.call(this,"c")}A(mf,et);var ti={},pw=null;function Kc(){return pw=pw||new tt}ti.La="serverreachability";function gw(c){et.call(this,ti.La,c)}A(gw,et);function Go(c){let d=Kc();ft(d,new gw(d))}ti.STAT_EVENT="statevent";function mw(c,d){et.call(this,ti.STAT_EVENT,c),this.stat=d}A(mw,et);function pt(c){let d=Kc();ft(d,new mw(d,c))}ti.Ma="timingevent";function yw(c,d){et.call(this,ti.Ma,c),this.size=d}A(yw,et);function Wo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ko(){this.g=!0}Ko.prototype.xa=function(){this.g=!1};function sP(c,d,f,g,D,S){c.info(function(){if(c.g)if(S)for(var k="",Te=S.split("&"),Ye=0;Ye<Te.length;Ye++){var pe=Te[Ye].split("=");if(1<pe.length){var nt=pe[0];pe=pe[1];var rt=nt.split("_");k=2<=rt.length&&rt[1]=="type"?k+(nt+"="+pe+"&"):k+(nt+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+k})}function oP(c,d,f,g,D,S,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+k})}function es(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cP(c,f)+(g?" "+g:"")})}function aP(c,d){c.info(function(){return"TIMEOUT: "+d})}Ko.prototype.info=function(){};function cP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<D.length;k++)D[k]=""}}}}return ff(f)}catch{return d}}var Qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yf;function Yc(){}A(Yc,pf),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},yf=new Yc;function fr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _w}function _w(){this.i=null,this.g="",this.h=!1}var Iw={},vf={};function _f(c,d,f){c.L=1,c.v=eu(kn(d)),c.m=f,c.P=!0,ww(c,null)}function ww(c,d){c.F=Date.now(),Jc(c),c.A=kn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),kw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new _w,c.g=Zw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new nP(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(lw[0]=D.toString()),D=lw);for(var S=0;S<D.length;S++){var k=rw(f,D[S],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Go(),sP(c.i,c.u,c.A,c.l,c.R,c.m)}fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Fn(c)==3?d.j():this.Y(c)},fr.prototype.Y=function(c){try{if(c==this.g)e:{let rt=Fn(this.g);var d=this.g.Ba();let rs=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||$w(this.g)))){this.J||rt!=4||d==7||(d==8||0>=rs?Go(3):Go(2)),If(this);var f=this.g.Z();this.X=f;t:if(Ew(this)){var g=$w(this.g);c="";var D=g.length,S=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Qo(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,oP(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Ye=this.g;if((Te=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Te)){var pe=Te;break t}}pe=null}if(f=pe)es(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wf(this,f);else{this.o=!1,this.s=3,pt(12),ni(this),Qo(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<k.length;)if(Jt=uP(this,k),Jt==vf){rt==4&&(this.s=4,pt(14),f=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Iw){this.s=4,pt(15),es(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else es(this.i,this.l,Jt,null),wf(this,Jt);if(Ew(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||k.length!=0||this.h.h||(this.s=1,pt(16),f=!1),this.o=this.o&&f,!f)es(this.i,this.l,k,"[Invalid Chunked Response]"),ni(this),Qo(this);else if(0<k.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Af(nt),nt.M=!0,pt(11))}}else es(this.i,this.l,k,null),wf(this,k);rt==4&&ni(this),this.o&&!this.J&&(rt==4?Qw(this.j,this):(this.o=!1,Jc(this)))}else CP(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),ni(this),Qo(this)}}}catch{}finally{}};function Ew(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function uP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?vf:(f=Number(d.substring(f,g)),isNaN(f)?Iw:(g+=1,g+f>d.length?vf:(d=d.slice(g,g+f),c.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,ni(this)};function Jc(c){c.S=Date.now()+c.I,Tw(c,c.I)}function Tw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wo(y(c.ba,c),d)}function If(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(aP(this.i,this.A),this.L!=2&&(Go(),pt(17)),ni(this),this.s=2,Qo(this)):Tw(this,this.S-c)};function Qo(c){c.j.G==0||c.J||Qw(c.j,c)}function ni(c){If(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,dw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function wf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Ef(f.h,c))){if(!c.K&&Ef(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)su(f),ru(f);else break e;Cf(f),pt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Wo(y(f.Za,f),6e3));if(1>=Cw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((c.K||f.g==c)&&su(f),!z(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let pe=D[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let nt=pe[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=pe[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let rs=pe[5];rs!=null&&typeof rs=="number"&&0<rs&&(g=1.5*rs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Jt=c.g;if(Jt){let au=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(au){var S=g.h;S.g||au.indexOf("spdy")==-1&&au.indexOf("quic")==-1&&au.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Tf(S,S.h),S.h=null))}if(g.D){let Sf=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Sf&&(g.ya=Sf,Re(g.I,g.D,Sf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=Xw(g,g.J?g.ia:null,g.W),k.K){Aw(g.h,k);var Te=k,Ye=g.L;Ye&&(Te.I=Ye),Te.B&&(If(Te),Jc(Te)),g.g=k}else Ww(g);0<f.i.length&&iu(f)}else pe[0]!="stop"&&pe[0]!="close"||ii(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ii(f,7):Df(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Go(4)}catch{}}var lP=class{constructor(c,d){this.g=c,this.map=d}};function bw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cw(c){return c.h?1:c.g?c.g.size:0}function Ef(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Tf(c,d){c.g?c.g.add(d):c.h=d}function Aw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}bw.prototype.cancel=function(){if(this.i=Sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Sw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function dP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function hP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Rw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=hP(c),g=dP(c),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],c)}var Nw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var S=c[f].substring(0,g);D=c[f].substring(g+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,Xc(this,c.j),this.o=c.o,this.g=c.g,Zc(this,c.s),this.l=c.l;var d=c.i,f=new Xo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Pw(this,f),this.m=c.m}else c&&(d=String(c).match(Nw))?(this.h=!1,Xc(this,d[1]||"",!0),this.o=Yo(d[2]||""),this.g=Yo(d[3]||"",!0),Zc(this,d[4]),this.l=Yo(d[5]||"",!0),Pw(this,d[6]||"",!0),this.m=Yo(d[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Jo(d,Mw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Jo(d,Mw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Jo(f,f.charAt(0)=="/"?mP:gP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Jo(f,vP)),c.join("")};function kn(c){return new ri(c)}function Xc(c,d,f){c.j=f?Yo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Pw(c,d,f){d instanceof Xo?(c.i=d,_P(c.i,c.h)):(f||(d=Jo(d,yP)),c.i=new Xo(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function eu(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Yo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Jo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,pP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Mw=/[#\/\?@]/g,gP=/[#\?:]/g,mP=/[#\?]/g,yP=/[#\?@]/g,vP=/#/g;function Xo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&fP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Xo.prototype,n.add=function(c,d){pr(this),this.i=null,c=ts(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function xw(c,d){pr(c),d=ts(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ow(c,d){return pr(c),d=ts(c,d),c.g.has(d)}n.forEach=function(c,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},n.V=function(c){pr(this);let d=[];if(typeof c=="string")Ow(this,c)&&(d=d.concat(this.g.get(ts(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return pr(this),this.i=null,c=ts(this,c),Ow(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function kw(c,d,f){xw(c,d),0<f.length&&(c.i=null,c.g.set(ts(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var D=S;k[g]!==""&&(D+="="+encodeURIComponent(String(k[g]))),c.push(D)}}return this.i=c.join("&")};function ts(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function _P(c,d){d&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(xw(this,g),kw(this,D,f))},c)),c.j=d}function IP(c,d){let f=new Ko;if(a.Image){let g=new Image;g.onload=_(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function wP(c,d){let f=new Ko,g=new AbortController,D=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),gr(f,"TestPingServer: error",!1,d)})}function gr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function EP(){this.g=new iP}function TP(c,d,f){let g=f||"";try{Rw(c,function(D,S){let k=D;l(D)&&(k=ff(D)),d.push(g+S+"="+encodeURIComponent(k))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Zo(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Zo,pf),Zo.prototype.g=function(){return new tu(this.l,this.j)},Zo.prototype.i=function(c){return function(){return c}}({});function tu(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(tu,tt),n=tu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ta(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ea(this):ta(this),this.readyState==3&&Fw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ea(this))},n.Qa=function(c){this.g&&(this.response=c,ea(this))},n.ga=function(){this.g&&ea(this)};function ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ta(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ta(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lw(c){let d="";return W(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function bf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Lw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Me(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,tt);var bP=/^https?$/i,DP=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yf.g(),this.v=this.o?hw(this.o):hw(yf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Vw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DP,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of f)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Vw(this,S)}};function Vw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Uw(c),nu(c)}function Uw(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),nu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nu(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jw(this):this.bb())},n.bb=function(){jw(this)};function jw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)cw(c.Ea,0,c);else if(ft(c,"readystatechange"),Fn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var D=String(c.D).match(Nw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!bP.test(D?D.toLowerCase():"")}f=g}if(f)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var S=2<Fn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",Uw(c)}}finally{nu(c)}}}}function nu(c,d){if(c.g){Bw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ft(c,"ready");try{f.onreadystatechange=g}catch{}}}function Bw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rP(d)}};function $w(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function CP(c){let d={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Hw(c){this.Aa=0,this.i=[],this.j=new Ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,c),this.cb=na("retryDelaySeedMs",1e4,c),this.Wa=na("forwardChannelMaxRetries",2,c),this.wa=na("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bw(c&&c.concurrentRequestLimit),this.Da=new EP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Hw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){pt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Xw(this,null,this.W),iu(this)};function Df(c){if(qw(c),c.G==3){var d=c.U++,f=kn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),ra(c,f),d=new fr(c,c.j,d),d.L=2,d.v=eu(kn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Zw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Jc(d)}Jw(c)}function ru(c){c.g&&(Af(c),c.g.cancel(),c.g=null)}function qw(c){ru(c),c.u&&(a.clearTimeout(c.u),c.u=null),su(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function iu(c){if(!Dw(c.h)&&!c.s){c.s=!0;var d=c.Ga;jo||nw(),Bo||(jo(),Bo=!0),rf.add(d,c),c.B=0}}function AP(c,d){return Cw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wo(y(c.Ga,c,d),Yw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new fr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Gw(this,D,d),f=kn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),ra(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Lw(S)))+"&"+d:this.m&&bf(f,this.m,S)),Tf(this.h,D),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),D.T=!0,_f(D,f,null)):_f(D,f,d),this.G=2}}else this.G==3&&(c?zw(this,c):this.i.length==0||Dw(this.h)||zw(this))};function zw(c,d){var f;d?f=d.l:f=c.U++;let g=kn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),ra(c,g),c.m&&c.o&&bf(g,c.m,c.o),f=new fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Gw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Tf(c.h,f),_f(f,g,d)}function ra(c,d){c.H&&W(c.H,function(f,g){Re(d,g,f)}),c.l&&Rw({},function(f,g){Re(d,g,f)})}function Gw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let k=["count="+f];S==-1?0<f?(S=D[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let Te=!0;for(let Ye=0;Ye<f;Ye++){let pe=D[Ye].g,nt=D[Ye].map;if(pe-=S,0>pe)S=Math.max(0,D[Ye].g-100),Te=!1;else try{TP(nt,k,"req"+pe+"_")}catch{g&&g(nt)}}if(Te){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Ww(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;jo||nw(),Bo||(jo(),Bo=!0),rf.add(d,c),c.v=0}}function Cf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wo(y(c.Fa,c),Yw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Kw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wo(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),ru(this),Kw(this))};function Af(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Kw(c){c.g=new fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=kn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),ra(c,d),c.m&&c.o&&bf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=eu(kn(d)),f.m=null,f.P=!0,ww(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ru(this),Cf(this),pt(19))};function su(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Qw(c,d){var f=null;if(c.g==d){su(c),Af(c),c.g=null;var g=2}else if(Ef(c.h,d))f=d.D,Aw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Kc(),ft(g,new yw(g,f)),iu(c)}else Ww(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&AP(c,d)||g==2&&Cf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function Yw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let D=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xc(g,"https"),eu(g),D?IP(g.toString(),f):wP(g.toString(),f)}else pt(2);c.G=0,c.l&&c.l.sa(d),Jw(c),qw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Jw(c){if(c.G=0,c.ka=[],c.l){let d=Sw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Xw(c,d,f){var g=f instanceof ri?kn(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zc(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new ri(null);g&&Xc(S,g),d&&(S.g=d),D&&Zc(S,D),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),ra(c,g),g}function Zw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Zo({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eE(){}n=eE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ou(){}ou.prototype.g=function(c,d){return new Nt(c,d)};function Nt(c,d){tt.call(this),this.g=new Hw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ns(this)}A(Nt,tt),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Df(this.g)},Nt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ff(c),c=f);d.i.push(new lP(d.Ya++,c)),d.G==3&&iu(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Df(this.g),delete this.g,Nt.aa.N.call(this)};function tE(c){gf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(tE,gf);function nE(){mf.call(this),this.status=1}A(nE,mf);function ns(c){this.g=c}A(ns,eE),ns.prototype.ua=function(){ft(this.g,"a")},ns.prototype.ta=function(c){ft(this.g,new tE(c))},ns.prototype.sa=function(c){ft(this.g,new nE)},ns.prototype.ra=function(){ft(this.g,"b")},ou.prototype.createWebChannel=ou.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Wv=cr.createWebChannelTransport=function(){return new ou},Gv=cr.getStatEventTarget=function(){return Kc()},zv=cr.Event=ti,rh=cr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,Ic=cr.ErrorCode=Qc,vw.COMPLETE="complete",qv=cr.EventType=vw,fw.EventType=zo,zo.OPEN="a",zo.CLOSE="b",zo.ERROR="c",zo.MESSAGE="d",tt.prototype.listen=tt.prototype.K,go=cr.WebChannel=fw,pq=cr.FetchXmlHttpFactory=Zo,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Hv=cr.XhrIo=Me}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});var AS="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Fo="10.14.0";var zi=new Vr("@firebase/firestore");function wc(){return zi.logLevel}function V(n,...e){if(zi.logLevel<=ue.DEBUG){let t=e.map(SI);zi.debug(`Firestore (${Fo}): ${n}`,...t)}}function ur(n,...e){if(zi.logLevel<=ue.ERROR){let t=e.map(SI);zi.error(`Firestore (${Fo}): ${n}`,...t)}}function Eo(n,...e){if(zi.logLevel<=ue.WARN){let t=e.map(SI);zi.warn(`Firestore (${Fo}): ${n}`,...t)}}function SI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function Ie(n,e){n||K()}function X(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ch=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},Zv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},e_=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new ch(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Qe(e)}},t_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},n_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new t_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},r_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},i_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ie(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string"),this.R=t.token,new r_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var uh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function To(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ze(0,0))}static max(){return new n(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},xe=class n extends lh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},mq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class n extends lh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return mq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};var s_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};s_.UNKNOWN_ID=-1;function yq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ze(t+1,0):new Ze(t,r));return new Gi(i,q.empty(),e)}function vq(n){return new Gi(n.readTime,n.key,-1)}var Gi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),q.empty(),-1)}static max(){return new n(te.max(),q.empty(),-1)}};function _q(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var Iq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",o_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vc(n){return m(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==Iq)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function wq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uc(n){return n.name==="IndexedDbTransactionError"}var sR=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function $h(n){return n==null}function Ac(n){return n===0&&1/n==-1/0}function Eq(n){return typeof n=="number"&&Number.isInteger(n)&&!Ac(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Tq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wX=[...Tq,"documentOverlays"],bq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dq=bq,Cq=[...Dq,"indexConfiguration","indexState","indexEntries"];var EX=[...Cq,"globals"];function SS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},An=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,s){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dt=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dh(this.data.getIterator())}getIteratorFrom(e){return new dh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yt=class n{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new n([])}unionWith(e){let t=new dt(Ut.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ht=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var Aq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(n){if(Ie(!!n),typeof n=="string"){let e=0,t=Aq.exec(n);if(Ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jr(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}function RI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function NI(n){let e=n.mapValue.fields.__previous_value__;return RI(e)?NI(e):e}function Sc(n){let e=lr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}var a_=class{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},fh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ih={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RI(n)?4:cR(n)?9007199254740991:aR(n)?10:11:K()}function Pn(n,e){if(n===e)return!0;let t=Wi(n);if(t!==Wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sc(n).isEqual(Sc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=lr(i.timestampValue),a=lr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Jr(i.bytesValue).isEqual(Jr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Pe(i.geoPointValue.latitude)===Pe(s.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pe(i.integerValue)===Pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Pe(i.doubleValue),a=Pe(s.doubleValue);return o===a?Ac(o)===Ac(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return To(n.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(SS(o)!==SS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Pn(o[u],a[u])))return!1;return!0}(n,e);default:return K()}}function Rc(n,e){return(n.values||[]).find(t=>Pn(t,e))!==void 0}function bo(n,e){if(n===e)return 0;let t=Wi(n),r=Wi(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Pe(s.integerValue||s.doubleValue),u=Pe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RS(n.timestampValue,e.timestampValue);case 4:return RS(Sc(n),Sc(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Jr(s),u=Jr(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=me(Pe(s.latitude),Pe(o.latitude));return a!==0?a:me(Pe(s.longitude),Pe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NS(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=me(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:NS(_,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ih.mapValue&&o===ih.mapValue)return 0;if(s===ih.mapValue)return 1;if(o===ih.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=me(u[p],h[p]);if(y!==0)return y;let _=bo(a[u[p]],l[h[p]]);if(_!==0)return _}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function RS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=lr(n),r=lr(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function NS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=bo(t[i],r[i]);if(s)return s}return me(t.length,r.length)}function Do(n){return c_(n)}function c_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=lr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Jr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=c_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${c_(t.fields[o])}`;return i+"}"}(n.mapValue):K()}function u_(n){return!!n&&"integerValue"in n}function PI(n){return!!n&&"arrayValue"in n}function PS(n){return!!n&&"nullValue"in n}function MS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function aR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Tc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=Ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Tc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ji(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Tc(this.value))}};function uR(n){let e=[];return Ji(n.fields,(t,r)=>{let i=new Ut([t]);if(oh(r)){let s=uR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}var ln=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Co=class{constructor(e,t){this.position=e,this.inclusive=t}};function xS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),t.key):r=bo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function OS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pn(n.position[t],e.position[t]))return!1;return!0}var Ao=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Sq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ph=class{},qe=class n extends ph{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new d_(e,t,r):t==="array-contains"?new p_(e,r):t==="in"?new g_(e,r):t==="not-in"?new m_(e,r):t==="array-contains-any"?new y_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new h_(e,r):new f_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(bo(t,this.value)):t!==null&&Wi(this.value)===Wi(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mn=class n extends ph{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return lR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function lR(n){return n.op==="and"}function dR(n){return Rq(n)&&lR(n)}function Rq(n){for(let e of n.filters)if(e instanceof Mn)return!1;return!0}function l_(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+Do(n.value);if(dR(n))return n.filters.map(e=>l_(e)).join(",");{let e=n.filters.map(t=>l_(t)).join(",");return`${n.op}(${e})`}}function hR(n,e){return n instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&Pn(r.value,i.value)}(n,e):n instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hR(o,i.filters[a]),!0):!1}(n,e):void K()}function fR(n){return n instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`}(n):n instanceof Mn?function(t){return t.op.toString()+" {"+t.getFilters().map(fR).join(" ,")+"}"}(n):"Filter"}var d_=class extends qe{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},h_=class extends qe{constructor(e,t){super(e,"in",t),this.keys=pR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},f_=class extends qe{constructor(e,t){super(e,"not-in",t),this.keys=pR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function pR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var p_=class extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return PI(t)&&Rc(t.arrayValue,this.value)}},g_=class extends qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}},m_=class extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Rc(this.value.arrayValue,t)}},y_=class extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!PI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var v_=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function kS(n,e=null,t=[],r=[],i=null,s=null,o=null){return new v_(n,e,t,r,i,s,o)}function MI(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>l_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Do(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Do(r)).join(",")),e.ue=t}return e.ue}function xI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Sq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OS(n.startAt,e.startAt)&&OS(n.endAt,e.endAt)}function __(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var So=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Nq(n,e,t,r,i,s,o,a){return new So(n,e,t,r,i,s,o,a)}function Hh(n){return new So(n)}function FS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Pq(n){return n.collectionGroup!==null}function bc(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(Ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ao(s,r))}),t.has(Ut.keyField().canonicalString())||e.ce.push(new Ao(Ut.keyField(),r))}return e.ce}function Sn(n){let e=X(n);return e.le||(e.le=Mq(e,bc(n))),e.le}function Mq(n,e){if(n.limitType==="F")return kS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ao(i.field,s)});let t=n.endAt?new Co(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Co(n.startAt.position,n.startAt.inclusive):null;return kS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function I_(n,e,t){return new So(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return xI(Sn(n),Sn(e))&&n.limitType===e.limitType}function gR(n){return`${MI(Sn(n))}|lt:${n.limitType}`}function mo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fR(i)).join(", ")}]`),$h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Do(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Do(i)).join(",")),`Target(${r})`}(Sn(n))}; limitType=${n.limitType})`}function zh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of bc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=xS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,bc(r),i)||r.endAt&&!function(o,a,u){let l=xS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,bc(r),i))}(n,e)}function xq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mR(n){return(e,t)=>{let r=!1;for(let i of bc(n)){let s=Oq(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Oq(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?bo(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var Xr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return oR(this.inner)}size(){return this.innerSize}};var kq=new Oe(q.comparator);function dr(){return kq}var yR=new Oe(q.comparator);function Ec(...n){let e=yR;for(let t of n)e=e.insert(t.key,t);return e}function vR(n){let e=yR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $i(){return Dc()}function _R(){return Dc()}function Dc(){return new Xr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Fq=new Oe(q.comparator),Lq=new dt(q.comparator);function le(...n){let e=Lq;for(let t of n)e=e.add(t);return e}var Vq=new dt(me);function Uq(){return Vq}function OI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(e)?"-0":e}}function IR(n){return{integerValue:""+n}}function jq(n,e){return Eq(e)?IR(e):OI(n,e)}var Ro=class{constructor(){this._=void 0}};function Bq(n,e,t){return n instanceof No?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&RI(s)&&(s=NI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ki?ER(n,e):n instanceof Qi?TR(n,e):function(i,s){let o=wR(i,s),a=LS(o)+LS(i.Pe);return u_(o)&&u_(i.Pe)?IR(a):OI(i.serializer,a)}(n,e)}function $q(n,e,t){return n instanceof Ki?ER(n,e):n instanceof Qi?TR(n,e):t}function wR(n,e){return n instanceof Po?function(r){return u_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var No=class extends Ro{},Ki=class extends Ro{constructor(e){super(),this.elements=e}};function ER(n,e){let t=bR(e);for(let r of n.elements)t.some(i=>Pn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qi=class extends Ro{constructor(e){super(),this.elements=e}};function TR(n,e){let t=bR(e);for(let r of n.elements)t=t.filter(i=>!Pn(i,r));return{arrayValue:{values:t}}}var Po=class extends Ro{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function LS(n){return Pe(n.integerValue||n.doubleValue)}function bR(n){return PI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Hq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ki&&i instanceof Ki||r instanceof Qi&&i instanceof Qi?To(r.elements,i.elements,Pn):r instanceof Po&&i instanceof Po?Pn(r.Pe,i.Pe):r instanceof No&&i instanceof No}(n.transform,e.transform)}var w_=class{constructor(e,t){this.version=e,this.transformResults=t}},Qr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Mo=class{};function DR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gh(n.key,Qr.none()):new Yi(n.key,n.data,Qr.none());{let t=n.data,r=Vt.empty(),i=new dt(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xn(n.key,r,new Yt(i.toArray()),Qr.none())}}function qq(n,e,t){n instanceof Yi?function(i,s,o){let a=i.value.clone(),u=US(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof xn?function(i,s,o){if(!ah(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=US(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(CR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Cc(n,e,t,r){return n instanceof Yi?function(s,o,a,u){if(!ah(s.precondition,o))return a;let l=s.value.clone(),h=jS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof xn?function(s,o,a,u){if(!ah(s.precondition,o))return a;let l=jS(s.fieldTransforms,u,o),h=o.data;return h.setAll(CR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return ah(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function zq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=wR(r.transform,i||null);s!=null&&(t===null&&(t=Vt.empty()),t.set(r.field,s))}return t||null}function VS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(s,o)=>Hq(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yi=class extends Mo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xn=class extends Mo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function CR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function US(n,e,t){let r=new Map;Ie(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$q(o,a,t[i]))}return r}function jS(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Bq(s,o,e))}return r}var gh=class extends Mo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},E_=class extends Mo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var T_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&qq(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=_R();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=DR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,r)=>VS(t,r))&&To(this.baseMutations,e.baseMutations,(t,r)=>VS(t,r))}},b_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length);let i=function(){return Fq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var D_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var C_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,fe;function Gq(n){switch(n){default:return K();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function AR(n){if(n===void 0)return ur("GRPC error has no .code"),P.UNKNOWN;switch(n){case Be.OK:return P.OK;case Be.CANCELLED:return P.CANCELLED;case Be.UNKNOWN:return P.UNKNOWN;case Be.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Be.INTERNAL:return P.INTERNAL;case Be.UNAVAILABLE:return P.UNAVAILABLE;case Be.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Be.NOT_FOUND:return P.NOT_FOUND;case Be.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Be.ABORTED:return P.ABORTED;case Be.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Be.DATA_LOSS:return P.DATA_LOSS;default:return K()}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var BS=null;function Wq(){return new TextEncoder}var Kq=new Kr([4294967295,4294967295],0);function $S(n){let e=Wq().encode(n),t=new $v;return t.update(e),new Uint8Array(t.digest())}function HS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kr([t,r],0),new Kr([i,s],0)]}var A_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hi(`Invalid padding: ${t}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Kr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Kr.fromNumber(r)));return i.compare(Kq)===1&&(i=new Kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=$S(e),[r,i]=HS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=$S(e),[r,i]=HS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new Oe(me),dr(),le())}},Nc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var Io=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},yh=class{constructor(e,t){this.targetId=e,this.me=t}},vh=class{constructor(e,t,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_h=class{constructor(){this.fe=0,this.ge=zS(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),t=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Nc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=zS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},S_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=dr(),this.qe=qS(),this.Qe=new Oe(me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(__(s))if(r===0){let o=new q(s.path);this.Ue(t,o,ln.newNoDocument(o,te.min()))}else Ie(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}BS?.et(function(h,p,y,_,A){var R,N,O,z,F,ee;let Ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},W=p.unchangedNames;return W&&(Ee.bloomFilter={applied:A===0,hashCount:(R=W?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(z=(O=(N=W?.bits)===null||N===void 0?void 0:N.bitmap)===null||O===void 0?void 0:O.length)!==null&&z!==void 0?z:0,padding:(ee=(F=W?.bits)===null||F===void 0?void 0:F.padding)!==null&&ee!==void 0?ee:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),Ee}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Jr(r).toUint8Array()}catch(u){if(u instanceof hh)return Eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new A_(o,i,s)}catch(u){return Eo(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&__(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ln.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new mh(e,t,this.Qe,this.ke,r);return this.ke=dr(),this.qe=qS(),this.Qe=new Oe(me),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new _h,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dt(me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _h),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qS(){return new Oe(q.comparator)}function zS(){return new Oe(q.comparator)}var Qq={asc:"ASCENDING",desc:"DESCENDING"},Yq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jq={and:"AND",or:"OR"},R_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function N_(n,e){return n.useProto3Json||$h(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xq(n,e){return Ih(n,e.toTimestamp())}function Rn(n){return Ie(!!n),te.fromTimestamp(function(t){let r=lr(t);return new Ze(r.seconds,r.nanos)}(n))}function kI(n,e){return P_(n,e).canonicalString()}function P_(n,e){let t=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RR(n){let e=xe.fromString(n);return Ie(OR(e)),e}function M_(n,e){return kI(n.databaseId,e.path)}function Kv(n,e){let t=RR(e);if(t.get(1)!==n.databaseId.projectId)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(PR(t))}function NR(n,e){return kI(n.databaseId,e)}function Zq(n){let e=RR(n);return e.length===4?xe.emptyPath():PR(e)}function x_(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PR(n){return Ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GS(n,e,t){return{name:M_(n,e),fields:t.value.mapValue.fields}}function ez(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string"),ht.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ht.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?P.UNKNOWN:AR(l.code);return new j(h,l.message||"")}(o);t=new vh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Kv(n,r.document.name),s=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):te.min(),a=new Vt({mapValue:{fields:r.document.fields}}),u=ln.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Io(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Kv(n,r.document),s=r.readTime?Rn(r.readTime):te.min(),o=ln.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Io([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Kv(n,r.document),s=r.removedTargetIds||[];t=new Io([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new C_(i,s),a=r.targetId;t=new yh(a,o)}}return t}function tz(n,e){let t;if(e instanceof Yi)t={update:GS(n,e.key,e.value)};else if(e instanceof gh)t={delete:M_(n,e.key)};else if(e instanceof xn)t={update:GS(n,e.key,e.data),updateMask:lz(e.fieldMask)};else{if(!(e instanceof E_))return K();t={verify:M_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof No)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Po)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Xq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function nz(n,e){return n&&n.length>0?(Ie(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Rn(i.updateTime):Rn(s);return o.isEqual(te.min())&&(o=Rn(s)),new w_(o,i.transformResults||[])}(t,e))):[]}function rz(n,e){return{documents:[NR(n,e.path)]}}function iz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NR(n,i);let s=function(l){if(l.length!==0)return xR(Mn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:yo(y.field),direction:az(y.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=N_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function sz(n){let e=Zq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ie(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let y=MR(p);return y instanceof Mn&&dR(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(y=>function(A){return new Ao(vo(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,$h(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new Co(_,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new Co(_,y)}(t.endAt)),Nq(e,i,o,s,a,"F",u,l)}function oz(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vo(t.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=vo(t.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=vo(t.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return qe.create(vo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mn.create(t.compositeFilter.filters.map(r=>MR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function az(n){return Qq[n]}function cz(n){return Yq[n]}function uz(n){return Jq[n]}function yo(n){return{fieldPath:n.canonicalString()}}function vo(n){return Ut.fromServerFormat(n.fieldPath)}function xR(n){return n instanceof qe?function(t){if(t.op==="=="){if(MS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(PS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(PS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:cz(t.op),value:t.value}}}(n):n instanceof Mn?function(t){let r=t.getFilters().map(i=>xR(i));return r.length===1?r[0]:{compositeFilter:{op:uz(t.op),filters:r}}}(n):K()}function lz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pc=class n{constructor(e,t,r,i,s=te.min(),o=te.min(),a=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var O_=class{constructor(e){this.ct=e}};function dz(n){let e=sz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?I_(e,e.limit,"L"):e}var wh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ac(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=lr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Jr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?cR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):aR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Pe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};wh.vt=new wh;var k_=class{constructor(){this.un=new F_}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Gi.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},F_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dt(xe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(xe.comparator)).toArray()}};var bX=new Uint8Array(0);var Dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var Mc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var L_=class{constructor(){this.changes=new Xr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var V_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var U_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Cc(r.mutation,i,Yt.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let i=$i();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ec();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=$i();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=dr(),o=Dc(),a=function(){return Dc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof xn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Cc(h.mutation,l,h.mutation.getFieldMask(),Ze.now())):o.set(l.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new V_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Dc(),i=new Oe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Yt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=_R();h.forEach(y=>{if(!s.has(y)){let _=DR(t.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve($i()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:vR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ec();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,y){return new So(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,ln.newInvalidDocument(h)))});let a=Ec();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Cc(h.mutation,l,Yt.empty(),Ze.now()),zh(t,l)&&(a=a.insert(u,l))}),a})}};var j_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:dz(i.bundledQuery),readTime:Rn(i.readTime)}}(t)),x.resolve()}};var B_=class{constructor(){this.overlays=new Oe(q.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=$i();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=$i(),s=t.length+1,o=new q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Oe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=$i(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=$i(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new D_(t,r));let s=this.Ir.get(t);s===void 0&&(s=le(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var $_=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var xc=class{constructor(){this.Tr=new dt($e.Er),this.dr=new dt($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new $e(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new $e(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new xe([])),r=new $e(t,e),i=new $e(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new xe([])),r=new $e(t,e),i=new $e(t,e+1),s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new $e(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||me(e.wr,t.wr)}static Ar(e,t){return me(e.wr,t.wr)||q.comparator(e.key,t.key)}};var H_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new dt($e.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new T_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new $e(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $e(t,0),i=new $e(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dt(me);return t.forEach(i=>{let s=new $e(i,0),o=new $e(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new $e(new q(s),0),a=new dt(me);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let s=new $e(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new $e(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var q_=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=dr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=dr(),o=t.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_q(vq(h),r)<=0||(i.has(h.key)||zh(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new z_(this)}getSize(e){return x.resolve(this.size)}},z_=class extends L_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var G_=class{constructor(e){this.persistence=e,this.Nr=new Xr(t=>MI(t),xI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xc,this.targetCount=0,this.kr=Mc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Mc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var W_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new sR(0),this.Kr=!1,this.Kr=!0,this.$r=new $_,this.referenceDelegate=e(this),this.Ur=new G_(this),this.indexManager=new k_,this.remoteDocumentCache=function(i){return new q_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new O_(t),this.Gr=new j_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new H_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new K_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},K_=class extends o_{constructor(e){super(),this.currentSequenceNumber=e}},Q_=class n{constructor(e){this.persistence=e,this.Jr=new xc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Y_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=le(),i=le();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var J_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var X_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return u0()?8:wq(We())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new J_;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(wc()<=ue.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(wc()<=ue.DEBUG&&V("QueryEngine","Query:",mo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wc()<=ue.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(t))):x.resolve())}Yi(e,t){if(FS(t))return x.resolve(null);let r=Sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=I_(t,null,"F"),r=Sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,I_(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return FS(t)||i.isEqual(te.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?x.resolve(null):(wc()<=ue.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(t)),this.rs(e,o,t,yq(i,-1)).next(a=>a))})}ts(e,t){let r=new dt(mR(e));return t.forEach((i,s)=>{zh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return wc()<=ue.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",mo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Gi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Z_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Oe(me),this._s=new Xr(s=>MI(s),xI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function hz(n,e,t,r){return new Z_(n,e,t,r)}function kR(n,e){return m(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=le();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function fz(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=x.resolve();return y.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(R=>{let N=l.docVersions.get(A);Ie(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function FR(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function pz(n,e){let t=X(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ht.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(R,N,O){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,_,h)&&a.push(t.Ur.updateTargetData(s,_))});let u=dr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(gz(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}function gz(n,e,t){let r=le(),i=le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=dr();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function mz(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yz(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Pc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function eI(n,e,t){return m(this,null,function*(){let r=X(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Uc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function WS(n,e,t){let r=X(n),i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),y=p._s.get(h);return y!==void 0?x.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,Sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:te.min(),t?s:le())).next(a=>(vz(r,xq(e),a),{documents:a,Ts:s})))}function vz(n,e,t){let r=n.us.get(e)||te.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Eh=class{constructor(){this.activeTargetIds=Uq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var tI=class{constructor(){this.so=new Eh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Eh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var nI=class{_o(e){}shutdown(){}};var Th=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sh=null;function Qv(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}var _z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var rI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var lt="WebChannelConnection",iI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Qv(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>(V("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Eo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=_z[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Qv();return new Promise((o,a)=>{let u=new Hv;u.setWithCredentials(!0),u.listenOnce(qv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ic.NO_ERROR:let h=u.getResponseJson();V(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ic.TIMEOUT:V(lt,`RPC '${e}' ${s} timed out`),a(new j(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:let p=u.getStatus();if(V(lt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(N){let O=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(O)>=0?O:P.UNKNOWN}(_.status);a(new j(A,_.message))}else a(new j(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new j(P.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(lt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(lt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Qv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wv(),a=Gv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),y=!1,_=!1,A=new rI({Io:N=>{_?V(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(V(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),V(lt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,O,z)=>{N.listen(O,F=>{try{z(F)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(p,go.EventType.OPEN,()=>{_||(V(lt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),R(p,go.EventType.CLOSE,()=>{_||(_=!0,V(lt,`RPC '${e}' stream ${i} transport closed`),A.So())}),R(p,go.EventType.ERROR,N=>{_||(_=!0,Eo(lt,`RPC '${e}' stream ${i} transport errored:`,N),A.So(new j(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,go.EventType.MESSAGE,N=>{var O;if(!_){let z=N.data[0];Ie(!!z);let F=z,ee=F.error||((O=F[0])===null||O===void 0?void 0:O.error);if(ee){V(lt,`RPC '${e}' stream ${i} received error:`,ee);let Ee=ee.status,W=function(I){let E=Be[I];if(E!==void 0)return AR(E)}(Ee),T=ee.message;W===void 0&&(W=P.INTERNAL,T="Unknown error status: "+Ee+" with message "+ee.message),_=!0,A.So(new j(W,T)),p.close()}else V(lt,`RPC '${e}' stream ${i} received:`,z),A.bo(z)}}),R(a,zv.STAT_EVENT,N=>{N.stat===rh.PROXY?V(lt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===rh.NOPROXY&&V(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Yv(){return typeof document<"u"?document:null}function Gh(n){return new R_(n,!0)}var bh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Dh=class{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sI=class extends Dh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=ez(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Rn(o.readTime):te.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=x_(this.serializer),t.addTarget=function(s,o){let a,u=o.target;if(a=__(u)?{documents:rz(s,u)}:{query:iz(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SR(s,o.resumeToken);let l=N_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Ih(s,o.snapshotVersion.toTimestamp());let l=N_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=oz(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=x_(this.serializer),t.removeTarget=e,this.a_(t)}},oI=class extends Dh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=nz(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=x_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>tz(this.serializer,r))};this.a_(t)}};var aI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,P_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,P_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},cI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ur(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var uI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>m(this,null,function*(){Xi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=X(u);l.L_.add(4),yield jc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Wh(l)})}(this))}))}),this.q_=new cI(r,i)}};function Wh(n){return m(this,null,function*(){if(Xi(n))for(let e of n.B_)yield e(!0)})}function jc(n){return m(this,null,function*(){for(let e of n.B_)yield e(!1)})}function LR(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),UI(t)?VI(t):Lo(t).r_()&&LI(t,e))}function FI(n,e){let t=X(n),r=Lo(t);t.N_.delete(e),r.r_()&&VR(t,e),t.N_.size===0&&(r.r_()?r.o_():Xi(t)&&t.q_.set("Unknown"))}function LI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(n).A_(e)}function VR(n,e){n.Q_.xe(e),Lo(n).R_(e)}function VI(n){n.Q_=new S_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Lo(n).start(),n.q_.v_()}function UI(n){return Xi(n)&&!Lo(n).n_()&&n.N_.size>0}function Xi(n){return X(n).L_.size===0}function UR(n){n.Q_=void 0}function Iz(n){return m(this,null,function*(){n.q_.set("Online")})}function wz(n){return m(this,null,function*(){n.N_.forEach((e,t)=>{LI(n,e)})})}function Ez(n,e){return m(this,null,function*(){UR(n),UI(n)?(n.q_.M_(e),VI(n)):n.q_.set("Unknown")})}function Tz(n,e,t){return m(this,null,function*(){if(n.q_.set("Online"),e instanceof vh&&e.state===2&&e.cause)try{yield function(i,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ch(n,r)}else if(e instanceof Io?n.Q_.Ke(e):e instanceof yh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(te.min()))try{let r=yield FR(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),VR(s,u);let p=new Pc(h.target,u,l,h.sequenceNumber);LI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Ch(n,r)}})}function Ch(n,e,t){return m(this,null,function*(){if(!Uc(e))throw e;n.L_.add(1),yield jc(n),n.q_.set("Offline"),t||(t=()=>FR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Wh(n)}))})}function jR(n,e){return e().catch(t=>Ch(n,t,e))}function Kh(n){return m(this,null,function*(){let e=X(n),t=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bz(e);)try{let i=yield mz(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Dz(e,i)}catch(i){yield Ch(e,i)}BR(e)&&$R(e)})}function bz(n){return Xi(n)&&n.O_.length<10}function Dz(n,e){n.O_.push(e);let t=Zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function BR(n){return Xi(n)&&!Zr(n).n_()&&n.O_.length>0}function $R(n){Zr(n).start()}function Cz(n){return m(this,null,function*(){Zr(n).p_()})}function Az(n){return m(this,null,function*(){let e=Zr(n);for(let t of n.O_)e.m_(t.mutations)})}function Sz(n,e,t){return m(this,null,function*(){let r=n.O_.shift(),i=b_.from(r,e,t);yield jR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kh(n)})}function Rz(n,e){return m(this,null,function*(){e&&Zr(n).V_&&(yield function(r,i){return m(this,null,function*(){if(function(o){return Gq(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();Zr(r).s_(),yield jR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Kh(r)}})}(n,e)),BR(n)&&$R(n)})}function KS(n,e){return m(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Xi(t);t.L_.add(3),yield jc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Wh(t)})}function Nz(n,e){return m(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield Wh(t)):e||(t.L_.add(2),yield jc(t),t.q_.set("Unknown"))})}function Lo(n){return n.K_||(n.K_=function(t,r,i){let s=X(t);return s.w_(),new sI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Iz.bind(null,n),Ro:wz.bind(null,n),mo:Ez.bind(null,n),d_:Tz.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.K_.s_(),UI(n)?VI(n):n.q_.set("Unknown")):(yield n.K_.stop(),UR(n))}))),n.K_}function Zr(n){return n.U_||(n.U_=function(t,r,i){let s=X(t);return s.w_(),new oI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Cz.bind(null,n),mo:Rz.bind(null,n),f_:Az.bind(null,n),g_:Sz.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.U_.s_(),yield Kh(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var lI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jI(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Uc(n))return new j(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ah=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Sh=class{constructor(){this.W_=new Oe(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},xo=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ah.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var dI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},hI=class{constructor(){this.queries=QS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=X(t),s=i.queries;i.queries=QS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new j(P.ABORTED,"Firestore shutting down"))}};function QS(){return new Xr(n=>gR(n),qh)}function HR(n,e){return m(this,null,function*(){let t=X(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new dI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=jI(o,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&BI(t)})}function qR(n,e){return m(this,null,function*(){let t=X(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Pz(n,e){let t=X(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&BI(t)}function Mz(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function BI(n){n.Y_.forEach(e=>{e.next()})}var fI,YS;(YS=fI||(fI={})).ea="default",YS.Cache="cache";var Rh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fI.Cache}};var Nh=class{constructor(e){this.key=e}},Ph=class{constructor(e){this.key=e}},pI=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=mR(e),this.Ra=new Ah(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Sh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=zh(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;y&&_?y.data.isEqual(_.data)?A!==R&&(r.track({type:3,doc:_}),N=!0):this.ga(y,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),N=!0):y&&!_&&(r.track({type:1,doc:y}),N=!0,(u||l)&&(a=!0)),N&&(_?(o=o.add(_),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,A){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return R(_)-R(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new xo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ph(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Nh(r))}),t}ba(e){this.Ta=e.Ts,this.da=le();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},gI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},mI=class{constructor(e){this.key=e,this.va=!1}},yI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xr(a=>gR(a),qh),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(q.comparator),this.Na=new Map,this.La=new xc,this.Ba={},this.ka=new Map,this.qa=Mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function xz(n,e,t=!0){return m(this,null,function*(){let r=YR(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield zR(r,e,t,!0),i})}function Oz(n,e){return m(this,null,function*(){let t=YR(n);yield zR(t,e,!0,!1)})}function zR(n,e,t,r){return m(this,null,function*(){let i=yield yz(n.localStore,Sn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield kz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&LR(n.remoteStore,i),a})}function kz(n,e,t,r,i){return m(this,null,function*(){n.Ka=(p,y,_)=>function(R,N,O,z){return m(this,null,function*(){let F=N.view.ma(O);F.ns&&(F=yield WS(R.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,F)));let ee=z&&z.targetChanges.get(N.targetId),Ee=z&&z.targetMismatches.get(N.targetId)!=null,W=N.view.applyChanges(F,R.isPrimaryClient,ee,Ee);return XS(R,N.targetId,W.wa),W.snapshot})}(n,p,y,_);let s=yield WS(n.localStore,e,!0),o=new pI(e,s.Ts),a=o.ma(s.documents),u=Nc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);XS(n,t,l.wa);let h=new gI(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Fz(n,e,t){return m(this,null,function*(){let r=X(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield eI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&FI(r.remoteStore,i.targetId),vI(r,i.targetId)}).catch(Vc))):(vI(r,i.targetId),yield eI(r.localStore,i.targetId,!0))})}function Lz(n,e){return m(this,null,function*(){let t=X(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),FI(t.remoteStore,r.targetId))})}function Vz(n,e,t){return m(this,null,function*(){let r=zz(n);try{let i=yield function(o,a){let u=X(o),l=Ze.now(),h=a.reduce((_,A)=>_.add(A.key),le()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=dr(),R=le();return u.cs.getEntries(_,h).next(N=>{A=N,A.forEach((O,z)=>{z.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(N=>{p=N;let O=[];for(let z of a){let F=zq(z,p.get(z.key).overlayedDocument);F!=null&&O.push(new xn(z.key,F,uR(F.value.mapValue),Qr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,O,a)}).next(N=>{y=N;let O=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(_,N.batchId,O)})}).then(()=>({batchId:y.batchId,changes:vR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Oe(me)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Bc(r,i.changes),yield Kh(r.remoteStore)}catch(i){let s=jI(i,"Failed to persist write");t.reject(s)}})}function GR(n,e){return m(this,null,function*(){let t=X(n);try{let r=yield pz(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),yield Bc(t,r,e)}catch(r){yield Vc(r)}})}function JS(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&BI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Uz(n,e,t){return m(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Oe(q.comparator);o=o.insert(s,ln.newNoDocument(s,te.min()));let a=le().add(s),u=new mh(te.min(),new Map,new Oe(me),o,a);yield GR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),$I(r)}else yield eI(r.localStore,e,!1).then(()=>vI(r,e,t)).catch(Vc)})}function jz(n,e){return m(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield fz(t.localStore,e);KR(t,r,null),WR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bc(t,i)}catch(i){yield Vc(i)}})}function Bz(n,e,t){return m(this,null,function*(){let r=X(n);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);KR(r,e,t),WR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bc(r,i)}catch(i){yield Vc(i)}})}function WR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function KR(n,e,t){let r=X(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||QR(n,r)})}function QR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(FI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$I(n))}function XS(n,e,t){for(let r of t)r instanceof Nh?(n.La.addReference(r.key,e),$z(n,r)):r instanceof Ph?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||QR(n,r.key)):K()}function $z(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),$I(n))}function $I(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(xe.fromString(e)),r=n.qa.next();n.Na.set(r,new mI(t)),n.Oa=n.Oa.insert(t,r),LR(n.remoteStore,new Pc(Sn(Hh(t.path)),r,"TargetPurposeLimboResolution",sR.oe))}}function Bc(n,e,t){return m(this,null,function*(){let r=X(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Y_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,y=>x.forEach(y.$i,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>x.forEach(y.Ui,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!Uc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.os.get(y),A=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(y,R)}}})}(r.localStore,s))})}function Hz(n,e){return m(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield kR(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new j(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bc(t,r.hs)}})}function qz(n,e){let t=X(n),r=t.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function YR(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uz.bind(null,e),e.Ca.d_=Pz.bind(null,e.eventManager),e.Ca.$a=Mz.bind(null,e.eventManager),e}function zz(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bz.bind(null,e),e}var ZS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return m(this,null,function*(){this.serializer=Gh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return hz(this.persistence,new X_,t.initialUser,this.serializer)}Ga(t){return new W_(Q_.Zr,this.serializer)}Wa(t){return new tI}terminate(){return m(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Gz=(()=>{class n{initialize(t,r){return m(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hz.bind(null,this.syncEngine),yield Nz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new hI}()}createDatastore(t){let r=Gh(t.databaseInfo.databaseId),i=function(o){return new iI(o)}(t.databaseInfo);return function(o,a,u,l){return new aI(o,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,u){return new uI(i,s,o,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>JS(this.syncEngine,r,0),function(){return Th.D()?new Th:new nI}())}createSyncEngine(t,r){return function(s,o,a,u,l,h,p){let y=new yI(s,o,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var t,r;yield function(s){return m(this,null,function*(){let o=X(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield jc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Mh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _I=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=uh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>m(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=jI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jv(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield kR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function eR(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Wz(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KS(e.remoteStore,i)),n._onlineComponents=e})}function Wz(n){return m(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),yield Jv(n,new ZS)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Jv(n,new ZS);return n._offlineComponents})}function JR(n){return m(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield eR(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield eR(n,new Gz))),n._onlineComponents})}function Kz(n){return JR(n).then(e=>e.syncEngine)}function II(n){return m(this,null,function*(){let e=yield JR(n),t=e.eventManager;return t.onListen=xz.bind(null,e.syncEngine),t.onUnlisten=Fz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lz.bind(null,e.syncEngine),t})}function Qz(n,e,t={}){let r=new Cn;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,u,l){let h=new Mh({next:y=>{h.Za(),o.enqueueAndForget(()=>qR(s,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new j(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Rh(Hh(a.path),h,{includeMetadataChanges:!0,_a:!0});return HR(s,p)}(yield II(n),n.asyncQueue,e,t,r)})),r.promise}function XR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tR=new Map;function ZR(n,e,t){if(!t)throw new j(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Yz(n,e,t,r){if(e===!0&&r===!0)throw new j(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nR(n){if(!q.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rR(n){if(q.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=HI(n);throw new j(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var xh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Oo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xv;switch(r.type){case"firstParty":return new n_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=tR.get(t);r&&(V("ComponentProvider","Removing Datastore"),tR.delete(t),r.terminate())}(this),Promise.resolve()}};function eN(n,e,t,r={}){var i;let s=(n=Nn(n,Oo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Qe.MOCK_USER;else{a=r0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qe(l)}n._authCredentials=new Zv(new ch(a,u))}}var Oh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Yr=class n extends Oh{constructor(e,t,r){super(e,t,Hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function tN(n,e,...t){if(n=Ke(n),ZR("collection","path",e),n instanceof Oo){let r=xe.fromString(e,...t);return rR(r),new Yr(n,null,r)}{if(!(n instanceof Et||n instanceof Yr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return rR(r),new Yr(n.firestore,null,r)}}function nN(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=uh.newId()),ZR("doc","path",e),n instanceof Oo){let r=xe.fromString(e,...t);return nR(r),new Et(n,null,new q(r))}{if(!(n instanceof Et||n instanceof Yr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return nR(r),new Et(n.firestore,n instanceof Yr?n.converter:null,new q(r))}}var kh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bh(this,"async_queue_retry"),this.Vu=()=>{let r=Yv();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Yv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Yv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Cn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ur("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=lI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function iR(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var ei=class extends Oo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kh(e),this._firestoreClient=void 0,yield e}})}};function rN(n,e){let t=typeof n=="object"?n:Zs(),r=typeof n=="string"?n:e||"(default)",i=tc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=n0("firestore");s&&eN(i,...s)}return i}function qI(n){if(n._terminated)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jz(n),n._firestoreClient}function Jz(n){var e,t,r;let i=n._freezeSettings(),s=function(a,u,l,h){return new a_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new _I(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Oc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ht.fromBase64String(e))}catch(t){throw new j(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ko=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kc=class{constructor(e){this._methodName=e}};var Fc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var Lc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Xz=/^__.*__$/,wI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yi(e,this.data,t,this.fieldTransforms)}},Fh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function iN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var EI=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(iN(this.Cu)&&Xz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},TI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gh(e)}Qu(e,t,r,i=!1){return new EI({Cu:e,methodName:t,qu:r,path:Ut.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sN(n){let e=n._freezeSettings(),t=Gh(n._databaseId);return new TI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zz(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);zI("Data must be an object, but it was:",o,r);let a=oN(r,o),u,l;if(s.merge)u=new Yt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=bI(e,p,t);if(!o.contains(y))throw new j(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);cN(h,y)||h.push(y)}u=new Yt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new wI(new Vt(a),u,l)}var Lh=class n extends kc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function eG(n,e,t,r){let i=n.Qu(1,e,t);zI("Data must be an object, but it was:",i,r);let s=[],o=Vt.empty();Ji(r,(u,l)=>{let h=GI(e,u,t);l=Ke(l);let p=i.Nu(h);if(l instanceof Lh)s.push(h);else{let y=Qh(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Yt(s);return new Fh(o,a,i.fieldTransforms)}function tG(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[bI(e,r,t)],u=[i];if(s.length%2!=0)throw new j(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(bI(e,s[y])),u.push(s[y+1]);let l=[],h=Vt.empty();for(let y=a.length-1;y>=0;--y)if(!cN(l,a[y])){let _=a[y],A=u[y];A=Ke(A);let R=o.Nu(_);if(A instanceof Lh)l.push(_);else{let N=Qh(A,R);N!=null&&(l.push(_),h.set(_,N))}}let p=new Yt(l);return new Fh(h,p,o.fieldTransforms)}function Qh(n,e){if(aN(n=Ke(n)))return zI("Unsupported field value:",e,n),oN(n,e);if(n instanceof kc)return function(r,i){if(!iN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Qh(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ze.fromDate(r);return{timestampValue:Ih(i.serializer,s)}}if(r instanceof Ze){let s=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(i.serializer,s)}}if(r instanceof Fc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oc)return{bytesValue:SR(i.serializer,r._byteString)};if(r instanceof Et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return OI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${HI(r)}`)}(n,e)}function oN(n,e){let t={};return oR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(n,(r,i)=>{let s=Qh(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function aN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof Fc||n instanceof Oc||n instanceof Et||n instanceof kc||n instanceof Lc)}function zI(n,e,t){if(!aN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=HI(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function bI(n,e,t){if((e=Ke(e))instanceof ko)return e._internalPath;if(typeof e=="string")return GI(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}var nG=new RegExp("[~\\*/\\[\\]]");function GI(n,e,t){if(e.search(nG)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ko(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new j(P.INVALID_ARGUMENT,a+n+u)}function cN(n,e){return n.some(t=>t.isEqual(e))}var Uh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(uN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},DI=class extends Uh{data(){return super.data()}};function uN(n,e){return typeof e=="string"?GI(n,e):e instanceof ko?e._internalPath:e._delegate._internalPath}function rG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var CI=class{convertValue(e,t="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ji(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Pe(o.doubleValue));return new Lc(s)}convertGeoPoint(e){return new Fc(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=NI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){let t=lr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xe.fromString(e);Ie(OR(r));let i=new fh(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(t)||ur(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function iG(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jh=class extends Uh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(uN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},wo=class extends jh{data(e={}){return super.data(e)}},AI=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wo(this._firestore,this._userDataWriter,r.key,r,new qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new wo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new wo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:sG(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function sG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function lN(n){n=Nn(n,Et);let e=Nn(n.firestore,ei);return Qz(qI(e),n._key).then(t=>gN(e,n,t))}var Bh=class extends CI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}};function dN(n,e,t){n=Nn(n,Et);let r=Nn(n.firestore,ei),i=iG(n.converter,e,t);return pN(r,[Zz(sN(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qr.none())])}function hN(n,e,t,...r){n=Nn(n,Et);let i=Nn(n.firestore,ei),s=sN(i),o;return o=typeof(e=Ke(e))=="string"||e instanceof ko?tG(s,"updateDoc",n._key,e,t,r):eG(s,"updateDoc",n._key,e),pN(i,[o.toMutation(n._key,Qr.exists(!0))])}function fN(n,...e){var t,r,i;n=Ke(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iR(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iR(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Et)l=Nn(n.firestore,ei),h=Hh(n._key.path),u={next:p=>{e[o]&&e[o](gN(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Nn(n,Oh);l=Nn(p.firestore,ei),h=p._query;let y=new Bh(l);u={next:_=>{e[o]&&e[o](new AI(l,y,p,_))},error:e[o+1],complete:e[o+2]},rG(n._query)}return function(y,_,A,R){let N=new Mh(R),O=new Rh(_,N,A);return y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return HR(yield II(y),O)})),()=>{N.Za(),y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return qR(yield II(y),O)}))}}(qI(l),h,a,u)}function pN(n,e){return function(r,i){let s=new Cn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Vz(yield Kz(r),i,s)})),s.promise}(qI(n),e)}function gN(n,e,t){let r=t.docs.get(e._key),i=new Bh(n);return new jh(n,i,e._key,r,new qi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Fo=i})(Br),jr(new Kt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ei(new e_(r.getProvider("auth-internal")),new i_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),He(AS,"4.7.3",e),He(AS,"4.7.3","esm2017")})();var Zi=class{constructor(e){return e}},mN="firestore",WI=class{constructor(){return nc(mN)}};var KI=new B("angularfire2.firestore-instances");function oG(n,e){let t=Id(mN,n,e);return t&&new Zi(t)}function aG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zi(r)}}var cG={provide:WI,deps:[[new Xe,KI]]},uG={provide:Zi,useFactory:oG,deps:[[new Xe,KI],Xn]};function yN(n,...e){return He("angularfire",ki.full,"fst"),qt([uG,cG,{provide:KI,useFactory:aG(n),multi:!0,deps:[ge,_t,no,Fi,[new Xe,_c],[new Xe,to],...e]}])}var vN=Lt(tN,!0);var Yh=Lt(nN,!0);var _N=Lt(lN,!0);var IN=Lt(rN,!0);var wN=Lt(fN,!0);var EN=Lt(dN,!0);var Jh=Lt(hN,!0);var PN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(_e(wi),_e(Nr))}}static{this.\u0275dir=At({type:n})}}return n})(),lG=(()=>{class n extends PN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})()}static{this.\u0275dir=At({type:n,features:[Ei]})}}return n})(),MN=new B("");var dG={provide:MN,useExisting:Os(()=>tf),multi:!0};function hG(){let n=Wn()?Wn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fG=new B(""),tf=(()=>{class n extends PN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!hG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(_e(wi),_e(Nr),_e(fG,8))}}static{this.\u0275dir=At({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&It("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[xl([dG]),Ei]})}}return n})();function pG(n){return n!=null&&typeof n.length=="number"}var xN=new B(""),gG=new B("");function mG(n){return e=>pG(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function TN(n){return null}function ON(n){return n!=null}function kN(n){return Di(n)?Ne(n):n}function FN(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function LN(n,e){return e.map(t=>t(n))}function yG(n){return!n.validate}function VN(n){return n.map(e=>yG(e)?e:t=>e.validate(t))}function vG(n){if(!n)return null;let e=n.filter(ON);return e.length==0?null:function(t){return FN(LN(t,e))}}function UN(n){return n!=null?vG(VN(n)):null}function _G(n){if(!n)return null;let e=n.filter(ON);return e.length==0?null:function(t){let r=LN(t,e).map(kN);return Wf(r).pipe(ne(FN))}}function jN(n){return n!=null?_G(VN(n)):null}function bN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IG(n){return n._rawValidators}function wG(n){return n._rawAsyncValidators}function QI(n){return n?Array.isArray(n)?n:[n]:[]}function Zh(n,e){return Array.isArray(n)?n.includes(e):n===e}function DN(n,e){let t=QI(e);return QI(n).forEach(i=>{Zh(t,i)||t.push(i)}),t}function CN(n,e){return QI(e).filter(t=>!Zh(n,t))}var ef=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},YI=class extends ef{get formDirective(){return null}get path(){return null}},qc=class extends ef{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},JI=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},EG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aee=we(L({},EG),{"[class.ng-submitted]":"isSubmitted"}),BN=(()=>{class n extends JI{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(_e(qc,2))}}static{this.\u0275dir=At({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Bg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ei]})}}return n})();var $c="VALID",Xh="INVALID",Vo="PENDING",Hc="DISABLED";function TG(n){return(nf(n)?n.validators:n)||null}function bG(n){return Array.isArray(n)?UN(n):n||null}function DG(n,e){return(nf(e)?e.asyncValidators:n)||null}function CG(n){return Array.isArray(n)?jN(n):n||null}function nf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var XI=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$c}get invalid(){return this.status===Xh}get pending(){return this.status==Vo}get disabled(){return this.status===Hc}get enabled(){return this.status!==Hc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CN(e,this._rawAsyncValidators))}hasValidator(e){return Zh(this._rawValidators,e)}hasAsyncValidator(e){return Zh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hc,this.errors=null,this._forEachChild(r=>{r.disable(we(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(L({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$c,this._forEachChild(r=>{r.enable(we(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(L({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===Vo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vo,this._hasOwnPendingAsyncValidator=!0;let t=kN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Hc:this.errors?Xh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vo)?Vo:this._anyControlsHaveStatus(Xh)?Xh:$c}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=CG(this._rawAsyncValidators)}};var $N=new B("CallSetDisabledState",{providedIn:"root",factory:()=>ZI}),ZI="always";function AG(n,e){return[...e.path,n]}function SG(n,e,t=ZI){NG(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),PG(n,e),xG(n,e),MG(n,e),RG(n,e)}function AN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function NG(n,e){let t=IG(n);e.validator!==null?n.setValidators(bN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=wG(n);e.asyncValidator!==null?n.setAsyncValidators(bN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();AN(e._rawValidators,i),AN(e._rawAsyncValidators,i)}function PG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HN(n,e)})}function MG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function HN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function OG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function kG(n){return Object.getPrototypeOf(n.constructor)===lG}function FG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===tf?t=s:kG(s)?r=s:i=s}),i||r||t||null}function SN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var LG=class extends XI{constructor(e=null,t,r){super(TG(t),DG(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(RN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){RN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var VG={provide:qc,useExisting:Os(()=>ew)},NN=Promise.resolve(),ew=(()=>{class n extends qc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new LG,this._registered=!1,this.name="",this.update=new yt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FG(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),OG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){SG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){NN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ll(r);NN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?AG(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(_e(YI,9),_e(xN,10),_e(gG,10),_e(MN,10),_e(Ci,8),_e($N,8))}}static{this.\u0275dir=At({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ht.None,"disabled","isDisabled"],model:[Ht.None,"ngModel","model"],options:[Ht.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xl([VG]),Ei,Ii]})}}return n})();function UG(n){return typeof n=="number"?n:parseInt(n,10)}var jG=(()=>{class n{constructor(){this._validator=TN}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):TN,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=At({type:n,features:[Ii]})}}return n})();var BG={provide:xN,useExisting:Os(()=>tw),multi:!0},tw=(()=>{class n extends jG{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>UG(t),this.createValidator=t=>mG(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})()}static{this.\u0275dir=At({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Al("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[xl([BG]),Ei]})}}return n})();var $G=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Hn({type:n})}static{this.\u0275inj=$n({})}}return n})();var qN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$N,useValue:t.callSetDisabledState??ZI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Hn({type:n})}static{this.\u0275inj=$n({imports:[$G]})}}return n})();var qG=(n,e)=>({"top.px":n,"left.px":e});function zG(n,e){if(n&1){let t=bi();Ce(0,"input",8),Ml("ngModelChange",function(i){ot(t);let s=oe(2);return Hg(s.currentText,i)||(s.currentText=i),at(i)}),It("keyup.enter",function(){ot(t);let i=oe().$implicit,s=oe();return at(s.addNoteToWeek(i.week,s.currentText))}),Ae()}if(n&2){let t=oe(2);Pl("ngModel",t.currentText),ct("maxlength",t.maxNoteTextLength)("disabled",t.disableInput)}}function GG(n,e){if(n&1){let t=bi();Ce(0,"input",9),Ml("ngModelChange",function(i){ot(t);let s=oe(2);return Hg(s.currentText,i)||(s.currentText=i),at(i)}),Ae()}if(n&2){let t=oe(2);Pl("ngModel",t.currentText)}}function WG(n,e){if(n&1){let t=bi();Ce(0,"button",15),It("click",function(){ot(t);let i=oe(2).$implicit,s=oe().$implicit,o=oe();return at(o.voteForNoteFromWeek(s.week,i))}),Ce(1,"span",13),It("mouseenter",function(i){ot(t);let s=oe(2).$implicit,o=oe(2);return at(o.showTooltip(i,s.voters.length.toString(),2))})("mouseleave",function(){ot(t);let i=oe(4);return at(i.hideTooltip())}),ze(2,"\u{1F5F3}\uFE0F"),Ae()()}if(n&2){let t=oe(2).$implicit,r=oe(2);Rl(r.haveCreatedNote(t.creator)?"blocked-btn":"vote-btn"),ct("disabled",r.haveCreatedNote(t.creator))}}function KG(n,e){if(n&1){let t=bi();Ce(0,"button",15),It("click",function(){ot(t);let i=oe(2).$implicit,s=oe().$implicit,o=oe();return at(o.removeNoteFromWeek(s.week,i.text))}),Ce(1,"span",13),It("mouseenter",function(i){ot(t);let s=oe(4);return at(s.showTooltip(i,"zmaza\u0165"))})("mouseleave",function(){ot(t);let i=oe(4);return at(i.hideTooltip())}),ze(2,"\u274C"),Ae()()}if(n&2){let t=oe(2).$implicit,r=oe(2);Rl(r.haveCreatedNote(t.creator)?"remove-btn":"blocked-btn"),ct("disabled",!r.haveCreatedNote(t.creator))}}function QG(n,e){n&1&&Ti(0,"span",16)}function YG(n,e){if(n&1){let t=bi();Ce(0,"div"),Pr(1,WG,3,3,"button",12),Ce(2,"span",13),It("mouseenter",function(i){ot(t);let s=oe().$implicit,o=oe(2);return at(o.showTooltip(i,s.creator,1))})("mouseleave",function(){ot(t);let i=oe(3);return at(i.hideTooltip())}),ze(3),Ae(),Pr(4,KG,3,3,"button",12)(5,QG,1,0,"span",14),Ae()}if(n&2){let t=oe().$implicit,r=oe().$implicit,i=oe();Rl(i.haveVotedFor(t)||i.haveCreatedNote(t.creator)?"note-voted":"note"),je(),ct("ngIf",r.week>=i.currentWeek),je(2),Nl(t.text),je(),ct("ngIf",r.week>=i.currentWeek),je(),ct("ngIf",r.week<i.currentWeek)}}function JG(n,e){if(n&1){let t=bi();Ce(0,"div",17)(1,"span",13),It("mouseenter",function(i){ot(t);let s=oe().$implicit,o=oe(2);return at(o.showTooltip(i,s.creator))})("mouseleave",function(){ot(t);let i=oe(3);return at(i.hideTooltip())}),ze(2),Ae(),Ce(3,"button",18),It("mouseenter",function(i){ot(t);let s=oe(3);return at(s.showTooltip(i,"navaren\xE9"))})("mouseleave",function(){ot(t);let i=oe(3);return at(i.hideTooltip())}),ze(4,"\u2705"),Ae()()}if(n&2){let t=oe(2).$implicit;je(2),Nl(t.won)}}function XG(n,e){if(n&1&&(Ce(0,"li"),Pr(1,YG,6,6,"div",10)(2,JG,5,1,"div",11),Ae()),n&2){let t=e.$implicit,r=oe().$implicit;je(),ct("ngIf",t.text!=r.won),je(),ct("ngIf",t.text===r.won)}}function ZG(n,e){if(n&1&&(Ce(0,"div")(1,"div",4)(2,"span")(3,"strong"),ze(4),Ae(),ze(5),Ae(),Pr(6,zG,1,3,"input",5)(7,GG,1,1,"input",6),Ce(8,"div",7)(9,"ul"),Pr(10,XG,3,2,"li",2),Ae()()()()),n&2){let t=e.$implicit,r=oe();je(4),Mr("",t.week,". t\xFD\u017Ede\u0148 "),je(),Mr("(",t.dateRange,")"),je(),ct("ngIf",t.week>r.currentWeek&&t.notes.length<r.maxNoteLength),je(),ct("ngIf",t.week>r.currentWeek&&t.notes.length>=r.maxNoteLength),je(3),ct("ngForOf",t.notes)}}function eW(n,e){if(n&1&&(Ce(0,"div",19),ze(1),Ae()),n&2){let t=oe();ct("ngStyle",_D(2,qG,t.tooltipY,t.tooltipX)),je(),Mr(" ",t.tooltipText," ")}}var zN=(()=>{class n{constructor(){this.tooltipVisible=!1,this.tooltipText="",this.tooltipX=0,this.tooltipY=0,this.disableInput=!1,this.maxNoteTextLength=25,this.maxNoteLength=5,this.weeks=[],this.currentText="",this.currentWeek=0,this.currentYear=0,this.currentDay=0,this.currentMonth="",this.monthsInSlovak=["janu\xE1ra","febru\xE1ra","marca","apr\xEDla","m\xE1ja","j\xFAna","j\xFAla","augusta","septembra","okt\xF3bra","novembra","decembra"],this.auth=M(un),this.email=this.auth.currentUser?.email??"",this.firestore=M(Zi),this.collectionName="foodWeeks";let t=new Date;this.currentYear=t.getFullYear(),this.currentDay=t.getDate(),this.currentMonth=this.monthsInSlovak[t.getMonth()],this.currentWeek=this.getWeekNumber(t),this.generateWeeks(t)}ngOnInit(){return m(this,null,function*(){yield this.fetchNotes()})}getWeekNumber(t){let r=new Date(t.getFullYear(),0,1),i=t.getTime()-r.getTime(),s=1e3*3600*24,o=Math.floor(i/s);return Math.ceil((o+1)/7)}generateWeeks(t){let r=new Date(this.currentYear,0,1),i=r.getDay(),s=i===0?6:i-1;r.setDate(r.getDate()-s);let o=r,a=1;for(;o<=t;){let u=new Date(o),l=new Date(o);l.setDate(l.getDate()+6);let h=new Date(this.currentYear,11,31);l>h&&l.setDate(h.getDate());let p=`${u.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})} - ${l.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})}`;this.weeks.push({week:a,dateRange:p,notes:[],won:""}),o.setDate(o.getDate()+7),a++}}fetchNotes(){return m(this,null,function*(){let t=this.currentYear.toString(),r=vN(this.firestore,this.collectionName);wN(r,i=>{i.forEach(s=>{let o=s.data(),a=o.week.toString(),u=this.weeks.find(l=>l.week.toString()+"-"+t===a);u&&(u.notes=o.notes||[],u.won=o.won||"")})})})}createNote(t,r,i){return t.some(s=>s.text===r)?null:(r.length>this.maxNoteTextLength&&(r=r.slice(0,this.maxNoteTextLength)),{text:r,creator:i,voters:[]})}addNoteToWeek(t,r){return m(this,null,function*(){this.disableInput=!0;let i=this.weeks.find(s=>s.week===t);if(i&&i.notes.length<this.maxNoteLength){let s=this.createNote(i.notes,r,this.email),o=Array.from(i.notes);s&&i.notes.push(s);try{let a=`${t.toString()}-${this.currentYear.toString()}`,u=Yh(this.firestore,this.collectionName,a);(yield _N(u)).exists()?yield Jh(u,{notes:i.notes}):yield EN(u,{week:a,notes:[s],won:""}),this.currentText=""}catch(a){i.notes=o,console.error(a)}}this.disableInput=!1})}removeNoteFromWeek(t,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===t);if(i){i.notes=i.notes.filter(o=>o.text!==r);let s=Yh(this.firestore,this.collectionName,`${t.toString()}-${this.currentYear.toString()}`);yield Jh(s,{notes:i.notes})}})}voteForNoteFromWeek(t,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===t);if(i){let s=this.email;console.log(r),r.voters.includes(s)?r.voters=r.voters.filter(a=>a!==s):r.voters.push(s),console.log(r);let o=Yh(this.firestore,this.collectionName,`${t.toString()}-${this.currentYear.toString()}`);yield Jh(o,{notes:i.notes})}})}haveCreatedNote(t){return this.email===t}haveVotedFor(t){return t.voters.includes(this.email)}showTooltip(t,r,i=0){i===1?this.tooltipText="vytvoril pou\u017E\xEDvate\u013E "+r.slice(0,r.indexOf("@")):i===2?this.tooltipText="po\u010Det hlasov: "+r:this.tooltipText=r,this.tooltipX=t.pageX+10,this.tooltipY=t.pageY+10,this.tooltipVisible=!0}hideTooltip(){this.tooltipVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ar({type:n,selectors:[["dashboard"]],standalone:!0,features:[Us],decls:5,vars:5,consts:[[1,"week-list-container"],[2,"color","green"],[4,"ngFor","ngForOf"],["class","tooltip",3,"ngStyle",4,"ngIf"],[1,"week-entry"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModel","maxlength","disabled","ngModelChange","keyup.enter",4,"ngIf"],["placeholder","Maximum dosiahnut\xE9","disabled","","class","input-warning",3,"ngModel","ngModelChange",4,"ngIf"],[1,"notes"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModelChange","keyup.enter","ngModel","maxlength","disabled"],["placeholder","Maximum dosiahnut\xE9","disabled","",1,"input-warning",3,"ngModelChange","ngModel"],[3,"class",4,"ngIf"],["class","note-won",4,"ngIf"],[3,"class","disabled","click",4,"ngIf"],[3,"mouseenter","mouseleave"],["class","past-note",4,"ngIf"],[3,"click","disabled"],[1,"past-note"],[1,"note-won"],[1,"remove-btn",3,"mouseenter","mouseleave"],[1,"tooltip",3,"ngStyle"]],template:function(r,i){r&1&&(Ce(0,"div",0)(1,"h2",1),ze(2),Ae(),Pr(3,ZG,11,5,"div",2)(4,eW,2,5,"div",3),Ae()),r&2&&(je(2),$g("List t\xFD\u017Ed\u0148ov v roku ",i.currentYear," do ",i.currentDay,". ",i.currentMonth,""),je(),ct("ngForOf",i.weeks),je(),ct("ngIf",i.tooltipVisible))},dependencies:[qN,tf,BN,tw,ew,em,FD,LD,VD],styles:[".week-list-container[_ngcontent-%COMP%]{margin:20px;font-family:Arial,sans-serif}.week-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.week-list-container[_ngcontent-%COMP%]   .week-entry[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;gap:10px}.week-list-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;font-size:16px;border:1px solid #ccc}.week-list-container[_ngcontent-%COMP%]   .input-warning[_ngcontent-%COMP%]::placeholder{color:red}.week-list-container[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;display:flex;flex-wrap:wrap}.week-list-container[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#a8a8a8;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .note-voted[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#6794b4;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .note-won[_ngcontent-%COMP%]{background-color:#4abe4a;display:flex;justify-content:space-between;align-items:center;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .past-note[_ngcontent-%COMP%]{padding-right:10px}.week-list-container[_ngcontent-%COMP%]   .blocked-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:not-allowed;color:#fff}.week-list-container[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;color:#fff}.week-list-container[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d2d2d2;border-radius:10px;padding-top:2px;padding-bottom:2px}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;color:red}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#b49696;border-radius:10px;padding-top:2px;padding-bottom:2px}.week-list-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#000c;color:#fff;padding:5px 10px;border-radius:5px;font-size:12px;white-space:nowrap;z-index:1000;pointer-events:none}"]})}}return n})();var GN=[{path:"auth",component:bS},{path:"",component:zN,canActivate:[ES]},{path:"**",redirectTo:"auth"}];var WN={providers:[zC(GN),QD(),C0(()=>A0(XC.firebaseConfig)),_S(()=>IS()),yN(()=>IN())]};rC(JC,WN).catch(n=>console.error(n));
