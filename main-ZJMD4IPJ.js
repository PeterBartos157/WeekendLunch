var kP=Object.defineProperty,FP=Object.defineProperties;var LP=Object.getOwnPropertyDescriptors;var dE=Object.getOwnPropertySymbols,VP=Object.getPrototypeOf,UP=Object.prototype.hasOwnProperty,jP=Object.prototype.propertyIsEnumerable,BP=Reflect.get;var hE=(n,e,t)=>e in n?kP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})UP.call(e,t)&&hE(n,t,e[t]);if(dE)for(var t of dE(e))jP.call(e,t)&&hE(n,t,e[t]);return n},Ee=(n,e)=>FP(n,LP(e));var Ut=(n,e,t)=>BP(VP(n),t,e);var m=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{a(t.next(u))}catch(l){i(l)}},o=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(n,e)).next())});var fE=null;var Lf=1,Vf=Symbol("SIGNAL");function ye(n){let e=fE;return fE=n,e}var pE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $P(n){if(!(Bf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Lf)){if(!n.producerMustRecompute(n)&&!Uf(n)){n.dirty=!1,n.lastCleanEpoch=Lf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Lf}}function gE(n){return n&&(n.nextProducerIndex=0),ye(n)}function mE(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Bf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Uf(n){fu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||($P(t),r!==t.version))return!0}return!1}function yE(n){if(fu(n),Bf(n))for(let e=0;e<n.producerNode.length;e++)jf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jf(n,e){if(HP(n),fu(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)jf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fu(i),i.producerIndexOfThis[r]=e}}function Bf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function qP(){throw new Error}var zP=qP;function vE(n){zP=n}function Z(n){return typeof n=="function"}function as(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pu=as(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ui(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(s){e=s instanceof pu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_E(s)}catch(o){e=e??[],o instanceof pu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_E(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ui(t,e)}remove(e){let{_finalizers:t}=this;t&&ui(t,e),e instanceof n&&e._removeParent(this)}};ke.EMPTY=(()=>{let n=new ke;return n.closed=!0,n})();var $f=ke.EMPTY;function gu(n){return n instanceof ke||n&&"closed"in n&&Z(n.remove)&&Z(n.add)&&Z(n.unsubscribe)}function _E(n){Z(n)?n():n.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cs={setTimeout(n,e,...t){let{delegate:r}=cs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=cs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mu(n){cs.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(n);else throw n})}function oa(){}var IE=Hf("C",void 0,void 0);function wE(n){return Hf("E",void 0,n)}function EE(n){return Hf("N",n,void 0)}function Hf(n,e,t){return{kind:n,value:e,error:t}}var li=null;function us(n){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=li;if(li=null,t)throw r}}else n()}function TE(n){Xt.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=n)}var di=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gu(e)&&e.add(this)):this.destination=KP}static create(e,t,r){return new ls(e,t,r)}next(e){this.isStopped?zf(EE(e),this):this._next(e)}error(e){this.isStopped?zf(wE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zf(IE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GP=Function.prototype.bind;function qf(n,e){return GP.call(n,e)}var Gf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yu(r)}else yu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yu(t)}}},ls=class extends di{constructor(e,t,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qf(e.next,s),error:e.error&&qf(e.error,s),complete:e.complete&&qf(e.complete,s)}):i=e}this.destination=new Gf(i)}};function yu(n){Xt.useDeprecatedSynchronousErrorHandling?TE(n):mu(n)}function WP(n){throw n}function zf(n,e){let{onStoppedNotification:t}=Xt;t&&cs.setTimeout(()=>t(n,e))}var KP={closed:!0,next:oa,error:WP,complete:oa};var ds=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Wf(...n){return Kf(n)}function Kf(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=YP(t)?t:new ls(t,r,i);return us(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=bE(r),new r((i,s)=>{let o=new ls({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ds](){return this}pipe(...t){return Kf(t)(this)}toPromise(t){return t=bE(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function bE(n){var e;return(e=n??Xt.Promise)!==null&&e!==void 0?e:Promise}function QP(n){return n&&Z(n.next)&&Z(n.error)&&Z(n.complete)}function YP(n){return n&&n instanceof di||QP(n)&&gu(n)}function Qf(n){return Z(n?.lift)}function he(n){return e=>{if(Qf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new Yf(n,e,t,r,i)}var Yf=class extends di{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hs(){return he((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var fs=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Qf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return hs()(this)}};var DE=as(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new DE}next(t){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$f:(this.currentObservers=null,s.push(t),new ke(()=>{this.currentObservers=null,ui(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new vu(e,t),n})(),vu=class extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$f}};var et=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jf={now(){return(Jf.delegate||Date).now()},delegate:void 0};var _u=class extends ke{constructor(e,t){super()}schedule(e,t=0){return this}};var aa={setInterval(n,e,...t){let{delegate:r}=aa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=aa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ps=class extends _u{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&aa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};gs.now=Jf.now;var ms=class extends gs{constructor(e,t=gs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Xf=new ms(ps);var Iu=class extends ps{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var wu=class extends ms{};var Zf=new wu(Iu);var Mt=new ae(n=>n.complete());function CE(n){return n&&Z(n.schedule)}function AE(n){return n[n.length-1]}function Eu(n){return Z(AE(n))?n.pop():void 0}function Ir(n){return CE(AE(n))?n.pop():void 0}function fi(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function RE(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function SE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(n){return this instanceof hi?(this.v=n,this):new hi(n)}function NE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(R){return new Promise(function(N,O){s.push([_,R,N,O])>1||u(_,R)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(R){y(s[0][3],R)}}function l(_){_.value instanceof hi?Promise.resolve(_.value.v).then(h,p):y(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function PE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof SE=="function"?SE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Tu=n=>n&&typeof n.length=="number"&&typeof n!="function";function bu(n){return Z(n?.then)}function Du(n){return Z(n[ds])}function Cu(n){return Symbol.asyncIterator&&Z(n?.[Symbol.asyncIterator])}function Au(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Su=JP();function Ru(n){return Z(n?.[Su])}function Nu(n){return NE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hi(t.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{t.releaseLock()}})}function Pu(n){return Z(n?.getReader)}function Ve(n){if(n instanceof ae)return n;if(n!=null){if(Du(n))return XP(n);if(Tu(n))return ZP(n);if(bu(n))return eM(n);if(Cu(n))return ME(n);if(Ru(n))return tM(n);if(Pu(n))return nM(n)}throw Au(n)}function XP(n){return new ae(e=>{let t=n[ds]();if(Z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZP(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function eM(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mu)})}function tM(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ME(n){return new ae(e=>{rM(n,e).catch(t=>e.error(t))})}function nM(n){return ME(Nu(n))}function rM(n,e){var t,r,i,s;return RE(this,void 0,void 0,function*(){try{for(t=PE(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function wr(n,e=0){return he((t,r)=>{t.subscribe(ce(r,i=>Dt(r,n,()=>r.next(i),e),()=>Dt(r,n,()=>r.complete(),e),i=>Dt(r,n,()=>r.error(i),e)))})}function Er(n,e=0){return he((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xE(n,e){return Ve(n).pipe(Er(e),wr(e))}function OE(n,e){return Ve(n).pipe(Er(e),wr(e))}function kE(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function FE(n,e){return new ae(t=>{let r;return Dt(t,e,()=>{r=n[Su](),Dt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Mu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{Dt(t,e,()=>{let r=n[Symbol.asyncIterator]();Dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function LE(n,e){return Mu(Nu(n),e)}function VE(n,e){if(n!=null){if(Du(n))return xE(n,e);if(Tu(n))return kE(n,e);if(bu(n))return OE(n,e);if(Cu(n))return Mu(n,e);if(Ru(n))return FE(n,e);if(Pu(n))return LE(n,e)}throw Au(n)}function Ne(n,e){return e?VE(n,e):Ve(n)}function G(...n){let e=Ir(n);return Ne(n,e)}function ys(n,e){let t=Z(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function ep(n){return!!n&&(n instanceof ae||Z(n.lift)&&Z(n.subscribe))}var Un=as(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function re(n,e){return he((t,r)=>{let i=0;t.subscribe(ce(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:iM}=Array;function sM(n,e){return iM(e)?n(...e):n(e)}function xu(n){return re(e=>sM(n,e))}var{isArray:oM}=Array,{getPrototypeOf:aM,prototype:cM,keys:uM}=Object;function Ou(n){if(n.length===1){let e=n[0];if(oM(e))return{args:e,keys:null};if(lM(e)){let t=uM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function lM(n){return n&&typeof n=="object"&&aM(n)===cM}function ku(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ca(...n){let e=Ir(n),t=Eu(n),{args:r,keys:i}=Ou(n);if(r.length===0)return Ne([],e);let s=new ae(dM(r,e,i?o=>ku(i,o):Pt));return t?s.pipe(xu(t)):s}function dM(n,e,t=Pt){return r=>{UE(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)UE(e,()=>{let l=Ne(n[u],e),h=!1;l.subscribe(ce(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function UE(n,e,t){n?Dt(t,n,e):e()}function jE(n,e,t,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=R=>l<r?A(R):u.push(R),A=R=>{s&&e.next(R),l++;let N=!1;Ve(t(R,h++)).subscribe(ce(e,O=>{i?.(O),s?_(O):e.next(O)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let O=u.shift();o?Dt(e,o,()=>A(O)):A(O)}y()}catch(O){e.error(O)}}))};return n.subscribe(ce(e,_,()=>{p=!0,y()})),()=>{a?.()}}function Ue(n,e,t=1/0){return Z(e)?Ue((r,i)=>re((s,o)=>e(r,s,i,o))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),he((r,i)=>jE(r,i,n,t)))}function vs(n=1/0){return Ue(Pt,n)}function BE(){return vs(1)}function _s(...n){return BE()(Ne(n,Ir(n)))}function Fu(n){return new ae(e=>{Ve(n()).subscribe(e)})}function tp(...n){let e=Eu(n),{args:t,keys:r}=Ou(n),i=new ae(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ve(t[h]).subscribe(ce(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?ku(r,a):a),s.complete())}))}});return e?i.pipe(xu(e)):i}function Ct(n,e){return he((t,r)=>{let i=0;t.subscribe(ce(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Tr(n){return he((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ce(t,void 0,void 0,o=>{s=Ve(n(o,Tr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function $E(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(ce(o,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function jn(n,e){return Z(e)?Ue(n,e,1):Ue(n,1)}function br(n){return he((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bn(n){return n<=0?()=>Mt:he((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function np(n){return re(()=>n)}function Lu(n=hM){return he((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hM(){return new Un}function pi(n){return he((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function hn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,s)=>n(i,s,r)):Pt,Bn(1),t?br(e):Lu(()=>new Un))}function Is(n){return n<=0?()=>Mt:he((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,s)=>n(i,s,r)):Pt,Is(1),t?br(e):Lu(()=>new Un))}function ip(n,e){return he($E(n,e,arguments.length>=2,!0))}function sp(...n){let e=Ir(n);return he((t,r)=>{(e?_s(n,t,e):_s(n,t)).subscribe(r)})}function At(n,e){return he((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=s++;Ve(n(u,h)).subscribe(i=ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function op(n){return he((e,t)=>{Ve(n).subscribe(ce(t,()=>t.complete(),oa)),!t.closed&&e.subscribe(t)})}function je(n,e,t){let r=Z(n)||e||t?{next:n,error:e,complete:t}:n;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ce(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var fM="https://g.co/ng/security#xss",H=class extends Error{constructor(e,t){super(fl(e,t)),this.code=e}};function fl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function wa(n){return{toString:n}.toString()}var Vu="__parameters__";function pM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function DT(n,e,t){return wa(()=>{let r=pM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Vu)?u[Vu]:Object.defineProperty(u,Vu,{value:[]})[Vu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ua=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function gM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(It).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Ep(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var mM=Ae({__forward_ref__:Ae});function Vs(n){return n.__forward_ref__=Vs,n.toString=function(){return It(this())},n}function vt(n){return CT(n)?n():n}function CT(n){return typeof n=="function"&&n.hasOwnProperty(mM)&&n.__forward_ref__===Vs}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gn(n){return{providers:n.providers||[],imports:n.imports||[]}}function pl(n){return HE(n,ST)||HE(n,RT)}function AT(n){return pl(n)!==null}function HE(n,e){return n.hasOwnProperty(e)?n[e]:null}function yM(n){let e=n&&(n[ST]||n[RT]);return e||null}function qE(n){return n&&(n.hasOwnProperty(zE)||n.hasOwnProperty(vM))?n[zE]:null}var ST=Ae({\u0275prov:Ae}),zE=Ae({\u0275inj:Ae}),RT=Ae({ngInjectableDef:Ae}),vM=Ae({ngInjectorDef:Ae}),B=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NT(n){return n&&!!n.\u0275providers}var _M=Ae({\u0275cmp:Ae}),IM=Ae({\u0275dir:Ae}),wM=Ae({\u0275pipe:Ae}),EM=Ae({\u0275mod:Ae}),Gu=Ae({\u0275fac:Ae}),la=Ae({__NG_ELEMENT_ID__:Ae}),GE=Ae({__NG_ENV_ID__:Ae});function Ds(n){return typeof n=="string"?n:n==null?"":String(n)}function TM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ds(n)}function bM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new H(-200,n)}function fg(n,e){throw new H(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),Tp;function PT(){return Tp}function jt(n){let e=Tp;return Tp=n,e}function MT(n,e,t){let r=pl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&se.Optional)return null;if(e!==void 0)return e;fg(n,"Injector")}var DM={},da=DM,bp="__NG_DI_FLAG__",Wu="ngTempTokenPath",CM="ngTokenPath",AM=/\n/gm,SM="\u0275",WE="__source",Cs;function RM(){return Cs}function Dr(n){let e=Cs;return Cs=n,e}function NM(n,e=se.Default){if(Cs===void 0)throw new H(-203,!1);return Cs===null?MT(n,void 0,e):Cs.get(n,e&se.Optional?null:void 0,e)}function $(n,e=se.Default){return(PT()||NM)(vt(n),e)}function M(n,e=se.Default){return $(n,gl(e))}function gl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dp(n){let e=[];for(let t=0;t<n.length;t++){let r=vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],u=PM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push($(i,s))}else e.push($(r))}return e}function xT(n,e){return n[bp]=e,n.prototype[bp]=e,n}function PM(n){return n[bp]}function MM(n,e,t,r){let i=n[Wu];throw e[WE]&&i.unshift(e[WE]),n.message=xM(`
`+n.message,i,t,r),n[CM]=i,n[Wu]=null,n}function xM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==SM?n.slice(2):n;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):It(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AM,`
  `)}`}var tt=xT(DT("Optional"),8);var ml=xT(DT("SkipSelf"),4);function Ss(n,e){let t=n.hasOwnProperty(Gu);return t?n[Gu]:null}function pg(n,e){n.forEach(t=>Array.isArray(t)?pg(t,e):e(t))}function OT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ku(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function OM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function gg(n,e,t){let r=Ea(n,e);return r>=0?n[r|1]=t:(r=~r,OM(n,r,e,t)),r}function ap(n,e){let t=Ea(n,e);if(t>=0)return n[t|1]}function Ea(n,e){return kM(n,e,1)}function kM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Rs={},St=[],Ns=new B(""),kT=new B("",-1),FT=new B(""),Qu=class{get(e,t=da){if(t===da){let r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return t}},LT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LT||{}),gn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(gn||{}),$t=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($t||{});function FM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Cp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];VM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function LM(n){return n===3||n===4||n===6}function VM(n){return n.charCodeAt(0)===64}function ha(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?KE(n,t,i,null,e[++r]):KE(n,t,i,null,null))}}return n}function KE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var VT="ng-template";function UM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&FM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function mg(n){return n.type===4&&n.value!==VT}function jM(n,e,t){let r=n.type===4&&!t?VT:n.value;return e===r}function BM(n,e,t){let r=4,i=n.attrs,s=i!==null?qM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Zt(r)&&!Zt(u))return!1;if(o&&Zt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!jM(n,u,t)||u===""&&e.length===1){if(Zt(r))return!1;o=!0}}else if(r&8){if(i===null||!UM(n,i,u,t)){if(Zt(r))return!1;o=!0}}else{let l=e[++a],h=$M(u,i,mg(n),t);if(h===-1){if(Zt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;o=!0}}}}return Zt(r)||o}function Zt(n){return(n&1)===0}function $M(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return zM(e,n)}function HM(n,e,t=!1){for(let r=0;r<e.length;r++)if(BM(n,e[r],t))return!0;return!1}function qM(n){for(let e=0;e<n.length;e++){let t=n[e];if(LM(t))return e}return n.length}function zM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function QE(n,e){return n?":not("+e.trim()+")":e}function GM(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zt(o)&&(e+=QE(s,i),i=""),r=o,s=s||!Zt(r);t++}return i!==""&&(e+=QE(s,i)),e}function WM(n){return n.map(GM).join(",")}function KM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Zt(i))break;i=s}r++}return{attrs:e,classes:t}}function wn(n){return wa(()=>{let e=HT(n),t=Ee(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gn.Emulated,styles:n.styles||St,_:null,schemas:n.schemas||null,tView:null,id:""});qT(t);let r=n.dependencies;return t.directiveDefs=JE(r,!1),t.pipeDefs=JE(r,!0),t.id=JM(t),t})}function QM(n){return Ar(n)||UT(n)}function YM(n){return n!==null}function Wn(n){return wa(()=>({type:n.type,bootstrap:n.bootstrap||St,declarations:n.declarations||St,imports:n.imports||St,exports:n.exports||St,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function YE(n,e){if(n==null)return Rs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=$t.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==$t.None?[r,a]:r,e[s]=o):t[s]=r}return t}function wt(n){return wa(()=>{let e=HT(n);return qT(e),e})}function Ar(n){return n[_M]||null}function UT(n){return n[IM]||null}function jT(n){return n[wM]||null}function BT(n){let e=Ar(n)||UT(n)||jT(n);return e!==null?e.standalone:!1}function $T(n,e){let t=n[EM]||null;if(!t&&e===!0)throw new Error(`Type ${It(n)} does not have '\u0275mod' property.`);return t}function HT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Rs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||St,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:YE(n.inputs,e),outputs:YE(n.outputs),debugInfo:null}}function qT(n){n.features?.forEach(e=>e(n))}function JE(n,e){if(!n)return null;let t=e?jT:QM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(YM)}function JM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ht(n){return{\u0275providers:n}}function XM(...n){return{\u0275providers:zT(!0,n),\u0275fromNgModule:!0}}function zT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return pg(e,o=>{let a=o;Ap(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GT(i,s),t}function GT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];yg(i,s=>{e(s,r)})}}function Ap(n,e,t,r){if(n=vt(n),!n)return!1;let i=null,s=qE(n),o=!s&&Ar(n);if(!s&&!o){let u=n.ngModule;if(s=qE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Ap(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{pg(s.imports,h=>{Ap(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&GT(l,e)}if(!a){let l=Ss(i)||(()=>new i);e({provide:i,useFactory:l,deps:St},i),e({provide:FT,useValue:i,multi:!0},i),e({provide:Ns,useValue:()=>$(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;yg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function yg(n,e){for(let t of n)NT(t)&&(t=t.\u0275providers),Array.isArray(t)?yg(t,e):e(t)}var ZM=Ae({provide:String,useValue:Ae});function WT(n){return n!==null&&typeof n=="object"&&ZM in n}function ex(n){return!!(n&&n.useExisting)}function tx(n){return!!(n&&n.useFactory)}function Ps(n){return typeof n=="function"}function nx(n){return!!n.useClass}var yl=new B(""),Bu={},rx={},cp;function vg(){return cp===void 0&&(cp=new Qu),cp}var ct=class{},fa=class extends ct{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(e,o=>this.processProvider(o)),this.records.set(kT,ws(void 0,this)),i.has("environment")&&this.records.set(ct,ws(void 0,this));let s=this.records.get(yl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(FT,St,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Dr(this),r=jt(void 0),i;try{return e()}finally{Dr(t),jt(r)}}get(e,t=da,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(GE))return e[GE](this);r=gl(r);let i,s=Dr(this),o=jt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=cx(e)&&pl(e);l&&this.injectableDefInScope(l)?u=ws(Sp(e),Bu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?vg():this.parent;return t=r&se.Optional&&t===da?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Wu]=a[Wu]||[]).unshift(It(e)),s)throw a;return MM(a,e,"R3InjectorError",this.source)}else throw a}finally{jt(o),Dr(s)}}resolveInjectorInitializers(){let e=ye(null),t=Dr(this),r=jt(void 0),i;try{let s=this.get(Ns,St,se.Self);for(let o of s)o()}finally{Dr(t),jt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=vt(e);let t=Ps(e)?e:vt(e&&e.provide),r=sx(e);if(!Ps(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ws(void 0,Bu,!0),i.factory=()=>Dp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===Bu&&(t.value=rx,t.value=t.factory()),typeof t.value=="object"&&t.value&&ax(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sp(n){let e=pl(n),t=e!==null?e.factory:Ss(n);if(t!==null)return t;if(n instanceof B)throw new H(204,!1);if(n instanceof Function)return ix(n);throw new H(204,!1)}function ix(n){if(n.length>0)throw new H(204,!1);let t=yM(n);return t!==null?()=>t.factory(n):()=>new n}function sx(n){if(WT(n))return ws(void 0,n.useValue);{let e=KT(n);return ws(e,Bu)}}function KT(n,e,t){let r;if(Ps(n)){let i=vt(n);return Ss(i)||Sp(i)}else if(WT(n))r=()=>vt(n.useValue);else if(tx(n))r=()=>n.useFactory(...Dp(n.deps||[]));else if(ex(n))r=()=>$(vt(n.useExisting));else{let i=vt(n&&(n.useClass||n.provide));if(ox(n))r=()=>new i(...Dp(n.deps));else return Ss(i)||Sp(i)}return r}function ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ox(n){return!!n.deps}function ax(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function cx(n){return typeof n=="function"||typeof n=="object"&&n instanceof B}function Rp(n,e){for(let t of n)Array.isArray(t)?Rp(t,e):t&&NT(t)?Rp(t.\u0275providers,e):e(t)}function rn(n,e){n instanceof fa&&n.assertNotDestroyed();let t,r=Dr(n),i=jt(void 0);try{return e()}finally{Dr(r),jt(i)}}function QT(){return PT()!==void 0||RM()!=null}function ux(n){if(!QT())throw new H(-203,!1)}function lx(n){return typeof n=="function"}var Kn=0,de=1,Q=2,ut=3,tn=4,sn=5,Yu=6,pa=7,nn=8,Ms=9,mn=10,Fe=11,ga=12,XE=13,Us=14,yn=15,vl=16,Es=17,xs=18,_l=19,YT=20,Cr=21,up=22,yi=23,$n=25,JT=1;var vi=7,Ju=8,Xu=9,Bt=10,_g=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(_g||{});function gi(n){return Array.isArray(n)&&typeof n[JT]=="object"}function Qn(n){return Array.isArray(n)&&n[JT]===!0}function Ig(n){return(n.flags&4)!==0}function Il(n){return n.componentOffset>-1}function wl(n){return(n.flags&1)===1}function Sr(n){return!!n.template}function dx(n){return(n[Q]&512)!==0}var Np=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Nr(){return ZT}function ZT(n){return n.type.prototype.ngOnChanges&&(n.setInput=fx),hx}Nr.ngInherit=!0;function hx(){let n=tb(this),e=n?.current;if(e){let t=n.previous;if(t===Rs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function fx(n,e,t,r,i){let s=this.declaredInputs[r],o=tb(n)||px(n,{previous:Rs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Np(l&&l.currentValue,t,u===Rs),XT(n,e,i,t)}var eb="__ngSimpleChanges__";function tb(n){return n[eb]||null}function px(n,e){return n[eb]=e}var ZE=null;var fn=function(n,e,t){ZE?.(n,e,t)},gx="svg",mx="math",yx=!1;function vx(){return yx}function vn(n){for(;Array.isArray(n);)n=n[Kn];return n}function nb(n,e){return vn(e[n])}function qt(n,e){return vn(e[n.index])}function rb(n,e){return n.data[e]}function Pr(n,e){let t=e[n];return gi(t)?t:t[Kn]}function wg(n){return(n[Q]&128)===128}function _x(n){return Qn(n[ut])}function Os(n,e){return e==null?null:n[e]}function ib(n){n[Es]=0}function Ix(n){n[Q]&1024||(n[Q]|=1024,wg(n)&&ma(n))}function wx(n,e){for(;n>0;)e=e[Us],n--;return e}function Eg(n){return!!(n[Q]&9216||n[yi]?.dirty)}function Pp(n){n[mn].changeDetectionScheduler?.notify(1),Eg(n)?ma(n):n[Q]&64&&(vx()?(n[Q]|=1024,ma(n)):n[mn].changeDetectionScheduler?.notify())}function ma(n){n[mn].changeDetectionScheduler?.notify();let e=ya(n);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!wg(e)));)e=ya(e)}function sb(n,e){if((n[Q]&256)===256)throw new H(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function Ex(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function ya(n){let e=n[ut];return Qn(e)?e[ut]:e}var oe={lFrame:hb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Tx(){return oe.lFrame.elementDepthCount}function bx(){oe.lFrame.elementDepthCount++}function Dx(){oe.lFrame.elementDepthCount--}function ob(){return oe.bindingsEnabled}function Cx(){return oe.skipHydrationRootTNode!==null}function Ax(n){return oe.skipHydrationRootTNode===n}function Sx(){oe.skipHydrationRootTNode=null}function Te(){return oe.lFrame.lView}function lt(){return oe.lFrame.tView}function He(n){return oe.lFrame.contextLView=n,n[nn]}function qe(n){return oe.lFrame.contextLView=null,n}function Rt(){let n=ab();for(;n!==null&&n.type===64;)n=n.parent;return n}function ab(){return oe.lFrame.currentTNode}function Rx(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ti(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function Tg(){return oe.lFrame.isParent}function cb(){oe.lFrame.isParent=!1}function Nx(){let n=oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Px(){return oe.lFrame.bindingIndex}function Mx(n){return oe.lFrame.bindingIndex=n}function El(){return oe.lFrame.bindingIndex++}function bg(n){let e=oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xx(){return oe.lFrame.inI18n}function Ox(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Mp(e)}function kx(){return oe.lFrame.currentDirectiveIndex}function Mp(n){oe.lFrame.currentDirectiveIndex=n}function Fx(n){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ub(n){oe.lFrame.currentQueryIndex=n}function Lx(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function lb(n,e,t){if(t&se.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&se.Host);)if(i=Lx(s),i===null||(s=s[Us],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=oe.lFrame=db();return r.currentTNode=e,r.lView=n,!0}function Dg(n){let e=db(),t=n[de];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function db(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?hb(n):e}function hb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function fb(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var pb=fb;function Cg(){let n=fb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vx(n){return(oe.lFrame.contextLView=wx(n,oe.lFrame.contextLView))[nn]}function Mr(){return oe.lFrame.selectedIndex}function _i(n){oe.lFrame.selectedIndex=n}function Ag(){let n=oe.lFrame;return rb(n.tView,n.selectedIndex)}function Ux(){return oe.lFrame.currentNamespace}var gb=!0;function Tl(){return gb}function bl(n){gb=n}function jx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ZT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Dl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function $u(n,e,t){mb(n,e,3,t)}function Hu(n,e,t,r){(n[Q]&3)===t&&mb(n,e,t,r)}function lp(n,e){let t=n[Q];(t&3)===e&&(t&=16383,t+=1,n[Q]=t)}function mb(n,e,t,r){let i=r!==void 0?n[Es]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Es]+=65536),(a<s||s==-1)&&(Bx(n,t,e,u),n[Es]=(n[Es]&4294901760)+u+2),u++}function eT(n,e){fn(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),fn(5,n,e)}}function Bx(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Q]>>14<n[Es]>>16&&(n[Q]&3)===e&&(n[Q]+=16384,eT(a,s)):eT(a,s)}var As=-1,Ii=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function $x(n){return n instanceof Ii}function Hx(n){return(n.flags&8)!==0}function qx(n){return(n.flags&16)!==0}function yb(n){return n!==As}function Zu(n){return n&32767}function zx(n){return n>>16}function el(n,e){let t=zx(n),r=e;for(;t>0;)r=r[Us],t--;return r}var xp=!0;function tT(n){let e=xp;return xp=n,e}var Gx=256,vb=Gx-1,_b=5,Wx=0,pn={};function Kx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(la)&&(r=t[la]),r==null&&(r=t[la]=Wx++);let i=r&vb,s=1<<i;e.data[n+(i>>_b)]|=s}function tl(n,e){let t=Ib(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,dp(r.data,n),dp(e,null),dp(r.blueprint,null));let i=Sg(n,e),s=n.injectorIndex;if(yb(i)){let o=Zu(i),a=el(i,e),u=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function dp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ib(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Db(i),r===null)return As;if(t++,i=i[Us],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return As}function Op(n,e,t){Kx(n,e,t)}function wb(n,e,t){if(t&se.Optional||n!==void 0)return n;fg(e,"NodeInjector")}function Eb(n,e,t,r){if(t&se.Optional&&r===void 0&&(r=null),!(t&(se.Self|se.Host))){let i=n[Ms],s=jt(void 0);try{return i?i.get(e,r,t&se.Optional):MT(e,r,t&se.Optional)}finally{jt(s)}}return wb(r,e,t)}function Tb(n,e,t,r=se.Default,i){if(n!==null){if(e[Q]&2048&&!(r&se.Self)){let o=Zx(n,e,t,r,pn);if(o!==pn)return o}let s=bb(n,e,t,r,pn);if(s!==pn)return s}return Eb(e,t,r,i)}function bb(n,e,t,r,i){let s=Jx(t);if(typeof s=="function"){if(!lb(e,n,r))return r&se.Host?wb(i,t,r):Eb(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))fg(t);else return o}finally{pb()}}else if(typeof s=="number"){let o=null,a=Ib(n,e),u=As,l=r&se.Host?e[yn][sn]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?Sg(n,e):e[a+8],u===As||!rT(r,!1)?a=-1:(o=e[de],a=Zu(u),e=el(u,e)));a!==-1;){let h=e[de];if(nT(s,a,h.data)){let p=Qx(a,e,t,o,r,l);if(p!==pn)return p}u=e[a+8],u!==As&&rT(r,e[de].data[a+8]===l)&&nT(s,a,e)?(o=h,a=Zu(u),e=el(u,e)):a=-1}}return i}function Qx(n,e,t,r,i,s){let o=e[de],a=o.data[n+8],u=r==null?Il(a)&&xp:r!=o&&(a.type&3)!==0,l=i&se.Host&&s===a,h=Yx(a,o,t,u,l);return h!==null?ks(e,o,h,a):pn}function Yx(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let A=o[_];if(_<u&&t===A||_>=u&&A.type===t)return _}if(i){let _=o[u];if(_&&Sr(_)&&_.type===t)return u}return null}function ks(n,e,t,r){let i=n[t],s=e.data;if($x(i)){let o=i;o.resolving&&bM(TM(s[t]));let a=tT(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?jt(o.injectImpl):null,h=lb(n,r,se.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&jx(t,s[t],e)}finally{l!==null&&jt(l),tT(a),o.resolving=!1,pb()}}return i}function Jx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(la)?n[la]:void 0;return typeof e=="number"?e>=0?e&vb:Xx:e}function nT(n,e,t){let r=1<<n;return!!(t[e+(n>>_b)]&r)}function rT(n,e){return!(n&se.Self)&&!(n&se.Host&&e)}var mi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Tb(this._tNode,this._lView,e,gl(r),t)}};function Xx(){return new mi(Rt(),Te())}function js(n){return wa(()=>{let e=n.prototype.constructor,t=e[Gu]||kp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Gu]||kp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function kp(n){return CT(n)?()=>{let e=kp(vt(n));return e&&e()}:Ss(n)}function Zx(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=bb(s,o,t,r|se.Self,pn);if(a!==pn)return a;let u=s.parent;if(!u){let l=o[YT];if(l){let h=l.get(t,pn,r);if(h!==pn)return h}u=Db(o),o=o[Us]}s=u}return i}function Db(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function iT(n,e=null,t=null,r){let i=Cb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Cb(n,e=null,t=null,r,i=new Set){let s=[t||St,XM(n)];return r=r||(typeof n=="object"?void 0:It(n)),new fa(s,e||vg(),r||null,i)}var Et=(()=>{class n{static{this.THROW_IF_NOT_FOUND=da}static{this.NULL=new Qu}static create(t,r){if(Array.isArray(t))return iT({name:""},r,t,"");{let i=t.name??"";return iT({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=U({token:n,providedIn:"any",factory:()=>$(kT)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var eO="ngOriginalError";function hp(n){return n[eO]}var _n=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hp(e);for(;t&&hp(t);)t=hp(t);return t||null}},Ab=new B("",{providedIn:"root",factory:()=>M(_n).handleError.bind(void 0)}),Rg=(()=>{class n{static{this.__NG_ELEMENT_ID__=tO}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fp=class extends Rg{constructor(e){super(),this._lView=e}onDestroy(e){return sb(this._lView,e),()=>Ex(this._lView,e)}};function tO(){return new Fp(Te())}function nO(){return Cl(Rt(),Te())}function Cl(n,e){return new xr(qt(n,e))}var xr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=nO}}return n})();var Lp=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,QT()&&(this.destroyRef=M(Rg,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=fp(s),i&&(i=fp(i)),o&&(o=fp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ke&&e.add(a),a}};function fp(n){return e=>{setTimeout(n,void 0,e)}}var _t=Lp;function Sb(n){return(n.flags&128)===128}var Rb=new Map,rO=0;function iO(){return rO++}function sO(n){Rb.set(n[_l],n)}function oO(n){Rb.delete(n[_l])}var sT="__ngContext__";function Rr(n,e){gi(e)?(n[sT]=e[_l],sO(e)):n[sT]=e}function Nb(n){return Mb(n[ga])}function Pb(n){return Mb(n[tn])}function Mb(n){for(;n!==null&&!Qn(n);)n=n[tn];return n}var Vp;function xb(n){Vp=n}function aO(){if(Vp!==void 0)return Vp;if(typeof document<"u")return document;throw new H(210,!1)}var Ng=new B("",{providedIn:"root",factory:()=>cO}),cO="ng",Pg=new B(""),zt=new B("",{providedIn:"platform",factory:()=>"unknown"});var Mg=new B("",{providedIn:"root",factory:()=>aO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uO="h",lO="b";var dO=()=>null;function xg(n,e,t=!1){return dO(n,e,t)}var Ob=!1,hO=new B("",{providedIn:"root",factory:()=>Ob});var Up=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fM})`}};function Al(n){return n instanceof Up?n.changingThisBreaksApplicationSecurity:n}var fO=/^>|^->|<!--|-->|--!>|<!-$/g,pO=/(<|>)/g,gO="\u200B$1\u200B";function mO(n){return n.replace(fO,e=>e.replace(pO,gO))}function kb(n){return n instanceof Function?n():n}function yO(n){return(n??M(Et)).get(zt)==="browser"}var In=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(In||{}),vO;function Og(n,e){return vO(n,e)}function Ts(n,e,t,r,i){if(r!=null){let s,o=!1;Qn(r)?s=r:gi(r)&&(o=!0,r=r[Kn]);let a=vn(r);n===0&&t!==null?i==null?jb(e,t,a):nl(e,t,a,i||null,!0):n===1&&t!==null?nl(e,t,a,i||null,!0):n===2?FO(e,a,o):n===3&&e.destroyNode(a),s!=null&&VO(e,n,s,t,i)}}function _O(n,e){return n.createText(e)}function IO(n,e,t){n.setValue(e,t)}function wO(n,e){return n.createComment(mO(e))}function Fb(n,e,t){return n.createElement(e,t)}function EO(n,e){Lb(n,e),e[Kn]=null,e[sn]=null}function TO(n,e,t,r,i,s){r[Kn]=i,r[sn]=e,Rl(n,r,t,1,i,s)}function Lb(n,e){e[mn].changeDetectionScheduler?.notify(1),Rl(n,e,e[Fe],2,null,null)}function bO(n){let e=n[ga];if(!e)return pp(n[de],n);for(;e;){let t=null;if(gi(e))t=e[ga];else{let r=e[Bt];r&&(t=r)}if(!t){for(;e&&!e[tn]&&e!==n;)gi(e)&&pp(e[de],e),e=e[ut];e===null&&(e=n),gi(e)&&pp(e[de],e),t=e&&e[tn]}e=t}}function DO(n,e,t,r){let i=Bt+r,s=t.length;r>0&&(t[i-1][tn]=e),r<s-Bt?(e[tn]=t[i],OT(t,Bt+r,e)):(t.push(e),e[tn]=null),e[ut]=t;let o=e[vl];o!==null&&t!==o&&CO(o,e);let a=e[xs];a!==null&&a.insertView(n),Pp(e),e[Q]|=128}function CO(n,e){let t=n[Xu],i=e[ut][ut][yn];e[yn]!==i&&(n[Q]|=_g.HasTransplantedViews),t===null?n[Xu]=[e]:t.push(e)}function Vb(n,e){let t=n[Xu],r=t.indexOf(e);t.splice(r,1)}function jp(n,e){if(n.length<=Bt)return;let t=Bt+e,r=n[t];if(r){let i=r[vl];i!==null&&i!==n&&Vb(i,r),e>0&&(n[t-1][tn]=r[tn]);let s=Ku(n,Bt+e);EO(r[de],r);let o=s[xs];o!==null&&o.detachView(s[de]),r[ut]=null,r[tn]=null,r[Q]&=-129}return r}function Ub(n,e){if(!(e[Q]&256)){let t=e[Fe];t.destroyNode&&Rl(n,e,t,3,null,null),bO(e)}}function pp(n,e){if(e[Q]&256)return;let t=ye(null);try{e[Q]&=-129,e[Q]|=256,e[yi]&&yE(e[yi]),SO(n,e),AO(n,e),e[de].type===1&&e[Fe].destroy();let r=e[vl];if(r!==null&&Qn(e[ut])){r!==e[ut]&&Vb(r,e);let i=e[xs];i!==null&&i.detachView(n)}oO(e)}finally{ye(t)}}function AO(n,e){let t=n.cleanup,r=e[pa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[pa]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function SO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ii)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];fn(4,a,u);try{u.call(a)}finally{fn(5,a,u)}}else{fn(4,i,s);try{s.call(i)}finally{fn(5,i,s)}}}}}function RO(n,e,t){return NO(n,e.parent,t)}function NO(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===gn.None||s===gn.Emulated)return null}return qt(r,t)}}function nl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jb(n,e,t){n.appendChild(e,t)}function oT(n,e,t,r,i){r!==null?nl(n,e,t,r,i):jb(n,e,t)}function PO(n,e,t,r){n.removeChild(e,t,r)}function kg(n,e){return n.parentNode(e)}function MO(n,e){return n.nextSibling(e)}function xO(n,e,t){return kO(n,e,t)}function OO(n,e,t){return n.type&40?qt(n,t):null}var kO=OO,aT;function Sl(n,e,t,r){let i=RO(n,r,e),s=e[Fe],o=r.parent||e[sn],a=xO(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)oT(s,i,t[u],a,!1);else oT(s,i,t,a,!1);aT!==void 0&&aT(s,r,e,t,i)}function qu(n,e){if(e!==null){let t=e.type;if(t&3)return qt(e,n);if(t&4)return Bp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return qu(n,r);{let i=n[e.index];return Qn(i)?Bp(-1,i):vn(i)}}else{if(t&32)return Og(e,n)()||vn(n[e.index]);{let r=Bb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ya(n[yn]);return qu(i,r)}else return qu(n,e.next)}}}return null}function Bb(n,e){if(e!==null){let r=n[yn][sn],i=e.projection;return r.projection[i]}return null}function Bp(n,e){let t=Bt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return qu(r,i)}return e[vi]}function FO(n,e,t){let r=kg(n,e);r&&PO(n,r,e,t)}function Fg(n,e,t,r,i,s,o){for(;t!=null;){let a=r[t.index],u=t.type;if(o&&e===0&&(a&&Rr(vn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Fg(n,e,t.child,r,i,s,!1),Ts(e,n,i,a,s);else if(u&32){let l=Og(t,r),h;for(;h=l();)Ts(e,n,i,h,s);Ts(e,n,i,a,s)}else u&16?LO(n,e,r,t,i,s):Ts(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Rl(n,e,t,r,i,s){Fg(t,r,n.firstChild,e,i,s,!1)}function LO(n,e,t,r,i,s){let o=t[yn],u=o[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ts(e,n,i,h,s)}else{let l=u,h=o[ut];Sb(r)&&(l.flags|=128),Fg(n,e,l,h,i,s,!0)}}function VO(n,e,t,r,i){let s=t[vi],o=vn(t);s!==o&&Ts(e,n,r,s,i);for(let a=Bt;a<t.length;a++){let u=t[a];Rl(u[de],u,n,e,r,s)}}function UO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:In.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=In.Important),n.setStyle(t,r,i,s))}}function jO(n,e,t){n.setAttribute(e,"style",t)}function $b(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Hb(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cp(n,e,r),i!==null&&$b(n,e,i),s!==null&&jO(n,e,s)}var on={};function Le(n=1){qb(lt(),Te(),Mr()+n,!1)}function qb(n,e,t,r){if(!r)if((e[Q]&3)===3){let s=n.preOrderCheckHooks;s!==null&&$u(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Hu(e,s,0,t)}_i(t)}function ve(n,e=se.Default){let t=Te();if(t===null)return $(n,e);let r=Rt();return Tb(r,t,vt(n),e)}function zb(){let n="invalid";throw new Error(n)}function Gb(n,e,t,r,i,s){let o=ye(null);try{let a=null;i&$t.SignalBased&&(a=e[r][Vf]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&$t.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):XT(e,a,r,s)}finally{ye(o)}}function BO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_i(~i);else{let s=i,o=t[++r],a=t[++r];Ox(o,s);let u=e[s];a(2,u)}}}finally{_i(-1)}}function Nl(n,e,t,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Kn]=i,p[Q]=r|4|128|8|64,(l!==null||n&&n[Q]&2048)&&(p[Q]|=2048),ib(p),p[ut]=p[Us]=n,p[nn]=t,p[mn]=o||n&&n[mn],p[Fe]=a||n&&n[Fe],p[Ms]=u||n&&n[Ms]||null,p[sn]=s,p[_l]=iO(),p[Yu]=h,p[YT]=l,p[yn]=e.type==2?n[yn]:p,p}function Ta(n,e,t,r,i){let s=n.data[e];if(s===null)s=$O(n,e,t,r,i),xx()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Rx();s.injectorIndex=o===null?-1:o.injectorIndex}return Ti(s,!0),s}function $O(n,e,t,r,i){let s=ab(),o=Tg(),a=o?s:s&&s.parent,u=n.data[e]=WO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Wb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Kb(n,e,t,r,i){let s=Mr(),o=r&2;try{_i(-1),o&&e.length>$n&&qb(n,e,$n,!1),fn(o?2:0,i),t(r,i)}finally{_i(s),fn(o?3:1,i)}}function Lg(n,e,t){if(Ig(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{ye(r)}}}function Vg(n,e,t){ob()&&(ZO(n,e,t,qt(t,e)),(t.flags&64)===64&&Xb(n,e,t))}function Ug(n,e,t=qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Qb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function jg(n,e,t,r,i,s,o,a,u,l,h){let p=$n+r,y=p+i,_=HO(p,y),A=typeof l=="function"?l():l;return _[de]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function HO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:on);return t}function qO(n,e,t,r){let s=r.get(hO,Ob)||t===gn.ShadowDom,o=n.selectRootElement(e,s);return zO(o),o}function zO(n){GO(n)}var GO=()=>null;function WO(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=$t.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?uT(r,t,l,a,u):uT(r,t,l,a)}return r}function uT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function KO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=t?t.get(p):null,_=y?y.inputs:null,A=y?y.outputs:null;u=cT(0,p.inputs,h,u,_),l=cT(1,p.outputs,h,l,A);let R=u!==null&&o!==null&&!mg(e)?lk(u,h,o):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function QO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Yb(n,e,t,r,i,s,o,a){let u=qt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?($g(n,t,h,r,i),Il(e)&&YO(t,e.index)):e.type&3?(r=QO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function YO(n,e){let t=Pr(e,n);t[Q]&16||(t[Q]|=64)}function Bg(n,e,t,r){if(ob()){let i=r===null?null:{"":-1},s=tk(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Jb(n,e,t,o,i,a),i&&nk(t,r,i)}t.mergedAttrs=ha(t.mergedAttrs,t.attrs)}function Jb(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Op(tl(t,e),n,r[l].type);ik(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Wb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ha(t.mergedAttrs,h.hostAttrs),sk(n,t,e,u,h),rk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}KO(n,t,s)}function JO(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;XO(o)!=a&&o.push(a),o.push(t,r,s)}}function XO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZO(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Il(t)&&ok(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||tl(t,e),Rr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let u=n.data[a],l=ks(e,n,a,t);if(Rr(l,e),o!==null&&uk(e,a-i,l,u,t,o),Sr(u)){let h=Pr(t.index,e);h[nn]=ks(e,n,a,t)}}}function Xb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=kx();try{_i(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Mp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ek(u,l)}}finally{_i(-1),Mp(o)}}function ek(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(HM(e,o.selectors,!1))if(r||(r=[]),Sr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;$p(n,e,u)}else r.unshift(o),$p(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function $p(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function rk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Sr(e)&&(t[""]=n)}}function ik(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sk(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ss(i.type,!0)),o=new Ii(s,Sr(i),ve);n.blueprint[r]=o,t[r]=o,JO(n,e,r,Wb(n,t,i.hostVars,on),i)}function ok(n,e,t){let r=qt(e,n),i=Qb(t),s=n[mn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Pl(n,Nl(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function ak(n,e,t,r,i,s){let o=qt(n,e);ck(e[Fe],o,s,n.value,t,r,i)}function ck(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ds(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function uk(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Gb(r,t,u,l,h,p)}}function lk(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function Zb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function eD(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ub(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function Pl(n,e){return n[ga]?n[XE][tn]=e:n[ga]=e,n[XE]=e,e}function Hp(n,e,t){ub(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function dk(n){return n[pa]||(n[pa]=[])}function hk(n){return n.cleanup||(n.cleanup=[])}function tD(n,e){let t=n[Ms],r=t?t.get(_n,null):null;r&&r.handleError(e)}function $g(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],u=t[s++],l=e[o],h=n.data[o];Gb(h,l,r,a,u,i)}}function nD(n,e,t){let r=nb(e,n);IO(n[Fe],r,t)}function fk(n,e){let t=Pr(e,n),r=t[de];pk(r,t);let i=t[Kn];i!==null&&t[Yu]===null&&(t[Yu]=xg(i,t[Ms])),Hg(r,t,t[nn])}function pk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hg(n,e,t){Dg(e);try{let r=n.viewQuery;r!==null&&Hp(1,r,t);let i=n.template;i!==null&&Kb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xs]?.finishViewCreation(n),n.staticContentQueries&&eD(n,e),n.staticViewQueries&&Hp(2,n.viewQuery,t);let s=n.components;s!==null&&gk(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Q]&=-5,Cg()}}function gk(n,e){for(let t=0;t<e.length;t++)fk(n,e[t])}function mk(n,e,t,r){let i=ye(null);try{let s=e.tView,a=n[Q]&4096?4096:16,u=Nl(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[vl]=l;let h=n[xs];return h!==null&&(u[xs]=h.createEmbeddedView(s)),Hg(s,u,t),u}finally{ye(i)}}function lT(n,e){return!e||e.firstChild===null||Sb(n)}function yk(n,e,t,r=!0){let i=e[de];if(DO(i,e,n,t),r){let o=Bp(t,n),a=e[Fe],u=kg(a,n[vi]);u!==null&&TO(i,n[sn],a,e,u,o)}let s=e[Yu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function rl(n,e,t,r,i=!1){for(;t!==null;){let s=e[t.index];s!==null&&r.push(vn(s)),Qn(s)&&vk(s,r);let o=t.type;if(o&8)rl(n,e,t.child,r);else if(o&32){let a=Og(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Bb(e,t);if(Array.isArray(a))r.push(...a);else{let u=ya(e[yn]);rl(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vk(n,e){for(let t=Bt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&rl(r[de],r,i,e)}n[vi]!==n[Kn]&&e.push(n[vi])}var rD=[];function _k(n){return n[yi]??Ik(n)}function Ik(n){let e=rD.pop()??Object.create(Ek);return e.lView=n,e}function wk(n){n.lView[yi]!==n&&(n.lView=null,rD.push(n))}var Ek=Ee(L({},pE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ma(n.lView)},consumerOnSignalRead(){this.lView[yi]=this}}),iD=100;function sD(n,e=!0,t=0){let r=n[mn],i=r.rendererFactory,s=!1;s||i.begin?.();try{Tk(n,t)}catch(o){throw e&&tD(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Tk(n,e){qp(n,e);let t=0;for(;Eg(n);){if(t===iD)throw new H(103,!1);t++,qp(n,1)}}function bk(n,e,t,r){let i=e[Q];if((i&256)===256)return;let s=!1;!s&&e[mn].inlineEffectRunner?.flush(),Dg(e);let o=null,a=null;!s&&Dk(n)&&(a=_k(e),o=gE(a));try{ib(e),Mx(n.bindingStartIndex),t!==null&&Kb(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&$u(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Hu(e,p,0,null),lp(e,0)}if(Ck(e),oD(e,0),n.contentQueries!==null&&eD(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&$u(e,p)}else{let p=n.contentHooks;p!==null&&Hu(e,p,1),lp(e,1)}BO(n,e);let l=n.components;l!==null&&cD(e,l,0);let h=n.viewQuery;if(h!==null&&Hp(2,h,r),!s)if(u){let p=n.viewCheckHooks;p!==null&&$u(e,p)}else{let p=n.viewHooks;p!==null&&Hu(e,p,2),lp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[up]){for(let p of e[up])p();e[up]=null}s||(e[Q]&=-73)}catch(u){throw ma(e),u}finally{a!==null&&(mE(a,o),wk(a)),Cg()}}function Dk(n){return n.type!==2}function oD(n,e){for(let t=Nb(n);t!==null;t=Pb(t))for(let r=Bt;r<t.length;r++){let i=t[r];aD(i,e)}}function Ck(n){for(let e=Nb(n);e!==null;e=Pb(e)){if(!(e[Q]&_g.HasTransplantedViews))continue;let t=e[Xu];for(let r=0;r<t.length;r++){let i=t[r],s=i[ut];Ix(i)}}}function Ak(n,e,t){let r=Pr(e,n);aD(r,t)}function aD(n,e){wg(n)&&qp(n,e)}function qp(n,e){let r=n[de],i=n[Q],s=n[yi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Uf(s)),s&&(s.dirty=!1),n[Q]&=-9217,o)bk(r,n,r.template,n[nn]);else if(i&8192){oD(n,1);let a=r.components;a!==null&&cD(n,a,1)}}function cD(n,e,t){for(let r=0;r<e.length;r++)Ak(n,e[r],t)}function qg(n){for(n[mn].changeDetectionScheduler?.notify();n;){n[Q]|=64;let e=ya(n);if(dx(n)&&!e)return n;n=e}return null}var wi=class{get rootNodes(){let e=this._lView,t=e[de];return rl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Qn(e)){let t=e[Ju],r=t?t.indexOf(this):-1;r>-1&&(jp(e,r),Ku(t,r))}this._attachedToViewContainer=!1}Ub(this._lView[de],this._lView)}onDestroy(e){sb(this._lView,e)}markForCheck(){qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){Pp(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,sD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Lb(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,Pp(this._lView)}},Ml=(()=>{class n{static{this.__NG_ELEMENT_ID__=Nk}}return n})(),Sk=Ml,Rk=class extends Sk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=mk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wi(i)}};function Nk(){return Pk(Rt(),Te())}function Pk(n,e){return n.type&4?new Rk(e,n,Cl(n,e)):null}var B8=new RegExp(`^(\\d+)*(${lO}|${uO})*(.*)`);var Mk=()=>null;function dT(n,e){return Mk(n,e)}var il=class{},zp=class{},sl=class{};function xk(n){let e=Error(`No component factory found for ${It(n)}.`);return e[Ok]=n,e}var Ok="ngComponent";var Gp=class{resolveComponentFactory(e){throw xk(e)}},xl=(()=>{class n{static{this.NULL=new Gp}}return n})(),va=class{},bi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>kk()}}return n})();function kk(){let n=Te(),e=Rt(),t=Pr(e.index,n);return(gi(t)?t:n)[Fe]}var Fk=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>null})}}return n})(),gp={};var hT=new Set;function Ol(n){hT.has(n)||(hT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function fT(...n){}function Lk(){let n=typeof ua.requestAnimationFrame=="function",e=ua[n?"requestAnimationFrame":"setTimeout"],t=ua[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ge=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _t(!1),this.onMicrotaskEmpty=new _t(!1),this.onStable=new _t(!1),this.onError=new _t(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Lk().nativeRequestAnimationFrame,jk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Vk,fT,fT);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Vk={};function zg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Uk(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ua,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Wp(n),n.isCheckStableRunning=!0,zg(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Wp(n))}function jk(n){let e=()=>{Uk(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(Bk(a))return t.invokeTask(i,s,o,a);try{return pT(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gT(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return pT(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),gT(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Wp(n),zg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Wp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function pT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gT(n){n._nesting--,zg(n)}function Bk(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var bs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(bs||{}),$k={destroy(){}};function kl(n,e){!e&&ux(kl);let t=e?.injector??M(Et);if(!yO(t))return $k;Ol("NgAfterNextRender");let r=t.get(Gg),i=r.handler??=new Qp,s=e?.phase??bs.MixedReadWrite,o=()=>{i.unregister(u),a()},a=t.get(Rg).onDestroy(o),u=rn(t,()=>new Kp(s,()=>{o(),n()}));return i.register(u),{destroy:o}}var Kp=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=M(ge),this.errorHandler=M(_n,{optional:!0}),M(il,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Qp=class{constructor(){this.executingCallbacks=!1,this.buckets={[bs.EarlyRead]:new Set,[bs.Write]:new Set,[bs.MixedReadWrite]:new Set,[bs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Gg=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})();function ol(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ep(i,a);else if(s==2){let u=a,l=e[++o];r=Ep(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var al=class extends xl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ar(e);return new Fs(t,this.ngModule)}};function mT(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function Hk(n){let e=n.toLowerCase();return e==="svg"?gx:e==="math"?mx:null}var Yp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=gl(r);let i=this.injector.get(e,gp,r);return i!==gp||t===gp?i:this.parentInjector.get(e,t,r)}},Fs=class extends sl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=mT(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return mT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=WM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Yp(e,o):e,u=a.get(va,null);if(u===null)throw new H(407,!1);let l=a.get(Fk,null),h=a.get(Gg,null),p=a.get(il,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?qO(_,r,this.componentDef.encapsulation,a):Fb(_,A,Hk(A)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let O=null;R!==null&&(O=xg(R,a,!0));let z=jg(0,null,null,1,0,null,null,null,null,null,null),F=Nl(null,z,null,N,null,null,y,_,a,null,O);Dg(F);let ee,De;try{let W=this.componentDef,T,v=null;W.findHostDirectiveDefs?(T=[],v=new Map,W.findHostDirectiveDefs(W,T,v),T.push(W)):T=[W];let I=qk(F,R),E=zk(I,R,W,T,F,y,_);De=rb(z,$n),R&&Kk(_,W,R,r),t!==void 0&&Qk(De,this.ngContentSelectors,t),ee=Wk(E,W,T,v,F,[Yk]),Hg(z,F,null)}finally{Cg()}return new Jp(this.componentType,ee,Cl(De,F),F,De)}finally{ye(s)}}},Jp=class extends zp{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;$g(s[de],s,i,e,t),this.previousInputValues.set(e,t);let o=Pr(this._tNode.index,s);qg(o)}}get injector(){return new mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qk(n,e){let t=n[de],r=$n;return n[r]=e,Ta(t,r,2,"#host",null)}function zk(n,e,t,r,i,s,o){let a=i[de];Gk(r,n,e,o);let u=null;e!==null&&(u=xg(e,i[Ms]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Nl(i,Qb(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&$p(a,n,r.length-1),Pl(i,p),i[n.index]=p}function Gk(n,e,t,r){for(let i of n)e.mergedAttrs=ha(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ol(e,e.mergedAttrs,!0),t!==null&&Hb(r,t,e))}function Wk(n,e,t,r,i,s){let o=Rt(),a=i[de],u=qt(o,i);Jb(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,y=ks(i,a,p,o);Rr(y,i)}Xb(a,i,o),u&&Rr(u,i);let l=ks(i,a,o.directiveStart+o.componentOffset,o);if(n[nn]=i[nn]=l,s!==null)for(let h of s)h(l,e);return Lg(a,o,i),l}function Kk(n,e,t,r){if(r)Cp(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=KM(e.selectors[0]);i&&Cp(n,t,i),s&&s.length>0&&$b(n,t,s.join(" "))}}function Qk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Yk(){let n=Rt();Dl(Te()[de],n)}var Di=(()=>{class n{static{this.__NG_ELEMENT_ID__=Jk}}return n})();function Jk(){let n=Rt();return Zk(n,Te())}var Xk=Di,uD=class extends Xk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Cl(this._hostTNode,this._hostLView)}get injector(){return new mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sg(this._hostTNode,this._hostLView);if(yb(e)){let t=el(e,this._hostLView),r=Zu(e),i=t[de].data[r+8];return new mi(i,t)}else return new mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=yT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=dT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,lT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!lx(e),a;if(o)a=t;else{let A=t||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Fs(Ar(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(ct,null);R&&(s=R)}let h=Ar(u.componentType??{}),p=dT(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,s);return this.insertImpl(_.hostView,a,lT(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(_x(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new uD(u,u[sn],u[ut]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return yk(o,i,s,r),e.attachToViewContainerRef(),OT(mp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=yT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=jp(this._lContainer,t);r&&(Ku(mp(this._lContainer),t),Ub(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=jp(this._lContainer,t);return r&&Ku(mp(this._lContainer),t)!=null?new wi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function yT(n){return n[Ju]}function mp(n){return n[Ju]||(n[Ju]=[])}function Zk(n,e){let t,r=e[n.index];return Qn(r)?t=r:(t=Zb(r,e,null,n),e[n.index]=t,Pl(e,t)),t1(t,e,n,r),new uD(t,n,e)}function e1(n,e){let t=n[Fe],r=t.createComment(""),i=qt(e,n),s=kg(t,i);return nl(t,s,r,MO(t,i),!1),r}var t1=i1,n1=()=>!1;function r1(n,e,t){return n1(n,e,t)}function i1(n,e,t,r){if(n[vi])return;let i;t.type&8?i=vn(r):i=e1(e,t),n[vi]=i}function s1(n){return typeof n=="function"&&n[Vf]!==void 0}function lD(n){return s1(n)&&typeof n.set=="function"}function o1(n){return Object.getPrototypeOf(n.prototype).constructor}function Ci(n){let e=o1(n.type),t=!0,r=[n];for(;e;){let i;if(Sr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Uu(n.inputs),o.inputTransforms=Uu(n.inputTransforms),o.declaredInputs=Uu(n.declaredInputs),o.outputs=Uu(n.outputs);let a=i.hostBindings;a&&d1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&u1(n,u),l&&l1(n,l),a1(n,i),gM(n.outputs,i.outputs),Sr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ci&&(t=!1)}}e=Object.getPrototypeOf(e)}c1(r)}function a1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function c1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,t=ha(t,i.hostAttrs))}}function Uu(n){return n===Rs?{}:n===St?[]:n}function u1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function l1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function d1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Hn=class{},_a=class{};function dD(n,e){return new cl(n,e??null,[])}var cl=class extends Hn{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new al(this);let i=$T(e);this._bootstrapComponents=kb(i.bootstrap),this._r3Injector=Cb(e,t,[{provide:Hn,useValue:this},{provide:xl,useValue:this.componentFactoryResolver},...r],It(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xp=class extends _a{constructor(e){super(),this.moduleType=e}create(e){return new cl(this.moduleType,e,[])}};var ul=class extends Hn{constructor(e){super(),this.componentFactoryResolver=new al(this),this.instance=null;let t=new fa([...e.providers,{provide:Hn,useValue:this},{provide:xl,useValue:this.componentFactoryResolver}],e.parent||vg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fl(n,e,t=null){return new ul({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Bs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hD(n){return Wg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function h1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Wg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function f1(n,e,t){return n[e]=t}function qn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fD(n,e,t,r){let i=qn(n,e,t);return qn(n,e+1,r)||i}function p1(n,e,t,r,i){let s=fD(n,e,t,r);return qn(n,e+2,i)||s}function g1(n){return(n.flags&32)===32}function m1(n,e,t,r,i,s,o,a,u){let l=e.consts,h=Ta(e,n,4,o||null,Os(l,a));Bg(e,t,h,Os(l,u)),Dl(e,h);let p=h.tView=jg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function En(n,e,t,r,i,s,o,a){let u=Te(),l=lt(),h=n+$n,p=l.firstCreatePass?m1(h,l,u,e,t,r,i,s,o):l.data[h];Ti(p,!1);let y=y1(l,u,p,n);Tl()&&Sl(l,u,y,p),Rr(y,u);let _=Zb(y,u,y,p);return u[h]=_,Pl(u,_),r1(_,p,u),wl(p)&&Vg(l,u,p),o!=null&&Ug(u,p,a),En}var y1=v1;function v1(n,e,t,r){return bl(!0),e[Fe].createComment("")}function Ll(n,e,t,r){let i=Te(),s=El();if(qn(i,s,e)){let o=lt(),a=Ag();ak(a,i,n,e,t,r)}return Ll}function _1(n,e,t,r){return qn(n,El(),t)?e+Ds(t)+r:on}function I1(n,e,t,r,i,s,o,a){let u=Px(),l=p1(n,u,t,i,o);return bg(3),l?e+Ds(t)+r+Ds(i)+s+Ds(o)+a:on}function ju(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function w1(n){return(n&2)==2}function E1(n,e){return n&131071|e<<17}function Zp(n){return n|2}function Ls(n){return(n&131068)>>2}function yp(n,e){return n&-131069|e<<2}function T1(n){return(n&1)===1}function eg(n){return n|1}function b1(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ei(o),u=Ls(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ea(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=Ei(n[a+1]);n[r+1]=ju(y,a),y!==0&&(n[y+1]=yp(n[y+1],r)),n[a+1]=E1(n[a+1],r)}else n[r+1]=ju(a,0),a!==0&&(n[a+1]=yp(n[a+1],r)),a=r;else n[r+1]=ju(u,0),a===0?a=r:n[u+1]=yp(n[u+1],r),u=r;l&&(n[r+1]=Zp(n[r+1])),vT(n,h,r,!0),vT(n,h,r,!1),D1(e,h,n,r,s),o=ju(a,u),s?e.classBindings=o:e.styleBindings=o}function D1(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ea(s,e)>=0&&(t[r+1]=eg(t[r+1]))}function vT(n,e,t,r){let i=n[t+1],s=e===null,o=r?Ei(i):Ls(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],l=n[o+1];C1(u,e)&&(a=!0,n[o+1]=r?eg(l):Zp(l)),o=r?Ei(l):Ls(l)}a&&(n[t+1]=r?Zp(i):eg(i))}function C1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ea(n,e)>=0:!1}var en={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function A1(n){return n.substring(en.key,en.keyEnd)}function S1(n){return R1(n),pD(n,gD(n,0,en.textEnd))}function pD(n,e){let t=en.textEnd;return t===e?-1:(e=en.keyEnd=N1(n,en.key=e,t),gD(n,e,t))}function R1(n){en.key=0,en.keyEnd=0,en.value=0,en.valueEnd=0,en.textEnd=n.length}function gD(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function N1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ze(n,e,t){let r=Te(),i=El();if(qn(r,i,e)){let s=lt(),o=Ag();Yb(s,o,r,n,e,r[Fe],t,!1)}return ze}function tg(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";$g(n,t,s[o],o,r)}function Vl(n,e,t){return mD(n,e,t,!1),Vl}function Kg(n,e){return mD(n,e,null,!0),Kg}function Ul(n){M1(V1,P1,n,!0)}function P1(n,e){for(let t=S1(e);t>=0;t=pD(e,t))gg(n,A1(e),!0)}function mD(n,e,t,r){let i=Te(),s=lt(),o=bg(2);if(s.firstUpdatePass&&vD(s,n,o,r),e!==on&&qn(i,o,e)){let a=s.data[Mr()];_D(s,a,i,i[Fe],n,i[o+1]=j1(e,t),r,o)}}function M1(n,e,t,r){let i=lt(),s=bg(2);i.firstUpdatePass&&vD(i,null,s,r);let o=Te();if(t!==on&&qn(o,s,t)){let a=i.data[Mr()];if(ID(a,r)&&!yD(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Ep(u,t||"")),tg(i,a,o,t,r)}else U1(i,a,o,o[Fe],o[s+1],o[s+1]=L1(n,e,t),r,s)}}function yD(n,e){return e>=n.expandoStartIndex}function vD(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Mr()],o=yD(n,t);ID(s,r)&&e===null&&!o&&(e=!1),e=x1(i,s,e,r),b1(i,s,e,t,o,r)}}function x1(n,e,t,r){let i=Fx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vp(null,n,e,t,r),t=Ia(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=vp(i,n,e,t,r),s===null){let u=O1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=vp(null,n,e,u[1],r),u=Ia(u,e.attrs,r),k1(n,e,r,u))}else s=F1(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function O1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ls(r)!==0)return n[Ei(r)]}function k1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ei(i)]=r}function F1(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ia(r,o,t)}return Ia(r,e.attrs,t)}function vp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ia(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ia(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),gg(n,o,t?!0:e[++s]))}return n===void 0?null:n}function L1(n,e,t){if(t==null||t==="")return St;let r=[],i=Al(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function V1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&gg(n,r,t)}function U1(n,e,t,r,i,s,o,a){i===on&&(i=St);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,_=l<s.length?s[l+1]:void 0,A=null,R;h===p?(u+=2,l+=2,y!==_&&(A=p,R=_)):p===null||h!==null&&h<p?(u+=2,A=h):(l+=2,A=p,R=_),A!==null&&_D(n,e,t,r,A,R,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function _D(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=T1(l)?_T(u,e,t,i,Ls(l),o):void 0;if(!ll(h)){ll(s)||w1(l)&&(s=_T(u,null,t,i,a,o));let p=nb(Mr(),t);UO(r,o,p,i,s)}}function _T(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===on&&(y=p?St:void 0);let _=p?ap(y,r):h===r?y:void 0;if(l&&!ll(_)&&(_=ap(u,r)),ll(_)&&(a=_,o))return a;let A=n[i+1];i=o?Ei(A):Ls(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=ap(u,r))}return a}function ll(n){return n!==void 0}function j1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=It(Al(n)))),n}function ID(n,e){return(n.flags&(e?8:16))!==0}function B1(n,e,t,r,i,s){let o=e.consts,a=Os(o,i),u=Ta(e,n,2,r,a);return Bg(e,t,u,Os(o,s)),u.attrs!==null&&ol(u,u.attrs,!1),u.mergedAttrs!==null&&ol(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ie(n,e,t,r){let i=Te(),s=lt(),o=$n+n,a=i[Fe],u=s.firstCreatePass?B1(o,s,i,e,t,r):s.data[o],l=$1(s,i,u,a,e,n);i[o]=l;let h=wl(u);return Ti(u,!0),Hb(a,l,u),!g1(u)&&Tl()&&Sl(s,i,l,u),Tx()===0&&Rr(l,i),bx(),h&&(Vg(s,i,u),Lg(s,u,i)),r!==null&&Ug(i,u),Ie}function be(){let n=Rt();Tg()?cb():(n=n.parent,Ti(n,!1));let e=n;Ax(e)&&Sx(),Dx();let t=lt();return t.firstCreatePass&&(Dl(t,n),Ig(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Hx(e)&&tg(t,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qx(e)&&tg(t,e,Te(),e.stylesWithoutHost,!1),be}function Ai(n,e,t,r){return Ie(n,e,t,r),be(),Ai}var $1=(n,e,t,r,i,s)=>(bl(!0),Fb(r,i,Ux()));function H1(n,e,t,r,i){let s=e.consts,o=Os(s,r),a=Ta(e,n,8,"ng-container",o);o!==null&&ol(a,o,!0);let u=Os(s,i);return Bg(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function wD(n,e,t){let r=Te(),i=lt(),s=n+$n,o=i.firstCreatePass?H1(s,i,r,e,t):i.data[s];Ti(o,!0);let a=q1(i,r,o,n);return r[s]=a,Tl()&&Sl(i,r,a,o),Rr(a,r),wl(o)&&(Vg(i,r,o),Lg(i,o,r)),t!=null&&Ug(r,o),wD}function ED(){let n=Rt(),e=lt();return Tg()?cb():(n=n.parent,Ti(n,!1)),e.firstCreatePass&&(Dl(e,n),Ig(n)&&e.queries.elementEnd(n)),ED}function Qg(n,e,t){return wD(n,e,t),ED(),Qg}var q1=(n,e,t,r)=>(bl(!0),wO(e[Fe],""));function Or(){return Te()}var dl="en-US";var z1=dl;function G1(n){typeof n=="string"&&(z1=n.toLowerCase().replace(/_/g,"-"))}function nt(n,e,t,r){let i=Te(),s=lt(),o=Rt();return TD(s,i,i[Fe],o,n,e,r),nt}function W1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[pa],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function TD(n,e,t,r,i,s,o){let a=wl(r),l=n.firstCreatePass&&hk(n),h=e[nn],p=dk(e),y=!0;if(r.type&3||o){let R=qt(r,e),N=o?o(R):R,O=p.length,z=o?ee=>o(vn(ee[r.index])):r.index,F=null;if(!o&&a&&(F=W1(n,e,i,r.index)),F!==null){let ee=F.__ngLastListenerFn__||F;ee.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,y=!1}else{s=wT(r,e,h,s,!1);let ee=t.listen(N,i,s);p.push(s,ee),l&&l.push(i,z,O,O+1)}}else s=wT(r,e,h,s,!1);let _=r.outputs,A;if(y&&_!==null&&(A=_[i])){let R=A.length;if(R)for(let N=0;N<R;N+=2){let O=A[N],z=A[N+1],De=e[O][z].subscribe(s),W=p.length;p.push(s,De),l&&l.push(i,r.index,W,-(W+1))}}}function IT(n,e,t,r){let i=ye(null);try{return fn(6,e,t),t(r)!==!1}catch(s){return tD(n,s),!1}finally{fn(7,e,t),ye(i)}}function wT(n,e,t,r,i){return function s(o){if(o===Function)return r;let a=n.componentOffset>-1?Pr(n.index,e):e;qg(a);let u=IT(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=IT(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function te(n=1){return Vx(n)}function Ge(n,e=""){let t=Te(),r=lt(),i=n+$n,s=r.firstCreatePass?Ta(r,i,1,e,null):r.data[i],o=K1(r,t,s,e,n);t[i]=o,Tl()&&Sl(r,t,o,s),Ti(s,!1)}var K1=(n,e,t,r,i)=>(bl(!0),_O(e[Fe],r));function jl(n){return kr("",n,""),jl}function kr(n,e,t){let r=Te(),i=_1(r,n,e,t);return i!==on&&nD(r,Mr(),i),kr}function Yg(n,e,t,r,i,s,o){let a=Te(),u=I1(a,n,e,t,r,i,s,o);return u!==on&&nD(a,Mr(),u),Yg}function Bl(n,e,t){lD(e)&&(e=e());let r=Te(),i=El();if(qn(r,i,e)){let s=lt(),o=Ag();Yb(s,o,r,n,e,r[Fe],t,!1)}return Bl}function Jg(n,e){let t=lD(n);return t&&n.set(e),t}function $l(n,e){let t=Te(),r=lt(),i=Rt();return TD(r,t,t[Fe],i,n,e),$l}function Q1(n,e,t){let r=lt();if(r.firstCreatePass){let i=Sr(n);ng(t,r.data,r.blueprint,i,!0),ng(e,r.data,r.blueprint,i,!1)}}function ng(n,e,t,r,i){if(n=vt(n),Array.isArray(n))for(let s=0;s<n.length;s++)ng(n[s],e,t,r,i);else{let s=lt(),o=Te(),a=Rt(),u=Ps(n)?n:vt(n.provide),l=KT(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Ps(n)||!n.multi){let _=new Ii(l,i,ve),A=Ip(u,e,i?h:h+y,p);A===-1?(Op(tl(a,o),s,u),_p(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[A]=_,o[A]=_)}else{let _=Ip(u,e,h+y,p),A=Ip(u,e,h,h+y),R=_>=0&&t[_],N=A>=0&&t[A];if(i&&!N||!i&&!R){Op(tl(a,o),s,u);let O=X1(i?J1:Y1,t.length,i,r,l);!i&&N&&(t[A].providerFactory=O),_p(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=bD(t[i?A:_],l,!i&&r);_p(s,n,_>-1?_:A,O)}!i&&r&&N&&t[A].componentProviders++}}}function _p(n,e,t,r){let i=Ps(e),s=nx(e);if(i||s){let u=(s?vt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function bD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ip(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Y1(n,e,t,r){return rg(this.multi,[])}function J1(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ks(t,t[de],this.providerFactory.index,r);s=a.slice(0,o),rg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],rg(i,s);return s}function rg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function X1(n,e,t,r,i){let s=new Ii(n,t,ve);return s.multi=[],s.index=e,s.componentProviders=0,bD(s,i,r&&!t),s}function Hl(n,e=[]){return t=>{t.providersResolver=(r,i)=>Q1(r,i?i(n):n,e)}}var Z1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zT(!1,t.type),i=r.length>0?Fl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n($(ct))})}}return n})();function Fr(n){Ol("NgStandalone"),n.getStandaloneInjector=e=>e.get(Z1).getOrCreateStandaloneInjector(n)}function DD(n,e,t,r,i){return tF(Te(),Nx(),n,e,t,r,i)}function eF(n,e){let t=n[e];return t===on?void 0:t}function tF(n,e,t,r,i,s,o){let a=e+t;return fD(n,a,i,s)?f1(n,a+2,o?r.call(o,i,s):r(i,s)):eF(n,a+2)}var zn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},CD=new zn("17.3.12"),ql=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var AD=new B("");function Si(n){return!!n&&typeof n.then=="function"}function SD(n){return!!n&&typeof n.subscribe=="function"}var zl=new B(""),RD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=M(zl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Si(s))t.push(s);else if(SD(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ba=new B("");function nF(){vE(()=>{throw new H(600,!1)})}function rF(n){return n.isBoundToModule}function iF(n,e,t){try{let r=t();return Si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var $s=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(Ab),this.afterRenderEffectManager=M(Gg),this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=M(Bs).hasPendingTasks.pipe(re(t=>!t)),this._injector=M(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof sl;if(!this._injector.get(RD).done){let y=!i&&BT(t),_=!1;throw new H(405,_)}let o;i?o=t:o=this._injector.get(xl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=rF(o)?void 0:this._injector.get(Hn),u=r||o.selector,l=o.create(Et.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(AD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),wp(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new H(101,!1);let r=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ye(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===iD)throw new H(103,!1);if(t){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)sF(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ig(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ig(s))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;wp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ba,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>wp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sF(n,e,t){!e&&!ig(n)||oF(n,t,e)}function ig(n){return Eg(n)}function oF(n,e,t){let r;t?(r=0,n[Q]|=1024):n[Q]&64?r=0:r=1,sD(n,e,r)}var sg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Gl=(()=>{class n{compileModuleSync(t){return new Xp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$T(t),s=kb(i.declarations).reduce((o,a)=>{let u=Ar(a);return u&&o.push(new Fs(u)),o},[]);return new sg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aF=(()=>{class n{constructor(){this.zone=M(ge),this.applicationRef=M($s)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cF(n){return[{provide:ge,useFactory:n},{provide:Ns,multi:!0,useFactory:()=>{let e=M(aF,{optional:!0});return()=>e.initialize()}},{provide:Ns,multi:!0,useFactory:()=>{let e=M(hF);return()=>{e.initialize()}}},{provide:Ab,useFactory:uF}]}function uF(){let n=M(ge),e=M(_n);return t=>n.runOutsideAngular(()=>e.handleError(t))}function lF(n){let e=cF(()=>new ge(dF(n)));return Ht([[],e])}function dF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hF=(()=>{class n{constructor(){this.subscription=new ke,this.initialized=!1,this.zone=M(ge),this.pendingTasks=M(Bs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fF(){return typeof $localize<"u"&&$localize.locale||dl}var Xg=new B("",{providedIn:"root",factory:()=>M(Xg,se.Optional|se.SkipSelf)||fF()});var ND=new B("");var zu=null;function pF(n=[],e){return Et.create({name:e,providers:[{provide:yl,useValue:"platform"},{provide:ND,useValue:new Set([()=>zu=null])},...n]})}function gF(n=[]){if(zu)return zu;let e=pF(n);return zu=e,nF(),mF(e),e}function mF(n){n.get(Pg,null)?.forEach(t=>t())}var Ri=(()=>{class n{static{this.__NG_ELEMENT_ID__=yF}}return n})();function yF(n){return vF(Rt(),Te(),(n&16)===16)}function vF(n,e,t){if(Il(n)&&!t){let r=Pr(n.index,e);return new wi(r,r)}else if(n.type&47){let r=e[yn];return new wi(r,e)}return null}var og=class{constructor(){}supports(e){return hD(e)}create(e){return new ag(e)}},_F=(n,e)=>e,ag=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_F}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ET(r,i,s)?t:r,a=ET(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<s.length?s[y]:s[y]=0,A=_+y;h<=A&&A<l&&(s[y]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hD(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,h1(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new cg(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},cg=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ug=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ug,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ET(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var lg=class{constructor(){}supports(e){return e instanceof Map||Wg(e)}create(){return new dg}},dg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Wg(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new hg(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},hg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function TT(){return new Zg([new og])}var Zg=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:TT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TT()),deps:[[n,new ml,new tt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new H(901,!1)}}return n})();function bT(){return new em([new lg])}var em=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:bT})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bT()),deps:[[n,new ml,new tt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new H(901,!1)}}return n})();function PD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=gF(r),s=[lF(),...t||[]],a=new ul({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ge);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(_n,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>a.destroy(),y=i.get(ND);return y.add(p),a.onDestroy(()=>{h.unsubscribe(),y.delete(p)}),iF(l,u,()=>{let _=a.get(RD);return _.runInitializers(),_.donePromise.then(()=>{let A=a.get(Xg,dl);G1(A||dl);let R=a.get($s);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Wl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function MD(n){let e=Ar(n);if(!e)return null;let t=new Fs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var VD=null;function Jn(){return VD}function UD(n){VD??=n}var Kl=class{};var dt=new B(""),sm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(EF),providedIn:"platform"})}}return n})(),jD=new B(""),EF=(()=>{class n extends sm{constructor(){super(),this._doc=M(dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jn().getBaseHref(this._doc)}onPopState(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function om(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function xD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Yn(n){return n&&n[0]!=="?"?"?"+n:n}var Ni=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(am),providedIn:"root"})}}return n})(),BD=new B(""),am=(()=>{class n extends Ni{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return om(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Yn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Yn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(sm),$(BD,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$D=(()=>{class n extends Ni{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=om(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Yn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Yn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)($(sm),$(BD,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),qs=(()=>{class n{constructor(t){this._subject=new _t,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=DF(xD(OD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yn(r))}normalize(t){return n.stripTrailingSlash(bF(this._basePath,OD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Yn}static{this.joinWithSlash=om}static{this.stripTrailingSlash=xD}static{this.\u0275fac=function(r){return new(r||n)($(Ni))}}static{this.\u0275prov=U({token:n,factory:()=>TF(),providedIn:"root"})}}return n})();function TF(){return new qs($(Ni))}function bF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function OD(n){return n.replace(/\/index.html$/,"")}function DF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Ql(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var HD=(()=>{class n{constructor(t){this._viewContainerRef=t,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=dD(this.ngComponentOutletNgModule,kD(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(kD(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[r,i]of this._inputsUsed)i?(t.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(t.setInput(r,void 0),this._inputsUsed.delete(r))}static{this.\u0275fac=function(r){return new(r||n)(ve(Di))}}static{this.\u0275dir=wt({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Nr]})}}return n})();function kD(n){return n.get(Hn).injector}var tm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qD=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new tm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),FD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);FD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ve(Di),ve(Ml),ve(Zg))}}static{this.\u0275dir=wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function FD(n,e){n.context.$implicit=e.item}var zD=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){LD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){LD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ve(Di),ve(Ml))}}static{this.\u0275dir=wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),nm=class{constructor(){this.$implicit=null,this.ngIf=null}};function LD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${It(e)}'.`)}var GD=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:In.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ve(xr),ve(em),ve(bi))}}static{this.\u0275dir=wt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var Da=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})(),cm="browser",CF="server";function AF(n){return n===cm}function Yl(n){return n===CF}var WD=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>AF(M(zt))?new rm(M(dt),window):new im})}}return n})(),rm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=SF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function SF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var im=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Hs=class{};var Aa=class{},Xl=class{},Pi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var dm=class{encodeKey(e){return KD(e)}encodeValue(e){return KD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function PF(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}var MF=/%(\d[a-f0-9])/gi,xF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KD(n){return encodeURIComponent(n).replace(MF,(e,t)=>xF[t]??e)}function Jl(n){return`${n}`}var Lr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Jl):[Jl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Jl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Jl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hm=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function OF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function QD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function YD(n){return typeof Blob<"u"&&n instanceof Blob}function JD(n){return typeof FormData<"u"&&n instanceof FormData}function kF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ca=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(OF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Pi,this.context??=new hm,!this.params)this.params=new Lr,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||QD(this.body)||YD(this.body)||JD(this.body)||kF(this.body)?this.body:this.body instanceof Lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||JD(this.body)?null:YD(this.body)?this.body.type||null:QD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,_)=>y.set(_,e.setHeaders[_]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,_)=>y.set(_,e.setParams[_]),h)),new n(t,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},zs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(zs||{}),Sa=class{constructor(e,t=td.Ok,r="OK"){this.headers=e.headers||new Pi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},fm=class n extends Sa{constructor(e={}){super(e),this.type=zs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zl=class n extends Sa{constructor(e={}){super(e),this.type=zs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ed=class extends Sa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},td=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(td||{});function lm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var FF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ca)s=t;else{let u;i.headers instanceof Pi?u=i.headers:u=new Pi(i.headers);let l;i.params&&(i.params instanceof Lr?l=i.params:l=new Lr({fromObject:i.params})),s=new Ca(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=G(s).pipe(jn(u=>this.handler.handle(u)));if(t instanceof Ca||i.observe==="events")return o;let a=o.pipe(Ct(u=>u instanceof Zl));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(re(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(re(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Lr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,lm(i,r))}post(t,r,i={}){return this.request("POST",t,lm(i,r))}put(t,r,i={}){return this.request("PUT",t,lm(i,r))}static{this.\u0275fac=function(r){return new(r||n)($(Aa))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function LF(n,e){return e(n)}function VF(n,e,t){return(r,i)=>rn(t,()=>e(r,s=>n(s,i)))}var eC=new B(""),UF=new B(""),jF=new B("");var XD=(()=>{class n extends Aa{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=M(Bs);let i=M(jF,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(eC),...this.injector.get(UF,[])]));this.chain=i.reduceRight((s,o)=>VF(s,o,this.injector),LF)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(pi(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)($(Xl),$(ct))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();var BF=/^\)\]\}',?\n/;function $F(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ZD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new H(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ne(r.\u0275loadImpl()):G(null)).pipe(At(()=>new ae(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((R,N)=>o.setRequestHeader(R,N.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let R=t.detectContentTypeHeader();R!==null&&o.setRequestHeader("Content-Type",R)}if(t.responseType){let R=t.responseType.toLowerCase();o.responseType=R!=="json"?R:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=o.statusText||"OK",N=new Pi(o.getAllResponseHeaders()),O=$F(o)||t.url;return u=new fm({headers:N,status:o.status,statusText:R,url:O}),u},h=()=>{let{headers:R,status:N,statusText:O,url:z}=l(),F=null;N!==td.NoContent&&(F=typeof o.response>"u"?o.responseText:o.response),N===0&&(N=F?td.Ok:0);let ee=N>=200&&N<300;if(t.responseType==="json"&&typeof F=="string"){let De=F;F=F.replace(BF,"");try{F=F!==""?JSON.parse(F):null}catch(W){F=De,ee&&(ee=!1,F={error:W,text:F})}}ee?(s.next(new Zl({body:F,headers:R,status:N,statusText:O,url:z||void 0})),s.complete()):s.error(new ed({error:F,headers:R,status:N,statusText:O,url:z||void 0}))},p=R=>{let{url:N}=l(),O=new ed({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:N||void 0});s.error(O)},y=!1,_=R=>{y||(s.next(l()),y=!0);let N={type:zs.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),t.responseType==="text"&&o.responseText&&(N.partialText=o.responseText),s.next(N)},A=R=>{let N={type:zs.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),s.next(N)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",_),a!==null&&o.upload&&o.upload.addEventListener("progress",A)),o.send(a),s.next({type:zs.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",_),a!==null&&o.upload&&o.upload.removeEventListener("progress",A)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)($(Hs))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),tC=new B(""),HF="XSRF-TOKEN",qF=new B("",{providedIn:"root",factory:()=>HF}),zF="X-XSRF-TOKEN",GF=new B("",{providedIn:"root",factory:()=>zF}),nd=class{},WF=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ql(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)($(dt),$(zt),$(qF))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function KF(n,e){let t=n.url.toLowerCase();if(!M(tC)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=M(nd).getToken(),i=M(GF);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function nC(...n){let e=[FF,ZD,XD,{provide:Aa,useExisting:XD},{provide:Xl,useExisting:ZD},{provide:eC,useValue:KF,multi:!0},{provide:tC,useValue:!0},{provide:nd,useClass:WF}];for(let t of n)e.push(...t.\u0275providers);return Ht(e)}var mm=class extends Kl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ym=class n extends mm{static makeCurrent(){UD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=QF();return t==null?null:YF(t)}resetBaseElement(){Ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ql(document.cookie,e)}},Ra=null;function QF(){return Ra=Ra||document.querySelector("base"),Ra?Ra.getAttribute("href"):null}function YF(n){return new URL(n,document.baseURI).pathname}var JF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),vm=new B(""),oC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)($(vm),$(ge))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),rd=class{constructor(e){this._doc=e}},pm="ng-app-id",aC=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yl(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${pm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(pm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(pm,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)($(dt),$(Ng),$(Mg,8),$(zt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),gm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Im=/%COMP%/g,cC="%COMP%",XF=`_nghost-${cC}`,ZF=`_ngcontent-${cC}`,eL=!0,tL=new B("",{providedIn:"root",factory:()=>eL});function nL(n){return ZF.replace(Im,n)}function rL(n){return XF.replace(Im,n)}function uC(n,e){return e.map(t=>t.replace(Im,n))}var rC=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Yl(a),this.defaultRenderer=new Na(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===gn.ShadowDom&&(r=Ee(L({},r),{encapsulation:gn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof id?i.applyToHost(t):i instanceof Pa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case gn.Emulated:s=new id(u,l,r,this.appId,h,o,a,p);break;case gn.ShadowDom:return new _m(u,l,t,r,o,a,this.nonce,p);default:s=new Pa(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)($(oC),$(aC),$(Ng),$(tL),$(dt),$(zt),$(ge),$(Mg))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Na=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=gm[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(In.DashCase|In.Important)?e.style.setProperty(t,r,i&In.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&In.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Jn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function iC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _m=class extends Na{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=uC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pa=class extends Na{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?uC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},id=class extends Pa{constructor(e,t,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=nL(l),this.hostAttr=rL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},iL=(()=>{class n extends rd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)($(dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),sC=["alt","control","meta","shift"],sL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},aL=(()=>{class n extends rd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),sC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=sL[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sC.forEach(o=>{if(o!==i){let a=oL[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)($(dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function lC(n,e){return PD(L({rootComponent:n},cL(e)))}function cL(n){return{appProviders:[...fL,...n?.providers??[]],platformProviders:hL}}function uL(){ym.makeCurrent()}function lL(){return new _n}function dL(){return xb(document),document}var hL=[{provide:zt,useValue:cm},{provide:Pg,useValue:uL,multi:!0},{provide:dt,useFactory:dL,deps:[]}];var fL=[{provide:yl,useValue:"root"},{provide:_n,useFactory:lL,deps:[]},{provide:vm,useClass:iL,multi:!0,deps:[dt,ge,zt]},{provide:vm,useClass:aL,multi:!0,deps:[dt]},rC,aC,oC,{provide:va,useExisting:rC},{provide:Hs,useClass:JF,deps:[]},[]];var dC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)($(dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ie="primary",Wa=Symbol("RouteTitle"),Dm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ys(n){return new Dm(n)}function gL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Tn(n[t],e[t]))return!1;return!0}function Tn(n,e){let t=n?Cm(n):void 0,r=e?Cm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!IC(n[i],e[i]))return!1;return!0}function Cm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function IC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function wC(n){return n.length>0?n[n.length-1]:null}function Br(n){return ep(n)?n:Si(n)?Ne(Promise.resolve(n)):G(n)}var yL={exact:TC,subset:bC},EC={exact:vL,subset:_L,ignored:()=>!0};function hC(n,e,t){return yL[t.paths](n.root,e.root,t.matrixParams)&&EC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function vL(n,e){return Tn(n,e)}function TC(n,e,t){if(!xi(n.segments,e.segments)||!ad(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!TC(n.children[r],e.children[r],t))return!1;return!0}function _L(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IC(n[t],e[t]))}function bC(n,e,t){return DC(n,e,e.segments,t)}function DC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!xi(i,t)||e.hasChildren()||!ad(i,t,r))}else if(n.segments.length===t.length){if(!xi(n.segments,t)||!ad(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!xi(n.segments,i)||!ad(n.segments,i,r)||!n.children[ie]?!1:DC(n.children[ie],e,s,r)}}function ad(n,e,t){return e.every((r,i)=>EC[t](n[i].parameters,r.parameters))}var Vr=class{constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){return EL.serialize(this)}},_e=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cd(this)}},Mi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ys(this.parameters),this._parameterMap}toString(){return AC(this)}};function IL(n,e){return xi(n,e)&&n.every((t,r)=>Tn(t.parameters,e[r].parameters))}function xi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function wL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var Ka=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new Va,providedIn:"root"})}}return n})(),Va=class{parse(e){let t=new Sm(e);return new Vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ma(e.root,!0)}`,r=DL(e.queryParams),i=typeof e.fragment=="string"?`#${TL(e.fragment)}`:"";return`${t}${r}${i}`}},EL=new Va;function cd(n){return n.segments.map(e=>AC(e)).join("/")}function Ma(n,e){if(!n.hasChildren())return cd(n);if(e){let t=n.children[ie]?Ma(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ie&&r.push(`${i}:${Ma(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=wL(n,(r,i)=>i===ie?[Ma(n.children[ie],!1)]:[`${i}:${Ma(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${cd(n)}/${t[0]}`:`${cd(n)}/(${t.join("//")})`}}function CC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sd(n){return CC(n).replace(/%3B/gi,";")}function TL(n){return encodeURI(n)}function Am(n){return CC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ud(n){return decodeURIComponent(n)}function fC(n){return ud(n.replace(/\+/g,"%20"))}function AC(n){return`${Am(n.path)}${bL(n.parameters)}`}function bL(n){return Object.entries(n).map(([e,t])=>`;${Am(e)}=${Am(t)}`).join("")}function DL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${sd(t)}=${sd(i)}`).join("&"):`${sd(t)}=${sd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var CL=/^[^\/()?;#]+/;function wm(n){let e=n.match(CL);return e?e[0]:""}var AL=/^[^\/()?;=#]+/;function SL(n){let e=n.match(AL);return e?e[0]:""}var RL=/^[^=?&#]+/;function NL(n){let e=n.match(RL);return e?e[0]:""}var PL=/^[^&#]+/;function ML(n){let e=n.match(PL);return e?e[0]:""}var Sm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new _e(e,t)),r}parseSegment(){let e=wm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Mi(ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=SL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=wm(this.remaining);i&&(r=i,this.capture(r))}e[ud(t)]=ud(r)}parseQueryParam(e){let t=NL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ML(this.remaining);o&&(r=o,this.capture(r))}let i=fC(t),s=fC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ie);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ie]:new _e([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function SC(n){return n.segments.length>0?new _e([],{[ie]:n}):n}function RC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=RC(i);if(r===ie&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new _e(n.segments,e);return xL(t)}function xL(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new _e(n.segments.concat(e.segments),e.children)}return n}function Js(n){return n instanceof Vr}function OL(n,e,t=null,r=null){let i=NC(n);return PC(i,e,t,r)}function NC(n){let e;function t(s){let o={};for(let u of s.children){let l=t(u);o[u.outlet]=l}let a=new _e(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=SC(r);return e??i}function PC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Em(i,i,i,t,r);let s=kL(e);if(s.toRoot())return Em(i,i,new _e([],{}),t,r);let o=FL(s,i,n),a=o.processChildren?ka(o.segmentGroup,o.index,s.commands):xC(o.segmentGroup,o.index,s.commands);return Em(i,o.segmentGroup,a,t,r)}function ld(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ua(n){return typeof n=="object"&&n!=null&&n.outlets}function Em(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=MC(n,e,t);let a=SC(RC(o));return new Vr(a,s,i)}function MC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=MC(s,e,t)}),new _e(n.segments,r)}var dd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ld(r[0]))throw new H(4003,!1);let i=r.find(Ua);if(i&&i!==wC(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new dd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new dd(t,e,r)}var Ks=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function FL(n,e,t){if(n.isAbsolute)return new Ks(e,!0,0);if(!t)return new Ks(e,!1,NaN);if(t.parent===null)return new Ks(t,!0,0);let r=ld(n.commands[0])?0:1,i=t.segments.length-1+r;return LL(t,i,n.numberOfDoubleDots)}function LL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ks(r,!1,i-s)}function VL(n){return Ua(n[0])?n[0].outlets:{[ie]:n}}function xC(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return ka(n,e,t);let r=UL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new _e(n.segments.slice(0,r.pathIndex),{});return s.children[ie]=new _e(n.segments.slice(r.pathIndex),n.children),ka(s,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?Rm(n,e,t):r.match?ka(n,0,i):Rm(n,e,t)}function ka(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=VL(t),i={};if(Object.keys(r).some(s=>s!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let s=ka(n.children[ie],e,t);return new _e(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(n.segments,i)}}function UL(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ua(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!gC(u,l,o))return s;r+=2}else{if(!gC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ua(s)){let u=jL(s.outlets);return new _e(r,u)}if(i===0&&ld(t[0])){let u=n.segments[e];r.push(new Mi(u.path,pC(t[0]))),i++;continue}let o=Ua(s)?s.outlets[ie]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ld(a)?(r.push(new Mi(o,pC(a))),i+=2):(r.push(new Mi(o,{})),i++)}return new _e(r,{})}function jL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Rm(new _e([],{}),0,r))}),e}function pC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gC(n,e,t){return n==t.path&&Tn(e,t.parameters)}var Fa="imperative",Qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qe||{}),Gt=class{constructor(e,t){this.id=e,this.url=t}},Xs=class extends Gt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends Gt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ot||{}),hd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(hd||{}),Ur=class extends Gt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jr=class extends Gt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Qe.NavigationSkipped}},ja=class extends Gt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fd=class extends Gt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nm=class extends Gt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pm=class extends Gt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Mm=class extends Gt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xm=class extends Gt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Om=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},km=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vm=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Um=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ba=class{},$a=class{constructor(e){this.url=e}};var jm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qa,this.attachRef=null}},Qa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Bm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Bm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$m(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $m(e,this._root).map(t=>t.value)}};function Bm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Bm(n,t);if(r)return r}return null}function $m(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$m(n,t);if(r.length)return r.unshift(e),r}return[]}var xt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ws(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var md=class extends gd{constructor(e,t){super(e),this.snapshot=t,Xm(this,e)}toString(){return this.snapshot.toString()}};function OC(n){let e=BL(n),t=new et([new Mi("",{})]),r=new et({}),i=new et({}),s=new et({}),o=new et(""),a=new Oi(t,r,s,o,i,ie,n,e.root);return a.snapshot=e.root,new md(new xt(a,[]),e)}function BL(n){let e={},t={},r={},i="",s=new Ha([],e,r,i,t,ie,n,null,{});return new yd("",new xt(s,[]))}var Oi=class{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[Wa]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Ys(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Ys(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&FC(i)&&(r.resolve[Wa]=i.title),r}var Ha=class{get title(){return this.data?.[Wa]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ys(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yd=class extends gd{constructor(e,t){super(t),this.url=e,Xm(this,t)}toString(){return kC(this._root)}};function Xm(n,e){e.value._routerState=n,e.children.forEach(t=>Xm(n,t))}function kC(n){let e=n.children.length>0?` { ${n.children.map(kC).join(", ")} } `:"";return`${n.value}${e}`}function Tm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Tn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Tn(e.params,t.params)||n.paramsSubject.next(t.params),mL(e.url,t.url)||n.urlSubject.next(t.url),Tn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Hm(n,e){let t=Tn(n.params,e.params)&&IL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Hm(n.parent,e.parent))}function FC(n){return typeof n.title=="string"||n.title===null}var Zm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ie,this.activateEvents=new _t,this.deactivateEvents=new _t,this.attachEvents=new _t,this.detachEvents=new _t,this.parentContexts=M(Qa),this.location=M(Di),this.changeDetector=M(Ri),this.environmentInjector=M(ct),this.inputBinder=M(wd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new qm(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nr]})}}return n})(),qm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oi?this.route:e===Qa?this.childContexts:this.parent.get(e,t)}},wd=new B(""),mC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ca([r.queryParams,r.params,r.data]).pipe(At(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=MD(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function $L(n,e,t){let r=qa(n,e._root,t?t._root:void 0);return new md(r,e)}function qa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=HL(n,e,t);return new xt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qa(n,a)),o}}let r=qL(e.value),i=e.children.map(s=>qa(n,s));return new xt(r,i)}}function HL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qa(n,r,i);return qa(n,r)})}function qL(n){return new Oi(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var LC="ngNavigationCancelingError";function VC(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Js(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UC(!1,Ot.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function UC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[LC]=!0,t.cancellationCode=e,t}function zL(n){return jC(n)&&Js(n.url)}function jC(n){return!!n&&n[LC]}var GL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wn({type:n,selectors:[["ng-component"]],standalone:!0,features:[Fr],decls:1,vars:0,template:function(r,i){r&1&&Ai(0,"router-outlet")},dependencies:[Zm],encapsulation:2})}}return n})();function WL(n,e){return n.providers&&!n._injector&&(n._injector=Fl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ey(n){let e=n.children&&n.children.map(ey),t=e?Ee(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=GL),t}function bn(n){return n.outlet||ie}function KL(n,e){let t=n.filter(r=>bn(r)===e);return t.push(...n.filter(r=>bn(r)!==e)),t}function Ya(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var QL=(n,e,t,r)=>re(i=>(new zm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zm=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Tm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ws(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ws(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Um(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Lm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Tm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Tm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ya(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},vd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qs=class{constructor(e,t){this.component=e,this.route=t}};function YL(n,e,t){let r=n._root,i=e?e._root:null;return xa(r,i,t,[r.value])}function JL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function eo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!AT(n)?n:e.get(n):r}function xa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ws(e);return n.children.forEach(o=>{XL(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>La(a,t.getContext(o),i)),i}function XL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=ZL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?xa(n,e,a?a.children:null,r,i):xa(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qs(a.outlet.component,o))}else o&&La(e,a,i),i.canActivateChecks.push(new vd(r)),s.component?xa(n,null,a?a.children:null,r,i):xa(n,null,t,r,i);return i}function ZL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xi(n.url,e.url)||!Tn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hm(n,e)||!Tn(n.queryParams,e.queryParams);case"paramsChange":default:return!Hm(n,e)}}function La(n,e,t){let r=Ws(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?La(o,e.children.getContext(s),t):La(o,null,t):La(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Qs(e.outlet.component,i)):t.canDeactivateChecks.push(new Qs(null,i)):t.canDeactivateChecks.push(new Qs(null,i))}function Ja(n){return typeof n=="function"}function eV(n){return typeof n=="boolean"}function tV(n){return n&&Ja(n.canLoad)}function nV(n){return n&&Ja(n.canActivate)}function rV(n){return n&&Ja(n.canActivateChild)}function iV(n){return n&&Ja(n.canDeactivate)}function sV(n){return n&&Ja(n.canMatch)}function BC(n){return n instanceof Un||n?.name==="EmptyError"}var od=Symbol("INITIAL_VALUE");function Zs(){return At(n=>ca(n.map(e=>e.pipe(Bn(1),sp(od)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===od)return od;if(t===!1||t instanceof Vr)return t}return!0}),Ct(e=>e!==od),Bn(1)))}function oV(n,e){return Ue(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?G(Ee(L({},t),{guardsResult:!0})):aV(o,r,i,n).pipe(Ue(a=>a&&eV(a)?cV(r,s,n,e):G(a)),re(a=>Ee(L({},t),{guardsResult:a})))})}function aV(n,e,t,r){return Ne(n).pipe(Ue(i=>fV(i.component,i.route,t,e,r)),hn(i=>i!==!0,!0))}function cV(n,e,t,r){return Ne(e).pipe(jn(i=>_s(lV(i.route.parent,r),uV(i.route,r),hV(n,i.path,t),dV(n,i.route,t))),hn(i=>i!==!0,!0))}function uV(n,e){return n!==null&&e&&e(new Vm(n)),G(!0)}function lV(n,e){return n!==null&&e&&e(new Fm(n)),G(!0)}function dV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Fu(()=>{let o=Ya(e)??t,a=eo(s,o),u=nV(a)?a.canActivate(e,n):rn(o,()=>a(e,n));return Br(u).pipe(hn())}));return G(i).pipe(Zs())}function hV(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>JL(o)).filter(o=>o!==null).map(o=>Fu(()=>{let a=o.guards.map(u=>{let l=Ya(o.node)??t,h=eo(u,l),p=rV(h)?h.canActivateChild(r,n):rn(l,()=>h(r,n));return Br(p).pipe(hn())});return G(a).pipe(Zs())}));return G(s).pipe(Zs())}function fV(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=Ya(e)??i,l=eo(a,u),h=iV(l)?l.canDeactivate(n,e,t,r):rn(u,()=>l(n,e,t,r));return Br(h).pipe(hn())});return G(o).pipe(Zs())}function pV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=eo(o,n),u=tV(a)?a.canLoad(e,t):rn(n,()=>a(e,t));return Br(u)});return G(s).pipe(Zs(),$C(r))}function $C(n){return Wf(je(e=>{if(Js(e))throw VC(n,e)}),re(e=>e===!0))}function gV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=eo(o,n),u=sV(a)?a.canMatch(e,t):rn(n,()=>a(e,t));return Br(u)});return G(s).pipe(Zs(),$C(r))}var za=class{constructor(e){this.segmentGroup=e||null}},_d=class extends Error{constructor(e){super(),this.urlTree=e}};function Gs(n){return ys(new za(n))}function mV(n){return ys(new H(4e3,!1))}function yV(n){return ys(UC(!1,Ot.GuardRejected))}var Gm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[ie])return mV(e.redirectTo);i=i.children[ie]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new _d(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Vr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new _e(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vV(n,e,t,r,i){let s=ty(n,e,t);return s.matched?(r=WL(e,r),gV(r,e,t,i).pipe(re(o=>o===!0?s:L({},Wm)))):G(s)}function ty(n,e,t){if(e.path==="**")return _V(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Wm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gL)(t,n,e);if(!i)return L({},Wm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _V(n){return{matched:!0,parameters:n.length>0?wC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yC(n,e,t,r){return t.length>0&&EV(n,t,r)?{segmentGroup:new _e(e,wV(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&TV(n,t,r)?{segmentGroup:new _e(n.segments,IV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function IV(n,e,t,r){let i={};for(let s of t)if(Ed(n,e,s)&&!r[bn(s)]){let o=new _e([],{});i[bn(s)]=o}return L(L({},r),i)}function wV(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&bn(r)!==ie){let i=new _e([],{});t[bn(r)]=i}return t}function EV(n,e,t){return t.some(r=>Ed(n,e,r)&&bn(r)!==ie)}function TV(n,e,t){return t.some(r=>Ed(n,e,r))}function Ed(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function bV(n,e,t,r){return bn(n)!==r&&(r===ie||!Ed(e,t,n))?!1:ty(e,n,t).matched}function DV(n,e,t){return e.length===0&&!n.children[t]}var Km=class{};function CV(n,e,t,r,i,s,o="emptyOnly"){return new Qm(n,e,t,r,i,o,s).recognize()}var AV=31,Qm=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Gm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=yC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(t=>{let r=new Ha([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},ie,this.rootComponentType,null,{}),i=new xt(r,t),s=new yd("",i),o=OL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ie).pipe(Tr(r=>{if(r instanceof _d)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof za?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Jm(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(re(s=>s instanceof xt?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ne(i).pipe(jn(s=>{let o=r.children[s],a=KL(t,s);return this.processSegmentGroup(e,a,o,s)}),ip((s,o)=>(s.push(...o),s)),br(null),rp(),Ue(s=>{if(s===null)return Gs(r);let o=HC(s);return SV(o),G(o)}))}processSegment(e,t,r,i,s,o){return Ne(t).pipe(jn(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Tr(u=>{if(u instanceof za)return G(null);throw u}))),hn(a=>!!a),Tr(a=>{if(BC(a))return DV(r,i,s)?G(new Km):Gs(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return bV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Gs(i):Gs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=ty(t,i,s);if(!a)return Gs(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AV&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ue(y=>this.processSegment(e,r,t,y.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=vV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(At(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(At(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:y}=a,_=new Ha(h,y,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,NV(r),bn(r),r.component??r._loadedComponent??null,r,PV(r)),{segmentGroup:A,slicedSegments:R}=yC(t,h,p,u);if(R.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(re(O=>O===null?null:new xt(_,O)));if(u.length===0&&R.length===0)return G(new xt(_,[]));let N=bn(r)===s;return this.processSegment(l,u,A,R,N?ie:s,!0).pipe(re(O=>new xt(_,O instanceof xt?[O]:[])))}))):Gs(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):pV(e,t,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,t).pipe(je(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):yV(t))):G({routes:[],injector:e})}};function SV(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function RV(n){let e=n.value.routeConfig;return e&&e.path===""}function HC(n){let e=[],t=new Set;for(let r of n){if(!RV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=HC(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!t.has(r))}function NV(n){return n.data||{}}function PV(n){return n.resolve||{}}function MV(n,e,t,r,i,s){return Ue(o=>CV(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:a,tree:u})=>Ee(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function xV(n,e){return Ue(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of qC(u))o.add(l);let a=0;return Ne(o).pipe(jn(u=>s.has(u)?OV(u,r,n,e):(u.data=Jm(u,u.parent,n).resolve,G(void 0))),je(()=>a++),Is(1),Ue(u=>a===o.size?G(t):Mt))})}function qC(n){let e=n.children.map(t=>qC(t)).flat();return[n,...e]}function OV(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!FC(i)&&(s[Wa]=i.title),kV(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=Jm(n,n.parent,t).resolve,null)))}function kV(n,e,t,r){let i=Cm(n);if(i.length===0)return G({});let s={};return Ne(i).pipe(Ue(o=>FV(n[o],e,t,r).pipe(hn(),je(a=>{s[o]=a}))),Is(1),np(s),Tr(o=>BC(o)?Mt:ys(o)))}function FV(n,e,t,r){let i=Ya(e)??r,s=eo(n,i),o=s.resolve?s.resolve(e,t):rn(i,()=>s(e,t));return Br(o)}function bm(n){return At(e=>{let t=n(e);return t?Ne(t).pipe(re(()=>e)):G(e)})}var zC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[Wa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(LV),providedIn:"root"})}}return n})(),LV=(()=>{class n extends zC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)($(dC))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xa=new B("",{providedIn:"root",factory:()=>({})}),Ga=new B(""),ny=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(Gl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Br(t.loadComponent()).pipe(re(GC),je(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pi(()=>{this.componentLoaders.delete(t)})),i=new fs(r,()=>new yt).pipe(hs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=VV(r,this.compiler,t,this.onLoadEndListener).pipe(pi(()=>{this.childrenLoaders.delete(r)})),o=new fs(s,()=>new yt).pipe(hs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VV(n,e,t,r){return Br(n.loadChildren()).pipe(re(GC),Ue(i=>i instanceof _a||Array.isArray(i)?G(i):Ne(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Ga,[],{optional:!0,self:!0}).flat()),{routes:o.map(ey),injector:s}}))}function UV(n){return n&&typeof n=="object"&&"default"in n}function GC(n){return UV(n)?n.default:n}var ry=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(jV),providedIn:"root"})}}return n})(),jV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WC=new B(""),KC=new B("");function BV(n,e,t){let r=n.get(KC),i=n.get(dt);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),$V(n))),{onViewTransitionCreated:u}=r;return u&&rn(n,()=>u({transition:a,from:e,to:t})),o})}function $V(n){return new Promise(e=>{kl(e,{injector:n})})}var iy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=M(ny),this.environmentInjector=M(ct),this.urlSerializer=M(Ka),this.rootContexts=M(Qa),this.location=M(qs),this.inputBindingEnabled=M(wd,{optional:!0})!==null,this.titleStrategy=M(zC),this.options=M(Xa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(ry),this.createViewTransition=M(WC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Om(i)),r=i=>this.events.next(new km(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(s=>s.id!==0),re(s=>Ee(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),At(s=>{let o=!1,a=!1;return G(s).pipe(At(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),Mt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new jr(u.id,this.urlSerializer.serialize(u.rawUrl),p,hd.IgnoredSameUrlNavigation)),u.resolve(null),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(At(p=>{let y=this.transitions?.getValue();return this.events.next(new Xs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Mt:Promise.resolve(p)}),MV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),je(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new fd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:A,extras:R}=u,N=new Xs(p,this.urlSerializer.serialize(y),_,A);this.events.next(N);let O=OC(this.rootComponentType).snapshot;return this.currentTransition=s=Ee(L({},u),{targetSnapshot:O,urlAfterRedirects:y,extras:Ee(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,G(s)}else{let p="";return this.events.next(new jr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,hd.IgnoredByUrlHandlingStrategy)),u.resolve(null),Mt}}),je(u=>{let l=new Nm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),re(u=>(this.currentTransition=s=Ee(L({},u),{guards:YL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),oV(this.environmentInjector,u=>this.events.next(u)),je(u=>{if(s.guardsResult=u.guardsResult,Js(u.guardsResult))throw VC(this.urlSerializer,u.guardsResult);let l=new Pm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ct(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ot.GuardRejected),!1)),bm(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(je(l=>{let h=new Mm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),At(l=>{let h=!1;return G(l).pipe(xV(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ot.NoDataFromResolver)}}))}),je(l=>{let h=new xm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),bm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(je(y=>{h.component=y}),re(()=>{})));for(let y of h.children)p.push(...l(y));return p};return ca(l(u.targetSnapshot.root)).pipe(br(null),Bn(1))}),bm(()=>this.afterPreactivation()),At(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ne(h).pipe(re(()=>s)):G(s)}),re(u=>{let l=$L(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ee(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),je(()=>{this.events.next(new Ba)}),QL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Bn(1),je({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),op(this.transitionAbortSubject.pipe(je(u=>{throw u}))),pi(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(u=>{if(a=!0,jC(u))this.events.next(new Ur(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),zL(u)?this.events.next(new $a(u.url)):s.resolve(!1);else{this.events.next(new ja(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return Mt}))}))}cancelNavigationTransition(t,r,i){let s=new Ur(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HV(n){return n!==Fa}var qV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(zV),providedIn:"root"})}}return n})(),Ym=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zV=(()=>{class n extends Ym{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>M(GV),providedIn:"root"})}}return n})(),GV=(()=>{class n extends QC{constructor(){super(...arguments),this.location=M(qs),this.urlSerializer=M(Ka),this.options=M(Xa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(ry),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=OC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Xs)this.stateMemento=this.createStateMemento();else if(t instanceof jr)this.rawUrlTree=r.initialUrl;else if(t instanceof fd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Ba?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Ur&&(t.code===Ot.GuardRejected||t.code===Ot.NoDataFromResolver)?this.restoreHistory(r):t instanceof ja?this.restoreHistory(r,!0):t instanceof Xn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Oa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Oa||{});function YC(n,e){n.events.pipe(Ct(t=>t instanceof Xn||t instanceof Ur||t instanceof ja||t instanceof jr),re(t=>t instanceof Xn||t instanceof jr?Oa.COMPLETE:(t instanceof Ur?t.code===Ot.Redirect||t.code===Ot.SupersededByNewNavigation:!1)?Oa.REDIRECTING:Oa.FAILED),Ct(t=>t!==Oa.REDIRECTING),Bn(1)).subscribe(()=>{e()})}function WV(n){throw n}var KV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(ql),this.stateManager=M(QC),this.options=M(Xa,{optional:!0})||{},this.pendingTasks=M(Bs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(iy),this.urlSerializer=M(Ka),this.location=M(qs),this.urlHandlingStrategy=M(ry),this._events=new yt,this.errorHandler=this.options.errorHandler||WV,this.navigated=!1,this.routeReuseStrategy=M(qV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(Ga,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(wd,{optional:!0}),this.eventsSubscription=new ke,this.isNgZoneEnabled=M(ge)instanceof ge&&ge.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ur&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof $a){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HV(i.source)};this.scheduleNavigation(o,Fa,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ey),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=NC(y)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return PC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Js(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Fa,null,r)}navigate(t,r={skipLocationChange:!1}){return YV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},KV):r===!1?i=L({},QV):i=r,Js(t))return hC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return hC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return YC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}function JV(n){return!(n instanceof Ba)&&!(n instanceof $a)}var Id=class{};var XV=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(t=>t instanceof Xn),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Fl(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ne(i).pipe(vs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let s=i.pipe(Ue(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ne([s,o]).pipe(vs())}else return s})}static{this.\u0275fac=function(r){return new(r||n)($(Wt),$(Gl),$(ct),$(Id),$(ny))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JC=new B(""),ZV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=M(ct),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof jr&&t.code===hd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>m(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),kl(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new pd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){zb()}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function XC(n,...e){return Ht([{provide:Ga,multi:!0,useValue:n},[],{provide:Oi,useFactory:ZC,deps:[Wt]},{provide:ba,multi:!0,useFactory:e0},e.map(t=>t.\u0275providers)])}function ZC(n){return n.routerState.root}function Za(n,e){return{\u0275kind:n,\u0275providers:e}}function e0(){let n=M(Et);return e=>{let t=n.get($s);if(e!==t.components[0])return;let r=n.get(Wt),i=n.get(t0);n.get(sy)===1&&r.initialNavigation(),n.get(n0,null,se.Optional)?.setUpPreloading(),n.get(JC,null,se.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var t0=new B("",{factory:()=>new yt}),sy=new B("",{providedIn:"root",factory:()=>1});function eU(){return Za(2,[{provide:sy,useValue:0},{provide:zl,multi:!0,deps:[Et],useFactory:e=>{let t=e.get(jD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Wt),s=e.get(t0);YC(i,()=>{r(!0)}),e.get(iy).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function tU(){return Za(3,[{provide:zl,multi:!0,useFactory:()=>{let e=M(Wt);return()=>{e.setUpLocationChangeListener()}}},{provide:sy,useValue:2}])}var n0=new B("");function nU(n){return Za(0,[{provide:n0,useExisting:XV},{provide:Id,useExisting:n}])}function rU(){return Za(8,[mC,{provide:wd,useExisting:mC}])}function iU(n){let e=[{provide:WC,useValue:BV},{provide:KC,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Za(9,e)}var vC=new B("ROUTER_FORROOT_GUARD"),sU=[qs,{provide:Ka,useClass:Va},Wt,Qa,{provide:Oi,useFactory:ZC,deps:[Wt]},ny,[]],r0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[sU,[],{provide:Ga,multi:!0,useValue:t},{provide:vC,useFactory:uU,deps:[[Wt,new tt,new ml]]},{provide:Xa,useValue:r||{}},r?.useHash?aU():cU(),oU(),r?.preloadingStrategy?nU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?lU(r):[],r?.bindToComponentInputs?rU().\u0275providers:[],r?.enableViewTransitions?iU().\u0275providers:[],dU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ga,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)($(vC,8))}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})();function oU(){return{provide:JC,useFactory:()=>{let n=M(WD),e=M(ge),t=M(Xa),r=M(iy),i=M(Ka);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZV(i,r,n,e,t)}}}function aU(){return{provide:Ni,useClass:$D}}function cU(){return{provide:Ni,useClass:am}}function uU(n){return"guarded"}function lU(n){return[n.initialNavigation==="disabled"?tU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?eU().\u0275providers:[]]}var _C=new B("");function dU(){return[{provide:_C,useFactory:e0},{provide:ba,multi:!0,useExisting:_C}]}var i0=(()=>{class n{constructor(){this.title="Varenie \u{1F9D1}\u200D\u{1F373}"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wn({type:n,selectors:[["app-root"]],standalone:!0,features:[Fr],decls:9,vars:0,consts:[[1,"container"],[1,"header"],[1,"content"],[1,"footer"]],template:function(r,i){r&1&&(Ie(0,"div",0)(1,"header",1)(2,"h1"),Ge(3,"\u{1F372} V\xEDkendov\xE9 varenie \u{1F9D1}\u200D\u{1F373}"),be()(),Ie(4,"main",2),Ai(5,"router-outlet"),be(),Ie(6,"footer",3)(7,"p"),Ge(8,"Barto\u0161ovci"),be()()())},dependencies:[r0,Zm],styles:[".container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;flex-direction:column;height:50vh;background-color:#fff;color:#333;padding-top:80px;padding-bottom:60px}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#7c9a92;color:#fff;text-align:center;padding:10px;font-size:2em;z-index:1000}.content[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#fff;margin-top:80px;margin-bottom:60px}.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#2a4d33;color:#fff;text-align:center;padding:10px;font-size:1.2em;z-index:1000}@media (max-width: 768px){.content[_ngcontent-%COMP%]{margin-top:180px;margin-bottom:200px}}@media (max-width: 440px){.content[_ngcontent-%COMP%]{margin-top:260px;margin-bottom:260px}}"]})}}return n})();var s0={production:!1,firebaseConfig:{apiKey:"AIzaSyDHAdvxfmROp0o_zVQ8ijjcilahLMBOAOs",authDomain:"fir-backend-8e4cb.firebaseapp.com",projectId:"fir-backend-8e4cb",storageBucket:"fir-backend-8e4cb.firebasestorage.app",messagingSenderId:"812493462141",appId:"1:812493462141:web:82f1b452f3b11aeff66f14",measurementId:"G-PG0CKVD1D4"}};var a0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(a0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new cy;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},cy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fU=function(n){let e=a0(n);return c0.encodeByteArray(e,!0)},ec=function(n){return fU(n).replace(/\./g,"")},ly=function(n){try{return c0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gU=()=>pU().__FIREBASE_DEFAULTS__,mU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ly(n[1]);return e&&JSON.parse(e)},bd=()=>{try{return gU()||mU()||yU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dy=n=>{var e,t;return(t=(e=bd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},u0=n=>{let e=dy(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},hy=()=>{var n;return(n=bd())===null||n===void 0?void 0:n.config},fy=n=>{var e;return(e=bd())===null||e===void 0?void 0:e[`_${n}`]};var Td=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function l0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ec(JSON.stringify(t)),ec(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function vU(){var n;let e=(n=bd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function f0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function p0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g0(){let n=Ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function m0(){return!vU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function py(){try{return typeof indexedDB=="object"}catch{return!1}}function y0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var _U="FirebaseError",kt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_U,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zn.prototype.create)}},Zn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kt(i,a,r)}};function IU(n,e){return n.replace(wU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var wU=/\{\$([^}]+)}/g;function v0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ki(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(o0(s)&&o0(o)){if(!ki(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function o0(n){return n!==null&&typeof n=="object"}function tc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _0(n,e){let t=new uy(n,e);return t.subscribe.bind(t)}var uy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");EU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function EU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ay(){}var I7=4*60*60*1e3;function Je(n){return n&&n._delegate?n._delegate:n}var Kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fi="[DEFAULT]";var gy=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Td;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bU(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function TU(n){return n===Fi?void 0:n}function bU(n){return n.instantiationMode==="EAGER"}var Dd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new gy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var DU=[],ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ue||{}),CU={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},AU=ue.INFO,SU={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},RU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=SU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$r=class{constructor(e){this.name=e,this._logLevel=AU,this._logHandler=RU,this._userLogHandler=null,DU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var NU=(n,e)=>e.some(t=>n instanceof t),I0,w0;function PU(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MU(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var E0=new WeakMap,yy=new WeakMap,T0=new WeakMap,my=new WeakMap,_y=new WeakMap;function xU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Dn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&E0.set(t,n)}).catch(()=>{}),_y.set(e,n),e}function OU(n){if(yy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});yy.set(n,e)}var vy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function b0(n){vy=n(vy)}function kU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Cd(this),e,...t);return T0.set(r,e.sort?e.sort():[e]),Dn(r)}:MU().includes(n)?function(...e){return n.apply(Cd(this),e),Dn(E0.get(this))}:function(...e){return Dn(n.apply(Cd(this),e))}}function FU(n){return typeof n=="function"?kU(n):(n instanceof IDBTransaction&&OU(n),NU(n,PU())?new Proxy(n,vy):n)}function Dn(n){if(n instanceof IDBRequest)return xU(n);if(my.has(n))return my.get(n);let e=FU(n);return e!==n&&(my.set(n,e),_y.set(e,n)),e}var Cd=n=>_y.get(n);function Ad(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Dn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Dn(o.result),u.oldVersion,u.newVersion,Dn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var LU=["get","getKey","getAll","getAllKeys","count"],VU=["put","add","delete","clear"],Iy=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Iy.get(e))return Iy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=VU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LU.includes(t)))return;let s=function(o,...a){return m(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Iy.set(e,s),s}b0(n=>Ee(L({},n),{get:(e,t,r)=>D0(e,t)||n.get(e,t,r),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));var Ey=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function UU(n){let e=n.getComponent();return e?.type==="VERSION"}var Ty="@firebase/app",C0="0.10.13";var er=new $r("@firebase/app"),jU="@firebase/app-compat",BU="@firebase/analytics-compat",$U="@firebase/analytics",HU="@firebase/app-check-compat",qU="@firebase/app-check",zU="@firebase/auth",GU="@firebase/auth-compat",WU="@firebase/database",KU="@firebase/data-connect",QU="@firebase/database-compat",YU="@firebase/functions",JU="@firebase/functions-compat",XU="@firebase/installations",ZU="@firebase/installations-compat",ej="@firebase/messaging",tj="@firebase/messaging-compat",nj="@firebase/performance",rj="@firebase/performance-compat",ij="@firebase/remote-config",sj="@firebase/remote-config-compat",oj="@firebase/storage",aj="@firebase/storage-compat",cj="@firebase/firestore",uj="@firebase/vertexai-preview",lj="@firebase/firestore-compat",dj="firebase",hj="10.14.1";var by="[DEFAULT]",fj={[Ty]:"fire-core",[jU]:"fire-core-compat",[$U]:"fire-analytics",[BU]:"fire-analytics-compat",[qU]:"fire-app-check",[HU]:"fire-app-check-compat",[zU]:"fire-auth",[GU]:"fire-auth-compat",[WU]:"fire-rtdb",[KU]:"fire-data-connect",[QU]:"fire-rtdb-compat",[YU]:"fire-fn",[JU]:"fire-fn-compat",[XU]:"fire-iid",[ZU]:"fire-iid-compat",[ej]:"fire-fcm",[tj]:"fire-fcm-compat",[nj]:"fire-perf",[rj]:"fire-perf-compat",[ij]:"fire-rc",[sj]:"fire-rc-compat",[oj]:"fire-gcs",[aj]:"fire-gcs-compat",[cj]:"fire-fst",[lj]:"fire-fst-compat",[uj]:"fire-vertex","fire-js":"fire-js",[dj]:"fire-js-all"};var nc=new Map,pj=new Map,Dy=new Map;function A0(n,e){try{n.container.addComponent(e)}catch(t){er.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qr(n){let e=n.name;if(Dy.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Dy.set(e,n);for(let t of nc.values())A0(t,n);for(let t of pj.values())A0(t,n);return!0}function ic(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n.settings!==void 0}var gj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new Zn("app","Firebase",gj);var Cy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}};var zr=hj;function Ry(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:by,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(t||(t=hy()),!t)throw Hr.create("no-options");let s=nc.get(i);if(s){if(ki(t,s.options)&&ki(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}let o=new Dd(i);for(let u of Dy.values())o.addComponent(u);let a=new Cy(t,r,o);return nc.set(i,a),a}function to(n=by){let e=nc.get(n);if(!e&&n===by&&hy())return Ry();if(!e)throw Hr.create("no-app",{appName:n});return e}function Sd(){return Array.from(nc.values())}function We(n,e,t){var r;let i=(r=fj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}qr(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var mj="firebase-heartbeat-database",yj=1,rc="firebase-heartbeat-store",wy=null;function P0(){return wy||(wy=Ad(mj,yj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hr.create("idb-open",{originalErrorMessage:n.message})})),wy}function vj(n){return m(this,null,function*(){try{let t=(yield P0()).transaction(rc),r=yield t.objectStore(rc).get(M0(n));return yield t.done,r}catch(e){if(e instanceof kt)er.warn(e.message);else{let t=Hr.create("idb-get",{originalErrorMessage:e?.message});er.warn(t.message)}}})}function S0(n,e){return m(this,null,function*(){try{let r=(yield P0()).transaction(rc,"readwrite");yield r.objectStore(rc).put(e,M0(n)),yield r.done}catch(t){if(t instanceof kt)er.warn(t.message);else{let r=Hr.create("idb-set",{originalErrorMessage:t?.message});er.warn(r.message)}}})}function M0(n){return`${n.name}!${n.options.appId}`}var _j=1024,Ij=30*24*60*60*1e3,Ay=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Sy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Ij}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=R0(),{heartbeatsToSend:r,unsentEntries:i}=wj(this._heartbeatsCache.heartbeats),s=ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return er.warn(t),""}})}};function R0(){return new Date().toISOString().substring(0,10)}function wj(n,e=_j){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),N0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),N0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Sy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return py()?y0().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield vj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function N0(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function Ej(n){qr(new Kt("platform-logger",e=>new Ey(e),"PRIVATE")),qr(new Kt("heartbeat",e=>new Ay(e),"PRIVATE")),We(Ty,C0,n),We(Ty,C0,"esm2017"),We("fire-js","")}Ej("");var Tj="firebase",bj="10.14.1";We(Tj,bj,"app");var Vi=new zn("ANGULARFIRE2_VERSION");function Nd(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var sc=(n,e)=>{let t=e?[e]:Sd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ro=class{constructor(){return sc(Dj)}},Dj="app-check";function no(){}var Rd=class{zone;delegate;constructor(e,t=Zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Ny=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",no,{},no,no)),t.pipe(je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},io=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Rd(Zone.current)),this.insideAngular=t.run(()=>new Rd(Zone.current,Xf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)($(ge))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Cj(n){return Pd().ngZone.runOutsideAngular(()=>n())}function Li(n){return Pd().ngZone.run(()=>n())}function Aj(n){return Sj(Pd())(n)}function Sj(n){return function(t){return t=t.lift(new Ny(n.ngZone)),t.pipe(Er(n.outsideAngular),wr(n.insideAngular))}}var Rj=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Li(()=>n.apply(void 0,r))},Ft=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Li(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",no,{},no,no))),r[s]=Rj(r[s],t));let i=Cj(()=>n.apply(this,r));if(!e)if(i instanceof ae){let s=Pd();return i.pipe(Er(s.outsideAngular),wr(s.insideAngular))}else return Li(()=>i);return i instanceof ae?i.pipe(Aj):i instanceof Promise?Li(()=>new Promise((s,o)=>i.then(a=>Li(()=>s(a)),a=>Li(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Li(()=>i)};var nr=class{constructor(e){return e}},Ui=class{constructor(){return Sd()}};function Nj(n){return n&&n.length===1?n[0]:new nr(to())}var Py=new B("angularfire2._apps"),Pj={provide:nr,useFactory:Nj,deps:[[new tt,Py]]},Mj={provide:Ui,deps:[[new tt,Py]]};function xj(n){return(e,t)=>{let r=t.get(zt);We("angularfire",Vi.full,"core"),We("angularfire",Vi.full,"app"),We("angular",CD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new nr(i)}}function x0(n,...e){return Ht([Pj,Mj,{provide:Py,useFactory:xj(n),multi:!0,deps:[ge,Et,io,...e]}])}var O0=Ft(Ry,!0);var k0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Oj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(k0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Oj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new xy;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},xy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kj=function(n){let e=k0(n);return F0.encodeByteArray(e,!0)},ky=function(n){return kj(n).replace(/\./g,"")},Md=function(n){try{return F0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Lj=()=>Fj().__FIREBASE_DEFAULTS__,Vj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Uj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Md(n[1]);return e&&JSON.parse(e)},jj=()=>{try{return Lj()||Vj()||Uj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var L0=n=>{var e;return(e=jj())===null||e===void 0?void 0:e[`_${n}`]};function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function U0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function B0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $0(){try{return typeof indexedDB=="object"}catch{return!1}}function H0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Bj="FirebaseError",cn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Bj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}},rr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$j(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new cn(i,a,r)}};function $j(n,e){return n.replace(Hj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Hj=/\{\$([^}]+)}/g;function q0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function so(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function z0(n,e){let t=new Oy(n,e);return t.subscribe.bind(t)}var Oy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=My),i.error===void 0&&(i.error=My),i.complete===void 0&&(i.complete=My);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function qj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function My(){}var cQ=4*60*60*1e3;function oc(n){return n&&n._delegate?n._delegate:n}var ir=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zj=[],Se=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Se||{}),Gj={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Wj=Se.INFO,Kj={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},Qj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Kj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},oo=class{constructor(e){this.name=e,this._logLevel=Wj,this._logHandler=Qj,this._userLogHandler=null,zj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var Ly=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Jj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Jj(n){let e=n.getComponent();return e?.type==="VERSION"}var Vy="@firebase/app",G0="0.11.1";var sr=new oo("@firebase/app"),Xj="@firebase/app-compat",Zj="@firebase/analytics-compat",e2="@firebase/analytics",t2="@firebase/app-check-compat",n2="@firebase/app-check",r2="@firebase/auth",i2="@firebase/auth-compat",s2="@firebase/database",o2="@firebase/data-connect",a2="@firebase/database-compat",c2="@firebase/functions",u2="@firebase/functions-compat",l2="@firebase/installations",d2="@firebase/installations-compat",h2="@firebase/messaging",f2="@firebase/messaging-compat",p2="@firebase/performance",g2="@firebase/performance-compat",m2="@firebase/remote-config",y2="@firebase/remote-config-compat",v2="@firebase/storage",_2="@firebase/storage-compat",I2="@firebase/firestore",w2="@firebase/vertexai",E2="@firebase/firestore-compat",T2="firebase",b2="11.3.1";var D2={[Vy]:"fire-core",[Xj]:"fire-core-compat",[e2]:"fire-analytics",[Zj]:"fire-analytics-compat",[n2]:"fire-app-check",[t2]:"fire-app-check-compat",[r2]:"fire-auth",[i2]:"fire-auth-compat",[s2]:"fire-rtdb",[o2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[c2]:"fire-fn",[u2]:"fire-fn-compat",[l2]:"fire-iid",[d2]:"fire-iid-compat",[h2]:"fire-fcm",[f2]:"fire-fcm-compat",[p2]:"fire-perf",[g2]:"fire-perf-compat",[m2]:"fire-rc",[y2]:"fire-rc-compat",[v2]:"fire-gcs",[_2]:"fire-gcs-compat",[I2]:"fire-fst",[E2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};var C2=new Map,A2=new Map,W0=new Map;function K0(n,e){try{n.container.addComponent(e)}catch(t){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function co(n){let e=n.name;if(W0.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;W0.set(e,n);for(let t of C2.values())K0(t,n);for(let t of A2.values())K0(t,n);return!0}function Qt(n){return n==null?!1:n.settings!==void 0}var S2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},By=new rr("app","Firebase",S2);var uo=b2;function ao(n,e,t){var r;let i=(r=D2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}co(new ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var R2="firebase-heartbeat-database",N2=1,ac="firebase-heartbeat-store",Fy=null;function X0(){return Fy||(Fy=Ad(R2,N2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw By.create("idb-open",{originalErrorMessage:n.message})})),Fy}function P2(n){return m(this,null,function*(){try{let t=(yield X0()).transaction(ac),r=yield t.objectStore(ac).get(Z0(n));return yield t.done,r}catch(e){if(e instanceof cn)sr.warn(e.message);else{let t=By.create("idb-get",{originalErrorMessage:e?.message});sr.warn(t.message)}}})}function Q0(n,e){return m(this,null,function*(){try{let r=(yield X0()).transaction(ac,"readwrite");yield r.objectStore(ac).put(e,Z0(n)),yield r.done}catch(t){if(t instanceof cn)sr.warn(t.message);else{let r=By.create("idb-set",{originalErrorMessage:t?.message});sr.warn(r.message)}}})}function Z0(n){return`${n.name}!${n.options.appId}`}var M2=1024,x2=30,Uy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>x2){let o=k2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Y0(),{heartbeatsToSend:r,unsentEntries:i}=O2(this._heartbeatsCache.heartbeats),s=ky(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return sr.warn(t),""}})}};function Y0(){return new Date().toISOString().substring(0,10)}function O2(n,e=M2){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),J0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),J0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var jy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return $0()?H0().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield P2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function J0(n){return ky(JSON.stringify({version:2,heartbeats:n})).length}function k2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function F2(n){co(new ir("platform-logger",e=>new Ly(e),"PRIVATE")),co(new ir("heartbeat",e=>new Uy(e),"PRIVATE")),ao(Vy,G0,n),ao(Vy,G0,"esm2017"),ao("fire-js","")}F2("");function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hA=dA,fA=new rr("auth","Firebase",dA());var Vd=new oo("@firebase/auth");function L2(n,...e){Vd.logLevel<=Se.WARN&&Vd.warn(`Auth (${uo}): ${n}`,...e)}function Od(n,...e){Vd.logLevel<=Se.ERROR&&Vd.error(`Auth (${uo}): ${n}`,...e)}function cr(n,...e){throw iv(n,...e)}function un(n,...e){return iv(n,...e)}function rv(n,e,t){let r=Object.assign(Object.assign({},hA()),{[e]:t});return new rr("auth","Firebase",r).create(e,{appName:n.name})}function Wr(n){return rv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pA(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&cr(n,"argument-error"),rv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fA.create(n,...e)}function J(n,e,...t){if(!n)throw iv(e,...t)}function or(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Od(e),new Error(e)}function ur(n,e){n||or(e)}function qy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function V2(){return eA()==="http:"||eA()==="https:"}function eA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function U2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V2()||j0()||"connection"in navigator)?navigator.onLine:!0}function j2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ji=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ur(t>e,"Short delay should be less than long delay!"),this.isMobile=V0()||B0()}get(){return U2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sv(n,e){ur(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ud=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var B2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $2=new ji(3e4,6e4);function ov(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function po(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){return gA(n,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=so(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return U0()||(_.referrerPolicy="no-referrer"),Ud.fetch()(mA(n,n.config.apiHost,t,p),_)}))})}function gA(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},B2),e);try{let i=new zy(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xd(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw xd(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rv(n,h,l);cr(n,h)}}catch(i){if(i instanceof cn)throw i;cr(n,"network-request-failed",{message:String(i)})}})}function H2(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){let l=yield po(n,e,t,r,i);return"mfaPendingCredential"in l&&cr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function mA(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?sv(n.config,i):`${n.config.apiScheme}://${i}`}var zy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),$2.get())})}};function xd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=un(n,e,r);return i.customData._tokenResponse=t,i}function q2(n,e){return m(this,null,function*(){return po(n,"POST","/v1/accounts:delete",e)})}function yA(n,e){return m(this,null,function*(){return po(n,"POST","/v1/accounts:lookup",e)})}function cc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function vA(n,e=!1){return m(this,null,function*(){let t=oc(n),r=yield t.getIdToken(e),i=av(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:cc($y(i.auth_time)),issuedAtTime:cc($y(i.iat)),expirationTime:cc($y(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function $y(n){return Number(n)*1e3}function av(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{let i=Md(t);return i?JSON.parse(i):(Od("Failed to decode base64 JWT payload"),null)}catch(i){return Od("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tA(n){let e=av(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lc(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof cn&&z2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function z2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Gy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jd(n){return m(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield lc(n,yA(t,{idToken:r}));J(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?IA(s.providerUserInfo):[],a=G2(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function _A(n){return m(this,null,function*(){let e=oc(n);yield jd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function G2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IA(n){return n.map(e=>{var{providerId:t}=e,r=fi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function W2(n,e){return m(this,null,function*(){let t=yield gA(n,{},()=>m(this,null,function*(){let r=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=mA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ud.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function K2(n,e){return m(this,null,function*(){return po(n,"POST","/v2/accounts:revokeToken",ov(n,e))})}var uc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=tA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield W2(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return or("not implemented")}};function Gr(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ho=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=fi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield lc(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return vA(this,e)}reload(){return _A(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield jd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Qt(this.auth.app))return Promise.reject(Wr(this.auth));let e=yield this.getIdToken();return yield lc(this,q2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:De,providerData:W,stsTokenManager:T}=t;J(F&&T,e,"internal-error");let v=uc.fromJSON(this.name,T);J(typeof F=="string",e,"internal-error"),Gr(p,e.name),Gr(y,e.name),J(typeof ee=="boolean",e,"internal-error"),J(typeof De=="boolean",e,"internal-error"),Gr(_,e.name),Gr(A,e.name),Gr(R,e.name),Gr(N,e.name),Gr(O,e.name),Gr(z,e.name);let I=new n({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:De,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return m(this,null,function*(){let i=new uc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return m(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?IA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new uc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var nA=new Map;function ar(n){ur(n instanceof Function,"Expected a class definition");let e=nA.get(n);return e?(ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nA.set(n,e),e)}var Q2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,r){return m(this,null,function*(){this.storage[t]=r})}_get(t){return m(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Wy=Q2;function kd(n,e,t){return`firebase:${n}:${e}:${t}`}var Bd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=kd(this.userKey,i.apiKey,s),this.fullPersistenceKey=kd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ho._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(this,null,function*(){if(!t.length)return new n(ar(Wy),e,r);let i=(yield Promise.all(t.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ar(Wy),o=kd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=ho._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function rA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CA(e))return"Blackberry";if(AA(e))return"Webos";if(EA(e))return"Safari";if((e.includes("chrome/")||TA(e))&&!e.includes("edge/"))return"Chrome";if(DA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wA(n=Tt()){return/firefox\//i.test(n)}function EA(n=Tt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TA(n=Tt()){return/crios\//i.test(n)}function bA(n=Tt()){return/iemobile/i.test(n)}function DA(n=Tt()){return/android/i.test(n)}function CA(n=Tt()){return/blackberry/i.test(n)}function AA(n=Tt()){return/webos/i.test(n)}function cv(n=Tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Y2(n=Tt()){var e;return cv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J2(n=Tt()){return cv(n)||DA(n)||AA(n)||CA(n)||/windows phone/i.test(n)||bA(n)}function SA(n,e=[]){let t;switch(n){case"Browser":t=rA(Tt());break;case"Worker":t=`${rA(Tt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uo}/${r}`}var Ky=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function X2(t){return m(this,arguments,function*(n,e={}){return po(n,"GET","/v2/passwordPolicy",ov(n,e))})}var Z2=6,Qy=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Z2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Yy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $d(this),this.idTokenSubscription=new $d(this),this.beforeStateQueue=new Ky(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ar(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Bd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield yA(this,{idToken:e}),r=yield ho._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(Qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield jd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=j2()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Qt(this.app))return Promise.reject(Wr(this));let t=e?oc(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Qt(this.app)?Promise.reject(Wr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qt(this.app)?Promise.reject(Wr(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield X2(this),t=new Qy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield K2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ar(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield Bd.create(this,[ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return m(this,null,function*(){var e;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&L2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function gc(n){return oc(n)}var $d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=z0(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eB(n){uv=n}function tB(n){return uv.loadJS(n)}function nB(){return uv.gapiScript}function RA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function rB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ar);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var hc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};function lo(n,e){return m(this,null,function*(){return H2(n,"POST","/v1/accounts:signInWithIdp",ov(n,e))})}var iB="http://localhost",Hd=class n extends hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=fi(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return lo(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,lo(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,lo(e,t)}buildRequest(){let e={requestUri:iB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=so(t)}return e}};var fo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var qd=class extends fo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Wd=(()=>{class n extends qd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Hd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var fc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(this,null,function*(){let s=yield ho._fromIdTokenResponse(e,r,i),o=iA(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=iA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function iA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Jy=class n extends cn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function NA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jy._fromErrorAndOperation(n,s,e,r):s})}function sB(n,e,t=!1){return m(this,null,function*(){let r=yield lc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return fc._forOperation(n,"link",r)})}function oB(n,e,t=!1){return m(this,null,function*(){let{auth:r}=n;if(Qt(r.app))return Promise.reject(Wr(r));let i="reauthenticate";try{let s=yield lc(n,NA(r,i,e,n),t);J(s.idToken,r,"internal-error");let o=av(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(n.uid===a,r,"user-mismatch"),fc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&cr(r,"user-mismatch"),s}})}function aB(n,e,t=!1){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Wr(n));let r="signIn",i=yield NA(n,r,e),s=yield fc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}var sA="__sak";var Xy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sA,"1"),this.storage.removeItem(sA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cB=(()=>{class n extends Xy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),PA=cB;function MA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}function Kr(){return window}function uB(n){Kr().location.href=n}var UQ=RA("rcb"),jQ=new ji(3e4,6e4);function lv(n,e){return e?ar(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var pc=class extends hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function lB(n){return aB(n.auth,new pc(n),n.bypassAuthState)}function dB(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),oB(t,new pc(n),n.bypassAuthState)}function hB(n){return m(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),sB(t,new pc(n),n.bypassAuthState)})}var zd=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lB;case"linkViaPopup":case"linkViaRedirect":return hB;case"reauthViaPopup":case"reauthViaRedirect":return dB;default:cr(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var fB=new ji(2e3,1e4);function dv(n,e,t){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(un(n,"operation-not-supported-in-this-environment"));let r=gc(n);pA(n,e,fo);let i=lv(r,t);return new pB(r,"signInViaPopup",e,i).executeNotNull()})}var pB=(()=>{class n extends zd{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let t=yield this.execute();return J(t,this.auth,"internal-error"),t})}onExecution(){return m(this,null,function*(){ur(this.filter.length===1,"Popup operations only handle one event");let t=MA();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fB.get())};t()}}n.currentPopupAction=null;return n})(),gB="pendingRedirect",Fd=new Map,Zy=class n extends zd{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=Fd.get(this.auth._key());if(!e){try{let r=(yield mB(this.resolver,this.auth))?yield Ut(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Ut(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ut(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function mB(n,e){return m(this,null,function*(){let t=OA(e),r=xA(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function yB(n,e){return m(this,null,function*(){return xA(n)._set(OA(e),"true")})}function vB(n,e){Fd.set(n._key(),e)}function xA(n){return ar(n._redirectPersistence)}function OA(n){return kd(gB,n.config.apiKey,n.name)}function hv(n,e,t){return _B(n,e,t)}function _B(n,e,t){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Wr(n));let r=gc(n);pA(n,e,fo),yield r._initializationPromise;let i=lv(r,t);return yield yB(i,r),i._openRedirect(r,e,"signInViaRedirect")})}function fv(n,e){return m(this,null,function*(){return yield gc(n)._initializationPromise,kA(n,e,!1)})}function kA(n,e,t=!1){return m(this,null,function*(){if(Qt(n.app))return Promise.reject(Wr(n));let r=gc(n),i=lv(r,e),o=yield new Zy(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var IB=10*60*1e3,ev=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!FA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(un(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IB&&this.cachedEventUids.clear(),this.cachedEventUids.has(oA(e))}saveEventToCache(e){this.cachedEventUids.add(oA(e)),this.lastProcessedEventTime=Date.now()}};function oA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function wB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FA(n);default:return!1}}function EB(t){return m(this,arguments,function*(n,e={}){return po(n,"GET","/v1/projects",e)})}var TB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bB=/^https?/;function DB(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield EB(n);for(let t of e)try{if(CB(t))return}catch{}cr(n,"unauthorized-domain")})}function CB(n){let e=qy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!bB.test(t))return!1;if(TB.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var AB=new ji(3e4,6e4);function aA(){let n=Kr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SB(n){return new Promise((e,t)=>{var r,i,s;function o(){aA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aA(),t(un(n,"network-request-failed"))},timeout:AB.get()})}if(!((i=(r=Kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Kr().gapi)===null||s===void 0)&&s.load)o();else{let a=RA("iframefcb");return Kr()[a]=()=>{gapi.load?o():t(un(n,"network-request-failed"))},tB(`${nB()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Ld=null,e})}var Ld=null;function RB(n){return Ld=Ld||SB(n),Ld}var NB=new ji(5e3,15e3),PB="__/auth/iframe",MB="emulator/auth/iframe",xB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kB(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?sv(e,MB):`https://${n.config.authDomain}/${PB}`,r={apiKey:e.apiKey,appName:n.name,v:uo},i=OB.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${so(r).slice(1)}`}function FB(n){return m(this,null,function*(){let e=yield RB(n),t=Kr().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:kB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xB,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=un(n,"network-request-failed"),a=Kr().setTimeout(()=>{s(o)},NB.get());function u(){Kr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var LB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VB=500,UB=600,jB="_blank",BB="http://localhost",Gd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function $B(n,e,t,r=VB,i=UB){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},LB),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Tt().toLowerCase();t&&(a=TA(l)?jB:t),wA(l)&&(e=e||BB,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(Y2(l)&&a!=="_self")return HB(e||"",a),new Gd(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new Gd(p)}function HB(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var qB="__/auth/handler",zB="emulator/auth/handler",GB=encodeURIComponent("fac");function cA(n,e,t,r,i,s){return m(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uo,eventId:i};if(e instanceof fo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",q0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof qd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${GB}=${encodeURIComponent(u)}`:"";return`${WB(n)}?${so(a).slice(1)}${l}`})}function WB({config:n}){return n.emulator?sv(n,zB):`https://${n.authDomain}/${qB}`}var Hy="webStorageSupport",tv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PA,this._completeRedirectFn=kA,this._overrideRedirectResult=vB}_openPopup(e,t,r,i){return m(this,null,function*(){var s;ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield cA(e,t,r,qy(),i);return $B(e,o,MA())})}_openRedirect(e,t,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield cA(e,t,r,qy(),i);return uB(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ur(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return m(this,null,function*(){let t=yield FB(e),r=new ev(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hy,{type:Hy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Hy];o!==void 0&&t(!!o),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J2()||EA()||cv()}},Kd=tv;var uA="@firebase/auth",lA="1.9.0";var nv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function KB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QB(n){co(new ir("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SA(n)},l=new Yy(r,i,s,u);return rB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),co(new ir("auth-internal",e=>{let t=gc(e.getProvider("auth").getImmediate());return(r=>new nv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(uA,lA,KB(n)),ao(uA,lA,"esm2017")}var YB=5*60,BQ=L0("authIdTokenMaxAge")||YB;function JB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=un("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",JB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QB("Browser");function JA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XA=JA,ZA=new Zn("auth","Firebase",JA());var eh=new $r("@firebase/auth");function XB(n,...e){eh.logLevel<=ue.WARN&&eh.warn(`Auth (${zr}): ${n}`,...e)}function Yd(n,...e){eh.logLevel<=ue.ERROR&&eh.error(`Auth (${zr}): ${n}`,...e)}function Yr(n,...e){throw xv(n,...e)}function $i(n,...e){return xv(n,...e)}function eS(n,e,t){let r=Object.assign(Object.assign({},XA()),{[e]:t});return new Zn("auth","Firebase",r).create(e,{appName:n.name})}function Bi(n){return eS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ZA.create(n,...e)}function Y(n,e,...t){if(!n)throw xv(e,...t)}function lr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yd(e),new Error(e)}function Jr(n,e){n||lr(e)}function yv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZB(){return LA()==="http:"||LA()==="https:"}function LA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function e$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZB()||f0()||"connection"in navigator)?navigator.onLine:!0}function t$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jr(t>e,"Short delay should be less than long delay!"),this.isMobile=d0()||p0()}get(){return e$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ov(n,e){Jr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var th=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r$=new Hi(3e4,6e4);function kv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function mo(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){return tS(n,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=tc(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return h0()||(_.referrerPolicy="no-referrer"),th.fetch()(nS(n,n.config.apiHost,t,p),_)}))})}function tS(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},n$),e);try{let i=new vv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Qd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Qd(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eS(n,h,l);Yr(n,h)}}catch(i){if(i instanceof kt)throw i;Yr(n,"network-request-failed",{message:String(i)})}})}function i$(s,o,a,u){return m(this,arguments,function*(n,e,t,r,i={}){let l=yield mo(n,e,t,r,i);return"mfaPendingCredential"in l&&Yr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function nS(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Ov(n.config,i):`${n.config.apiScheme}://${i}`}var vv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),r$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Qd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=$i(n,e,r);return i.customData._tokenResponse=t,i}function s$(n,e){return m(this,null,function*(){return mo(n,"POST","/v1/accounts:delete",e)})}function rS(n,e){return m(this,null,function*(){return mo(n,"POST","/v1/accounts:lookup",e)})}function mc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Fv(n,e=!1){return m(this,null,function*(){let t=Je(n),r=yield t.getIdToken(e),i=Lv(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:mc(pv(i.auth_time)),issuedAtTime:mc(pv(i.iat)),expirationTime:mc(pv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function pv(n){return Number(n)*1e3}function Lv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{let i=ly(t);return i?JSON.parse(i):(Yd("Failed to decode base64 JWT payload"),null)}catch(i){return Yd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VA(n){let e=Lv(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vc(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof kt&&o$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function o$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var _v=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _c=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nh(n){return m(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield vc(n,rS(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iS(s.providerUserInfo):[],a=a$(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _c(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Vv(n){return m(this,null,function*(){let e=Je(n);yield nh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function a$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iS(n){return n.map(e=>{var{providerId:t}=e,r=fi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function c$(n,e){return m(this,null,function*(){let t=yield tS(n,{},()=>m(this,null,function*(){let r=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=nS(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",th.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function u$(n,e){return m(this,null,function*(){return mo(n,"POST","/v2/accounts:revokeToken",kv(n,e))})}var yc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=VA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield c$(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return lr("not implemented")}};function Qr(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var go=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=fi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _v(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _c(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield vc(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Fv(this,e)}reload(){return Vv(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield nh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(tr(this.auth.app))return Promise.reject(Bi(this.auth));let e=yield this.getIdToken();return yield vc(this,s$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:De,providerData:W,stsTokenManager:T}=t;Y(F&&T,e,"internal-error");let v=yc.fromJSON(this.name,T);Y(typeof F=="string",e,"internal-error"),Qr(p,e.name),Qr(y,e.name),Y(typeof ee=="boolean",e,"internal-error"),Y(typeof De=="boolean",e,"internal-error"),Qr(_,e.name),Qr(A,e.name),Qr(R,e.name),Qr(N,e.name),Qr(O,e.name),Qr(z,e.name);let I=new n({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:De,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return m(this,null,function*(){let i=new yc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nh(s),s})}static _fromGetAccountInfoResponse(e,t,r){return m(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?iS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new yc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _c(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var UA=new Map;function dr(n){Jr(n instanceof Function,"Expected a class definition");let e=UA.get(n);return e?(Jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UA.set(n,e),e)}var l$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,r){return m(this,null,function*(){this.storage[t]=r})}_get(t){return m(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Iv=l$;function Jd(n,e,t){return`firebase:${n}:${e}:${t}`}var rh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Jd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?go._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(this,null,function*(){if(!t.length)return new n(dr(Iv),e,r);let i=(yield Promise.all(t.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||dr(Iv),o=Jd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=go._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function jA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(dS(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||aS(e))&&!e.includes("edge/"))return"Chrome";if(uS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sS(n=Ye()){return/firefox\//i.test(n)}function oS(n=Ye()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aS(n=Ye()){return/crios\//i.test(n)}function cS(n=Ye()){return/iemobile/i.test(n)}function uS(n=Ye()){return/android/i.test(n)}function lS(n=Ye()){return/blackberry/i.test(n)}function dS(n=Ye()){return/webos/i.test(n)}function Uv(n=Ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function d$(n=Ye()){var e;return Uv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h$(){return g0()&&document.documentMode===10}function hS(n=Ye()){return Uv(n)||uS(n)||dS(n)||lS(n)||/windows phone/i.test(n)||cS(n)}function fS(n,e=[]){let t;switch(n){case"Browser":t=jA(Ye());break;case"Worker":t=`${jA(Ye())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zr}/${r}`}var wv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function f$(t){return m(this,arguments,function*(n,e={}){return mo(n,"GET","/v2/passwordPolicy",kv(n,e))})}var p$=6,Ev=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:p$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Tv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ih(this),this.idTokenSubscription=new ih(this),this.beforeStateQueue=new wv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dr(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield rh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield rS(this,{idToken:e}),r=yield go._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(tr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield nh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=t$()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(tr(this.app))return Promise.reject(Bi(this));let t=e?Je(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return tr(this.app)?Promise.reject(Bi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tr(this.app)?Promise.reject(Bi(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(dr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield f$(this),t=new Ev(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield u$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&dr(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield rh.create(this,[dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&XB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function jv(n){return Je(n)}var ih=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_0(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Bv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g$(n){Bv=n}function m$(n){return Bv.loadJS(n)}function y$(){return Bv.gapiScript}function pS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function $v(n,e){let t=ic(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ki(s,e??{}))return i;Yr(i,"already-initialized")}return t.initialize({options:e})}function v$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(dr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Hv(n,e,t){let r=jv(n);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=gS(e),{host:o,port:a}=_$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||I$()}function gS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _$(n){let e=gS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:BA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:BA(o)}}}function BA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function I$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var sh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}};function gv(n,e){return m(this,null,function*(){return i$(n,"POST","/v1/accounts:signInWithIdp",kv(n,e))})}var oh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var bv=class extends oh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ic=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(this,null,function*(){let s=yield go._fromIdTokenResponse(e,r,i),o=$A(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$A(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $A(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Dv=class n extends kt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function mS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dv._fromErrorAndOperation(n,s,e,r):s})}function w$(n,e,t=!1){return m(this,null,function*(){let r=yield vc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ic._forOperation(n,"link",r)})}function E$(n,e,t=!1){return m(this,null,function*(){let{auth:r}=n;if(tr(r.app))return Promise.reject(Bi(r));let i="reauthenticate";try{let s=yield vc(n,mS(r,i,e,n),t);Y(s.idToken,r,"internal-error");let o=Lv(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(n.uid===a,r,"user-mismatch"),Ic._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Yr(r,"user-mismatch"),s}})}function T$(n,e,t=!1){return m(this,null,function*(){if(tr(n.app))return Promise.reject(Bi(n));let r="signIn",i=yield mS(n,r,e),s=yield Ic._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function qv(n,e,t,r){return Je(n).onIdTokenChanged(e,t,r)}function zv(n,e,t){return Je(n).beforeAuthStateChanged(e,t)}function Gv(n,e,t,r){return Je(n).onAuthStateChanged(e,t,r)}var ah="__sak";var ch=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var b$=1e3,D$=10,C$=(()=>{class n extends ch{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);h$()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,D$):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},b$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return m(this,null,function*(){yield Ut(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return m(this,null,function*(){let r=yield Ut(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return m(this,null,function*(){yield Ut(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),yS=C$;var A$=(()=>{class n extends ch{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Wv=A$;function S$(n){return Promise.all(n.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var R$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return m(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield S$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function vS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Cv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=vS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Cn(){return window}function N$(n){Cn().location.href=n}function _S(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}function P$(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function M$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function x$(){return _S()?self:null}var IS="firebaseLocalStorageDb",O$=1,uh="firebaseLocalStorage",wS="fbase_key",qi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dh(n,e){return n.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function k$(){let n=indexedDB.deleteDatabase(IS);return new qi(n).toPromise()}function Av(){let n=indexedDB.open(IS,O$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(uh,{keyPath:wS})}catch(i){t(i)}}),n.addEventListener("success",()=>m(this,null,function*(){let r=n.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),yield k$(),e(yield Av()))}))})}function HA(n,e,t){return m(this,null,function*(){let r=dh(n,!0).put({[wS]:e,value:t});return new qi(r).toPromise()})}function F$(n,e){return m(this,null,function*(){let t=dh(n,!1).get(e),r=yield new qi(t).toPromise();return r===void 0?null:r.value})}function qA(n,e){let t=dh(n,!0).delete(e);return new qi(t).toPromise()}var L$=800,V$=3,U$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield Av(),this.db)})}_withRetries(t){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>V$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return _S()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=R$._getInstance(x$()),this.receiver._subscribe("keyChanged",(t,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var t,r;if(this.activeServiceWorker=yield P$(),!this.activeServiceWorker)return;this.sender=new Cv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||M$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Av();return yield HA(t,ah,"1"),yield qA(t,ah),!0}catch{}return!1})}_withPendingWrite(t){return m(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>HA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return m(this,null,function*(){let r=yield this._withRetries(i=>F$(i,t));return this.localCache[t]=r,r})}_remove(t){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>qA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return m(this,null,function*(){let t=yield this._withRetries(s=>{let o=dh(s,!1).getAll();return new qi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),L$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ES=U$;var TJ=pS("rcb"),bJ=new Hi(3e4,6e4);function j$(n,e){return e?dr(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var wc=class extends sh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gv(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function B$(n){return T$(n.auth,new wc(n),n.bypassAuthState)}function $$(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),E$(t,new wc(n),n.bypassAuthState)}function H$(n){return m(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),w$(t,new wc(n),n.bypassAuthState)})}var Sv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return H$;case"reauthViaPopup":case"reauthViaRedirect":return $$;default:Yr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var DJ=new Hi(2e3,1e4);var q$="pendingRedirect",Xd=new Map,Rv=class n extends Sv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=Xd.get(this.auth._key());if(!e){try{let r=(yield z$(this.resolver,this.auth))?yield Ut(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Ut(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ut(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function z$(n,e){return m(this,null,function*(){let t=K$(e),r=W$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function G$(n,e){Xd.set(n._key(),e)}function W$(n){return dr(n._redirectPersistence)}function K$(n){return Jd(q$,n.config.apiKey,n.name)}function Q$(n,e,t=!1){return m(this,null,function*(){if(tr(n.app))return Promise.reject(Bi(n));let r=jv(n),i=j$(r,e),o=yield new Rv(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Y$=10*60*1e3,Nv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError($i(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y$&&this.cachedEventUids.clear(),this.cachedEventUids.has(zA(e))}saveEventToCache(e){this.cachedEventUids.add(zA(e)),this.lastProcessedEventTime=Date.now()}};function zA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function J$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TS(n);default:return!1}}function X$(t){return m(this,arguments,function*(n,e={}){return mo(n,"GET","/v1/projects",e)})}var Z$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eH=/^https?/;function tH(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield X$(n);for(let t of e)try{if(nH(t))return}catch{}Yr(n,"unauthorized-domain")})}function nH(n){let e=yv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!eH.test(t))return!1;if(Z$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var rH=new Hi(3e4,6e4);function GA(){let n=Cn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iH(n){return new Promise((e,t)=>{var r,i,s;function o(){GA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GA(),t($i(n,"network-request-failed"))},timeout:rH.get()})}if(!((i=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Cn().gapi)===null||s===void 0)&&s.load)o();else{let a=pS("iframefcb");return Cn()[a]=()=>{gapi.load?o():t($i(n,"network-request-failed"))},m$(`${y$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Zd=null,e})}var Zd=null;function sH(n){return Zd=Zd||iH(n),Zd}var oH=new Hi(5e3,15e3),aH="__/auth/iframe",cH="emulator/auth/iframe",uH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dH(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ov(e,cH):`https://${n.config.authDomain}/${aH}`,r={apiKey:e.apiKey,appName:n.name,v:zr},i=lH.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${tc(r).slice(1)}`}function hH(n){return m(this,null,function*(){let e=yield sH(n),t=Cn().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:dH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uH,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=$i(n,"network-request-failed"),a=Cn().setTimeout(()=>{s(o)},oH.get());function u(){Cn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var fH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pH=500,gH=600,mH="_blank",yH="http://localhost",lh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vH(n,e,t,r=pH,i=gH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},fH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ye().toLowerCase();t&&(a=aS(l)?mH:t),sS(l)&&(e=e||yH,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(d$(l)&&a!=="_self")return _H(e||"",a),new lh(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new lh(p)}function _H(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var IH="__/auth/handler",wH="emulator/auth/handler",EH=encodeURIComponent("fac");function WA(n,e,t,r,i,s){return m(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zr,eventId:i};if(e instanceof oh){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",v0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof bv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${EH}=${encodeURIComponent(u)}`:"";return`${TH(n)}?${tc(a).slice(1)}${l}`})}function TH({config:n}){return n.emulator?Ov(n,wH):`https://${n.authDomain}/${IH}`}var mv="webStorageSupport",Pv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wv,this._completeRedirectFn=Q$,this._overrideRedirectResult=G$}_openPopup(e,t,r,i){return m(this,null,function*(){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield WA(e,t,r,yv(),i);return vH(e,o,vS())})}_openRedirect(e,t,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield WA(e,t,r,yv(),i);return N$(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return m(this,null,function*(){let t=yield hH(e),r=new Nv(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mv,{type:mv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[mv];o!==void 0&&t(!!o),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hS()||oS()||Uv()}},bS=Pv;var KA="@firebase/auth",QA="1.7.9";var Mv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DH(n){qr(new Kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fS(n)},l=new Tv(r,i,s,u);return v$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qr(new Kt("auth-internal",e=>{let t=jv(e.getProvider("auth").getImmediate());return(r=>new Mv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),We(KA,QA,bH(n)),We(KA,QA,"esm2017")}var CH=5*60,AH=fy("authIdTokenMaxAge")||CH,YA=null,SH=n=>e=>m(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>AH)return;let i=t?.token;YA!==i&&(YA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Kv(n=to()){let e=ic(n,"auth");if(e.isInitialized())return e.getImmediate();let t=$v(n,{popupRedirectResolver:bS,persistence:[ES,yS,Wv]}),r=fy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=SH(s.toString());zv(t,o,()=>o(t.currentUser)),qv(t,a=>o(a))}}let i=dy("auth");return i&&Hv(t,`http://${i}`),t}function RH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}g$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=$i("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",RH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DH("Browser");var DS="auth",ln=class{constructor(e){return e}},Ec=class{constructor(){return sc(DS)}};var Qv=new B("angularfire2.auth-instances");function Eq(n,e){let t=Nd(DS,n,e);return t&&new ln(t)}function Tq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ln(r)}}var bq={provide:Ec,deps:[[new tt,Qv]]},Dq={provide:ln,useFactory:Eq,deps:[[new tt,Qv],nr]};function CS(n,...e){return We("angularfire",Vi.full,"auth"),Ht([Dq,bq,{provide:Qv,useFactory:Tq(n),multi:!0,deps:[ge,Et,io,Ui,[new tt,ro],...e]}])}var AS=Ft(Kv,!0);var SS=Ft(Gv,!0);var RS=(()=>{class n{constructor(t){this.router=t,this.auth=M(ln),this.allowedUsers=["bartos.jan454@gmail.com","peterbartos17@gmail.com","pavolbartos411@gmail.com","veronika.bartosova26@gmail.com","jan.bartos051@gmail.com"]}setAuthStateChangeListener(t){this.auth.onAuthStateChanged(r=>m(this,null,function*(){console.log("h1",r,t.feedbackMessage),yield this.handleRedirectSignIn()}))}signinWithRedirect(){let t=new Wd;try{return hv(this.auth,t,Kd),{status:!0,msg:"Prebieha presmerovanie na prihl\xE1senie",color:"blue"}}catch(r){return console.error("Error starting Google login redirect:",r),{status:!1,msg:"Chyba pri presmerovan\xED, sk\xFAs to znova",color:"red"}}}handleRedirectSignIn(){return m(this,null,function*(){return fv(this.auth).then(t=>{if(console.log(t),t){let r=t.user;return this.allowedUsers.includes(r.email??"")?(console.log("Logged in successfully with Google:",r),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie!",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Neautorizovan\xE1 emailov\xE1 adresa!",color:"red"})}else return{status:!1,msg:"\u017Diadny v\xFDsledok prihl\xE1senia sa nena\u0161iel",color:"gray"}}).catch(t=>(console.error("Error handling login redirect:",t),{status:!1,msg:"Chyba pri prihlasovan\xED, sk\xFAs to znova",color:"red"}))})}signInWithPopup(){return m(this,null,function*(){let t=new Wd;try{let i=(yield dv(this.auth,t,Kd)).user;return this.allowedUsers.includes(i.email??"")?(console.log("Logged in successfully with Google!"),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Nepovolen\xE1 emailov\xE1 adresa",color:"red"})}catch(r){return r.code==="auth/cancelled-popup-request"?(console.log("User closed the popup!"),{status:!1,msg:"Prihlasovacie okno bolo zatvoren\xE9, sk\xFAs to znova",color:"red"}):(console.error("Error logging in with Google:",r),{status:!1,msg:"Pri prihlasovan\xED do\u0161lo k chybe, sk\xFAs to znova",color:"red"})}})}logOut(){return m(this,null,function*(){try{yield this.auth.signOut(),console.log("Logged out successfully"),this.router.navigate(["/auth"])}catch(t){console.error("Error logging out:",t)}})}getCurrentUser(){return this.auth.currentUser}static{this.\u0275fac=function(r){return new(r||n)($(Wt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var NS=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.feedbackMessage="Pri prihlasovan\xED vysko\u010D\xED okno pre prihlasovanie, je potrebn\xE9 povoli\u0165 vyskakovacie okn\xE1 v prehliada\u010Di",this.feedbackMessageColor="gray"}signIn(){return m(this,null,function*(){let t=yield this.authService.signInWithPopup();this.feedbackMessage=t.msg,this.feedbackMessageColor=t.color,t.status&&this.router.navigate(["/"])})}static{this.\u0275fac=function(r){return new(r||n)(ve(RS),ve(Wt))}}static{this.\u0275cmp=wn({type:n,selectors:[["app-login"]],decls:10,vars:3,consts:[[1,"login-container"],[1,"login-h"],[1,"error-message"],[3,"click"],[1,"login-subtext"]],template:function(r,i){r&1&&(Ie(0,"div",0)(1,"h2",1),Ge(2,"Prihl\xE1si\u0165 sa \u27A1\uFE0F\u{1F513}"),be(),Ie(3,"div",2),Ge(4),be(),Ie(5,"button",3),nt("click",function(){return i.signIn()}),Ge(6,"cez Gmail \u{1F4E7}"),be(),Ie(7,"div",4)(8,"span"),Ge(9,"Potrebn\xE9 pre overenie toto\u017Enosti, \u017Ee si Barto\u0161 \u{1F609}"),be()()()),r&2&&(Le(3),Vl("color",i.feedbackMessageColor),Le(),kr(" ",i.feedbackMessage," "))},styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto auto;padding:20px;background:#f9f9f9;box-shadow:0 2px 4px #0000001a;border-radius:8px;text-align:center}button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#357ae8}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-bottom:20px}.login-subtext[_ngcontent-%COMP%]{margin-top:20px;color:gray}.login-h[_ngcontent-%COMP%]{color:#357ae8}"]})}}return n})();var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MS={};var Xr,Yv;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(E,b,C){for(var w=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)w[Fn-2]=arguments[Fn];return v.prototype[b].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)E[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var C=T.g[3],w=v+(C^I&(b^C))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[1]+3905402710&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[2]+606105819&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[5]+1200080426&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[6]+2821735955&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[9]+2336552879&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[10]+4294925233&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[13]+4254626195&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[14]+2792965006&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^C&(I^b))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[6]+3225465664&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[11]+643717713&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[10]+38016083&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[15]+3634488961&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[14]+3275163606&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[3]+4107603335&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[2]+4243563512&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[7]+1735328473&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^C)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[8]+2272392833&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[11]+1839030562&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[4]+1272893353&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[7]+4139469664&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[0]+3936430074&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[3]+3572445317&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[12]+3873151461&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[15]+530742520&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~C))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[7]+1126891415&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[14]+2878612391&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[3]+2399980690&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[10]+4293915773&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[15]+4264355552&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[6]+2734768916&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[11]+3174756917&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[2]+718787259&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,E=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(E[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,E),b=0;break}}else for(;C<v;)if(E[b++]=T[C++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)T[I++]=this.g[v]>>>E&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],E=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;E&&C==v||(I[b]=C,E=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,E=0;T>=I;E++)v[E]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),y=u(1),_=u(16777216);n=o.prototype,n.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);T+=(0<=E?E:4294967296+E)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,E="";;){var b=ee(I,v).g;I=O(I,b.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,A(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=O(this,T),R(T)?-1:A(T)?0:1};function N(T){for(var v=T.g.length,I=[],E=0;E<v;E++)I[E]=~T.g[E];return new o(I,~T.h).add(y)}n.abs=function(){return R(this)?N(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0,b=0;b<=v;b++){var C=E+(this.i(b)&65535)+(T.i(b)&65535),w=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);E=w>>>16,C&=65535,w&=65535,I[b]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(N(v))}n.j=function(T){if(A(this)||A(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<T.g.length;b++){var C=this.i(E)>>>16,w=this.i(E)&65535,Fn=T.i(b)>>>16,Bo=T.i(b)&65535;I[2*E+2*b]+=w*Bo,z(I,2*E+2*b),I[2*E+2*b+1]+=C*Bo,z(I,2*E+2*b+1),I[2*E+2*b+1]+=w*Fn,z(I,2*E+2*b+1),I[2*E+2*b+2]+=C*Fn,z(I,2*E+2*b+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function z(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function F(T,v){this.g=T,this.h=v}function ee(T,v){if(A(v))throw Error("division by zero");if(A(T))return new F(p,p);if(R(T))return v=ee(N(T),v),new F(N(v.g),N(v.h));if(R(v))return v=ee(T,N(v)),new F(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,E=v;0>=E.l(T);)I=De(I),E=De(E);var b=W(I,1),C=W(E,1);for(E=W(E,2),I=W(I,2);!A(E);){var w=C.add(E);0>=w.l(T)&&(b=b.add(I),C=w),E=W(E,1),I=W(I,1)}return v=O(T,b.j(v)),new F(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),w=C.j(v);R(w)||0<w.l(T);)I-=E,C=l(I),w=C.j(v);A(C)&&(C=y),b=b.add(C),T=O(T,w)}return new F(b,T)}n.A=function(T){return ee(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function De(T){for(var v=T.g.length+1,I=[],E=0;E<v;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function W(T,v){var I=v>>5;v%=32;for(var E=T.g.length-I,b=[],C=0;C<E;C++)b[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Yv=MS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Xr=MS.Integer=o}).apply(typeof PS<"u"?PS:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hr={};var Jv,Aq,yo,Xv,Tc,fh,Zv,e_,t_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,S){for(var k=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)k[Ce-2]=arguments[Ce];return d.prototype[D].apply(g,k)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,S=g.length||0;c.length=D+S;for(let k=0;k<S;k++)c[D+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var De=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function W(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let S=0;S<I.length;S++)f=I[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function w(){var c=hf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Fn{constructor(){this.h=this.g=null}add(d,f){let g=Bo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Bo=new O(()=>new tP,c=>c.reset());class tP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $o,Ho=!1,hf=new Fn,lw=()=>{let c=a.Promise.resolve(void 0);$o=()=>{c.then(nP)}};var nP=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){C(f)}var d=Bo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ho=!1};function mr(){this.s=this.s,this.C=this.C}mr.prototype.s=!1,mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var rP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function qo(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(De){e:{try{ee(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:iP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qo.aa.h.call(this)}}A(qo,it);var iP={2:"touch",3:"pen",4:"mouse"};qo.prototype.h=function(){qo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var zo="closure_listenable_"+(1e6*Math.random()|0),sP=0;function oP(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++sP,this.da=this.fa=!1}function Yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jc(c){this.src=c,this.g={},this.h=0}Jc.prototype.add=function(c,d,f,g,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var k=pf(c,d,g,D);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new oP(d,this.src,S,!!g,D),d.fa=f,c.push(d)),d};function ff(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(Yc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function pf(c,d,f,g){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var gf="closure_lm_"+(1e6*Math.random()|0),mf={};function dw(c,d,f,g,D){if(g&&g.once)return fw(c,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)dw(c,d[S],f,g,D);return null}return f=If(f),c&&c[zo]?c.K(d,f,l(g)?!!g.capture:!!g,D):hw(c,d,f,!1,g,D)}function hw(c,d,f,g,D,S){if(!d)throw Error("Invalid event type");var k=l(D)?!!D.capture:!!D,Ce=vf(c);if(Ce||(c[gf]=Ce=new Jc(c)),f=Ce.add(d,f,g,k,S),f.proxy)return f;if(g=aP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)rP||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(gw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function aP(){function c(f){return d.call(c.src,c.listener,f)}let d=cP;return c}function fw(c,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)fw(c,d[S],f,g,D);return null}return f=If(f),c&&c[zo]?c.L(d,f,l(g)?!!g.capture:!!g,D):hw(c,d,f,!0,g,D)}function pw(c,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)pw(c,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=If(f),c&&c[zo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=pf(S,f,g,D),-1<f&&(Yc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=vf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pf(d,f,g,D)),(f=-1<c?d[c]:null)&&yf(f))}function yf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[zo])ff(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(gw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=vf(d))?(ff(f,c),f.h==0&&(f.src=null,d[gf]=null)):Yc(c)}}}function gw(c){return c in mf?mf[c]:mf[c]="on"+c}function cP(c,d){if(c.da)c=!0;else{d=new qo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&yf(c),c=f.call(g,d)}return c}function vf(c){return c=c[gf],c instanceof Jc?c:null}var _f="__closure_events_fn_"+(1e9*Math.random()>>>0);function If(c){return typeof c=="function"?c:(c[_f]||(c[_f]=function(d){return c.handleEvent(d)}),c[_f])}function st(){mr.call(this),this.i=new Jc(this),this.M=this,this.F=null}A(st,mr),st.prototype[zo]=!0,st.prototype.removeEventListener=function(c,d,f,g){pw(this,c,d,f,g)};function gt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var D=d;d=new it(g,c),E(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var k=d.g=f[S];D=Xc(k,g,!0,d)&&D}if(k=d.g=c,D=Xc(k,g,!0,d)&&D,D=Xc(k,g,!1,d)&&D,f)for(S=0;S<f.length;S++)k=d.g=f[S],D=Xc(k,g,!1,d)&&D}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Yc(f[g]);delete c.g[d],c.h--}}this.F=null},st.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},st.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Xc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var k=d[S];if(k&&!k.da&&k.capture==f){var Ce=k.listener,Ze=k.ha||k.src;k.fa&&ff(c.i,k),D=Ce.call(Ze,g)!==!1&&D}}return D&&!g.defaultPrevented}function mw(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function yw(c){c.g=mw(()=>{c.g=null,c.i&&(c.i=!1,yw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class uP extends mr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(c){mr.call(this),this.h=c,this.g={}}A(Go,mr);var vw=[];function _w(c){W(c.g,function(d,f){this.g.hasOwnProperty(f)&&yf(d)},c),c.g={}}Go.prototype.N=function(){Go.aa.N.call(this),_w(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wf=a.JSON.stringify,lP=a.JSON.parse,dP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ef(){}Ef.prototype.h=null;function Iw(c){return c.h||(c.h=c.i())}function ww(){}var Wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tf(){it.call(this,"d")}A(Tf,it);function bf(){it.call(this,"c")}A(bf,it);var si={},Ew=null;function Zc(){return Ew=Ew||new st}si.La="serverreachability";function Tw(c){it.call(this,si.La,c)}A(Tw,it);function Ko(c){let d=Zc();gt(d,new Tw(d))}si.STAT_EVENT="statevent";function bw(c,d){it.call(this,si.STAT_EVENT,c),this.stat=d}A(bw,it);function mt(c){let d=Zc();gt(d,new bw(d,c))}si.Ma="timingevent";function Dw(c,d){it.call(this,si.Ma,c),this.size=d}A(Dw,it);function Qo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Yo(){this.g=!0}Yo.prototype.xa=function(){this.g=!1};function hP(c,d,f,g,D,S){c.info(function(){if(c.g)if(S)for(var k="",Ce=S.split("&"),Ze=0;Ze<Ce.length;Ze++){var pe=Ce[Ze].split("=");if(1<pe.length){var ot=pe[0];pe=pe[1];var at=ot.split("_");k=2<=at.length&&at[1]=="type"?k+(ot+"="+pe+"&"):k+(ot+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+k})}function fP(c,d,f,g,D,S,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+k})}function rs(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+gP(c,f)+(g?" "+g:"")})}function pP(c,d){c.info(function(){return"TIMEOUT: "+d})}Yo.prototype.info=function(){};function gP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<D.length;k++)D[k]=""}}}}return wf(f)}catch{return d}}var eu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Df;function tu(){}A(tu,Ef),tu.prototype.g=function(){return new XMLHttpRequest},tu.prototype.i=function(){return{}},Df=new tu;function yr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Aw}function Aw(){this.i=null,this.g="",this.h=!1}var Sw={},Cf={};function Af(c,d,f){c.L=1,c.v=su(Ln(d)),c.m=f,c.P=!0,Rw(c,null)}function Rw(c,d){c.F=Date.now(),nu(c),c.A=Ln(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Hw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Aw,c.g=aE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new uP(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(vw[0]=D.toString()),D=vw);for(var S=0;S<D.length;S++){var k=dw(f,D[S],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ko(),hP(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Vn(c)==3?d.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{let at=Vn(this.g);var d=this.g.Ba();let os=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Yw(this.g)))){this.J||at!=4||d==7||(d==8||0>=os?Ko(3):Ko(2)),Sf(this);var f=this.g.Z();this.X=f;t:if(Nw(this)){var g=Yw(this.g);c="";var D=g.length,S=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Jo(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,fP(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Ze=this.g;if((Ce=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ce)){var pe=Ce;break t}}pe=null}if(f=pe)rs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rf(this,f);else{this.o=!1,this.s=3,mt(12),oi(this),Jo(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<k.length;)if(Jt=mP(this,k),Jt==Cf){at==4&&(this.s=4,mt(14),f=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Sw){this.s=4,mt(15),rs(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else rs(this.i,this.l,Jt,null),Rf(this,Jt);if(Nw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||k.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)rs(this.i,this.l,k,"[Invalid Chunked Response]"),oi(this),Jo(this);else if(0<k.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),kf(ot),ot.M=!0,mt(11))}}else rs(this.i,this.l,k,null),Rf(this,k);at==4&&oi(this),this.o&&!this.J&&(at==4?rE(this.j,this):(this.o=!1,nu(this)))}else xP(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),oi(this),Jo(this)}}}catch{}finally{}};function Nw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function mP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Cf:(f=Number(d.substring(f,g)),isNaN(f)?Sw:(g+=1,g+f>d.length?Cf:(d=d.slice(g,g+f),c.C=g+f,d)))}yr.prototype.cancel=function(){this.J=!0,oi(this)};function nu(c){c.S=Date.now()+c.I,Pw(c,c.I)}function Pw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qo(y(c.ba,c),d)}function Sf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(pP(this.i,this.A),this.L!=2&&(Ko(),mt(17)),oi(this),this.s=2,Jo(this)):Pw(this,this.S-c)};function Jo(c){c.j.G==0||c.J||rE(c.j,c)}function oi(c){Sf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,_w(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Rf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Nf(f.h,c))){if(!c.K&&Nf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)lu(f),cu(f);else break e;Of(f),mt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Qo(y(f.Za,f),6e3));if(1>=Ow(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((c.K||f.g==c)&&lu(f),!z(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let pe=D[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let ot=pe[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let at=pe[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let os=pe[5];os!=null&&typeof os=="number"&&0<os&&(g=1.5*os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Jt=c.g;if(Jt){let hu=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var S=g.h;S.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Pf(S,S.h),S.h=null))}if(g.D){let Ff=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ff&&(g.ya=Ff,Re(g.I,g.D,Ff))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=oE(g,g.J?g.ia:null,g.W),k.K){kw(g.h,k);var Ce=k,Ze=g.L;Ze&&(Ce.I=Ze),Ce.B&&(Sf(Ce),nu(Ce)),g.g=k}else tE(g);0<f.i.length&&uu(f)}else pe[0]!="stop"&&pe[0]!="close"||ci(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ci(f,7):xf(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Ko(4)}catch{}}var yP=class{constructor(c,d){this.g=c,this.map=d}};function Mw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ow(c){return c.h?1:c.g?c.g.size:0}function Nf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pf(c,d){c.g?c.g.add(d):c.h=d}function kw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Mw.prototype.cancel=function(){if(this.i=Fw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Fw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function vP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function _P(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Lw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=_P(c),g=vP(c),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],c)}var Vw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var S=c[f].substring(0,g);D=c[f].substring(g+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ai){this.h=c.h,ru(this,c.j),this.o=c.o,this.g=c.g,iu(this,c.s),this.l=c.l;var d=c.i,f=new ea;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Uw(this,f),this.m=c.m}else c&&(d=String(c).match(Vw))?(this.h=!1,ru(this,d[1]||"",!0),this.o=Xo(d[2]||""),this.g=Xo(d[3]||"",!0),iu(this,d[4]),this.l=Xo(d[5]||"",!0),Uw(this,d[6]||"",!0),this.m=Xo(d[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}ai.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Zo(d,jw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Zo(d,jw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Zo(f,f.charAt(0)=="/"?TP:EP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Zo(f,DP)),c.join("")};function Ln(c){return new ai(c)}function ru(c,d,f){c.j=f?Xo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function iu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Uw(c,d,f){d instanceof ea?(c.i=d,CP(c.i,c.h)):(f||(d=Zo(d,bP)),c.i=new ea(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function su(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,wP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jw=/[#\/\?@]/g,EP=/[#\?:]/g,TP=/[#\?]/g,bP=/[#\?@]/g,DP=/#/g;function ea(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&IP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ea.prototype,n.add=function(c,d){vr(this),this.i=null,c=is(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Bw(c,d){vr(c),d=is(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function $w(c,d){return vr(c),d=is(c,d),c.g.has(d)}n.forEach=function(c,d){vr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){vr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},n.V=function(c){vr(this);let d=[];if(typeof c=="string")$w(this,c)&&(d=d.concat(this.g.get(is(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return vr(this),this.i=null,c=is(this,c),$w(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Hw(c,d,f){Bw(c,d),0<f.length&&(c.i=null,c.g.set(is(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var D=S;k[g]!==""&&(D+="="+encodeURIComponent(String(k[g]))),c.push(D)}}return this.i=c.join("&")};function is(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function CP(c,d){d&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(Bw(this,g),Hw(this,D,f))},c)),c.j=d}function AP(c,d){let f=new Yo;if(a.Image){let g=new Image;g.onload=_(_r,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(_r,f,"TestLoadImage: error",!1,d,g),g.onabort=_(_r,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(_r,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function SP(c,d){let f=new Yo,g=new AbortController,D=setTimeout(()=>{g.abort(),_r(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?_r(f,"TestPingServer: ok",!0,d):_r(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),_r(f,"TestPingServer: error",!1,d)})}function _r(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function RP(){this.g=new dP}function NP(c,d,f){let g=f||"";try{Lw(c,function(D,S){let k=D;l(D)&&(k=wf(D)),d.push(g+S+"="+encodeURIComponent(k))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function ta(c){this.l=c.Ub||null,this.j=c.eb||!1}A(ta,Ef),ta.prototype.g=function(){return new ou(this.l,this.j)},ta.prototype.i=function(c){return function(){return c}}({});function ou(c,d){st.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ou,st),n=ou.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ra(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function qw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?na(this):ra(this),this.readyState==3&&qw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,na(this))},n.Qa=function(c){this.g&&(this.response=c,na(this))},n.ga=function(){this.g&&na(this)};function na(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ra(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zw(c){let d="";return W(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Mf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=zw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Me(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,st);var PP=/^https?$/i,MP=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Df.g(),this.v=this.o?Iw(this.o):Iw(Df),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Gw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MP,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of f)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Gw(this,S)}};function Gw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ww(c),au(c)}function Ww(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),au(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kw(this):this.bb())},n.bb=function(){Kw(this)};function Kw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)mw(c.Ea,0,c);else if(gt(c,"readystatechange"),Vn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var D=String(c.D).match(Vw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!PP.test(D?D.toLowerCase():"")}f=g}if(f)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var S=2<Vn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",Ww(c)}}finally{au(c)}}}}function au(c,d){if(c.g){Qw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||gt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Qw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),lP(d)}};function Yw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xP(c){let d={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Jw(c){this.Aa=0,this.i=[],this.j=new Yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,c),this.cb=ia("retryDelaySeedMs",1e4,c),this.Wa=ia("forwardChannelMaxRetries",2,c),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Mw(c&&c.concurrentRequestLimit),this.Da=new RP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){mt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=oE(this,null,this.W),uu(this)};function xf(c){if(Xw(c),c.G==3){var d=c.U++,f=Ln(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),sa(c,f),d=new yr(c,c.j,d),d.L=2,d.v=su(Ln(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=aE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),nu(d)}sE(c)}function cu(c){c.g&&(kf(c),c.g.cancel(),c.g=null)}function Xw(c){cu(c),c.u&&(a.clearTimeout(c.u),c.u=null),lu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function uu(c){if(!xw(c.h)&&!c.s){c.s=!0;var d=c.Ga;$o||lw(),Ho||($o(),Ho=!0),hf.add(d,c),c.B=0}}function OP(c,d){return Ow(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qo(y(c.Ga,c,d),iE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new yr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=eE(this,D,d),f=Ln(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),sa(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(zw(S)))+"&"+d:this.m&&Mf(f,this.m,S)),Pf(this.h,D),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),D.T=!0,Af(D,f,null)):Af(D,f,d),this.G=2}}else this.G==3&&(c?Zw(this,c):this.i.length==0||xw(this.h)||Zw(this))};function Zw(c,d){var f;d?f=d.l:f=c.U++;let g=Ln(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),sa(c,g),c.m&&c.o&&Mf(g,c.m,c.o),f=new yr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=eE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pf(c.h,f),Af(f,g,d)}function sa(c,d){c.H&&W(c.H,function(f,g){Re(d,g,f)}),c.l&&Lw({},function(f,g){Re(d,g,f)})}function eE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let k=["count="+f];S==-1?0<f?(S=D[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let Ce=!0;for(let Ze=0;Ze<f;Ze++){let pe=D[Ze].g,ot=D[Ze].map;if(pe-=S,0>pe)S=Math.max(0,D[Ze].g-100),Ce=!1;else try{NP(ot,k,"req"+pe+"_")}catch{g&&g(ot)}}if(Ce){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function tE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;$o||lw(),Ho||($o(),Ho=!0),hf.add(d,c),c.v=0}}function Of(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qo(y(c.Fa,c),iE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,nE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qo(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),cu(this),nE(this))};function kf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function nE(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Ln(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),sa(c,d),c.m&&c.o&&Mf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=su(Ln(d)),f.m=null,f.P=!0,Rw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,cu(this),Of(this),mt(19))};function lu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function rE(c,d){var f=null;if(c.g==d){lu(c),kf(c),c.g=null;var g=2}else if(Nf(c.h,d))f=d.D,kw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Zc(),gt(g,new Dw(g,f)),uu(c)}else tE(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&OP(c,d)||g==2&&Of(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function iE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ci(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let D=!g;g=new ai(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ru(g,"https"),su(g),D?AP(g.toString(),f):SP(g.toString(),f)}else mt(2);c.G=0,c.l&&c.l.sa(d),sE(c),Xw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function sE(c){if(c.G=0,c.ka=[],c.l){let d=Fw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function oE(c,d,f){var g=f instanceof ai?Ln(f):new ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),iu(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new ai(null);g&&ru(S,g),d&&(S.g=d),D&&iu(S,D),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),sa(c,g),g}function aE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new ta({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cE(){}n=cE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function du(){}du.prototype.g=function(c,d){return new Nt(c,d)};function Nt(c,d){st.call(this),this.g=new Jw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ss(this)}A(Nt,st),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){xf(this.g)},Nt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=wf(c),c=f);d.i.push(new yP(d.Ya++,c)),d.G==3&&uu(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,xf(this.g),delete this.g,Nt.aa.N.call(this)};function uE(c){Tf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(uE,Tf);function lE(){bf.call(this),this.status=1}A(lE,bf);function ss(c){this.g=c}A(ss,cE),ss.prototype.ua=function(){gt(this.g,"a")},ss.prototype.ta=function(c){gt(this.g,new uE(c))},ss.prototype.sa=function(c){gt(this.g,new lE)},ss.prototype.ra=function(){gt(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,t_=hr.createWebChannelTransport=function(){return new du},e_=hr.getStatEventTarget=function(){return Zc()},Zv=hr.Event=si,fh=hr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eu.NO_ERROR=0,eu.TIMEOUT=8,eu.HTTP_ERROR=6,Tc=hr.ErrorCode=eu,Cw.COMPLETE="complete",Xv=hr.EventType=Cw,ww.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",st.prototype.listen=st.prototype.K,yo=hr.WebChannel=ww,Aq=hr.FetchXmlHttpFactory=ta,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Jv=hr.XhrIo=Me}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});var xS="@firebase/firestore";var Xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");var Vo="10.14.0";var Ki=new $r("@firebase/firestore");function bc(){return Ki.logLevel}function V(n,...e){if(Ki.logLevel<=ue.DEBUG){let t=e.map(FI);Ki.debug(`Firestore (${Vo}): ${n}`,...t)}}function fr(n,...e){if(Ki.logLevel<=ue.ERROR){let t=e.map(FI);Ki.error(`Firestore (${Vo}): ${n}`,...t)}}function bo(n,...e){if(Ki.logLevel<=ue.WARN){let t=e.map(FI);Ki.warn(`Firestore (${Vo}): ${n}`,...t)}}function FI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function we(n,e){n||K()}function X(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends kt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},o_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xe.UNAUTHENTICATED))}shutdown(){}},a_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},c_=class{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new vh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Xe(e)}},u_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},l_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new u_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},d_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},h_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){we(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(we(typeof t.token=="string"),this.R=t.token,new d_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Sq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var _h=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Sq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function Do(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var rt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ih=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},xe=class n extends Ih{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Rq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vt=class n extends Ih{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Rq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};var f_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};f_.UNKNOWN_ID=-1;function Nq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new Qi(i,q.empty(),e)}function Pq(n){return new Qi(n.readTime,n.key,-1)}var Qi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),q.empty(),-1)}static max(){return new n(ne.max(),q.empty(),-1)}};function Mq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var xq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",p_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bc(n){return m(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==xq)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Oq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $c(n){return n.name==="IndexedDbTransactionError"}var dR=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Xh(n){return n==null}function Nc(n){return n===0&&1/n==-1/0}function kq(n){return typeof n=="number"&&Number.isInteger(n)&&!Nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Fq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PX=[...Fq,"documentOverlays"],Lq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vq=Lq,Uq=[...Vq,"indexConfiguration","indexState","indexEntries"];var MX=[...Uq,"globals"];function OS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function es(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}},wo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wh(this.data.getIterator())}getIteratorFrom(e){return new wh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yt=class n{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ft(Vt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Eh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Eh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pt.EMPTY_BYTE_STRING=new pt("");var jq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(we(!!n),typeof n=="string"){let e=0,t=jq.exec(n);if(we(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ti(n){return typeof n=="string"?pt.fromBase64String(n):pt.fromUint8Array(n)}function LI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function VI(n){let e=n.mapValue.fields.__previous_value__;return LI(e)?VI(e):e}function Pc(n){let e=pr(n.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var g_=class{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Th=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LI(n)?4:pR(n)?9007199254740991:fR(n)?10:11:K()}function xn(n,e){if(n===e)return!0;let t=Yi(n);if(t!==Yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pc(n).isEqual(Pc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=pr(i.timestampValue),a=pr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ti(i.bytesValue).isEqual(ti(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Pe(i.geoPointValue.latitude)===Pe(s.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pe(i.integerValue)===Pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Pe(i.doubleValue),a=Pe(s.doubleValue);return o===a?Nc(o)===Nc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Do(n.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(OS(o)!==OS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!xn(o[u],a[u])))return!1;return!0}(n,e);default:return K()}}function Mc(n,e){return(n.values||[]).find(t=>xn(t,e))!==void 0}function Co(n,e){if(n===e)return 0;let t=Yi(n),r=Yi(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Pe(s.integerValue||s.doubleValue),u=Pe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return kS(n.timestampValue,e.timestampValue);case 4:return kS(Pc(n),Pc(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ti(s),u=ti(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=me(Pe(s.latitude),Pe(o.latitude));return a!==0?a:me(Pe(s.longitude),Pe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FS(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=me(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:FS(_,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ph.mapValue&&o===ph.mapValue)return 0;if(s===ph.mapValue)return 1;if(o===ph.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=me(u[p],h[p]);if(y!==0)return y;let _=Co(a[u[p]],l[h[p]]);if(_!==0)return _}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function kS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=pr(n),r=pr(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function FS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Co(t[i],r[i]);if(s)return s}return me(t.length,r.length)}function Ao(n){return m_(n)}function m_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=pr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=m_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${m_(t.fields[o])}`;return i+"}"}(n.mapValue):K()}function y_(n){return!!n&&"integerValue"in n}function UI(n){return!!n&&"arrayValue"in n}function LS(n){return!!n&&"nullValue"in n}function VS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mh(n){return!!n&&"mapValue"in n}function fR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Cc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return es(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Lt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=Vt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Cc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){es(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Cc(this.value))}};function gR(n){let e=[];return es(n.fields,(t,r)=>{let i=new Vt([t]);if(mh(r)){let s=gR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}var dn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Lt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Lt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Lt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var So=class{constructor(e,t){this.position=e,this.inclusive=t}};function US(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),t.key):r=Co(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xn(n.position[t],e.position[t]))return!1;return!0}var Ro=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Bq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var bh=class{},Ke=class n extends bh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new __(e,t,r):t==="array-contains"?new E_(e,r):t==="in"?new T_(e,r):t==="not-in"?new b_(e,r):t==="array-contains-any"?new D_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new I_(e,r):new w_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Co(t,this.value)):t!==null&&Yi(this.value)===Yi(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},On=class n extends bh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return mR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function mR(n){return n.op==="and"}function yR(n){return $q(n)&&mR(n)}function $q(n){for(let e of n.filters)if(e instanceof On)return!1;return!0}function v_(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+Ao(n.value);if(yR(n))return n.filters.map(e=>v_(e)).join(",");{let e=n.filters.map(t=>v_(t)).join(",");return`${n.op}(${e})`}}function vR(n,e){return n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(n,e):n instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vR(o,i.filters[a]),!0):!1}(n,e):void K()}function _R(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`}(n):n instanceof On?function(t){return t.op.toString()+" {"+t.getFilters().map(_R).join(" ,")+"}"}(n):"Filter"}var __=class extends Ke{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},I_=class extends Ke{constructor(e,t){super(e,"in",t),this.keys=IR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},w_=class extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=IR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function IR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var E_=class extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return UI(t)&&Mc(t.arrayValue,this.value)}},T_=class extends Ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mc(this.value.arrayValue,t)}},b_=class extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mc(this.value.arrayValue,t)}},D_=class extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!UI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}};var C_=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function BS(n,e=null,t=[],r=[],i=null,s=null,o=null){return new C_(n,e,t,r,i,s,o)}function jI(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>v_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ao(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ao(r)).join(",")),e.ue=t}return e.ue}function BI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Bq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jS(n.startAt,e.startAt)&&jS(n.endAt,e.endAt)}function A_(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var No=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Hq(n,e,t,r,i,s,o,a){return new No(n,e,t,r,i,s,o,a)}function Zh(n){return new No(n)}function $S(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qq(n){return n.collectionGroup!==null}function Ac(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(Vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ro(s,r))}),t.has(Vt.keyField().canonicalString())||e.ce.push(new Ro(Vt.keyField(),r))}return e.ce}function Nn(n){let e=X(n);return e.le||(e.le=zq(e,Ac(n))),e.le}function zq(n,e){if(n.limitType==="F")return BS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ro(i.field,s)});let t=n.endAt?new So(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new So(n.startAt.position,n.startAt.inclusive):null;return BS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function S_(n,e,t){return new No(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ef(n,e){return BI(Nn(n),Nn(e))&&n.limitType===e.limitType}function wR(n){return`${jI(Nn(n))}|lt:${n.limitType}`}function vo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_R(i)).join(", ")}]`),Xh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ao(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ao(i)).join(",")),`Target(${r})`}(Nn(n))}; limitType=${n.limitType})`}function tf(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ac(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=US(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ac(r),i)||r.endAt&&!function(o,a,u){let l=US(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ac(r),i))}(n,e)}function Gq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ER(n){return(e,t)=>{let r=!1;for(let i of Ac(n)){let s=Wq(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Wq(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Co(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var ni=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hR(this.inner)}size(){return this.innerSize}};var Kq=new Oe(q.comparator);function gr(){return Kq}var TR=new Oe(q.comparator);function Dc(...n){let e=TR;for(let t of n)e=e.insert(t.key,t);return e}function bR(n){let e=TR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zi(){return Sc()}function DR(){return Sc()}function Sc(){return new ni(n=>n.toString(),(n,e)=>n.isEqual(e))}var Qq=new Oe(q.comparator),Yq=new ft(q.comparator);function le(...n){let e=Yq;for(let t of n)e=e.add(t);return e}var Jq=new ft(me);function Xq(){return Jq}function $I(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function CR(n){return{integerValue:""+n}}function Zq(n,e){return kq(e)?CR(e):$I(n,e)}var Po=class{constructor(){this._=void 0}};function ez(n,e,t){return n instanceof Mo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&LI(s)&&(s=VI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ji?SR(n,e):n instanceof Xi?RR(n,e):function(i,s){let o=AR(i,s),a=HS(o)+HS(i.Pe);return y_(o)&&y_(i.Pe)?CR(a):$I(i.serializer,a)}(n,e)}function tz(n,e,t){return n instanceof Ji?SR(n,e):n instanceof Xi?RR(n,e):t}function AR(n,e){return n instanceof xo?function(r){return y_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Mo=class extends Po{},Ji=class extends Po{constructor(e){super(),this.elements=e}};function SR(n,e){let t=NR(e);for(let r of n.elements)t.some(i=>xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xi=class extends Po{constructor(e){super(),this.elements=e}};function RR(n,e){let t=NR(e);for(let r of n.elements)t=t.filter(i=>!xn(i,r));return{arrayValue:{values:t}}}var xo=class extends Po{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function HS(n){return Pe(n.integerValue||n.doubleValue)}function NR(n){return UI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ji&&i instanceof Ji||r instanceof Xi&&i instanceof Xi?Do(r.elements,i.elements,xn):r instanceof xo&&i instanceof xo?xn(r.Pe,i.Pe):r instanceof Mo&&i instanceof Mo}(n.transform,e.transform)}var R_=class{constructor(e,t){this.version=e,this.transformResults=t}},Zr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Oo=class{};function PR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dh(n.key,Zr.none()):new Zi(n.key,n.data,Zr.none());{let t=n.data,r=Lt.empty(),i=new ft(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new kn(n.key,r,new Yt(i.toArray()),Zr.none())}}function rz(n,e,t){n instanceof Zi?function(i,s,o){let a=i.value.clone(),u=zS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(i,s,o){if(!yh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=zS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(MR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Rc(n,e,t,r){return n instanceof Zi?function(s,o,a,u){if(!yh(s.precondition,o))return a;let l=s.value.clone(),h=GS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof kn?function(s,o,a,u){if(!yh(s.precondition,o))return a;let l=GS(s.fieldTransforms,u,o),h=o.data;return h.setAll(MR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return yh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function iz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=AR(r.transform,i||null);s!=null&&(t===null&&(t=Lt.empty()),t.set(r.field,s))}return t||null}function qS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Do(r,i,(s,o)=>nz(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Zi=class extends Oo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends Oo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function MR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zS(n,e,t){let r=new Map;we(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tz(o,a,t[i]))}return r}function GS(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,ez(s,o,e))}return r}var Dh=class extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},N_=class extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var P_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&rz(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=DR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=PR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,r)=>qS(t,r))&&Do(this.baseMutations,e.baseMutations,(t,r)=>qS(t,r))}},M_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){we(e.mutations.length===r.length);let i=function(){return Qq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var x_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var O_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,fe;function sz(n){switch(n){default:return K();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function xR(n){if(n===void 0)return fr("GRPC error has no .code"),P.UNKNOWN;switch(n){case Be.OK:return P.OK;case Be.CANCELLED:return P.CANCELLED;case Be.UNKNOWN:return P.UNKNOWN;case Be.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Be.INTERNAL:return P.INTERNAL;case Be.UNAVAILABLE:return P.UNAVAILABLE;case Be.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Be.NOT_FOUND:return P.NOT_FOUND;case Be.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Be.ABORTED:return P.ABORTED;case Be.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Be.DATA_LOSS:return P.DATA_LOSS;default:return K()}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var WS=null;function oz(){return new TextEncoder}var az=new Xr([4294967295,4294967295],0);function KS(n){let e=oz().encode(n),t=new Yv;return t.update(e),new Uint8Array(t.digest())}function QS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([t,r],0),new Xr([i,s],0)]}var k_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gi(`Invalid padding: ${t}`);if(r<0)throw new Gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xr.fromNumber(r)));return i.compare(az)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=KS(e),[r,i]=QS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=KS(e),[r,i]=QS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Gi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ch=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Oe(me),gr(),le())}},xc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var Eo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ah=class{constructor(e,t){this.targetId=e,this.me=t}},Sh=class{constructor(e,t,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Rh=class{constructor(){this.fe=0,this.ge=JS(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),t=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new xc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=JS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},F_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=YS(),this.Qe=new Oe(me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(A_(s))if(r===0){let o=new q(s.path);this.Ue(t,o,dn.newNoDocument(o,ne.min()))}else we(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}WS?.et(function(h,p,y,_,A){var R,N,O,z,F,ee;let De={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},W=p.unchangedNames;return W&&(De.bloomFilter={applied:A===0,hashCount:(R=W?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(z=(O=(N=W?.bits)===null||N===void 0?void 0:N.bitmap)===null||O===void 0?void 0:O.length)!==null&&z!==void 0?z:0,padding:(ee=(F=W?.bits)===null||F===void 0?void 0:F.padding)!==null&&ee!==void 0?ee:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),De}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ti(r).toUint8Array()}catch(u){if(u instanceof Eh)return bo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new k_(o,i,s)}catch(u){return bo(u instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&A_(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,dn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ch(e,t,this.Qe,this.ke,r);return this.ke=gr(),this.qe=YS(),this.Qe=new Oe(me),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Rh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ft(me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function YS(){return new Oe(q.comparator)}function JS(){return new Oe(q.comparator)}var cz={asc:"ASCENDING",desc:"DESCENDING"},uz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lz={and:"AND",or:"OR"},L_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function V_(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function Nh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dz(n,e){return Nh(n,e.toTimestamp())}function Pn(n){return we(!!n),ne.fromTimestamp(function(t){let r=pr(t);return new rt(r.seconds,r.nanos)}(n))}function HI(n,e){return U_(n,e).canonicalString()}function U_(n,e){let t=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kR(n){let e=xe.fromString(n);return we(jR(e)),e}function j_(n,e){return HI(n.databaseId,e.path)}function n_(n,e){let t=kR(e);if(t.get(1)!==n.databaseId.projectId)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(LR(t))}function FR(n,e){return HI(n.databaseId,e)}function hz(n){let e=kR(n);return e.length===4?xe.emptyPath():LR(e)}function B_(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LR(n){return we(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function XS(n,e,t){return{name:j_(n,e),fields:t.value.mapValue.fields}}function fz(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?P.UNKNOWN:xR(l.code);return new j(h,l.message||"")}(o);t=new Sh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=n_(n,r.document.name),s=Pn(r.document.updateTime),o=r.document.createTime?Pn(r.document.createTime):ne.min(),a=new Lt({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Eo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=n_(n,r.document),s=r.readTime?Pn(r.readTime):ne.min(),o=dn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Eo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=n_(n,r.document),s=r.removedTargetIds||[];t=new Eo([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new O_(i,s),a=r.targetId;t=new Ah(a,o)}}return t}function pz(n,e){let t;if(e instanceof Zi)t={update:XS(n,e.key,e.value)};else if(e instanceof Dh)t={delete:j_(n,e.key)};else if(e instanceof kn)t={update:XS(n,e.key,e.data),updateMask:Tz(e.fieldMask)};else{if(!(e instanceof N_))return K();t={verify:j_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Mo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ji)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function gz(n,e){return n&&n.length>0?(we(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Pn(i.updateTime):Pn(s);return o.isEqual(ne.min())&&(o=Pn(s)),new R_(o,i.transformResults||[])}(t,e))):[]}function mz(n,e){return{documents:[FR(n,e.path)]}}function yz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FR(n,i);let s=function(l){if(l.length!==0)return UR(On.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:_o(y.field),direction:Iz(y.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=V_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function vz(n){let e=hz(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){we(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let y=VR(p);return y instanceof On&&yR(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(y=>function(A){return new Ro(Io(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Xh(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new So(_,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new So(_,y)}(t.endAt)),Hq(e,i,o,s,a,"F",u,l)}function _z(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Io(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Io(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Io(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Io(t.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(Io(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return On.create(t.compositeFilter.filters.map(r=>VR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function Iz(n){return cz[n]}function wz(n){return uz[n]}function Ez(n){return lz[n]}function _o(n){return{fieldPath:n.canonicalString()}}function Io(n){return Vt.fromServerFormat(n.fieldPath)}function UR(n){return n instanceof Ke?function(t){if(t.op==="=="){if(VS(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(LS(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VS(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(LS(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:wz(t.op),value:t.value}}}(n):n instanceof On?function(t){let r=t.getFilters().map(i=>UR(i));return r.length===1?r[0]:{compositeFilter:{op:Ez(t.op),filters:r}}}(n):K()}function Tz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Oc=class n{constructor(e,t,r,i,s=ne.min(),o=ne.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $_=class{constructor(e){this.ct=e}};function bz(n){let e=vz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?S_(e,e.limit,"L"):e}var Ph=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Nc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=pr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ti(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?pR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):fR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Pe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ph.vt=new Ph;var H_=class{constructor(){this.un=new q_}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Qi.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},q_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ft(xe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(xe.comparator)).toArray()}};var OX=new Uint8Array(0);var An=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(41943040,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);var kc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var z_=class{constructor(){this.changes=new ni(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var G_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var W_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Rc(r.mutation,i,Yt.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let i=zi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Dc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=zi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=gr(),o=Sc(),a=function(){return Sc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof kn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Rc(h.mutation,l,h.mutation.getFieldMask(),rt.now())):o.set(l.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new G_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Sc(),i=new Oe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Yt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=DR();h.forEach(y=>{if(!s.has(y)){let _=PR(t.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve(zi()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:bR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Dc();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,y){return new No(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,dn.newInvalidDocument(h)))});let a=Dc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Rc(h.mutation,l,Yt.empty(),rt.now()),tf(t,l)&&(a=a.insert(u,l))}),a})}};var K_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:bz(i.bundledQuery),readTime:Pn(i.readTime)}}(t)),x.resolve()}};var Q_=class{constructor(){this.overlays=new Oe(q.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=zi();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=zi(),s=t.length+1,o=new q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Oe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=zi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=zi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x_(t,r));let s=this.Ir.get(t);s===void 0&&(s=le(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Y_=class{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Fc=class{constructor(){this.Tr=new ft($e.Er),this.dr=new ft($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new $e(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new $e(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new xe([])),r=new $e(t,e),i=new $e(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new xe([])),r=new $e(t,e),i=new $e(t,e+1),s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new $e(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||me(e.wr,t.wr)}static Ar(e,t){return me(e.wr,t.wr)||q.comparator(e.key,t.key)}};var J_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ft($e.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new P_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new $e(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $e(t,0),i=new $e(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(me);return t.forEach(i=>{let s=new $e(i,0),o=new $e(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new $e(new q(s),0),a=new ft(me);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){we(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let s=new $e(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new $e(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var X_=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=gr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=gr(),o=t.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Mq(Pq(h),r)<=0||(i.has(h.key)||tf(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z_(this)}getSize(e){return x.resolve(this.size)}},Z_=class extends z_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var eI=class{constructor(e){this.persistence=e,this.Nr=new ni(t=>jI(t),BI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fc,this.targetCount=0,this.kr=kc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new kc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var tI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dR(0),this.Kr=!1,this.Kr=!0,this.$r=new Y_,this.referenceDelegate=e(this),this.Ur=new eI(this),this.indexManager=new H_,this.remoteDocumentCache=function(i){return new X_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $_(t),this.Gr=new K_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new J_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new nI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},nI=class extends p_{constructor(e){super(),this.currentSequenceNumber=e}},rI=class n{constructor(e){this.persistence=e,this.Jr=new Fc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=le(),i=le();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var sI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return m0()?8:Oq(Ye())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(bc()<=ue.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(bc()<=ue.DEBUG&&V("QueryEngine","Query:",vo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(bc()<=ue.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(t))):x.resolve())}Yi(e,t){if($S(t))return x.resolve(null);let r=Nn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=S_(t,null,"F"),r=Nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,S_(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return $S(t)||i.isEqual(ne.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?x.resolve(null):(bc()<=ue.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vo(t)),this.rs(e,o,t,Nq(i,-1)).next(a=>a))})}ts(e,t){let r=new ft(ER(e));return t.forEach((i,s)=>{tf(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return bc()<=ue.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",vo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Qi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var aI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Oe(me),this._s=new ni(s=>jI(s),BI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Dz(n,e,t,r){return new aI(n,e,t,r)}function BR(n,e){return m(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=le();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Cz(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=x.resolve();return y.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(R=>{let N=l.docVersions.get(A);we(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $R(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Az(n,e){let t=X(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(pt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(R,N,O){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,_,h)&&a.push(t.Ur.updateTargetData(s,_))});let u=gr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Sz(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ne.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}function Sz(n,e,t){let r=le(),i=le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=gr();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Rz(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nz(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Oc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function cI(n,e,t){return m(this,null,function*(){let r=X(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!$c(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ZS(n,e,t){let r=X(n),i=ne.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),y=p._s.get(h);return y!==void 0?x.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ne.min(),t?s:le())).next(a=>(Pz(r,Gq(e),a),{documents:a,Ts:s})))}function Pz(n,e,t){let r=n.us.get(e)||ne.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Mh=class{constructor(){this.activeTargetIds=Xq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uI=class{constructor(){this.so=new Mh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Mh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lI=class{_o(e){}shutdown(){}};var xh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gh=null;function r_(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}var Mz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ht="WebChannelConnection",hI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=r_(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>(V("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw bo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=Mz[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=r_();return new Promise((o,a)=>{let u=new Jv;u.setWithCredentials(!0),u.listenOnce(Xv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tc.NO_ERROR:let h=u.getResponseJson();V(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Tc.TIMEOUT:V(ht,`RPC '${e}' ${s} timed out`),a(new j(P.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:let p=u.getStatus();if(V(ht,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(N){let O=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(O)>=0?O:P.UNKNOWN}(_.status);a(new j(A,_.message))}else a(new j(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new j(P.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(ht,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(ht,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=r_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t_(),a=e_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),y=!1,_=!1,A=new dI({Io:N=>{_?V(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(V(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),V(ht,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,O,z)=>{N.listen(O,F=>{try{z(F)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(p,yo.EventType.OPEN,()=>{_||(V(ht,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),R(p,yo.EventType.CLOSE,()=>{_||(_=!0,V(ht,`RPC '${e}' stream ${i} transport closed`),A.So())}),R(p,yo.EventType.ERROR,N=>{_||(_=!0,bo(ht,`RPC '${e}' stream ${i} transport errored:`,N),A.So(new j(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,yo.EventType.MESSAGE,N=>{var O;if(!_){let z=N.data[0];we(!!z);let F=z,ee=F.error||((O=F[0])===null||O===void 0?void 0:O.error);if(ee){V(ht,`RPC '${e}' stream ${i} received error:`,ee);let De=ee.status,W=function(I){let E=Be[I];if(E!==void 0)return xR(E)}(De),T=ee.message;W===void 0&&(W=P.INTERNAL,T="Unknown error status: "+De+" with message "+ee.message),_=!0,A.So(new j(W,T)),p.close()}else V(ht,`RPC '${e}' stream ${i} received:`,z),A.bo(z)}}),R(a,Zv.STAT_EVENT,N=>{N.stat===fh.PROXY?V(ht,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===fh.NOPROXY&&V(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function i_(){return typeof document<"u"?document:null}function nf(n){return new L_(n,!0)}var Oh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var kh=class{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Oh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fI=class extends kh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=fz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Pn(o.readTime):ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=B_(this.serializer),t.addTarget=function(s,o){let a,u=o.target;if(a=A_(u)?{documents:mz(s,u)}:{query:yz(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OR(s,o.resumeToken);let l=V_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=Nh(s,o.snapshotVersion.toTimestamp());let l=V_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_z(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=B_(this.serializer),t.removeTarget=e,this.a_(t)}},pI=class extends kh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=gz(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=B_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>pz(this.serializer,r))};this.a_(t)}};var gI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,U_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,U_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var yI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>m(this,null,function*(){ts(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=X(u);l.L_.add(4),yield Hc(l),l.q_.set("Unknown"),l.L_.delete(4),yield rf(l)})}(this))}))}),this.q_=new mI(r,i)}};function rf(n){return m(this,null,function*(){if(ts(n))for(let e of n.B_)yield e(!0)})}function Hc(n){return m(this,null,function*(){for(let e of n.B_)yield e(!1)})}function HR(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),WI(t)?GI(t):Uo(t).r_()&&zI(t,e))}function qI(n,e){let t=X(n),r=Uo(t);t.N_.delete(e),r.r_()&&qR(t,e),t.N_.size===0&&(r.r_()?r.o_():ts(t)&&t.q_.set("Unknown"))}function zI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(n).A_(e)}function qR(n,e){n.Q_.xe(e),Uo(n).R_(e)}function GI(n){n.Q_=new F_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Uo(n).start(),n.q_.v_()}function WI(n){return ts(n)&&!Uo(n).n_()&&n.N_.size>0}function ts(n){return X(n).L_.size===0}function zR(n){n.Q_=void 0}function xz(n){return m(this,null,function*(){n.q_.set("Online")})}function Oz(n){return m(this,null,function*(){n.N_.forEach((e,t)=>{zI(n,e)})})}function kz(n,e){return m(this,null,function*(){zR(n),WI(n)?(n.q_.M_(e),GI(n)):n.q_.set("Unknown")})}function Fz(n,e,t){return m(this,null,function*(){if(n.q_.set("Online"),e instanceof Sh&&e.state===2&&e.cause)try{yield function(i,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fh(n,r)}else if(e instanceof Eo?n.Q_.Ke(e):e instanceof Ah?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ne.min()))try{let r=yield $R(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),qR(s,u);let p=new Oc(h.target,u,l,h.sequenceNumber);zI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Fh(n,r)}})}function Fh(n,e,t){return m(this,null,function*(){if(!$c(e))throw e;n.L_.add(1),yield Hc(n),n.q_.set("Offline"),t||(t=()=>$R(n.localStore)),n.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield rf(n)}))})}function GR(n,e){return e().catch(t=>Fh(n,t,e))}function sf(n){return m(this,null,function*(){let e=X(n),t=ri(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lz(e);)try{let i=yield Rz(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Vz(e,i)}catch(i){yield Fh(e,i)}WR(e)&&KR(e)})}function Lz(n){return ts(n)&&n.O_.length<10}function Vz(n,e){n.O_.push(e);let t=ri(n);t.r_()&&t.V_&&t.m_(e.mutations)}function WR(n){return ts(n)&&!ri(n).n_()&&n.O_.length>0}function KR(n){ri(n).start()}function Uz(n){return m(this,null,function*(){ri(n).p_()})}function jz(n){return m(this,null,function*(){let e=ri(n);for(let t of n.O_)e.m_(t.mutations)})}function Bz(n,e,t){return m(this,null,function*(){let r=n.O_.shift(),i=M_.from(r,e,t);yield GR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sf(n)})}function $z(n,e){return m(this,null,function*(){e&&ri(n).V_&&(yield function(r,i){return m(this,null,function*(){if(function(o){return sz(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();ri(r).s_(),yield GR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield sf(r)}})}(n,e)),WR(n)&&KR(n)})}function eR(n,e){return m(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=ts(t);t.L_.add(3),yield Hc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield rf(t)})}function Hz(n,e){return m(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield rf(t)):e||(t.L_.add(2),yield Hc(t),t.q_.set("Unknown"))})}function Uo(n){return n.K_||(n.K_=function(t,r,i){let s=X(t);return s.w_(),new fI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:xz.bind(null,n),Ro:Oz.bind(null,n),mo:kz.bind(null,n),d_:Fz.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.K_.s_(),WI(n)?GI(n):n.q_.set("Unknown")):(yield n.K_.stop(),zR(n))}))),n.K_}function ri(n){return n.U_||(n.U_=function(t,r,i){let s=X(t);return s.w_(),new pI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Uz.bind(null,n),mo:$z.bind(null,n),f_:jz.bind(null,n),g_:Bz.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.U_.s_(),yield sf(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var vI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KI(n,e){if(fr("AsyncQueue",`${e}: ${n}`),$c(n))return new j(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Lh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Dc(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Vh=class{constructor(){this.W_=new Oe(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ko=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Lh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _I=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},II=class{constructor(){this.queries=tR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=X(t),s=i.queries;i.queries=tR(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new j(P.ABORTED,"Firestore shutting down"))}};function tR(){return new ni(n=>wR(n),ef)}function QR(n,e){return m(this,null,function*(){let t=X(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _I,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=KI(o,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&QI(t)})}function YR(n,e){return m(this,null,function*(){let t=X(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function qz(n,e){let t=X(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&QI(t)}function zz(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function QI(n){n.Y_.forEach(e=>{e.next()})}var wI,nR;(nR=wI||(wI={})).ea="default",nR.Cache="cache";var Uh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wI.Cache}};var jh=class{constructor(e){this.key=e}},Bh=class{constructor(e){this.key=e}},EI=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=ER(e),this.Ra=new Lh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Vh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=tf(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;y&&_?y.data.isEqual(_.data)?A!==R&&(r.track({type:3,doc:_}),N=!0):this.ga(y,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),N=!0):y&&!_&&(r.track({type:1,doc:y}),N=!0,(u||l)&&(a=!0)),N&&(_?(o=o.add(_),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,A){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return R(_)-R(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new ko(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Bh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jh(r))}),t}ba(e){this.Ta=e.Ts,this.da=le();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},TI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bI=class{constructor(e){this.key=e,this.va=!1}},DI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ni(a=>wR(a),ef),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(q.comparator),this.Na=new Map,this.La=new Fc,this.Ba={},this.ka=new Map,this.qa=kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Gz(n,e,t=!0){return m(this,null,function*(){let r=nN(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield JR(r,e,t,!0),i})}function Wz(n,e){return m(this,null,function*(){let t=nN(n);yield JR(t,e,!0,!1)})}function JR(n,e,t,r){return m(this,null,function*(){let i=yield Nz(n.localStore,Nn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Kz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&HR(n.remoteStore,i),a})}function Kz(n,e,t,r,i){return m(this,null,function*(){n.Ka=(p,y,_)=>function(R,N,O,z){return m(this,null,function*(){let F=N.view.ma(O);F.ns&&(F=yield ZS(R.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,F)));let ee=z&&z.targetChanges.get(N.targetId),De=z&&z.targetMismatches.get(N.targetId)!=null,W=N.view.applyChanges(F,R.isPrimaryClient,ee,De);return iR(R,N.targetId,W.wa),W.snapshot})}(n,p,y,_);let s=yield ZS(n.localStore,e,!0),o=new EI(e,s.Ts),a=o.ma(s.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);iR(n,t,l.wa);let h=new TI(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Qz(n,e,t){return m(this,null,function*(){let r=X(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ef(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qI(r.remoteStore,i.targetId),CI(r,i.targetId)}).catch(Bc))):(CI(r,i.targetId),yield cI(r.localStore,i.targetId,!0))})}function Yz(n,e){return m(this,null,function*(){let t=X(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qI(t.remoteStore,r.targetId))})}function Jz(n,e,t){return m(this,null,function*(){let r=iG(n);try{let i=yield function(o,a){let u=X(o),l=rt.now(),h=a.reduce((_,A)=>_.add(A.key),le()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=gr(),R=le();return u.cs.getEntries(_,h).next(N=>{A=N,A.forEach((O,z)=>{z.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(N=>{p=N;let O=[];for(let z of a){let F=iz(z,p.get(z.key).overlayedDocument);F!=null&&O.push(new kn(z.key,F,gR(F.value.mapValue),Zr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,O,a)}).next(N=>{y=N;let O=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(_,N.batchId,O)})}).then(()=>({batchId:y.batchId,changes:bR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Oe(me)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield qc(r,i.changes),yield sf(r.remoteStore)}catch(i){let s=KI(i,"Failed to persist write");t.reject(s)}})}function XR(n,e){return m(this,null,function*(){let t=X(n);try{let r=yield Az(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),yield qc(t,r,e)}catch(r){yield Bc(r)}})}function rR(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&QI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xz(n,e,t){return m(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Oe(q.comparator);o=o.insert(s,dn.newNoDocument(s,ne.min()));let a=le().add(s),u=new Ch(ne.min(),new Map,new Oe(me),o,a);yield XR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),YI(r)}else yield cI(r.localStore,e,!1).then(()=>CI(r,e,t)).catch(Bc)})}function Zz(n,e){return m(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield Cz(t.localStore,e);eN(t,r,null),ZR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qc(t,i)}catch(i){yield Bc(i)}})}function eG(n,e,t){return m(this,null,function*(){let r=X(n);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);eN(r,e,t),ZR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qc(r,i)}catch(i){yield Bc(i)}})}function ZR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function eN(n,e,t){let r=X(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function CI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||tN(n,r)})}function tN(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(qI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),YI(n))}function iR(n,e,t){for(let r of t)r instanceof jh?(n.La.addReference(r.key,e),tG(n,r)):r instanceof Bh?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||tN(n,r.key)):K()}function tG(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),YI(n))}function YI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(xe.fromString(e)),r=n.qa.next();n.Na.set(r,new bI(t)),n.Oa=n.Oa.insert(t,r),HR(n.remoteStore,new Oc(Nn(Zh(t.path)),r,"TargetPurposeLimboResolution",dR.oe))}}function qc(n,e,t){return m(this,null,function*(){let r=X(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=iI.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,y=>x.forEach(y.$i,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>x.forEach(y.Ui,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!$c(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.os.get(y),A=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(y,R)}}})}(r.localStore,s))})}function nG(n,e){return m(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield BR(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new j(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qc(t,r.hs)}})}function rG(n,e){let t=X(n),r=t.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function nN(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xz.bind(null,e),e.Ca.d_=qz.bind(null,e.eventManager),e.Ca.$a=zz.bind(null,e.eventManager),e}function iG(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eG.bind(null,e),e}var sR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return m(this,null,function*(){this.serializer=nf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Dz(this.persistence,new oI,t.initialUser,this.serializer)}Ga(t){return new tI(rI.Zr,this.serializer)}Wa(t){return new uI}terminate(){return m(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var sG=(()=>{class n{initialize(t,r){return m(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nG.bind(null,this.syncEngine),yield Hz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new II}()}createDatastore(t){let r=nf(t.databaseInfo.databaseId),i=function(o){return new hI(o)}(t.databaseInfo);return function(o,a,u,l){return new gI(o,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,u){return new yI(i,s,o,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>rR(this.syncEngine,r,0),function(){return xh.D()?new xh:new lI}())}createSyncEngine(t,r){return function(s,o,a,u,l,h,p){let y=new DI(s,o,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var t,r;yield function(s){return m(this,null,function*(){let o=X(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Hc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var $h=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var AI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=_h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>m(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=KI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function s_(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield BR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function oR(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield oG(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>eR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>eR(e.remoteStore,i)),n._onlineComponents=e})}function oG(n){return m(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield s_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;bo("Error using user provided cache. Falling back to memory cache: "+t),yield s_(n,new sR)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield s_(n,new sR);return n._offlineComponents})}function rN(n){return m(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield oR(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield oR(n,new sG))),n._onlineComponents})}function aG(n){return rN(n).then(e=>e.syncEngine)}function SI(n){return m(this,null,function*(){let e=yield rN(n),t=e.eventManager;return t.onListen=Gz.bind(null,e.syncEngine),t.onUnlisten=Qz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Yz.bind(null,e.syncEngine),t})}function cG(n,e,t={}){let r=new Sn;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,u,l){let h=new $h({next:y=>{h.Za(),o.enqueueAndForget(()=>YR(s,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new j(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Uh(Zh(a.path),h,{includeMetadataChanges:!0,_a:!0});return QR(s,p)}(yield SI(n),n.asyncQueue,e,t,r)})),r.promise}function iN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var aR=new Map;function sN(n,e,t){if(!t)throw new j(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uG(n,e,t,r){if(e===!0&&r===!0)throw new j(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cR(n){if(!q.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uR(n){if(q.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=JI(n);throw new j(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Hh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o_;switch(r.type){case"firstParty":return new l_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=aR.get(t);r&&(V("ComponentProvider","Removing Datastore"),aR.delete(t),r.terminate())}(this),Promise.resolve()}};function oN(n,e,t,r={}){var i;let s=(n=Mn(n,Fo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Xe.MOCK_USER;else{a=l0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xe(l)}n._authCredentials=new a_(new vh(a,u))}}var qh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},bt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ei=class n extends qh{constructor(e,t,r){super(e,t,Zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function aN(n,e,...t){if(n=Je(n),sN("collection","path",e),n instanceof Fo){let r=xe.fromString(e,...t);return uR(r),new ei(n,null,r)}{if(!(n instanceof bt||n instanceof ei))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return uR(r),new ei(n.firestore,null,r)}}function cN(n,e,...t){if(n=Je(n),arguments.length===1&&(e=_h.newId()),sN("doc","path",e),n instanceof Fo){let r=xe.fromString(e,...t);return cR(r),new bt(n,null,new q(r))}{if(!(n instanceof bt||n instanceof ei))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return cR(r),new bt(n.firestore,n instanceof ei?n.converter:null,new q(r))}}var zh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Oh(this,"async_queue_retry"),this.Vu=()=>{let r=i_();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=i_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=i_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$c(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=vI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function lR(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var ii=class extends Fo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zh(e),this._firestoreClient=void 0,yield e}})}};function uN(n,e){let t=typeof n=="object"?n:to(),r=typeof n=="string"?n:e||"(default)",i=ic(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=u0("firestore");s&&oN(i,...s)}return i}function XI(n){if(n._terminated)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lG(n),n._firestoreClient}function lG(n){var e,t,r;let i=n._freezeSettings(),s=function(a,u,l,h){return new g_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iN(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new AI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Lc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(pt.fromBase64String(e))}catch(t){throw new j(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Lo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vc=class{constructor(e){this._methodName=e}};var Uc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var jc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var dG=/^__.*__$/,RI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zi(e,this.data,t,this.fieldTransforms)}},Gh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var NI=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lN(this.Cu)&&dG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},PI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nf(e)}Qu(e,t,r,i=!1){return new NI({Cu:e,methodName:t,qu:r,path:Vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dN(n){let e=n._freezeSettings(),t=nf(n._databaseId);return new PI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hG(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);ZI("Data must be an object, but it was:",o,r);let a=hN(r,o),u,l;if(s.merge)u=new Yt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=MI(e,p,t);if(!o.contains(y))throw new j(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);pN(h,y)||h.push(y)}u=new Yt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new RI(new Lt(a),u,l)}var Wh=class n extends Vc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fG(n,e,t,r){let i=n.Qu(1,e,t);ZI("Data must be an object, but it was:",i,r);let s=[],o=Lt.empty();es(r,(u,l)=>{let h=ew(e,u,t);l=Je(l);let p=i.Nu(h);if(l instanceof Wh)s.push(h);else{let y=of(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Yt(s);return new Gh(o,a,i.fieldTransforms)}function pG(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[MI(e,r,t)],u=[i];if(s.length%2!=0)throw new j(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(MI(e,s[y])),u.push(s[y+1]);let l=[],h=Lt.empty();for(let y=a.length-1;y>=0;--y)if(!pN(l,a[y])){let _=a[y],A=u[y];A=Je(A);let R=o.Nu(_);if(A instanceof Wh)l.push(_);else{let N=of(A,R);N!=null&&(l.push(_),h.set(_,N))}}let p=new Yt(l);return new Gh(h,p,o.fieldTransforms)}function of(n,e){if(fN(n=Je(n)))return ZI("Unsupported field value:",e,n),hN(n,e);if(n instanceof Vc)return function(r,i){if(!lN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=of(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:Nh(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(i.serializer,s)}}if(r instanceof Uc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lc)return{bytesValue:OR(i.serializer,r._byteString)};if(r instanceof bt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:HI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return $I(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${JI(r)}`)}(n,e)}function hN(n,e){let t={};return hR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(n,(r,i)=>{let s=of(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function fN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof Uc||n instanceof Lc||n instanceof bt||n instanceof Vc||n instanceof jc)}function ZI(n,e,t){if(!fN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=JI(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function MI(n,e,t){if((e=Je(e))instanceof Lo)return e._internalPath;if(typeof e=="string")return ew(n,e);throw Kh("Field path arguments must be of type string or ",n,!1,void 0,t)}var gG=new RegExp("[~\\*/\\[\\]]");function ew(n,e,t){if(e.search(gG)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lo(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new j(P.INVALID_ARGUMENT,a+n+u)}function pN(n,e){return n.some(t=>t.isEqual(e))}var Qh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xI=class extends Qh{data(){return super.data()}};function gN(n,e){return typeof e=="string"?ew(n,e):e instanceof Lo?e._internalPath:e._delegate._internalPath}function mG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var OI=class{convertValue(e,t="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return es(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Pe(o.doubleValue));return new jc(s)}convertGeoPoint(e){return new Uc(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=VI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){let t=pr(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xe.fromString(e);we(jR(r));let i=new Th(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(t)||fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function yG(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yh=class extends Qh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new To(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},To=class extends Yh{data(e={}){return super.data(e)}},kI=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new To(this._firestore,this._userDataWriter,r.key,r,new Wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new To(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new To(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vG(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function vG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function mN(n){n=Mn(n,bt);let e=Mn(n.firestore,ii);return cG(XI(e),n._key).then(t=>wN(e,n,t))}var Jh=class extends OI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}};function yN(n,e,t){n=Mn(n,bt);let r=Mn(n.firestore,ii),i=yG(n.converter,e,t);return IN(r,[hG(dN(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zr.none())])}function vN(n,e,t,...r){n=Mn(n,bt);let i=Mn(n.firestore,ii),s=dN(i),o;return o=typeof(e=Je(e))=="string"||e instanceof Lo?pG(s,"updateDoc",n._key,e,t,r):fG(s,"updateDoc",n._key,e),IN(i,[o.toMutation(n._key,Zr.exists(!0))])}function _N(n,...e){var t,r,i;n=Je(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lR(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lR(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof bt)l=Mn(n.firestore,ii),h=Zh(n._key.path),u={next:p=>{e[o]&&e[o](wN(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Mn(n,qh);l=Mn(p.firestore,ii),h=p._query;let y=new Jh(l);u={next:_=>{e[o]&&e[o](new kI(l,y,p,_))},error:e[o+1],complete:e[o+2]},mG(n._query)}return function(y,_,A,R){let N=new $h(R),O=new Uh(_,N,A);return y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return QR(yield SI(y),O)})),()=>{N.Za(),y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return YR(yield SI(y),O)}))}}(XI(l),h,a,u)}function IN(n,e){return function(r,i){let s=new Sn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Jz(yield aG(r),i,s)})),s.promise}(XI(n),e)}function wN(n,e,t){let r=t.docs.get(e._key),i=new Jh(n);return new Yh(n,i,e._key,r,new Wi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Vo=i})(zr),qr(new Kt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ii(new c_(r.getProvider("auth-internal")),new h_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Th(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),We(xS,"4.7.3",e),We(xS,"4.7.3","esm2017")})();var ns=class{constructor(e){return e}},EN="firestore",tw=class{constructor(){return sc(EN)}};var nw=new B("angularfire2.firestore-instances");function _G(n,e){let t=Nd(EN,n,e);return t&&new ns(t)}function IG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ns(r)}}var wG={provide:tw,deps:[[new tt,nw]]},EG={provide:ns,useFactory:_G,deps:[[new tt,nw],nr]};function TN(n,...e){return We("angularfire",Vi.full,"fst"),Ht([EG,wG,{provide:nw,useFactory:IG(n),multi:!0,deps:[ge,Et,io,Ui,[new tt,Ec],[new tt,ro],...e]}])}var bN=Ft(aN,!0);var zc=Ft(cN,!0);var DN=Ft(mN,!0);var CN=Ft(uN,!0);var AN=Ft(_N,!0);var SN=Ft(yN,!0);var Gc=Ft(vN,!0);var LN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ve(bi),ve(xr))}}static{this.\u0275dir=wt({type:n})}}return n})(),TG=(()=>{class n extends LN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})()}static{this.\u0275dir=wt({type:n,features:[Ci]})}}return n})(),VN=new B("");var bG={provide:VN,useExisting:Vs(()=>lf),multi:!0};function DG(){let n=Jn()?Jn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var CG=new B(""),lf=(()=>{class n extends LN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!DG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(bi),ve(xr),ve(CG,8))}}static{this.\u0275dir=wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&nt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Hl([bG]),Ci]})}}return n})();function AG(n){return n!=null&&typeof n.length=="number"}var UN=new B(""),SG=new B("");function RG(n){return e=>AG(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function RN(n){return null}function jN(n){return n!=null}function BN(n){return Si(n)?Ne(n):n}function $N(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function HN(n,e){return e.map(t=>t(n))}function NG(n){return!n.validate}function qN(n){return n.map(e=>NG(e)?e:t=>e.validate(t))}function PG(n){if(!n)return null;let e=n.filter(jN);return e.length==0?null:function(t){return $N(HN(t,e))}}function zN(n){return n!=null?PG(qN(n)):null}function MG(n){if(!n)return null;let e=n.filter(jN);return e.length==0?null:function(t){let r=HN(t,e).map(BN);return tp(r).pipe(re($N))}}function GN(n){return n!=null?MG(qN(n)):null}function NN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xG(n){return n._rawValidators}function OG(n){return n._rawAsyncValidators}function rw(n){return n?Array.isArray(n)?n:[n]:[]}function cf(n,e){return Array.isArray(n)?n.includes(e):n===e}function PN(n,e){let t=rw(e);return rw(n).forEach(i=>{cf(t,i)||t.push(i)}),t}function MN(n,e){return rw(e).filter(t=>!cf(n,t))}var uf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},iw=class extends uf{get formDirective(){return null}get path(){return null}},Qc=class extends uf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},sw=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},kG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yee=Ee(L({},kG),{"[class.ng-submitted]":"isSubmitted"}),WN=(()=>{class n extends sw{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(Qc,2))}}static{this.\u0275dir=wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ci]})}}return n})();var Wc="VALID",af="INVALID",jo="PENDING",Kc="DISABLED";function FG(n){return(df(n)?n.validators:n)||null}function LG(n){return Array.isArray(n)?zN(n):n||null}function VG(n,e){return(df(e)?e.asyncValidators:n)||null}function UG(n){return Array.isArray(n)?GN(n):n||null}function df(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var ow=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wc}get invalid(){return this.status===af}get pending(){return this.status==jo}get disabled(){return this.status===Kc}get enabled(){return this.status!==Kc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MN(e,this._rawAsyncValidators))}hasValidator(e){return cf(this._rawValidators,e)}hasAsyncValidator(e){return cf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kc,this.errors=null,this._forEachChild(r=>{r.disable(Ee(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(L({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wc,this._forEachChild(r=>{r.enable(Ee(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(L({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wc||this.status===jo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kc:Wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jo,this._hasOwnPendingAsyncValidator=!0;let t=BN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?Kc:this.errors?af:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jo)?jo:this._anyControlsHaveStatus(af)?af:Wc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){df(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=LG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=UG(this._rawAsyncValidators)}};var KN=new B("CallSetDisabledState",{providedIn:"root",factory:()=>aw}),aw="always";function jG(n,e){return[...e.path,n]}function BG(n,e,t=aw){HG(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qG(n,e),GG(n,e),zG(n,e),$G(n,e)}function xN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $G(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function HG(n,e){let t=xG(n);e.validator!==null?n.setValidators(NN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=OG(n);e.asyncValidator!==null?n.setAsyncValidators(NN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xN(e._rawValidators,i),xN(e._rawAsyncValidators,i)}function qG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QN(n,e)})}function zG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function QN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function KG(n){return Object.getPrototypeOf(n.constructor)===TG}function QG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===lf?t=s:KG(s)?r=s:i=s}),i||r||t||null}function ON(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var YG=class extends ow{constructor(e=null,t,r){super(FG(t),VG(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),df(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ON(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ON(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var JG={provide:Qc,useExisting:Vs(()=>cw)},FN=Promise.resolve(),cw=(()=>{class n extends Qc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new YG,this._registered=!1,this.name="",this.update=new _t,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QG(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){FN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Wl(r);FN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jG(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ve(iw,9),ve(UN,10),ve(SG,10),ve(VN,10),ve(Ri,8),ve(KN,8))}}static{this.\u0275dir=wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[$t.None,"disabled","isDisabled"],model:[$t.None,"ngModel","model"],options:[$t.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hl([JG]),Ci,Nr]})}}return n})();function XG(n){return typeof n=="number"?n:parseInt(n,10)}var ZG=(()=>{class n{constructor(){this._validator=RN}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RN,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=wt({type:n,features:[Nr]})}}return n})();var eW={provide:UN,useExisting:Vs(()=>uw),multi:!0},uw=(()=>{class n extends ZG{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>XG(t),this.createValidator=t=>RG(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})()}static{this.\u0275dir=wt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ll("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Hl([eW]),Ci]})}}return n})();var tW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})();var YN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KN,useValue:t.callSetDisabledState??aw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({imports:[tW]})}}return n})();var rW=(n,e)=>({"top.px":n,"left.px":e});function iW(n,e){if(n&1){let t=Or();Ie(0,"input",8),$l("ngModelChange",function(i){He(t);let s=te(2);return Jg(s.currentText,i)||(s.currentText=i),qe(i)}),nt("keyup.enter",function(){He(t);let i=te().$implicit,s=te();return qe(s.addNoteToWeek(i.week,s.currentText))}),be()}if(n&2){let t=te(2);Bl("ngModel",t.currentText),ze("maxlength",t.maxNoteTextLength)("disabled",t.disableInput)}}function sW(n,e){if(n&1){let t=Or();Ie(0,"input",9),$l("ngModelChange",function(i){He(t);let s=te(2);return Jg(s.currentText,i)||(s.currentText=i),qe(i)}),be()}if(n&2){let t=te(2);Bl("ngModel",t.currentText)}}function oW(n,e){if(n&1){let t=Or();Ie(0,"button",16),nt("click",function(){He(t);let i=te(2).$implicit,s=te().$implicit,o=te();return qe(o.setWinNote(s.week,i.text))}),Ie(1,"span",14),nt("mouseenter",function(i){He(t);let s=te(4);return qe(s.showTooltip(i,"uzatvori\u0165 pre tento v\xEDkend"))})("mouseleave",function(){He(t);let i=te(4);return qe(i.hideTooltip())}),Ge(2,"\u2611\uFE0F"),be()()}}function aW(n,e){if(n&1){let t=Or();Ie(0,"button",17),nt("click",function(){He(t);let i=te(2).$implicit,s=te().$implicit,o=te();return qe(o.voteForNoteFromWeek(s.week,i))}),Ie(1,"span",14),nt("mouseenter",function(i){He(t);let s=te(2).$implicit,o=te(2);return qe(o.showTooltip(i,(s.voters.length+1).toString(),2))})("mouseleave",function(){He(t);let i=te(4);return qe(i.hideTooltip())}),Ge(2,"\u{1F5F3}\uFE0F"),be()()}if(n&2){let t=te(2).$implicit,r=te(2);Ul(r.haveCreatedNote(t.creator)?"blocked-btn":"vote-btn"),ze("disabled",r.haveCreatedNote(t.creator))}}function cW(n,e){if(n&1){let t=Or();Ie(0,"button",17),nt("click",function(){He(t);let i=te(2).$implicit,s=te().$implicit,o=te();return qe(o.removeNoteFromWeek(s.week,i.text))}),Ie(1,"span",14),nt("mouseenter",function(i){He(t);let s=te(4);return qe(s.showTooltip(i,"zmaza\u0165"))})("mouseleave",function(){He(t);let i=te(4);return qe(i.hideTooltip())}),Ge(2,"\u274C"),be()()}if(n&2){let t=te(2).$implicit,r=te(2);Ul(r.haveCreatedNote(t.creator)?"remove-btn":"blocked-btn"),ze("disabled",!r.haveCreatedNote(t.creator))}}function uW(n,e){n&1&&Ai(0,"span",18)}function lW(n,e){if(n&1){let t=Or();Ie(0,"div"),En(1,oW,3,0,"button",12)(2,aW,3,3,"button",13),Ie(3,"span",14),nt("mouseenter",function(i){He(t);let s=te().$implicit,o=te(2);return qe(o.showTooltip(i,s.creator,1))})("mouseleave",function(){He(t);let i=te(3);return qe(i.hideTooltip())}),Ge(4),be(),En(5,cW,3,3,"button",13)(6,uW,1,0,"span",15),be()}if(n&2){let t=te().$implicit,r=te().$implicit,i=te();Ul(i.haveVotedFor(t)||i.haveCreatedNote(t.creator)?"note-voted":"note"),Le(),ze("ngIf",r.week>=i.currentWeek&&i.email==="peterbartos17@gmail.com"),Le(),ze("ngIf",r.week>=i.currentWeek),Le(2),jl(t.text),Le(),ze("ngIf",r.week>=i.currentWeek),Le(),ze("ngIf",r.week<i.currentWeek)}}function dW(n,e){if(n&1){let t=Or();Ie(0,"div",19)(1,"span",14),nt("mouseenter",function(i){He(t);let s=te().$implicit,o=te(2);return qe(o.showTooltip(i,s.creator,1))})("mouseleave",function(){He(t);let i=te(3);return qe(i.hideTooltip())}),Ge(2),be(),Ie(3,"button",20),nt("mouseenter",function(i){He(t);let s=te(3);return qe(s.showTooltip(i,"navaren\xE9"))})("mouseleave",function(){He(t);let i=te(3);return qe(i.hideTooltip())}),Ge(4,"\u2705"),be()()}if(n&2){let t=te(2).$implicit;Le(2),jl(t.won)}}function hW(n,e){if(n&1&&(Ie(0,"li"),En(1,lW,7,7,"div",10)(2,dW,5,1,"div",11),be()),n&2){let t=e.$implicit,r=te().$implicit;Le(),ze("ngIf",t.text!=r.won),Le(),ze("ngIf",t.text===r.won)}}function fW(n,e){if(n&1&&(Ie(0,"div")(1,"div",4)(2,"span")(3,"strong"),Ge(4),be(),Ge(5),be(),En(6,iW,1,3,"input",5)(7,sW,1,1,"input",6),Ie(8,"div",7)(9,"ul"),En(10,hW,3,2,"li",2),be()()()()),n&2){let t=e.$implicit,r=te();Le(4),kr("",t.week,". t\xFD\u017Ede\u0148 "),Le(),kr("(",t.dateRange,")"),Le(),ze("ngIf",t.week>=r.currentWeek&&t.notes.length<r.maxNoteLength),Le(),ze("ngIf",t.week>r.currentWeek&&t.notes.length>=r.maxNoteLength),Le(3),ze("ngForOf",t.notes)}}function pW(n,e){if(n&1&&(Ie(0,"div",21),Ge(1),be()),n&2){let t=te();ze("ngStyle",DD(2,rW,t.tooltipY,t.tooltipX)),Le(),kr(" ",t.tooltipText," ")}}var JN=(()=>{class n{constructor(){this.tooltipVisible=!1,this.tooltipText="",this.tooltipX=0,this.tooltipY=0,this.disableInput=!1,this.maxNoteTextLength=25,this.maxNoteLength=5,this.weeks=[],this.currentText="",this.currentWeek=0,this.currentYear=0,this.currentDay=0,this.currentMonth="",this.monthsInSlovak=["janu\xE1ra","febru\xE1ra","marca","apr\xEDla","m\xE1ja","j\xFAna","j\xFAla","augusta","septembra","okt\xF3bra","novembra","decembra"],this.auth=M(ln),this.email=this.auth.currentUser?.email??"",this.firestore=M(ns),this.collectionName="foodWeeks";let t=new Date;this.currentYear=t.getFullYear(),this.currentDay=t.getDate(),this.currentMonth=this.monthsInSlovak[t.getMonth()],this.currentWeek=this.getWeekNumber(t),this.generateWeeks(t)}ngOnInit(){return m(this,null,function*(){yield this.fetchNotes()})}getWeekNumber(t){let r=new Date(t.getFullYear(),0,1),i=t.getTime()-r.getTime(),s=1e3*3600*24,o=Math.floor(i/s);return Math.ceil((o+1)/7)}generateWeeks(t){let r=new Date(this.currentYear,0,1),i=r.getDay(),s=i===0?6:i-1;r.setDate(r.getDate()-s);let o=r,a=1;for(;o<=t;){let u=new Date(o),l=new Date(o);l.setDate(l.getDate()+6);let h=new Date(this.currentYear,11,31);l>h&&l.setDate(h.getDate());let p=`${u.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})} - ${l.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})}`;this.weeks.push({week:a,dateRange:p,notes:[],won:""}),o.setDate(o.getDate()+7),a++}}fetchNotes(){return m(this,null,function*(){let t=this.currentYear.toString(),r=bN(this.firestore,this.collectionName);AN(r,i=>{i.forEach(s=>{let o=s.data(),a=o.week.toString(),u=this.weeks.find(l=>l.week.toString()+"-"+t===a);u&&(u.notes=o.notes||[],u.won=o.won||"")})})})}createNote(t,r,i){return t.some(s=>s.text===r)?null:(r.length>this.maxNoteTextLength&&(r=r.slice(0,this.maxNoteTextLength)),{text:r,creator:i,voters:[]})}addNoteToWeek(t,r){return m(this,null,function*(){this.disableInput=!0;let i=this.weeks.find(s=>s.week===t);if(i&&i.notes.length<this.maxNoteLength){let s=this.createNote(i.notes,r,this.email),o=Array.from(i.notes);s&&i.notes.push(s);try{let a=`${t.toString()}-${this.currentYear.toString()}`,u=zc(this.firestore,this.collectionName,a);(yield DN(u)).exists()?yield Gc(u,{notes:i.notes}):yield SN(u,{week:a,notes:[s],won:""}),this.currentText=""}catch(a){i.notes=o,console.error(a)}}this.disableInput=!1})}removeNoteFromWeek(t,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===t);if(i){let s=Array.from(i.notes);i.notes=i.notes.filter(o=>o.text!==r);try{let o=zc(this.firestore,this.collectionName,`${t.toString()}-${this.currentYear.toString()}`);yield Gc(o,{notes:i.notes})}catch(o){i.notes=s,console.error(o)}}})}voteForNoteFromWeek(t,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===t);if(i){let s=Array.from(i.notes),o=this.email;try{r.voters.includes(o)?r.voters=r.voters.filter(u=>u!==o):r.voters.push(o);let a=zc(this.firestore,this.collectionName,`${t.toString()}-${this.currentYear.toString()}`);yield Gc(a,{notes:i.notes})}catch(a){i.notes=s,console.error(a)}}})}setWinNote(t,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===t);if(i){let s=i.won.slice(0,i.won.length);try{i.won=r;let o=zc(this.firestore,this.collectionName,`${t.toString()}-${this.currentYear.toString()}`);yield Gc(o,{won:r})}catch(o){i.won=s,console.error(o)}}})}haveCreatedNote(t){return this.email===t}haveVotedFor(t){return t.voters.includes(this.email)}showTooltip(t,r,i=0){i===1?this.tooltipText="vytvoril pou\u017E\xEDvate\u013E "+r.slice(0,r.indexOf("@")):i===2?this.tooltipText="po\u010Det hlasov: "+r:this.tooltipText=r,this.tooltipX=t.pageX+10,this.tooltipY=t.pageY+10,this.tooltipVisible=!0}hideTooltip(){this.tooltipVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wn({type:n,selectors:[["dashboard"]],standalone:!0,features:[Fr],decls:5,vars:5,consts:[[1,"week-list-container"],[2,"color","green"],[4,"ngFor","ngForOf"],["class","tooltip",3,"ngStyle",4,"ngIf"],[1,"week-entry"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModel","maxlength","disabled","ngModelChange","keyup.enter",4,"ngIf"],["placeholder","Maximum dosiahnut\xE9","disabled","","class","input-warning",3,"ngModel","ngModelChange",4,"ngIf"],[1,"notes"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModelChange","keyup.enter","ngModel","maxlength","disabled"],["placeholder","Maximum dosiahnut\xE9","disabled","",1,"input-warning",3,"ngModelChange","ngModel"],[3,"class",4,"ngIf"],["class","note-won",4,"ngIf"],["class","vote-btn",3,"click",4,"ngIf"],[3,"class","disabled","click",4,"ngIf"],[3,"mouseenter","mouseleave"],["class","past-note",4,"ngIf"],[1,"vote-btn",3,"click"],[3,"click","disabled"],[1,"past-note"],[1,"note-won"],[1,"remove-btn",3,"mouseenter","mouseleave"],[1,"tooltip",3,"ngStyle"]],template:function(r,i){r&1&&(Ie(0,"div",0)(1,"h2",1),Ge(2),be(),En(3,fW,11,5,"div",2)(4,pW,2,5,"div",3),be()),r&2&&(Le(2),Yg("List t\xFD\u017Ed\u0148ov v roku ",i.currentYear," do ",i.currentDay,". ",i.currentMonth,""),Le(),ze("ngForOf",i.weeks),Le(),ze("ngIf",i.tooltipVisible))},dependencies:[YN,lf,WN,uw,cw,Da,qD,zD,GD],styles:[".week-list-container[_ngcontent-%COMP%]{margin:20px;font-family:Arial,sans-serif}.week-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.week-list-container[_ngcontent-%COMP%]   .week-entry[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;gap:10px}.week-list-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;font-size:16px;border:1px solid #ccc}.week-list-container[_ngcontent-%COMP%]   .input-warning[_ngcontent-%COMP%]::placeholder{color:red}.week-list-container[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;display:flex;flex-wrap:wrap}.week-list-container[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#a8a8a8;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .note-voted[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#6794b4;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .note-won[_ngcontent-%COMP%]{background-color:#4abe4a;display:flex;justify-content:space-between;align-items:center;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .past-note[_ngcontent-%COMP%]{padding-right:10px}.week-list-container[_ngcontent-%COMP%]   .blocked-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:not-allowed;color:#fff}.week-list-container[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;color:#fff}.week-list-container[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d2d2d2;border-radius:10px;padding-top:2px;padding-bottom:2px}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;color:red}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#b49696;border-radius:10px;padding-top:2px;padding-bottom:2px}.week-list-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#000c;color:#fff;padding:5px 10px;border-radius:5px;font-size:12px;white-space:nowrap;z-index:1000;pointer-events:none}"]})}}return n})();function gW(n,e){n&1&&Qg(0)}var XN=(()=>{class n{constructor(){this.auth=M(ln),this.component=null,SS(this.auth,t=>{this.component=t?JN:NS})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wn({type:n,selectors:[["app-wrapper"]],standalone:!0,features:[Fr],decls:1,vars:1,consts:[[4,"ngComponentOutlet"]],template:function(r,i){r&1&&En(0,gW,1,0,"ng-container",0),r&2&&ze("ngComponentOutlet",i.component)},dependencies:[Da,HD],encapsulation:2})}}return n})();var ZN=[{path:"",component:XN},{path:"**",redirectTo:""}];var eP={providers:[XC(ZN),nC(),x0(()=>O0(s0.firebaseConfig)),CS(()=>AS()),TN(()=>CN())]};lC(i0,eP).catch(n=>console.error(n));
