var rP=Object.defineProperty,iP=Object.defineProperties;var sP=Object.getOwnPropertyDescriptors;var Bw=Object.getOwnPropertySymbols,oP=Object.getPrototypeOf,aP=Object.prototype.hasOwnProperty,cP=Object.prototype.propertyIsEnumerable,uP=Reflect.get;var $w=(t,e,n)=>e in t?rP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})aP.call(e,n)&&$w(t,n,e[n]);if(Bw)for(var n of Bw(e))cP.call(e,n)&&$w(t,n,e[n]);return t},_e=(t,e)=>iP(t,sP(e));var Ot=(t,e,n)=>uP(oP(t),n,e);var m=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var Hw=null;var vf=1,_f=Symbol("SIGNAL");function me(t){let e=Hw;return Hw=t,e}var qw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lP(t){if(!(Ef(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===vf)){if(!t.producerMustRecompute(t)&&!If(t)){t.dirty=!1,t.lastCleanEpoch=vf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=vf}}function zw(t){return t&&(t.nextProducerIndex=0),me(t)}function Gw(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ef(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)wf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function If(t){ou(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(lP(n),r!==n.version))return!0}return!1}function Ww(t){if(ou(t),Ef(t))for(let e=0;e<t.producerNode.length;e++)wf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function wf(t,e){if(dP(t),ou(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)wf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ou(i),i.producerIndexOfThis[r]=e}}function Ef(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ou(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function dP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function hP(){throw new Error}var fP=hP;function Kw(t){fP=t}function Z(t){return typeof t=="function"}function Ji(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var au=Ji(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Jr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(s){e=s instanceof au?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Qw(s)}catch(o){e=e??[],o instanceof au?e=[...e,...o.errors]:e.push(o)}}if(e)throw new au(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Jr(n,e)}remove(e){let{_finalizers:n}=this;n&&Jr(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var Tf=xe.EMPTY;function cu(t){return t instanceof xe||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function Qw(t){Z(t)?t():t.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xi={setTimeout(t,e,...n){let{delegate:r}=Xi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function uu(t){Xi.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(t);else throw t})}function Zo(){}var Yw=bf("C",void 0,void 0);function Jw(t){return bf("E",void 0,t)}function Xw(t){return bf("N",t,void 0)}function bf(t,e,n){return{kind:t,value:e,error:n}}var Xr=null;function Zi(t){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!Xr;if(e&&(Xr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Xr;if(Xr=null,n)throw r}}else t()}function Zw(t){Gt.useDeprecatedSynchronousErrorHandling&&Xr&&(Xr.errorThrown=!0,Xr.error=t)}var Zr=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cu(e)&&e.add(this)):this.destination=mP}static create(e,n,r){return new es(e,n,r)}next(e){this.isStopped?Cf(Xw(e),this):this._next(e)}error(e){this.isStopped?Cf(Jw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cf(Yw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pP=Function.prototype.bind;function Df(t,e){return pP.call(t,e)}var Af=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){lu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){lu(r)}else lu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){lu(n)}}},es=class extends Zr{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Gt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Df(e.next,s),error:e.error&&Df(e.error,s),complete:e.complete&&Df(e.complete,s)}):i=e}this.destination=new Af(i)}};function lu(t){Gt.useDeprecatedSynchronousErrorHandling?Zw(t):uu(t)}function gP(t){throw t}function Cf(t,e){let{onStoppedNotification:n}=Gt;n&&Xi.setTimeout(()=>n(t,e))}var mP={closed:!0,next:Zo,error:gP,complete:Zo};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bt(t){return t}function Sf(...t){return Rf(t)}function Rf(t){return t.length===0?bt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=vP(n)?n:new es(n,r,i);return Zi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=eE(r),new r((i,s)=>{let o=new es({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ts](){return this}pipe(...n){return Rf(n)(this)}toPromise(n){return n=eE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function eE(t){var e;return(e=t??Gt.Promise)!==null&&e!==void 0?e:Promise}function yP(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function vP(t){return t&&t instanceof Zr||yP(t)&&cu(t)}function Nf(t){return Z(t?.lift)}function de(t){return e=>{if(Nf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new Pf(t,e,n,r,i)}var Pf=class extends Zr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ns(){return de((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var rs=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return ns()(this)}};var tE=Ji(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new du(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tE}next(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Tf:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,Jr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new du(e,n),t})(),du=class extends ht{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tf}};var Ke=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mf={now(){return(Mf.delegate||Date).now()},delegate:void 0};var hu=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var ea={setInterval(t,e,...n){let{delegate:r}=ea;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ea;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var is=class extends hu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ea.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ea.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Jr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ss=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ss.now=Mf.now;var os=class extends ss{constructor(e,n=ss.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Of=new os(is);var fu=class extends is{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var pu=class extends os{};var xf=new pu(fu);var Dt=new oe(t=>t.complete());function nE(t){return t&&Z(t.schedule)}function rE(t){return t[t.length-1]}function gu(t){return Z(rE(t))?t.pop():void 0}function dr(t){return nE(rE(t))?t.pop():void 0}function ti(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sE(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function iE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ei(t){return this instanceof ei?(this.v=t,this):new ei(t)}function oE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(R){return new Promise(function(N,k){s.push([_,R,N,k])>1||u(_,R)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(R){y(s[0][3],R)}}function l(_){_.value instanceof ei?Promise.resolve(_.value.v).then(h,p):y(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function aE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iE=="function"?iE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var mu=t=>t&&typeof t.length=="number"&&typeof t!="function";function yu(t){return Z(t?.then)}function vu(t){return Z(t[ts])}function _u(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function Iu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _P(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wu=_P();function Eu(t){return Z(t?.[wu])}function Tu(t){return oE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ei(n.read());if(i)return yield ei(void 0);yield yield ei(r)}}finally{n.releaseLock()}})}function bu(t){return Z(t?.getReader)}function ke(t){if(t instanceof oe)return t;if(t!=null){if(vu(t))return IP(t);if(mu(t))return wP(t);if(yu(t))return EP(t);if(_u(t))return cE(t);if(Eu(t))return TP(t);if(bu(t))return bP(t)}throw Iu(t)}function IP(t){return new oe(e=>{let n=t[ts]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wP(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function EP(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,uu)})}function TP(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cE(t){return new oe(e=>{DP(t,e).catch(n=>e.error(n))})}function bP(t){return cE(Tu(t))}function DP(t,e){var n,r,i,s;return sE(this,void 0,void 0,function*(){try{for(n=aE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function vt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function hr(t,e=0){return de((n,r)=>{n.subscribe(ae(r,i=>vt(r,t,()=>r.next(i),e),()=>vt(r,t,()=>r.complete(),e),i=>vt(r,t,()=>r.error(i),e)))})}function fr(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function uE(t,e){return ke(t).pipe(fr(e),hr(e))}function lE(t,e){return ke(t).pipe(fr(e),hr(e))}function dE(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function hE(t,e){return new oe(n=>{let r;return vt(n,e,()=>{r=t[wu](),vt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Du(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{vt(n,e,()=>{let r=t[Symbol.asyncIterator]();vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fE(t,e){return Du(Tu(t),e)}function pE(t,e){if(t!=null){if(vu(t))return uE(t,e);if(mu(t))return dE(t,e);if(yu(t))return lE(t,e);if(_u(t))return Du(t,e);if(Eu(t))return hE(t,e);if(bu(t))return fE(t,e)}throw Iu(t)}function Ce(t,e){return e?pE(t,e):ke(t)}function G(...t){let e=dr(t);return Ce(t,e)}function as(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function kf(t){return!!t&&(t instanceof oe||Z(t.lift)&&Z(t.subscribe))}var Pn=Ji(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return de((n,r)=>{let i=0;n.subscribe(ae(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:CP}=Array;function AP(t,e){return CP(e)?t(...e):t(e)}function Cu(t){return ne(e=>AP(t,e))}var{isArray:SP}=Array,{getPrototypeOf:RP,prototype:NP,keys:PP}=Object;function Au(t){if(t.length===1){let e=t[0];if(SP(e))return{args:e,keys:null};if(MP(e)){let n=PP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function MP(t){return t&&typeof t=="object"&&RP(t)===NP}function Su(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ta(...t){let e=dr(t),n=gu(t),{args:r,keys:i}=Au(t);if(r.length===0)return Ce([],e);let s=new oe(OP(r,e,i?o=>Su(i,o):bt));return n?s.pipe(Cu(n)):s}function OP(t,e,n=bt){return r=>{gE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)gE(e,()=>{let l=Ce(t[u],e),h=!1;l.subscribe(ae(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function gE(t,e,n){t?vt(n,t,e):e()}function mE(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=R=>l<r?A(R):u.push(R),A=R=>{s&&e.next(R),l++;let N=!1;ke(n(R,h++)).subscribe(ae(e,k=>{i?.(k),s?_(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();o?vt(e,o,()=>A(k)):A(k)}y()}catch(k){e.error(k)}}))};return t.subscribe(ae(e,_,()=>{p=!0,y()})),()=>{a?.()}}function Fe(t,e,n=1/0){return Z(e)?Fe((r,i)=>ne((s,o)=>e(r,s,i,o))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>mE(r,i,t,n)))}function cs(t=1/0){return Fe(bt,t)}function yE(){return cs(1)}function us(...t){return yE()(Ce(t,dr(t)))}function Ru(t){return new oe(e=>{ke(t()).subscribe(e)})}function Ff(...t){let e=gu(t),{args:n,keys:r}=Au(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;ke(n[h]).subscribe(ae(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Su(r,a):a),s.complete())}))}});return e?i.pipe(Cu(e)):i}function _t(t,e){return de((n,r)=>{let i=0;n.subscribe(ae(r,s=>t.call(e,s,i++)&&r.next(s)))})}function pr(t){return de((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ae(n,void 0,void 0,o=>{s=ke(t(o,pr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function vE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ae(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Mn(t,e){return Z(e)?Fe(t,e,1):Fe(t,1)}function gr(t){return de((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function On(t){return t<=0?()=>Dt:de((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Lf(t){return ne(()=>t)}function Nu(t=xP){return de((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xP(){return new Pn}function ni(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):bt,On(1),n?gr(e):Nu(()=>new Pn))}function ls(t){return t<=0?()=>Dt:de((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):bt,ls(1),n?gr(e):Nu(()=>new Pn))}function Uf(t,e){return de(vE(t,e,arguments.length>=2,!0))}function jf(...t){let e=dr(t);return de((n,r)=>{(e?us(t,n,e):us(t,n)).subscribe(r)})}function It(t,e){return de((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=s++;ke(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bf(t){return de((e,n)=>{ke(t).subscribe(ae(n,()=>n.complete(),Zo)),!n.closed&&e.subscribe(n)})}function Le(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):bt}var kP="https://g.co/ng/security#xss",H=class extends Error{constructor(e,n){super(sl(e,n)),this.code=e}};function sl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ga(t){return{toString:t}.toString()}var Pu="__parameters__";function FP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function nT(t,e,n){return ga(()=>{let r=FP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Pu)?u[Pu]:Object.defineProperty(u,Pu,{value:[]})[Pu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var na=globalThis;function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function LP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(gt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function _E(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var VP=Ee({__forward_ref__:Ee});function ma(t){return t.__forward_ref__=ma,t.toString=function(){return gt(this())},t}function ft(t){return rT(t)?t():t}function rT(t){return typeof t=="function"&&t.hasOwnProperty(VP)&&t.__forward_ref__===ma}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ol(t){return IE(t,sT)||IE(t,oT)}function iT(t){return ol(t)!==null}function IE(t,e){return t.hasOwnProperty(e)?t[e]:null}function UP(t){let e=t&&(t[sT]||t[oT]);return e||null}function wE(t){return t&&(t.hasOwnProperty(EE)||t.hasOwnProperty(jP))?t[EE]:null}var sT=Ee({\u0275prov:Ee}),EE=Ee({\u0275inj:Ee}),oT=Ee({ngInjectableDef:Ee}),jP=Ee({ngInjectorDef:Ee}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aT(t){return t&&!!t.\u0275providers}var BP=Ee({\u0275cmp:Ee}),$P=Ee({\u0275dir:Ee}),HP=Ee({\u0275pipe:Ee}),qP=Ee({\u0275mod:Ee}),Uu=Ee({\u0275fac:Ee}),ra=Ee({__NG_ELEMENT_ID__:Ee}),TE=Ee({__NG_ENV_ID__:Ee});function ia(t){return typeof t=="string"?t:t==null?"":String(t)}function zP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ia(t)}function GP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,t)}function zp(t,e){throw new H(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),rp;function cT(){return rp}function xt(t){let e=rp;return rp=t,e}function uT(t,e,n){let r=ol(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;zp(t,"Injector")}var WP={},sa=WP,ip="__NG_DI_FLAG__",ju="ngTempTokenPath",KP="ngTokenPath",QP=/\n/gm,YP="\u0275",bE="__source",gs;function JP(){return gs}function mr(t){let e=gs;return gs=t,e}function XP(t,e=ie.Default){if(gs===void 0)throw new H(-203,!1);return gs===null?uT(t,void 0,e):gs.get(t,e&ie.Optional?null:void 0,e)}function $(t,e=ie.Default){return(cT()||XP)(ft(t),e)}function M(t,e=ie.Default){return $(t,al(e))}function al(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sp(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],u=ZP(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push($(i,s))}else e.push($(r))}return e}function lT(t,e){return t[ip]=e,t.prototype[ip]=e,t}function ZP(t){return t[ip]}function eM(t,e,n,r){let i=t[ju];throw e[bE]&&i.unshift(e[bE]),t.message=tM(`
`+t.message,i,n,r),t[KP]=i,t[ju]=null,t}function tM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==YP?t.slice(2):t;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(QP,`
  `)}`}var it=lT(nT("Optional"),8);var Gp=lT(nT("SkipSelf"),4);function ys(t,e){let n=t.hasOwnProperty(Uu);return n?t[Uu]:null}function Wp(t,e){t.forEach(n=>Array.isArray(n)?Wp(n,e):e(n))}function dT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function rM(t,e,n){let r=ya(t,e);return r>=0?t[r|1]=n:(r=~r,nM(t,r,e,n)),r}function $f(t,e){let n=ya(t,e);if(n>=0)return t[n|1]}function ya(t,e){return iM(t,e,1)}function iM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var vs={},kt=[],_s=new j(""),hT=new j("",-1),fT=new j(""),$u=class{get(e,n=sa){if(n===sa){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return n}},pT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pT||{}),un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(un||{}),Lt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Lt||{});function sM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function op(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];aM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function oM(t){return t===3||t===4||t===6}function aM(t){return t.charCodeAt(0)===64}function oa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?DE(t,n,i,null,e[++r]):DE(t,n,i,null,null))}}return t}function DE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var gT="ng-template";function cM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Kp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Kp(t){return t.type===4&&t.value!==gT}function uM(t,e,n){let r=t.type===4&&!n?gT:t.value;return e===r}function lM(t,e,n){let r=4,i=t.attrs,s=i!==null?fM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Wt(r)&&!Wt(u))return!1;if(o&&Wt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!uM(t,u,n)||u===""&&e.length===1){if(Wt(r))return!1;o=!0}}else if(r&8){if(i===null||!cM(t,i,u,n)){if(Wt(r))return!1;o=!0}}else{let l=e[++a],h=dM(u,i,Kp(t),n);if(h===-1){if(Wt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Wt(r))return!1;o=!0}}}}return Wt(r)||o}function Wt(t){return(t&1)===0}function dM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return pM(e,t)}function hM(t,e,n=!1){for(let r=0;r<e.length;r++)if(lM(t,e[r],n))return!0;return!1}function fM(t){for(let e=0;e<t.length;e++){let n=t[e];if(oM(n))return e}return t.length}function pM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function CE(t,e){return t?":not("+e.trim()+")":e}function gM(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Wt(o)&&(e+=CE(s,i),i=""),r=o,s=s||!Wt(r);n++}return i!==""&&(e+=CE(s,i)),e}function mM(t){return t.map(gM).join(",")}function yM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Wt(i))break;i=s}r++}return{attrs:e,classes:n}}function Er(t){return ga(()=>{let e=IT(t),n=_e(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||un.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});wT(n);let r=t.dependencies;return n.directiveDefs=SE(r,!1),n.pipeDefs=SE(r,!0),n.id=IM(n),n})}function vM(t){return vr(t)||mT(t)}function _M(t){return t!==null}function Ln(t){return ga(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function AE(t,e){if(t==null)return vs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Lt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Lt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Yt(t){return ga(()=>{let e=IT(t);return wT(e),e})}function vr(t){return t[BP]||null}function mT(t){return t[$P]||null}function yT(t){return t[HP]||null}function vT(t){let e=vr(t)||mT(t)||yT(t);return e!==null?e.standalone:!1}function _T(t,e){let n=t[qP]||null;if(!n&&e===!0)throw new Error(`Type ${gt(t)} does not have '\u0275mod' property.`);return n}function IT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AE(t.inputs,e),outputs:AE(t.outputs),debugInfo:null}}function wT(t){t.features?.forEach(e=>e(t))}function SE(t,e){if(!t)return null;let n=e?yT:vM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(_M)}function IM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Vt(t){return{\u0275providers:t}}function wM(...t){return{\u0275providers:ET(!0,t),\u0275fromNgModule:!0}}function ET(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Wp(e,o=>{let a=o;ap(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&TT(i,s),n}function TT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Qp(i,s=>{e(s,r)})}}function ap(t,e,n,r){if(t=ft(t),!t)return!1;let i=null,s=wE(t),o=!s&&vr(t);if(!s&&!o){let u=t.ngModule;if(s=wE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ap(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Wp(s.imports,h=>{ap(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&TT(l,e)}if(!a){let l=ys(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:fT,useValue:i,multi:!0},i),e({provide:_s,useValue:()=>$(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Qp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Qp(t,e){for(let n of t)aT(n)&&(n=n.\u0275providers),Array.isArray(n)?Qp(n,e):e(n)}var EM=Ee({provide:String,useValue:Ee});function bT(t){return t!==null&&typeof t=="object"&&EM in t}function TM(t){return!!(t&&t.useExisting)}function bM(t){return!!(t&&t.useFactory)}function Is(t){return typeof t=="function"}function DM(t){return!!t.useClass}var cl=new j(""),xu={},CM={},Hf;function Yp(){return Hf===void 0&&(Hf=new $u),Hf}var nt=class{},aa=class extends nt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,up(e,o=>this.processProvider(o)),this.records.set(hT,ds(void 0,this)),i.has("environment")&&this.records.set(nt,ds(void 0,this));let s=this.records.get(cl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fT,kt,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mr(this),r=xt(void 0),i;try{return e()}finally{mr(n),xt(r)}}get(e,n=sa,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(TE))return e[TE](this);r=al(r);let i,s=mr(this),o=xt(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=PM(e)&&ol(e);l&&this.injectableDefInScope(l)?u=ds(cp(e),xu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?Yp():this.parent;return n=r&ie.Optional&&n===sa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ju]=a[ju]||[]).unshift(gt(e)),s)throw a;return eM(a,e,"R3InjectorError",this.source)}else throw a}finally{xt(o),mr(s)}}resolveInjectorInitializers(){let e=me(null),n=mr(this),r=xt(void 0),i;try{let s=this.get(_s,kt,ie.Self);for(let o of s)o()}finally{mr(n),xt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=ft(e);let n=Is(e)?e:ft(e&&e.provide),r=SM(e);if(!Is(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ds(void 0,xu,!0),i.factory=()=>sp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===xu&&(n.value=CM,n.value=n.factory()),typeof n.value=="object"&&n.value&&NM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cp(t){let e=ol(t),n=e!==null?e.factory:ys(t);if(n!==null)return n;if(t instanceof j)throw new H(204,!1);if(t instanceof Function)return AM(t);throw new H(204,!1)}function AM(t){if(t.length>0)throw new H(204,!1);let n=UP(t);return n!==null?()=>n.factory(t):()=>new t}function SM(t){if(bT(t))return ds(void 0,t.useValue);{let e=DT(t);return ds(e,xu)}}function DT(t,e,n){let r;if(Is(t)){let i=ft(t);return ys(i)||cp(i)}else if(bT(t))r=()=>ft(t.useValue);else if(bM(t))r=()=>t.useFactory(...sp(t.deps||[]));else if(TM(t))r=()=>$(ft(t.useExisting));else{let i=ft(t&&(t.useClass||t.provide));if(RM(t))r=()=>new i(...sp(t.deps));else return ys(i)||cp(i)}return r}function ds(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RM(t){return!!t.deps}function NM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PM(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function up(t,e){for(let n of t)Array.isArray(n)?up(n,e):n&&aT(n)?up(n.\u0275providers,e):e(n)}function Jt(t,e){t instanceof aa&&t.assertNotDestroyed();let n,r=mr(t),i=xt(void 0);try{return e()}finally{mr(r),xt(i)}}function CT(){return cT()!==void 0||JP()!=null}function MM(t){if(!CT())throw new H(-203,!1)}function OM(t){return typeof t=="function"}var Vn=0,le=1,Q=2,rt=3,Kt=4,Xt=5,Hu=6,ca=7,Qt=8,ws=9,ln=10,$e=11,ua=12,RE=13,Cs=14,dn=15,ul=16,hs=17,Es=18,ll=19,AT=20,yr=21,qf=22,si=23,_r=25,ST=1;var oi=7,qu=8,zu=9,Ft=10,Jp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Jp||{});function ri(t){return Array.isArray(t)&&typeof t[ST]=="object"}function Un(t){return Array.isArray(t)&&t[ST]===!0}function RT(t){return(t.flags&4)!==0}function dl(t){return t.componentOffset>-1}function Xp(t){return(t.flags&1)===1}function Ir(t){return!!t.template}function xM(t){return(t[Q]&512)!==0}var lp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function NT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function As(){return PT}function PT(t){return t.type.prototype.ngOnChanges&&(t.setInput=FM),kM}As.ngInherit=!0;function kM(){let t=OT(this),e=t?.current;if(e){let n=t.previous;if(n===vs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function FM(t,e,n,r,i){let s=this.declaredInputs[r],o=OT(t)||LM(t,{previous:vs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new lp(l&&l.currentValue,n,u===vs),NT(t,e,i,n)}var MT="__ngSimpleChanges__";function OT(t){return t[MT]||null}function LM(t,e){return t[MT]=e}var NE=null;var an=function(t,e,n){NE?.(t,e,n)},VM="svg",UM="math",jM=!1;function BM(){return jM}function hn(t){for(;Array.isArray(t);)t=t[Vn];return t}function xT(t,e){return hn(e[t])}function Zt(t,e){return hn(e[t.index])}function kT(t,e){return t.data[e]}function Tr(t,e){let n=e[t];return ri(n)?n:n[Vn]}function Zp(t){return(t[Q]&128)===128}function $M(t){return Un(t[rt])}function Gu(t,e){return e==null?null:t[e]}function FT(t){t[hs]=0}function HM(t){t[Q]&1024||(t[Q]|=1024,Zp(t)&&la(t))}function qM(t,e){for(;t>0;)e=e[Cs],t--;return e}function eg(t){return!!(t[Q]&9216||t[si]?.dirty)}function dp(t){t[ln].changeDetectionScheduler?.notify(1),eg(t)?la(t):t[Q]&64&&(BM()?(t[Q]|=1024,la(t)):t[ln].changeDetectionScheduler?.notify())}function la(t){t[ln].changeDetectionScheduler?.notify();let e=da(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Zp(e)));)e=da(e)}function LT(t,e){if((t[Q]&256)===256)throw new H(911,!1);t[yr]===null&&(t[yr]=[]),t[yr].push(e)}function zM(t,e){if(t[yr]===null)return;let n=t[yr].indexOf(e);n!==-1&&t[yr].splice(n,1)}function da(t){let e=t[rt];return Un(e)?e[rt]:e}var se={lFrame:zT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function GM(){return se.lFrame.elementDepthCount}function WM(){se.lFrame.elementDepthCount++}function KM(){se.lFrame.elementDepthCount--}function VT(){return se.bindingsEnabled}function QM(){return se.skipHydrationRootTNode!==null}function YM(t){return se.skipHydrationRootTNode===t}function JM(){se.skipHydrationRootTNode=null}function Ae(){return se.lFrame.lView}function Ut(){return se.lFrame.tView}function Ss(t){return se.lFrame.contextLView=t,t[Qt]}function Rs(t){return se.lFrame.contextLView=null,t}function Ct(){let t=UT();for(;t!==null&&t.type===64;)t=t.parent;return t}function UT(){return se.lFrame.currentTNode}function XM(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function va(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function jT(){return se.lFrame.isParent}function ZM(){se.lFrame.isParent=!1}function eO(){return se.lFrame.bindingIndex}function tO(t){return se.lFrame.bindingIndex=t}function tg(){return se.lFrame.bindingIndex++}function BT(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function nO(){return se.lFrame.inI18n}function rO(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,hp(e)}function iO(){return se.lFrame.currentDirectiveIndex}function hp(t){se.lFrame.currentDirectiveIndex=t}function sO(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function $T(t){se.lFrame.currentQueryIndex=t}function oO(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function HT(t,e,n){if(n&ie.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=oO(s),i===null||(s=s[Cs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=se.lFrame=qT();return r.currentTNode=e,r.lView=t,!0}function ng(t){let e=qT(),n=t[le];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function qT(){let t=se.lFrame,e=t===null?null:t.child;return e===null?zT(t):e}function zT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function GT(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var WT=GT;function rg(){let t=GT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function aO(t){return(se.lFrame.contextLView=qM(t,se.lFrame.contextLView))[Qt]}function fi(){return se.lFrame.selectedIndex}function ai(t){se.lFrame.selectedIndex=t}function KT(){let t=se.lFrame;return kT(t.tView,t.selectedIndex)}function cO(){return se.lFrame.currentNamespace}var QT=!0;function ig(){return QT}function sg(t){QT=t}function uO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=PT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function og(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function ku(t,e,n){YT(t,e,3,n)}function Fu(t,e,n,r){(t[Q]&3)===n&&YT(t,e,n,r)}function zf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function YT(t,e,n,r){let i=r!==void 0?t[hs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[hs]+=65536),(a<s||s==-1)&&(lO(t,n,e,u),t[hs]=(t[hs]&4294901760)+u+2),u++}function PE(t,e){an(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),an(5,t,e)}}function lO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[hs]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,PE(a,s)):PE(a,s)}var ms=-1,ci=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function dO(t){return t instanceof ci}function hO(t){return(t.flags&8)!==0}function fO(t){return(t.flags&16)!==0}function JT(t){return t!==ms}function Wu(t){return t&32767}function pO(t){return t>>16}function Ku(t,e){let n=pO(t),r=e;for(;n>0;)r=r[Cs],n--;return r}var fp=!0;function ME(t){let e=fp;return fp=t,e}var gO=256,XT=gO-1,ZT=5,mO=0,cn={};function yO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ra)&&(r=n[ra]),r==null&&(r=n[ra]=mO++);let i=r&XT,s=1<<i;e.data[t+(i>>ZT)]|=s}function Qu(t,e){let n=eb(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,Gf(r.data,t),Gf(e,null),Gf(r.blueprint,null));let i=ag(t,e),s=t.injectorIndex;if(JT(i)){let o=Wu(i),a=Ku(i,e),u=a[le].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Gf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ag(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=sb(i),r===null)return ms;if(n++,i=i[Cs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ms}function pp(t,e,n){yO(t,e,n)}function tb(t,e,n){if(n&ie.Optional||t!==void 0)return t;zp(e,"NodeInjector")}function nb(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),!(n&(ie.Self|ie.Host))){let i=t[ws],s=xt(void 0);try{return i?i.get(e,r,n&ie.Optional):uT(e,r,n&ie.Optional)}finally{xt(s)}}return tb(r,e,n)}function rb(t,e,n,r=ie.Default,i){if(t!==null){if(e[Q]&2048&&!(r&ie.Self)){let o=EO(t,e,n,r,cn);if(o!==cn)return o}let s=ib(t,e,n,r,cn);if(s!==cn)return s}return nb(e,n,r,i)}function ib(t,e,n,r,i){let s=IO(n);if(typeof s=="function"){if(!HT(e,t,r))return r&ie.Host?tb(i,n,r):nb(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))zp(n);else return o}finally{WT()}}else if(typeof s=="number"){let o=null,a=eb(t,e),u=ms,l=r&ie.Host?e[dn][Xt]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?ag(t,e):e[a+8],u===ms||!xE(r,!1)?a=-1:(o=e[le],a=Wu(u),e=Ku(u,e)));a!==-1;){let h=e[le];if(OE(s,a,h.data)){let p=vO(a,e,n,o,r,l);if(p!==cn)return p}u=e[a+8],u!==ms&&xE(r,e[le].data[a+8]===l)&&OE(s,a,e)?(o=h,a=Wu(u),e=Ku(u,e)):a=-1}}return i}function vO(t,e,n,r,i,s){let o=e[le],a=o.data[t+8],u=r==null?dl(a)&&fp:r!=o&&(a.type&3)!==0,l=i&ie.Host&&s===a,h=_O(a,o,n,u,l);return h!==null?Ts(e,o,h,a):cn}function _O(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let A=o[_];if(_<u&&n===A||_>=u&&A.type===n)return _}if(i){let _=o[u];if(_&&Ir(_)&&_.type===n)return u}return null}function Ts(t,e,n,r){let i=t[n],s=e.data;if(dO(i)){let o=i;o.resolving&&GP(zP(s[n]));let a=ME(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?xt(o.injectImpl):null,h=HT(t,r,ie.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&uO(n,s[n],e)}finally{l!==null&&xt(l),ME(a),o.resolving=!1,WT()}}return i}function IO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ra)?t[ra]:void 0;return typeof e=="number"?e>=0?e&XT:wO:e}function OE(t,e,n){let r=1<<t;return!!(n[e+(t>>ZT)]&r)}function xE(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var ii=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rb(this._tNode,this._lView,e,al(r),n)}};function wO(){return new ii(Ct(),Ae())}function _a(t){return ga(()=>{let e=t.prototype.constructor,n=e[Uu]||gp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Uu]||gp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function gp(t){return rT(t)?()=>{let e=gp(ft(t));return e&&e()}:ys(t)}function EO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=ib(s,o,n,r|ie.Self,cn);if(a!==cn)return a;let u=s.parent;if(!u){let l=o[AT];if(l){let h=l.get(n,cn,r);if(h!==cn)return h}u=sb(o),o=o[Cs]}s=u}return i}function sb(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function kE(t,e=null,n=null,r){let i=ob(t,e,n,r);return i.resolveInjectorInitializers(),i}function ob(t,e=null,n=null,r,i=new Set){let s=[n||kt,wM(t)];return r=r||(typeof t=="object"?void 0:gt(t)),new aa(s,e||Yp(),r||null,i)}var mt=(()=>{class t{static{this.THROW_IF_NOT_FOUND=sa}static{this.NULL=new $u}static create(n,r){if(Array.isArray(n))return kE({name:""},r,n,"");{let i=n.name??"";return kE({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>$(hT)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var TO="ngOriginalError";function Wf(t){return t[TO]}var fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Wf(e);for(;n&&Wf(n);)n=Wf(n);return n||null}},ab=new j("",{providedIn:"root",factory:()=>M(fn).handleError.bind(void 0)}),cg=(()=>{class t{static{this.__NG_ELEMENT_ID__=bO}static{this.__NG_ENV_ID__=n=>n}}return t})(),mp=class extends cg{constructor(e){super(),this._lView=e}onDestroy(e){return LT(this._lView,e),()=>zM(this._lView,e)}};function bO(){return new mp(Ae())}function DO(){return hl(Ct(),Ae())}function hl(t,e){return new pi(Zt(t,e))}var pi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=DO}}return t})();var yp=class extends ht{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,CT()&&(this.destroyRef=M(cg,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Kf(s),i&&(i=Kf(i)),o&&(o=Kf(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}};function Kf(t){return e=>{setTimeout(t,void 0,e)}}var pt=yp;function cb(t){return(t.flags&128)===128}var ub=new Map,CO=0;function AO(){return CO++}function SO(t){ub.set(t[ll],t)}function RO(t){ub.delete(t[ll])}var FE="__ngContext__";function ui(t,e){ri(e)?(t[FE]=e[ll],SO(e)):t[FE]=e}function lb(t){return hb(t[ua])}function db(t){return hb(t[Kt])}function hb(t){for(;t!==null&&!Un(t);)t=t[Kt];return t}var vp;function fb(t){vp=t}function NO(){if(vp!==void 0)return vp;if(typeof document<"u")return document;throw new H(210,!1)}var ug=new j("",{providedIn:"root",factory:()=>PO}),PO="ng",lg=new j(""),jt=new j("",{providedIn:"platform",factory:()=>"unknown"});var dg=new j("",{providedIn:"root",factory:()=>NO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MO="h",OO="b";var xO=()=>null;function hg(t,e,n=!1){return xO(t,e,n)}var pb=!1,kO=new j("",{providedIn:"root",factory:()=>pb});var _p=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kP})`}};function fg(t){return t instanceof _p?t.changingThisBreaksApplicationSecurity:t}function gb(t){return t instanceof Function?t():t}function FO(t){return(t??M(mt)).get(jt)==="browser"}var xn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xn||{}),LO;function pg(t,e){return LO(t,e)}function fs(t,e,n,r,i){if(r!=null){let s,o=!1;Un(r)?s=r:ri(r)&&(o=!0,r=r[Vn]);let a=hn(r);t===0&&n!==null?i==null?Ib(e,n,a):Yu(e,n,a,i||null,!0):t===1&&n!==null?Yu(e,n,a,i||null,!0):t===2?ex(e,a,o):t===3&&e.destroyNode(a),s!=null&&nx(e,t,s,n,i)}}function VO(t,e){return t.createText(e)}function UO(t,e,n){t.setValue(e,n)}function mb(t,e,n){return t.createElement(e,n)}function jO(t,e){yb(t,e),e[Vn]=null,e[Xt]=null}function BO(t,e,n,r,i,s){r[Vn]=i,r[Xt]=e,fl(t,r,n,1,i,s)}function yb(t,e){e[ln].changeDetectionScheduler?.notify(1),fl(t,e,e[$e],2,null,null)}function $O(t){let e=t[ua];if(!e)return Qf(t[le],t);for(;e;){let n=null;if(ri(e))n=e[ua];else{let r=e[Ft];r&&(n=r)}if(!n){for(;e&&!e[Kt]&&e!==t;)ri(e)&&Qf(e[le],e),e=e[rt];e===null&&(e=t),ri(e)&&Qf(e[le],e),n=e&&e[Kt]}e=n}}function HO(t,e,n,r){let i=Ft+r,s=n.length;r>0&&(n[i-1][Kt]=e),r<s-Ft?(e[Kt]=n[i],dT(n,Ft+r,e)):(n.push(e),e[Kt]=null),e[rt]=n;let o=e[ul];o!==null&&n!==o&&qO(o,e);let a=e[Es];a!==null&&a.insertView(t),dp(e),e[Q]|=128}function qO(t,e){let n=t[zu],i=e[rt][rt][dn];e[dn]!==i&&(t[Q]|=Jp.HasTransplantedViews),n===null?t[zu]=[e]:n.push(e)}function vb(t,e){let n=t[zu],r=n.indexOf(e);n.splice(r,1)}function Ip(t,e){if(t.length<=Ft)return;let n=Ft+e,r=t[n];if(r){let i=r[ul];i!==null&&i!==t&&vb(i,r),e>0&&(t[n-1][Kt]=r[Kt]);let s=Bu(t,Ft+e);jO(r[le],r);let o=s[Es];o!==null&&o.detachView(s[le]),r[rt]=null,r[Kt]=null,r[Q]&=-129}return r}function _b(t,e){if(!(e[Q]&256)){let n=e[$e];n.destroyNode&&fl(t,e,n,3,null,null),$O(e)}}function Qf(t,e){if(e[Q]&256)return;let n=me(null);try{e[Q]&=-129,e[Q]|=256,e[si]&&Ww(e[si]),GO(t,e),zO(t,e),e[le].type===1&&e[$e].destroy();let r=e[ul];if(r!==null&&Un(e[rt])){r!==e[rt]&&vb(r,e);let i=e[Es];i!==null&&i.detachView(t)}RO(e)}finally{me(n)}}function zO(t,e){let n=t.cleanup,r=e[ca];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ca]=null);let i=e[yr];if(i!==null){e[yr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function GO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ci)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];an(4,a,u);try{u.call(a)}finally{an(5,a,u)}}else{an(4,i,s);try{s.call(i)}finally{an(5,i,s)}}}}}function WO(t,e,n){return KO(t,e.parent,n)}function KO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Vn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===un.None||s===un.Emulated)return null}return Zt(r,n)}}function Yu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ib(t,e,n){t.appendChild(e,n)}function LE(t,e,n,r,i){r!==null?Yu(t,e,n,r,i):Ib(t,e,n)}function QO(t,e,n,r){t.removeChild(e,n,r)}function gg(t,e){return t.parentNode(e)}function YO(t,e){return t.nextSibling(e)}function JO(t,e,n){return ZO(t,e,n)}function XO(t,e,n){return t.type&40?Zt(t,n):null}var ZO=XO,VE;function mg(t,e,n,r){let i=WO(t,r,e),s=e[$e],o=r.parent||e[Xt],a=JO(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)LE(s,i,n[u],a,!1);else LE(s,i,n,a,!1);VE!==void 0&&VE(s,r,e,n,i)}function Lu(t,e){if(e!==null){let n=e.type;if(n&3)return Zt(e,t);if(n&4)return wp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Lu(t,r);{let i=t[e.index];return Un(i)?wp(-1,i):hn(i)}}else{if(n&32)return pg(e,t)()||hn(t[e.index]);{let r=wb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=da(t[dn]);return Lu(i,r)}else return Lu(t,e.next)}}}return null}function wb(t,e){if(e!==null){let r=t[dn][Xt],i=e.projection;return r.projection[i]}return null}function wp(t,e){let n=Ft+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return Lu(r,i)}return e[oi]}function ex(t,e,n){let r=gg(t,e);r&&QO(t,r,e,n)}function yg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ui(hn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)yg(t,e,n.child,r,i,s,!1),fs(e,t,i,a,s);else if(u&32){let l=pg(n,r),h;for(;h=l();)fs(e,t,i,h,s);fs(e,t,i,a,s)}else u&16?tx(t,e,r,n,i,s):fs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function fl(t,e,n,r,i,s){yg(n,r,t.firstChild,e,i,s,!1)}function tx(t,e,n,r,i,s){let o=n[dn],u=o[Xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];fs(e,t,i,h,s)}else{let l=u,h=o[rt];cb(r)&&(l.flags|=128),yg(t,e,l,h,i,s,!0)}}function nx(t,e,n,r,i){let s=n[oi],o=hn(n);s!==o&&fs(e,t,r,s,i);for(let a=Ft;a<n.length;a++){let u=n[a];fl(u[le],u,t,e,r,s)}}function rx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:xn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xn.Important),t.setStyle(n,r,i,s))}}function ix(t,e,n){t.setAttribute(e,"style",n)}function Eb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Tb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&op(t,e,r),i!==null&&Eb(t,e,i),s!==null&&ix(t,e,s)}var br={};function Qe(t=1){bb(Ut(),Ae(),fi()+t,!1)}function bb(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ku(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Fu(e,s,0,n)}ai(n)}function be(t,e=ie.Default){let n=Ae();if(n===null)return $(t,e);let r=Ct();return rb(r,n,ft(t),e)}function Db(){let t="invalid";throw new Error(t)}function Cb(t,e,n,r,i,s){let o=me(null);try{let a=null;i&Lt.SignalBased&&(a=e[r][_f]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Lt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):NT(e,a,r,s)}finally{me(o)}}function sx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ai(~i);else{let s=i,o=n[++r],a=n[++r];rO(o,s);let u=e[s];a(2,u)}}}finally{ai(-1)}}function pl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Vn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),FT(p),p[rt]=p[Cs]=t,p[Qt]=n,p[ln]=o||t&&t[ln],p[$e]=a||t&&t[$e],p[ws]=u||t&&t[ws]||null,p[Xt]=s,p[ll]=AO(),p[Hu]=h,p[AT]=l,p[dn]=e.type==2?t[dn]:p,p}function gl(t,e,n,r,i){let s=t.data[e];if(s===null)s=ox(t,e,n,r,i),nO()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=XM();s.injectorIndex=o===null?-1:o.injectorIndex}return va(s,!0),s}function ox(t,e,n,r,i){let s=UT(),o=jT(),a=o?s:s&&s.parent,u=t.data[e]=dx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Ab(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Sb(t,e,n,r,i){let s=fi(),o=r&2;try{ai(-1),o&&e.length>_r&&bb(t,e,_r,!1),an(o?2:0,i),n(r,i)}finally{ai(s),an(o?3:1,i)}}function Rb(t,e,n){if(RT(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{me(r)}}}function Nb(t,e,n){VT()&&(yx(t,e,n,Zt(n,e)),(n.flags&64)===64&&Fb(t,e,n))}function Pb(t,e,n=Zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Mb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=vg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vg(t,e,n,r,i,s,o,a,u,l,h){let p=_r+r,y=p+i,_=ax(p,y),A=typeof l=="function"?l():l;return _[le]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function ax(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:br);return n}function cx(t,e,n,r){let s=r.get(kO,pb)||n===un.ShadowDom,o=t.selectRootElement(e,s);return ux(o),o}function ux(t){lx(t)}var lx=()=>null;function dx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return QM()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function UE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Lt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?jE(r,n,l,a,u):jE(r,n,l,a)}return r}function jE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function hx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=n?n.get(p):null,_=y?y.inputs:null,A=y?y.outputs:null;u=UE(0,p.inputs,h,u,_),l=UE(1,p.outputs,h,l,A);let R=u!==null&&o!==null&&!Kp(e)?Cx(u,h,o):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function fx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ob(t,e,n,r,i,s,o,a){let u=Zt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(_g(t,n,h,r,i),dl(e)&&px(n,e.index)):e.type&3?(r=fx(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function px(t,e){let n=Tr(e,t);n[Q]&16||(n[Q]|=64)}function xb(t,e,n,r){if(VT()){let i=r===null?null:{"":-1},s=_x(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&kb(t,e,n,o,i,a),i&&Ix(n,r,i)}n.mergedAttrs=oa(n.mergedAttrs,n.attrs)}function kb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)pp(Qu(n,e),t,r[l].type);Ex(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Ab(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=oa(n.mergedAttrs,h.hostAttrs),Tx(t,n,e,u,h),wx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}hx(t,n,s)}function gx(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;mx(o)!=a&&o.push(a),o.push(n,r,s)}}function mx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;dl(n)&&bx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Qu(n,e),ui(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ts(e,t,a,n);if(ui(l,e),o!==null&&Dx(e,a-i,l,u,n,o),Ir(u)){let h=Tr(n.index,e);h[Qt]=Ts(e,t,a,n)}}}function Fb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=iO();try{ai(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];hp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&vx(u,l)}}finally{ai(-1),hp(o)}}function vx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function _x(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(hM(e,o.selectors,!1))if(r||(r=[]),Ir(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Ep(t,e,u)}else r.unshift(o),Ep(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ep(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ix(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function wx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ir(e)&&(n[""]=t)}}function Ex(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Tx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ys(i.type,!0)),o=new ci(s,Ir(i),be);t.blueprint[r]=o,n[r]=o,gx(t,e,r,Ab(t,n,i.hostVars,br),i)}function bx(t,e,n){let r=Zt(e,t),i=Mb(n),s=t[ln].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ml(t,pl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Dx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Cb(r,n,u,l,h,p)}}function Cx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Lb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Vb(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];$T(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function ml(t,e){return t[ua]?t[RE][Kt]=e:t[ua]=e,t[RE]=e,e}function Tp(t,e,n){$T(0);let r=me(null);try{e(t,n)}finally{me(r)}}function Ax(t){return t[ca]||(t[ca]=[])}function Sx(t){return t.cleanup||(t.cleanup=[])}function Ub(t,e){let n=t[ws],r=n?n.get(fn,null):null;r&&r.handleError(e)}function _g(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Cb(h,l,r,a,u,i)}}function jb(t,e,n){let r=xT(e,t);UO(t[$e],r,n)}function Rx(t,e){let n=Tr(e,t),r=n[le];Nx(r,n);let i=n[Vn];i!==null&&n[Hu]===null&&(n[Hu]=hg(i,n[ws])),Ig(r,n,n[Qt])}function Nx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ig(t,e,n){ng(e);try{let r=t.viewQuery;r!==null&&Tp(1,r,n);let i=t.template;i!==null&&Sb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Es]?.finishViewCreation(t),t.staticContentQueries&&Vb(t,e),t.staticViewQueries&&Tp(2,t.viewQuery,n);let s=t.components;s!==null&&Px(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,rg()}}function Px(t,e){for(let n=0;n<e.length;n++)Rx(t,e[n])}function Mx(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=pl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ul]=l;let h=t[Es];return h!==null&&(u[Es]=h.createEmbeddedView(s)),Ig(s,u,n),u}finally{me(i)}}function BE(t,e){return!e||e.firstChild===null||cb(t)}function Ox(t,e,n,r=!0){let i=e[le];if(HO(i,e,t,n),r){let o=wp(n,t),a=e[$e],u=gg(a,t[oi]);u!==null&&BO(i,t[Xt],a,e,u,o)}let s=e[Hu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ju(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(hn(s)),Un(s)&&xx(s,r);let o=n.type;if(o&8)Ju(t,e,n.child,r);else if(o&32){let a=pg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=wb(e,n);if(Array.isArray(a))r.push(...a);else{let u=da(e[dn]);Ju(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function xx(t,e){for(let n=Ft;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&Ju(r[le],r,i,e)}t[oi]!==t[Vn]&&e.push(t[oi])}var Bb=[];function kx(t){return t[si]??Fx(t)}function Fx(t){let e=Bb.pop()??Object.create(Vx);return e.lView=t,e}function Lx(t){t.lView[si]!==t&&(t.lView=null,Bb.push(t))}var Vx=_e(L({},qw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{la(t.lView)},consumerOnSignalRead(){this.lView[si]=this}}),$b=100;function Hb(t,e=!0,n=0){let r=t[ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ux(t,n)}catch(o){throw e&&Ub(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ux(t,e){bp(t,e);let n=0;for(;eg(t);){if(n===$b)throw new H(103,!1);n++,bp(t,1)}}function jx(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1;!s&&e[ln].inlineEffectRunner?.flush(),ng(e);let o=null,a=null;!s&&Bx(t)&&(a=kx(e),o=zw(a));try{FT(e),tO(t.bindingStartIndex),n!==null&&Sb(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&ku(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Fu(e,p,0,null),zf(e,0)}if($x(e),qb(e,0),t.contentQueries!==null&&Vb(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&ku(e,p)}else{let p=t.contentHooks;p!==null&&Fu(e,p,1),zf(e,1)}sx(t,e);let l=t.components;l!==null&&Gb(e,l,0);let h=t.viewQuery;if(h!==null&&Tp(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&ku(e,p)}else{let p=t.viewHooks;p!==null&&Fu(e,p,2),zf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[qf]){for(let p of e[qf])p();e[qf]=null}s||(e[Q]&=-73)}catch(u){throw la(e),u}finally{a!==null&&(Gw(a,o),Lx(a)),rg()}}function Bx(t){return t.type!==2}function qb(t,e){for(let n=lb(t);n!==null;n=db(n))for(let r=Ft;r<n.length;r++){let i=n[r];zb(i,e)}}function $x(t){for(let e=lb(t);e!==null;e=db(e)){if(!(e[Q]&Jp.HasTransplantedViews))continue;let n=e[zu];for(let r=0;r<n.length;r++){let i=n[r],s=i[rt];HM(i)}}}function Hx(t,e,n){let r=Tr(e,t);zb(r,n)}function zb(t,e){Zp(t)&&bp(t,e)}function bp(t,e){let r=t[le],i=t[Q],s=t[si],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&If(s)),s&&(s.dirty=!1),t[Q]&=-9217,o)jx(r,t,r.template,t[Qt]);else if(i&8192){qb(t,1);let a=r.components;a!==null&&Gb(t,a,1)}}function Gb(t,e,n){for(let r=0;r<e.length;r++)Hx(t,e[r],n)}function wg(t){for(t[ln].changeDetectionScheduler?.notify();t;){t[Q]|=64;let e=da(t);if(xM(t)&&!e)return t;t=e}return null}var li=class{get rootNodes(){let e=this._lView,n=e[le];return Ju(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(Un(e)){let n=e[qu],r=n?n.indexOf(this):-1;r>-1&&(Ip(e,r),Bu(n,r))}this._attachedToViewContainer=!1}_b(this._lView[le],this._lView)}onDestroy(e){LT(this._lView,e)}markForCheck(){wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){dp(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,Hb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,yb(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,dp(this._lView)}},yl=(()=>{class t{static{this.__NG_ELEMENT_ID__=Gx}}return t})(),qx=yl,zx=class extends qx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Mx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new li(i)}};function Gx(){return Wx(Ct(),Ae())}function Wx(t,e){return t.type&4?new zx(e,t,hl(t,e)):null}var H5=new RegExp(`^(\\d+)*(${OO}|${MO})*(.*)`);var Kx=()=>null;function $E(t,e){return Kx(t,e)}var Xu=class{},Dp=class{},Zu=class{};function Qx(t){let e=Error(`No component factory found for ${gt(t)}.`);return e[Yx]=t,e}var Yx="ngComponent";var Cp=class{resolveComponentFactory(e){throw Qx(e)}},vl=(()=>{class t{static{this.NULL=new Cp}}return t})(),ha=class{},Ns=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Jx()}}return t})();function Jx(){let t=Ae(),e=Ct(),n=Tr(e.index,t);return(ri(n)?n:t)[$e]}var Xx=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})(),Yf={};var HE=new Set;function _l(t){HE.has(t)||(HE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function qE(...t){}function Zx(){let t=typeof na.requestAnimationFrame=="function",e=na[t?"requestAnimationFrame":"setTimeout"],n=na[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Zx().nativeRequestAnimationFrame,nk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ek,qE,qE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ek={};function Eg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tk(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(na,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ap(t),t.isCheckStableRunning=!0,Eg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ap(t))}function nk(t){let e=()=>{tk(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(rk(a))return n.invokeTask(i,s,o,a);try{return zE(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),GE(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return zE(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),GE(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ap(t),Eg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ap(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function zE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function GE(t){t._nesting--,Eg(t)}function rk(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ps=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ps||{}),ik={destroy(){}};function Il(t,e){!e&&MM(Il);let n=e?.injector??M(mt);if(!FO(n))return ik;_l("NgAfterNextRender");let r=n.get(Tg),i=r.handler??=new Rp,s=e?.phase??ps.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(cg).onDestroy(o),u=Jt(n,()=>new Sp(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var Sp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=M(pe),this.errorHandler=M(fn,{optional:!0}),M(Xu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Rp=class{constructor(){this.executingCallbacks=!1,this.buckets={[ps.EarlyRead]:new Set,[ps.Write]:new Set,[ps.MixedReadWrite]:new Set,[ps.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Tg=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Np(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=_E(i,a);else if(s==2){let u=a,l=e[++o];r=_E(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var el=class extends vl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vr(e);return new bs(n,this.ngModule)}};function WE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function sk(t){let e=t.toLowerCase();return e==="svg"?VM:e==="math"?UM:null}var Pp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=al(r);let i=this.injector.get(e,Yf,r);return i!==Yf||n===Yf?i:this.parentInjector.get(e,n,r)}},bs=class extends Zu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=WE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return WE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=mM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof nt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Pp(e,o):e,u=a.get(ha,null);if(u===null)throw new H(407,!1);let l=a.get(Xx,null),h=a.get(Tg,null),p=a.get(Xu,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?cx(_,r,this.componentDef.encapsulation,a):mb(_,A,sk(A)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let k=null;R!==null&&(k=hg(R,a,!0));let z=vg(0,null,null,1,0,null,null,null,null,null,null),F=pl(null,z,null,N,null,null,y,_,a,null,k);ng(F);let ee,Ie;try{let W=this.componentDef,T,v=null;W.findHostDirectiveDefs?(T=[],v=new Map,W.findHostDirectiveDefs(W,T,v),T.push(W)):T=[W];let I=ok(F,R),E=ak(I,R,W,T,F,y,_);Ie=kT(z,_r),R&&lk(_,W,R,r),n!==void 0&&dk(Ie,this.ngContentSelectors,n),ee=uk(E,W,T,v,F,[hk]),Ig(z,F,null)}finally{rg()}return new Mp(this.componentType,ee,hl(Ie,F),F,Ie)}finally{me(s)}}},Mp=class extends Dp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new li(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;_g(s[le],s,i,e,n),this.previousInputValues.set(e,n);let o=Tr(this._tNode.index,s);wg(o)}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ok(t,e){let n=t[le],r=_r;return t[r]=e,gl(n,r,2,"#host",null)}function ak(t,e,n,r,i,s,o){let a=i[le];ck(r,t,e,o);let u=null;e!==null&&(u=hg(e,i[ws]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=pl(i,Mb(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Ep(a,t,r.length-1),ml(i,p),i[t.index]=p}function ck(t,e,n,r){for(let i of t)e.mergedAttrs=oa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Np(e,e.mergedAttrs,!0),n!==null&&Tb(r,n,e))}function uk(t,e,n,r,i,s){let o=Ct(),a=i[le],u=Zt(o,i);kb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,y=Ts(i,a,p,o);ui(y,i)}Fb(a,i,o),u&&ui(u,i);let l=Ts(i,a,o.directiveStart+o.componentOffset,o);if(t[Qt]=i[Qt]=l,s!==null)for(let h of s)h(l,e);return Rb(a,o,i),l}function lk(t,e,n,r){if(r)op(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=yM(e.selectors[0]);i&&op(t,n,i),s&&s.length>0&&Eb(t,n,s.join(" "))}}function dk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function hk(){let t=Ct();og(Ae()[le],t)}var Ps=(()=>{class t{static{this.__NG_ELEMENT_ID__=fk}}return t})();function fk(){let t=Ct();return gk(t,Ae())}var pk=Ps,Wb=class extends pk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return hl(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){let e=ag(this._hostTNode,this._hostLView);if(JT(e)){let n=Ku(e,this._hostLView),r=Wu(e),i=n[le].data[r+8];return new ii(i,n)}else return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=KE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=$E(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,BE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!OM(e),a;if(o)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new bs(vr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(nt,null);R&&(s=R)}let h=vr(u.componentType??{}),p=$E(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,s);return this.insertImpl(_.hostView,a,BE(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if($M(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[rt],l=new Wb(u,u[Xt],u[rt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Ox(o,i,s,r),e.attachToViewContainerRef(),dT(Jf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=KE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ip(this._lContainer,n);r&&(Bu(Jf(this._lContainer),n),_b(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ip(this._lContainer,n);return r&&Bu(Jf(this._lContainer),n)!=null?new li(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function KE(t){return t[qu]}function Jf(t){return t[qu]||(t[qu]=[])}function gk(t,e){let n,r=e[t.index];return Un(r)?n=r:(n=Lb(r,e,null,t),e[t.index]=n,ml(e,n)),yk(n,e,t,r),new Wb(n,t,e)}function mk(t,e){let n=t[$e],r=n.createComment(""),i=Zt(e,t),s=gg(n,i);return Yu(n,s,r,YO(n,i),!1),r}var yk=Ik,vk=()=>!1;function _k(t,e,n){return vk(t,e,n)}function Ik(t,e,n,r){if(t[oi])return;let i;n.type&8?i=hn(r):i=mk(e,n),t[oi]=i}function wk(t){return typeof t=="function"&&t[_f]!==void 0}function Kb(t){return wk(t)&&typeof t.set=="function"}function Ek(t){return Object.getPrototypeOf(t.prototype).constructor}function Ms(t){let e=Ek(t.type),n=!0,r=[t];for(;e;){let i;if(Ir(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Mu(t.inputs),o.inputTransforms=Mu(t.inputTransforms),o.declaredInputs=Mu(t.declaredInputs),o.outputs=Mu(t.outputs);let a=i.hostBindings;a&&Ak(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Dk(t,u),l&&Ck(t,l),Tk(t,i),LP(t.outputs,i.outputs),Ir(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ms&&(n=!1)}}e=Object.getPrototypeOf(e)}bk(r)}function Tk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function bk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=oa(i.hostAttrs,n=oa(n,i.hostAttrs))}}function Mu(t){return t===vs?{}:t===kt?[]:t}function Dk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ck(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Ak(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var wr=class{},fa=class{};var Op=class extends wr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new el(this);let i=_T(e);this._bootstrapComponents=gb(i.bootstrap),this._r3Injector=ob(e,n,[{provide:wr,useValue:this},{provide:vl,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xp=class extends fa{constructor(e){super(),this.moduleType=e}create(e){return new Op(this.moduleType,e,[])}};var tl=class extends wr{constructor(e){super(),this.componentFactoryResolver=new el(this),this.instance=null;let n=new aa([...e.providers,{provide:wr,useValue:this},{provide:vl,useValue:this.componentFactoryResolver}],e.parent||Yp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wl(t,e,n=null){return new tl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Os=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Qb(t){return Rk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Sk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Rk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function di(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Nk(t,e,n,r){let i=di(t,e,n);return di(t,e+1,r)||i}function Pk(t,e,n,r,i){let s=Nk(t,e,n,r);return di(t,e+2,i)||s}function Mk(t){return(t.flags&32)===32}function Ok(t,e,n,r,i,s,o,a,u){let l=e.consts,h=gl(e,t,4,o||null,Gu(l,a));xb(e,n,h,Gu(l,u)),og(e,h);let p=h.tView=vg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function gi(t,e,n,r,i,s,o,a){let u=Ae(),l=Ut(),h=t+_r,p=l.firstCreatePass?Ok(h,l,u,e,n,r,i,s,o):l.data[h];va(p,!1);let y=xk(l,u,p,t);ig()&&mg(l,u,y,p),ui(y,u);let _=Lb(y,u,y,p);return u[h]=_,ml(u,_),_k(_,p,u),Xp(p)&&Nb(l,u,p),o!=null&&Pb(u,p,a),gi}var xk=kk;function kk(t,e,n,r){return sg(!0),e[$e].createComment("")}function Fk(t,e,n,r){return di(t,tg(),n)?e+ia(n)+r:br}function Lk(t,e,n,r,i,s,o,a){let u=eO(),l=Pk(t,u,n,i,o);return BT(3),l?e+ia(n)+r+ia(i)+s+ia(o)+a:br}function Ou(t,e){return t<<17|e<<2}function hi(t){return t>>17&32767}function Vk(t){return(t&2)==2}function Uk(t,e){return t&131071|e<<17}function kp(t){return t|2}function Ds(t){return(t&131068)>>2}function Xf(t,e){return t&-131069|e<<2}function jk(t){return(t&1)===1}function Fp(t){return t|1}function Bk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=hi(o),u=Ds(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ya(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=hi(t[a+1]);t[r+1]=Ou(y,a),y!==0&&(t[y+1]=Xf(t[y+1],r)),t[a+1]=Uk(t[a+1],r)}else t[r+1]=Ou(a,0),a!==0&&(t[a+1]=Xf(t[a+1],r)),a=r;else t[r+1]=Ou(u,0),a===0?a=r:t[u+1]=Xf(t[u+1],r),u=r;l&&(t[r+1]=kp(t[r+1])),QE(t,h,r,!0),QE(t,h,r,!1),$k(e,h,t,r,s),o=Ou(a,u),s?e.classBindings=o:e.styleBindings=o}function $k(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ya(s,e)>=0&&(n[r+1]=Fp(n[r+1]))}function QE(t,e,n,r){let i=t[n+1],s=e===null,o=r?hi(i):Ds(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Hk(u,e)&&(a=!0,t[o+1]=r?Fp(l):kp(l)),o=r?hi(l):Ds(l)}a&&(t[n+1]=r?kp(i):Fp(i))}function Hk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ya(t,e)>=0:!1}function pn(t,e,n){let r=Ae(),i=tg();if(di(r,i,e)){let s=Ut(),o=KT();Ob(s,o,r,t,e,r[$e],n,!1)}return pn}function YE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";_g(t,n,s[o],o,r)}function El(t,e,n){return Yb(t,e,n,!1),El}function bg(t,e){return Yb(t,e,null,!0),bg}function Yb(t,e,n,r){let i=Ae(),s=Ut(),o=BT(2);if(s.firstUpdatePass&&zk(s,t,o,r),e!==br&&di(i,o,e)){let a=s.data[fi()];Yk(s,a,i,i[$e],t,i[o+1]=Jk(e,n),r,o)}}function qk(t,e){return e>=t.expandoStartIndex}function zk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[fi()],o=qk(t,n);Xk(s,r)&&e===null&&!o&&(e=!1),e=Gk(i,s,e,r),Bk(i,s,e,n,o,r)}}function Gk(t,e,n,r){let i=sO(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Zf(null,t,e,n,r),n=pa(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Zf(i,t,e,n,r),s===null){let u=Wk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Zf(null,t,e,u[1],r),u=pa(u,e.attrs,r),Kk(t,e,r,u))}else s=Qk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Wk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ds(r)!==0)return t[hi(r)]}function Kk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[hi(i)]=r}function Qk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=pa(r,o,n)}return pa(r,e.attrs,n)}function Zf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=pa(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function pa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rM(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Yk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=jk(l)?JE(u,e,n,i,Ds(l),o):void 0;if(!nl(h)){nl(s)||Vk(l)&&(s=JE(u,null,n,i,a,o));let p=xT(fi(),n);rx(r,o,p,i,s)}}function JE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===br&&(y=p?kt:void 0);let _=p?$f(y,r):h===r?y:void 0;if(l&&!nl(_)&&(_=$f(u,r)),nl(_)&&(a=_,o))return a;let A=t[i+1];i=o?hi(A):Ds(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$f(u,r))}return a}function nl(t){return t!==void 0}function Jk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gt(fg(t)))),t}function Xk(t,e){return(t.flags&(e?8:16))!==0}function Zk(t,e,n,r,i,s){let o=e.consts,a=Gu(o,i),u=gl(e,t,2,r,a);return xb(e,n,u,Gu(o,s)),u.attrs!==null&&Np(u,u.attrs,!1),u.mergedAttrs!==null&&Np(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Re(t,e,n,r){let i=Ae(),s=Ut(),o=_r+t,a=i[$e],u=s.firstCreatePass?Zk(o,s,i,e,n,r):s.data[o],l=e1(s,i,u,a,e,t);i[o]=l;let h=Xp(u);return va(u,!0),Tb(a,l,u),!Mk(u)&&ig()&&mg(s,i,l,u),GM()===0&&ui(l,i),WM(),h&&(Nb(s,i,u),Rb(s,u,i)),r!==null&&Pb(i,u),Re}function Ne(){let t=Ct();jT()?ZM():(t=t.parent,va(t,!1));let e=t;YM(e)&&JM(),KM();let n=Ut();return n.firstCreatePass&&(og(n,t),RT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&hO(e)&&YE(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fO(e)&&YE(n,e,Ae(),e.stylesWithoutHost,!1),Ne}function mi(t,e,n,r){return Re(t,e,n,r),Ne(),mi}var e1=(t,e,n,r,i,s)=>(sg(!0),mb(r,i,cO()));function Tl(){return Ae()}var rl="en-US";var t1=rl;function n1(t){typeof t=="string"&&(t1=t.toLowerCase().replace(/_/g,"-"))}function gn(t,e,n,r){let i=Ae(),s=Ut(),o=Ct();return Jb(s,i,i[$e],o,t,e,r),gn}function r1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ca],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function Jb(t,e,n,r,i,s,o){let a=Xp(r),l=t.firstCreatePass&&Sx(t),h=e[Qt],p=Ax(e),y=!0;if(r.type&3||o){let R=Zt(r,e),N=o?o(R):R,k=p.length,z=o?ee=>o(hn(ee[r.index])):r.index,F=null;if(!o&&a&&(F=r1(t,e,i,r.index)),F!==null){let ee=F.__ngLastListenerFn__||F;ee.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,y=!1}else{s=ZE(r,e,h,s,!1);let ee=n.listen(N,i,s);p.push(s,ee),l&&l.push(i,z,k,k+1)}}else s=ZE(r,e,h,s,!1);let _=r.outputs,A;if(y&&_!==null&&(A=_[i])){let R=A.length;if(R)for(let N=0;N<R;N+=2){let k=A[N],z=A[N+1],Ie=e[k][z].subscribe(s),W=p.length;p.push(s,Ie),l&&l.push(i,r.index,W,-(W+1))}}}function XE(t,e,n,r){let i=me(null);try{return an(6,e,n),n(r)!==!1}catch(s){return Ub(t,s),!1}finally{an(7,e,n),me(i)}}function ZE(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Tr(t.index,e):e;wg(a);let u=XE(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=XE(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function He(t=1){return aO(t)}function st(t,e=""){let n=Ae(),r=Ut(),i=t+_r,s=r.firstCreatePass?gl(r,i,1,e,null):r.data[i],o=i1(r,n,s,e,t);n[i]=o,ig()&&mg(r,n,o,s),va(s,!1)}var i1=(t,e,n,r,i)=>(sg(!0),VO(e[$e],r));function Dr(t,e,n){let r=Ae(),i=Fk(r,t,e,n);return i!==br&&jb(r,fi(),i),Dr}function Dg(t,e,n,r,i,s,o){let a=Ae(),u=Lk(a,t,e,n,r,i,s,o);return u!==br&&jb(a,fi(),u),Dg}function bl(t,e,n){Kb(e)&&(e=e());let r=Ae(),i=tg();if(di(r,i,e)){let s=Ut(),o=KT();Ob(s,o,r,t,e,r[$e],n,!1)}return bl}function Cg(t,e){let n=Kb(t);return n&&t.set(e),n}function Dl(t,e){let n=Ae(),r=Ut(),i=Ct();return Jb(r,n,n[$e],i,t,e),Dl}function s1(t,e,n){let r=Ut();if(r.firstCreatePass){let i=Ir(t);Lp(n,r.data,r.blueprint,i,!0),Lp(e,r.data,r.blueprint,i,!1)}}function Lp(t,e,n,r,i){if(t=ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)Lp(t[s],e,n,r,i);else{let s=Ut(),o=Ae(),a=Ct(),u=Is(t)?t:ft(t.provide),l=DT(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Is(t)||!t.multi){let _=new ci(l,i,be),A=tp(u,e,i?h:h+y,p);A===-1?(pp(Qu(a,o),s,u),ep(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[A]=_,o[A]=_)}else{let _=tp(u,e,h+y,p),A=tp(u,e,h,h+y),R=_>=0&&n[_],N=A>=0&&n[A];if(i&&!N||!i&&!R){pp(Qu(a,o),s,u);let k=c1(i?a1:o1,n.length,i,r,l);!i&&N&&(n[A].providerFactory=k),ep(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=Xb(n[i?A:_],l,!i&&r);ep(s,t,_>-1?_:A,k)}!i&&r&&N&&n[A].componentProviders++}}}function ep(t,e,n,r){let i=Is(e),s=DM(e);if(i||s){let u=(s?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function Xb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function tp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function o1(t,e,n,r){return Vp(this.multi,[])}function a1(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ts(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),Vp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Vp(i,s);return s}function Vp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function c1(t,e,n,r,i){let s=new ci(t,n,be);return s.multi=[],s.index=e,s.componentProviders=0,Xb(s,i,r&&!n),s}function Ag(t,e=[]){return n=>{n.providersResolver=(r,i)=>s1(r,i?i(t):t,e)}}var u1=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ET(!1,n.type),i=r.length>0?wl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t($(nt))})}}return t})();function xs(t){_l("NgStandalone"),t.getStandaloneInjector=e=>e.get(u1).getOrCreateStandaloneInjector(t)}var kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Zb=new kn("17.3.12"),Cl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var eD=new j("");function yi(t){return!!t&&typeof t.then=="function"}function tD(t){return!!t&&typeof t.subscribe=="function"}var Al=new j(""),nD=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=M(Al,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(yi(s))n.push(s);else if(tD(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ia=new j("");function l1(){Kw(()=>{throw new H(600,!1)})}function d1(t){return t.isBoundToModule}function h1(t,e,n){try{let r=n();return yi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ks=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(ab),this.afterRenderEffectManager=M(Tg),this.externalTestViews=new Set,this.beforeRender=new ht,this.afterTick=new ht,this.componentTypes=[],this.components=[],this.isStable=M(Os).hasPendingTasks.pipe(ne(n=>!n)),this._injector=M(nt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Zu;if(!this._injector.get(nD).done){let y=!i&&vT(n),_=!1;throw new H(405,_)}let o;i?o=n:o=this._injector.get(vl).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=d1(o)?void 0:this._injector.get(wr),u=r||o.selector,l=o.create(mt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(eD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),np(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new H(101,!1);let r=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,me(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===$b)throw new H(103,!1);if(n){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)f1(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Up(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Up(s))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;np(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Ia,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>np(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function np(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function f1(t,e,n){!e&&!Up(t)||p1(t,n,e)}function Up(t){return eg(t)}function p1(t,e,n){let r;n?(r=0,t[Q]|=1024):t[Q]&64?r=0:r=1,Hb(t,e,r)}var jp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sl=(()=>{class t{compileModuleSync(n){return new xp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=_T(n),s=gb(i.declarations).reduce((o,a)=>{let u=vr(a);return u&&o.push(new bs(u)),o},[]);return new jp(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g1=(()=>{class t{constructor(){this.zone=M(pe),this.applicationRef=M(ks)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function m1(t){return[{provide:pe,useFactory:t},{provide:_s,multi:!0,useFactory:()=>{let e=M(g1,{optional:!0});return()=>e.initialize()}},{provide:_s,multi:!0,useFactory:()=>{let e=M(I1);return()=>{e.initialize()}}},{provide:ab,useFactory:y1}]}function y1(){let t=M(pe),e=M(fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function v1(t){let e=m1(()=>new pe(_1(t)));return Vt([[],e])}function _1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var I1=(()=>{class t{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=M(pe),this.pendingTasks=M(Os)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function w1(){return typeof $localize<"u"&&$localize.locale||rl}var Sg=new j("",{providedIn:"root",factory:()=>M(Sg,ie.Optional|ie.SkipSelf)||w1()});var rD=new j("");var Vu=null;function E1(t=[],e){return mt.create({name:e,providers:[{provide:cl,useValue:"platform"},{provide:rD,useValue:new Set([()=>Vu=null])},...t]})}function T1(t=[]){if(Vu)return Vu;let e=E1(t);return Vu=e,l1(),b1(e),e}function b1(t){t.get(lg,null)?.forEach(n=>n())}var vi=(()=>{class t{static{this.__NG_ELEMENT_ID__=D1}}return t})();function D1(t){return C1(Ct(),Ae(),(t&16)===16)}function C1(t,e,n){if(dl(t)&&!n){let r=Tr(t.index,e);return new li(r,r)}else if(t.type&47){let r=e[dn];return new li(r,e)}return null}var Bp=class{constructor(){}supports(e){return Qb(e)}create(e){return new $p(e)}},A1=(t,e)=>e,$p=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<eT(r,i,s)?n:r,a=eT(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<s.length?s[y]:s[y]=0,A=_+y;h<=A&&A<l&&(s[y]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Qb(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Sk(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Hp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new il),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new il),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},qp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},il=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new qp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function tT(){return new Rg([new Bp])}var Rg=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:tT})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||tT()),deps:[[t,new Gp,new it]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new H(901,!1)}}return t})();function iD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=T1(r),s=[v1(),...n||[]],a=new tl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(pe);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(fn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>a.destroy(),y=i.get(rD);return y.add(p),a.onDestroy(()=>{h.unsubscribe(),y.delete(p)}),h1(l,u,()=>{let _=a.get(nD);return _.runInitializers(),_.donePromise.then(()=>{let A=a.get(Sg,rl);n1(A||rl);let R=a.get(ks);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Rl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function sD(t){let e=vr(t);if(!e)return null;let n=new bs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var lD=null;function Bn(){return lD}function dD(t){lD??=t}var Nl=class{};var ot=new j(""),xg=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(N1),providedIn:"platform"})}}return t})(),hD=new j(""),N1=(()=>{class t extends xg{constructor(){super(),this._doc=M(ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(n){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function kg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function oD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function jn(t){return t&&t[0]!=="?"?"?"+t:t}var _i=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(Fg),providedIn:"root"})}}return t})(),fD=new j(""),Fg=(()=>{class t extends _i{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return kg(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+jn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+jn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)($(xg),$(fD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pD=(()=>{class t extends _i{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=kg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+jn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+jn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)($(xg),$(fD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Ls=(()=>{class t{constructor(n){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=O1(oD(aD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jn(r))}normalize(n){return t.stripTrailingSlash(M1(this._basePath,aD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=jn}static{this.joinWithSlash=kg}static{this.stripTrailingSlash=oD}static{this.\u0275fac=function(r){return new(r||t)($(_i))}}static{this.\u0275prov=B({token:t,factory:()=>P1(),providedIn:"root"})}}return t})();function P1(){return new Ls($(_i))}function M1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aD(t){return t.replace(/\/index.html$/,"")}function O1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Pl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ng=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gD=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ng(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),cD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);cD(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(be(Ps),be(yl),be(Rg))}}static{this.\u0275dir=Yt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function cD(t,e){t.context.$implicit=e.item}var mD=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Pg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){uD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){uD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(be(Ps),be(yl))}}static{this.\u0275dir=Yt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Pg=class{constructor(){this.$implicit=null,this.ngIf=null}};function uD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${gt(e)}'.`)}var Lg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ln({type:t})}static{this.\u0275inj=Fn({})}}return t})(),Vg="browser",x1="server";function k1(t){return t===Vg}function Ml(t){return t===x1}var yD=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>k1(M(jt))?new Mg(M(ot),window):new Og})}}return t})(),Mg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=F1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function F1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Og=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Fs=class{};var Ea=class{},xl=class{},Ii=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var jg=class{encodeKey(e){return _D(e)}encodeValue(e){return _D(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function U1(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var j1=/%(\d[a-f0-9])/gi,B1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _D(t){return encodeURIComponent(t).replace(j1,(e,n)=>B1[n]??e)}function Ol(t){return`${t}`}var Cr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=U1(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ol):[Ol(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ol(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ol(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Bg=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function $1(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ID(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function wD(t){return typeof Blob<"u"&&t instanceof Blob}function ED(t){return typeof FormData<"u"&&t instanceof FormData}function H1(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var wa=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if($1(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ii,this.context??=new Bg,!this.params)this.params=new Cr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ID(this.body)||wD(this.body)||ED(this.body)||H1(this.body)?this.body:this.body instanceof Cr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ED(this.body)?null:wD(this.body)?this.body.type||null:ID(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Cr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,_)=>y.set(_,e.setHeaders[_]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,_)=>y.set(_,e.setParams[_]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Vs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Vs||{}),Ta=class{constructor(e,n=Ll.Ok,r="OK"){this.headers=e.headers||new Ii,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},$g=class t extends Ta{constructor(e={}){super(e),this.type=Vs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},kl=class t extends Ta{constructor(e={}){super(e),this.type=Vs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fl=class extends Ta{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Ll=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Ll||{});function Ug(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var q1=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof wa)s=n;else{let u;i.headers instanceof Ii?u=i.headers:u=new Ii(i.headers);let l;i.params&&(i.params instanceof Cr?l=i.params:l=new Cr({fromObject:i.params})),s=new wa(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=G(s).pipe(Mn(u=>this.handler.handle(u)));if(n instanceof wa||i.observe==="events")return o;let a=o.pipe(_t(u=>u instanceof kl));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Cr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Ug(i,r))}post(n,r,i={}){return this.request("POST",n,Ug(i,r))}put(n,r,i={}){return this.request("PUT",n,Ug(i,r))}static{this.\u0275fac=function(r){return new(r||t)($(Ea))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function z1(t,e){return e(t)}function G1(t,e,n){return(r,i)=>Jt(n,()=>e(r,s=>t(s,i)))}var DD=new j(""),W1=new j(""),K1=new j("");var TD=(()=>{class t extends Ea{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=M(Os);let i=M(K1,{optional:!0});this.backend=i??n}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(DD),...this.injector.get(W1,[])]));this.chain=i.reduceRight((s,o)=>G1(s,o,this.injector),z1)}let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ni(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||t)($(xl),$(nt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();var Q1=/^\)\]\}',?\n/;function Y1(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var bD=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new H(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ce(r.\u0275loadImpl()):G(null)).pipe(It(()=>new oe(s=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((R,N)=>o.setRequestHeader(R,N.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let R=n.detectContentTypeHeader();R!==null&&o.setRequestHeader("Content-Type",R)}if(n.responseType){let R=n.responseType.toLowerCase();o.responseType=R!=="json"?R:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=o.statusText||"OK",N=new Ii(o.getAllResponseHeaders()),k=Y1(o)||n.url;return u=new $g({headers:N,status:o.status,statusText:R,url:k}),u},h=()=>{let{headers:R,status:N,statusText:k,url:z}=l(),F=null;N!==Ll.NoContent&&(F=typeof o.response>"u"?o.responseText:o.response),N===0&&(N=F?Ll.Ok:0);let ee=N>=200&&N<300;if(n.responseType==="json"&&typeof F=="string"){let Ie=F;F=F.replace(Q1,"");try{F=F!==""?JSON.parse(F):null}catch(W){F=Ie,ee&&(ee=!1,F={error:W,text:F})}}ee?(s.next(new kl({body:F,headers:R,status:N,statusText:k,url:z||void 0})),s.complete()):s.error(new Fl({error:F,headers:R,status:N,statusText:k,url:z||void 0}))},p=R=>{let{url:N}=l(),k=new Fl({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:N||void 0});s.error(k)},y=!1,_=R=>{y||(s.next(l()),y=!0);let N={type:Vs.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),n.responseType==="text"&&o.responseText&&(N.partialText=o.responseText),s.next(N)},A=R=>{let N={type:Vs.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),s.next(N)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),n.reportProgress&&(o.addEventListener("progress",_),a!==null&&o.upload&&o.upload.addEventListener("progress",A)),o.send(a),s.next({type:Vs.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),n.reportProgress&&(o.removeEventListener("progress",_),a!==null&&o.upload&&o.upload.removeEventListener("progress",A)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)($(Fs))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),CD=new j(""),J1="XSRF-TOKEN",X1=new j("",{providedIn:"root",factory:()=>J1}),Z1="X-XSRF-TOKEN",eF=new j("",{providedIn:"root",factory:()=>Z1}),Vl=class{},tF=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pl(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)($(ot),$(jt),$(X1))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function nF(t,e){let n=t.url.toLowerCase();if(!M(CD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=M(Vl).getToken(),i=M(eF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function AD(...t){let e=[q1,bD,TD,{provide:Ea,useExisting:TD},{provide:xl,useExisting:bD},{provide:DD,useValue:nF,multi:!0},{provide:CD,useValue:!0},{provide:Vl,useClass:tF}];for(let n of t)e.push(...n.\u0275providers);return Vt(e)}var zg=class extends Nl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gg=class t extends zg{static makeCurrent(){dD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=rF();return n==null?null:iF(n)}resetBaseElement(){ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pl(document.cookie,e)}},ba=null;function rF(){return ba=ba||document.querySelector("base"),ba?ba.getAttribute("href"):null}function iF(t){return new URL(t,document.baseURI).pathname}var sF=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Wg=new j(""),PD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)($(Wg),$(pe))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Ul=class{constructor(e){this._doc=e}},Hg="ng-app-id",MD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ml(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Hg}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Hg),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Hg,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)($(ot),$(ug),$(dg,8),$(jt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),qg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qg=/%COMP%/g,OD="%COMP%",oF=`_nghost-${OD}`,aF=`_ngcontent-${OD}`,cF=!0,uF=new j("",{providedIn:"root",factory:()=>cF});function lF(t){return aF.replace(Qg,t)}function dF(t){return oF.replace(Qg,t)}function xD(t,e){return e.map(n=>n.replace(Qg,t))}var SD=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ml(a),this.defaultRenderer=new Da(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===un.ShadowDom&&(r=_e(L({},r),{encapsulation:un.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof jl?i.applyToHost(n):i instanceof Ca&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case un.Emulated:s=new jl(u,l,r,this.appId,h,o,a,p);break;case un.ShadowDom:return new Kg(u,l,n,r,o,a,this.nonce,p);default:s=new Ca(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)($(PD),$(MD),$(ug),$(uF),$(ot),$(jt),$(pe),$(dg))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Da=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(RD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(RD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=qg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=qg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(n,r,i&xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function RD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kg=class extends Da{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=xD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ca=class extends Da{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?xD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jl=class extends Ca{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=lF(l),this.hostAttr=dF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},hF=(()=>{class t extends Ul{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)($(ot))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),ND=["alt","control","meta","shift"],fF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},gF=(()=>{class t extends Ul{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ND.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=fF[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ND.forEach(o=>{if(o!==i){let a=pF[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)($(ot))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function kD(t,e){return iD(L({rootComponent:t},mF(e)))}function mF(t){return{appProviders:[...wF,...t?.providers??[]],platformProviders:IF}}function yF(){Gg.makeCurrent()}function vF(){return new fn}function _F(){return fb(document),document}var IF=[{provide:jt,useValue:Vg},{provide:lg,useValue:yF,multi:!0},{provide:ot,useFactory:_F,deps:[]}];var wF=[{provide:cl,useValue:"root"},{provide:fn,useFactory:vF,deps:[]},{provide:Wg,useClass:hF,multi:!0,deps:[ot,pe,jt]},{provide:Wg,useClass:gF,multi:!0,deps:[ot]},SD,MD,PD,{provide:ha,useExisting:SD},{provide:Fs,useClass:sF,deps:[]},[]];var FD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)($(ot))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re="primary",$a=Symbol("RouteTitle"),em=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Hs(t){return new em(t)}function bF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function DF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yn(t[n],e[n]))return!1;return!0}function yn(t,e){let n=t?tm(t):void 0,r=e?tm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!zD(t[i],e[i]))return!1;return!0}function tm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function zD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function GD(t){return t.length>0?t[t.length-1]:null}function Nr(t){return kf(t)?t:yi(t)?Ce(Promise.resolve(t)):G(t)}var CF={exact:KD,subset:QD},WD={exact:AF,subset:SF,ignored:()=>!0};function LD(t,e,n){return CF[n.paths](t.root,e.root,n.matrixParams)&&WD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function AF(t,e){return yn(t,e)}function KD(t,e,n){if(!Ei(t.segments,e.segments)||!Hl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!KD(t.children[r],e.children[r],n))return!1;return!0}function SF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>zD(t[n],e[n]))}function QD(t,e,n){return YD(t,e,e.segments,n)}function YD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ei(i,n)||e.hasChildren()||!Hl(i,n,r))}else if(t.segments.length===n.length){if(!Ei(t.segments,n)||!Hl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!QD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ei(t.segments,i)||!Hl(t.segments,i,r)||!t.children[re]?!1:YD(t.children[re],e,s,r)}}function Hl(t,e,n){return e.every((r,i)=>WD[n](t[i].parameters,r.parameters))}var Ar=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){return PF.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ql(this)}},wi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Hs(this.parameters),this._parameterMap}toString(){return XD(this)}};function RF(t,e){return Ei(t,e)&&t.every((n,r)=>yn(n.parameters,e[r].parameters))}function Ei(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function NF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Ha=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new Oa,providedIn:"root"})}}return t})(),Oa=class{parse(e){let n=new rm(e);return new Ar(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Aa(e.root,!0)}`,r=xF(e.queryParams),i=typeof e.fragment=="string"?`#${MF(e.fragment)}`:"";return`${n}${r}${i}`}},PF=new Oa;function ql(t){return t.segments.map(e=>XD(e)).join("/")}function Aa(t,e){if(!t.hasChildren())return ql(t);if(e){let n=t.children[re]?Aa(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${Aa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=NF(t,(r,i)=>i===re?[Aa(t.children[re],!1)]:[`${i}:${Aa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${ql(t)}/${n[0]}`:`${ql(t)}/(${n.join("//")})`}}function JD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bl(t){return JD(t).replace(/%3B/gi,";")}function MF(t){return encodeURI(t)}function nm(t){return JD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(t){return decodeURIComponent(t)}function VD(t){return zl(t.replace(/\+/g,"%20"))}function XD(t){return`${nm(t.path)}${OF(t.parameters)}`}function OF(t){return Object.entries(t).map(([e,n])=>`;${nm(e)}=${nm(n)}`).join("")}function xF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Bl(n)}=${Bl(i)}`).join("&"):`${Bl(n)}=${Bl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var kF=/^[^\/()?;#]+/;function Yg(t){let e=t.match(kF);return e?e[0]:""}var FF=/^[^\/()?;=#]+/;function LF(t){let e=t.match(FF);return e?e[0]:""}var VF=/^[^=?&#]+/;function UF(t){let e=t.match(VF);return e?e[0]:""}var jF=/^[^&#]+/;function BF(t){let e=t.match(jF);return e?e[0]:""}var rm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new ye(e,n)),r}parseSegment(){let e=Yg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new wi(zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=LF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Yg(this.remaining);i&&(r=i,this.capture(r))}e[zl(n)]=zl(r)}parseQueryParam(e){let n=UF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=BF(this.remaining);o&&(r=o,this.capture(r))}let i=VD(n),s=VD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Yg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function ZD(t){return t.segments.length>0?new ye([],{[re]:t}):t}function eC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=eC(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return $F(n)}function $F(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new ye(t.segments.concat(e.segments),e.children)}return t}function qs(t){return t instanceof Ar}function HF(t,e,n=null,r=null){let i=tC(t);return nC(i,e,n,r)}function tC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=ZD(r);return e??i}function nC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Jg(i,i,i,n,r);let s=qF(e);if(s.toRoot())return Jg(i,i,new ye([],{}),n,r);let o=zF(s,i,t),a=o.processChildren?Na(o.segmentGroup,o.index,s.commands):iC(o.segmentGroup,o.index,s.commands);return Jg(i,o.segmentGroup,a,n,r)}function Gl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function xa(t){return typeof t=="object"&&t!=null&&t.outlets}function Jg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=rC(t,e,n);let a=ZD(eC(o));return new Ar(a,s,i)}function rC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=rC(s,e,n)}),new ye(t.segments,r)}var Wl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gl(r[0]))throw new H(4003,!1);let i=r.find(xa);if(i&&i!==GD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Wl(n,e,r)}var Bs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function zF(t,e,n){if(t.isAbsolute)return new Bs(e,!0,0);if(!n)return new Bs(e,!1,NaN);if(n.parent===null)return new Bs(n,!0,0);let r=Gl(t.commands[0])?0:1,i=n.segments.length-1+r;return GF(n,i,t.numberOfDoubleDots)}function GF(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Bs(r,!1,i-s)}function WF(t){return xa(t[0])?t[0].outlets:{[re]:t}}function iC(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return Na(t,e,n);let r=KF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[re]=new ye(t.segments.slice(r.pathIndex),t.children),Na(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?im(t,e,n):r.match?Na(t,0,i):im(t,e,n)}function Na(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=WF(n),i={};if(Object.keys(r).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=Na(t.children[re],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=iC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function KF(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(xa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!jD(u,l,o))return s;r+=2}else{if(!jD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function im(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(xa(s)){let u=QF(s.outlets);return new ye(r,u)}if(i===0&&Gl(n[0])){let u=t.segments[e];r.push(new wi(u.path,UD(n[0]))),i++;continue}let o=xa(s)?s.outlets[re]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Gl(a)?(r.push(new wi(o,UD(a))),i+=2):(r.push(new wi(o,{})),i++)}return new ye(r,{})}function QF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=im(new ye([],{}),0,r))}),e}function UD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function jD(t,e,n){return t==n.path&&yn(e,n.parameters)}var Pa="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Bt=class{constructor(e,n){this.id=e,this.url=n}},zs=class extends Bt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$n=class extends Bt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(St||{}),Kl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Kl||{}),Sr=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},ka=class extends Bt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ql=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sm=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class extends Bt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},am=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lm=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dm=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hm=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pm=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fa=class{},La=class{constructor(e){this.url=e}};var gm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qa,this.attachRef=null}},qa=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new gm,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Jl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=mm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=mm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ym(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ym(e,this._root).map(n=>n.value)}};function mm(t,e){if(t===e.value)return e;for(let n of e.children){let r=mm(t,n);if(r)return r}return null}function ym(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ym(t,n);if(r.length)return r.unshift(e),r}return[]}var At=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function js(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Xl=class extends Jl{constructor(e,n){super(e),this.snapshot=n,Am(this,e)}toString(){return this.snapshot.toString()}};function sC(t){let e=YF(t),n=new Ke([new wi("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),a=new Ti(n,r,s,o,i,re,t,e.root);return a.snapshot=e.root,new Xl(new At(a,[]),e)}function YF(t){let e={},n={},r={},i="",s=new Va([],e,r,i,n,re,t,null,{});return new Zl("",new At(s,[]))}var Ti=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[$a]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Hs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Hs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&aC(i)&&(r.resolve[$a]=i.title),r}var Va=class{get title(){return this.data?.[$a]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Zl=class extends Jl{constructor(e,n){super(n),this.url=e,Am(this,n)}toString(){return oC(this._root)}};function Am(t,e){e.value._routerState=t,e.children.forEach(n=>Am(t,n))}function oC(t){let e=t.children.length>0?` { ${t.children.map(oC).join(", ")} } `:"";return`${t.value}${e}`}function Xg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yn(e.params,n.params)||t.paramsSubject.next(n.params),DF(e.url,n.url)||t.urlSubject.next(n.url),yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vm(t,e){let n=yn(t.params,e.params)&&RF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||vm(t.parent,e.parent))}function aC(t){return typeof t.title=="string"||t.title===null}var Sm=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=M(qa),this.location=M(Ps),this.changeDetector=M(vi),this.environmentInjector=M(nt),this.inputBinder=M(rd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new _m(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Yt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[As]})}}return t})(),_m=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ti?this.route:e===qa?this.childContexts:this.parent.get(e,n)}},rd=new j(""),BD=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=ta([r.queryParams,r.params,r.data]).pipe(It(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=sD(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function JF(t,e,n){let r=Ua(t,e._root,n?n._root:void 0);return new Xl(r,e)}function Ua(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=XF(t,e,n);return new At(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ua(t,a)),o}}let r=ZF(e.value),i=e.children.map(s=>Ua(t,s));return new At(r,i)}}function XF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ua(t,r,i);return Ua(t,r)})}function ZF(t){return new Ti(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var cC="ngNavigationCancelingError";function uC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=qs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=lC(!1,St.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function lC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[cC]=!0,n.cancellationCode=e,n}function eL(t){return dC(t)&&qs(t.url)}function dC(t){return!!t&&t[cC]}var tL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Er({type:t,selectors:[["ng-component"]],standalone:!0,features:[xs],decls:1,vars:0,template:function(r,i){r&1&&mi(0,"router-outlet")},dependencies:[Sm],encapsulation:2})}}return t})();function nL(t,e){return t.providers&&!t._injector&&(t._injector=wl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Rm(t){let e=t.children&&t.children.map(Rm),n=e?_e(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=tL),n}function vn(t){return t.outlet||re}function rL(t,e){let n=t.filter(r=>vn(r)===e);return n.push(...t.filter(r=>vn(r)!==e)),n}function za(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var iL=(t,e,n,r)=>ne(i=>(new Im(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Im=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Xg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new pm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Xg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Xg(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=za(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ed=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$s=class{constructor(e,n){this.component=e,this.route=n}};function sL(t,e,n){let r=t._root,i=e?e._root:null;return Sa(r,i,n,[r.value])}function oL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ws(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!iT(t)?t:e.get(t):r}function Sa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=js(e);return t.children.forEach(o=>{aL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ma(a,n.getContext(o),i)),i}function aL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=cL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ed(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Sa(t,e,a?a.children:null,r,i):Sa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $s(a.outlet.component,o))}else o&&Ma(e,a,i),i.canActivateChecks.push(new ed(r)),s.component?Sa(t,null,a?a.children:null,r,i):Sa(t,null,n,r,i);return i}function cL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ei(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ei(t.url,e.url)||!yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vm(t,e)||!yn(t.queryParams,e.queryParams);case"paramsChange":default:return!vm(t,e)}}function Ma(t,e,n){let r=js(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ma(o,e.children.getContext(s),n):Ma(o,null,n):Ma(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $s(e.outlet.component,i)):n.canDeactivateChecks.push(new $s(null,i)):n.canDeactivateChecks.push(new $s(null,i))}function Ga(t){return typeof t=="function"}function uL(t){return typeof t=="boolean"}function lL(t){return t&&Ga(t.canLoad)}function dL(t){return t&&Ga(t.canActivate)}function hL(t){return t&&Ga(t.canActivateChild)}function fL(t){return t&&Ga(t.canDeactivate)}function pL(t){return t&&Ga(t.canMatch)}function hC(t){return t instanceof Pn||t?.name==="EmptyError"}var $l=Symbol("INITIAL_VALUE");function Gs(){return It(t=>ta(t.map(e=>e.pipe(On(1),jf($l)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===$l)return $l;if(n===!1||n instanceof Ar)return n}return!0}),_t(e=>e!==$l),On(1)))}function gL(t,e){return Fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(_e(L({},n),{guardsResult:!0})):mL(o,r,i,t).pipe(Fe(a=>a&&uL(a)?yL(r,s,t,e):G(a)),ne(a=>_e(L({},n),{guardsResult:a})))})}function mL(t,e,n,r){return Ce(t).pipe(Fe(i=>EL(i.component,i.route,n,e,r)),on(i=>i!==!0,!0))}function yL(t,e,n,r){return Ce(e).pipe(Mn(i=>us(_L(i.route.parent,r),vL(i.route,r),wL(t,i.path,n),IL(t,i.route,n))),on(i=>i!==!0,!0))}function vL(t,e){return t!==null&&e&&e(new fm(t)),G(!0)}function _L(t,e){return t!==null&&e&&e(new dm(t)),G(!0)}function IL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Ru(()=>{let o=za(e)??n,a=Ws(s,o),u=dL(a)?a.canActivate(e,t):Jt(o,()=>a(e,t));return Nr(u).pipe(on())}));return G(i).pipe(Gs())}function wL(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>oL(o)).filter(o=>o!==null).map(o=>Ru(()=>{let a=o.guards.map(u=>{let l=za(o.node)??n,h=Ws(u,l),p=hL(h)?h.canActivateChild(r,t):Jt(l,()=>h(r,t));return Nr(p).pipe(on())});return G(a).pipe(Gs())}));return G(s).pipe(Gs())}function EL(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=za(e)??i,l=Ws(a,u),h=fL(l)?l.canDeactivate(t,e,n,r):Jt(u,()=>l(t,e,n,r));return Nr(h).pipe(on())});return G(o).pipe(Gs())}function TL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=Ws(o,t),u=lL(a)?a.canLoad(e,n):Jt(t,()=>a(e,n));return Nr(u)});return G(s).pipe(Gs(),fC(r))}function fC(t){return Sf(Le(e=>{if(qs(e))throw uC(t,e)}),ne(e=>e===!0))}function bL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=Ws(o,t),u=pL(a)?a.canMatch(e,n):Jt(t,()=>a(e,n));return Nr(u)});return G(s).pipe(Gs(),fC(r))}var ja=class{constructor(e){this.segmentGroup=e||null}},td=class extends Error{constructor(e){super(),this.urlTree=e}};function Us(t){return as(new ja(t))}function DL(t){return as(new H(4e3,!1))}function CL(t){return as(lC(!1,St.GuardRejected))}var wm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return DL(e.redirectTo);i=i.children[re]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new td(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ar(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Em={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AL(t,e,n,r,i){let s=Nm(t,e,n);return s.matched?(r=nL(e,r),bL(r,e,n,i).pipe(ne(o=>o===!0?s:L({},Em)))):G(s)}function Nm(t,e,n){if(e.path==="**")return SL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Em):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bF)(n,t,e);if(!i)return L({},Em);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function SL(t){return{matched:!0,parameters:t.length>0?GD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function $D(t,e,n,r){return n.length>0&&PL(t,n,r)?{segmentGroup:new ye(e,NL(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&ML(t,n,r)?{segmentGroup:new ye(t.segments,RL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function RL(t,e,n,r){let i={};for(let s of n)if(id(t,e,s)&&!r[vn(s)]){let o=new ye([],{});i[vn(s)]=o}return L(L({},r),i)}function NL(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&vn(r)!==re){let i=new ye([],{});n[vn(r)]=i}return n}function PL(t,e,n){return n.some(r=>id(t,e,r)&&vn(r)!==re)}function ML(t,e,n){return n.some(r=>id(t,e,r))}function id(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function OL(t,e,n,r){return vn(t)!==r&&(r===re||!id(e,n,t))?!1:Nm(e,t,n).matched}function xL(t,e,n){return e.length===0&&!t.children[n]}var Tm=class{};function kL(t,e,n,r,i,s,o="emptyOnly"){return new bm(t,e,n,r,i,o,s).recognize()}var FL=31,bm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new wm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=$D(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(n=>{let r=new Va([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),i=new At(r,n),s=new Zl("",i),o=HF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(pr(r=>{if(r instanceof td)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ja?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Cm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ne(s=>s instanceof At?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ce(i).pipe(Mn(s=>{let o=r.children[s],a=rL(n,s);return this.processSegmentGroup(e,a,o,s)}),Uf((s,o)=>(s.push(...o),s)),gr(null),Vf(),Fe(s=>{if(s===null)return Us(r);let o=pC(s);return LL(o),G(o)}))}processSegment(e,n,r,i,s,o){return Ce(n).pipe(Mn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(pr(u=>{if(u instanceof ja)return G(null);throw u}))),on(a=>!!a),pr(a=>{if(hC(a))return xL(r,i,s)?G(new Tm):Us(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return OL(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Us(i):Us(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Nm(n,i,s);if(!a)return Us(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>FL&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Fe(y=>this.processSegment(e,r,n,y.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=AL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(It(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(It(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:y}=a,_=new Va(h,y,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,UL(r),vn(r),r.component??r._loadedComponent??null,r,jL(r)),{segmentGroup:A,slicedSegments:R}=$D(n,h,p,u);if(R.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(ne(k=>k===null?null:new At(_,k)));if(u.length===0&&R.length===0)return G(new At(_,[]));let N=vn(r)===s;return this.processSegment(l,u,A,R,N?re:s,!0).pipe(ne(k=>new At(_,k instanceof At?[k]:[])))}))):Us(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):TL(e,n,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,n).pipe(Le(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):CL(n))):G({routes:[],injector:e})}};function LL(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function VL(t){let e=t.value.routeConfig;return e&&e.path===""}function pC(t){let e=[],n=new Set;for(let r of t){if(!VL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=pC(r.children);e.push(new At(r.value,i))}return e.filter(r=>!n.has(r))}function UL(t){return t.data||{}}function jL(t){return t.resolve||{}}function BL(t,e,n,r,i,s){return Fe(o=>kL(t,e,n,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>_e(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function $L(t,e){return Fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of gC(u))o.add(l);let a=0;return Ce(o).pipe(Mn(u=>s.has(u)?HL(u,r,t,e):(u.data=Cm(u,u.parent,t).resolve,G(void 0))),Le(()=>a++),ls(1),Fe(u=>a===o.size?G(n):Dt))})}function gC(t){let e=t.children.map(n=>gC(n)).flat();return[t,...e]}function HL(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!aC(i)&&(s[$a]=i.title),qL(s,t,e,r).pipe(ne(o=>(t._resolvedData=o,t.data=Cm(t,t.parent,n).resolve,null)))}function qL(t,e,n,r){let i=tm(t);if(i.length===0)return G({});let s={};return Ce(i).pipe(Fe(o=>zL(t[o],e,n,r).pipe(on(),Le(a=>{s[o]=a}))),ls(1),Lf(s),pr(o=>hC(o)?Dt:as(o)))}function zL(t,e,n,r){let i=za(e)??r,s=Ws(t,i),o=s.resolve?s.resolve(e,n):Jt(i,()=>s(e,n));return Nr(o)}function Zg(t){return It(e=>{let n=t(e);return n?Ce(n).pipe(ne(()=>e)):G(e)})}var mC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(n){return n.data[$a]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(GL),providedIn:"root"})}}return t})(),GL=(()=>{class t extends mC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)($(FD))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Wa=new j("",{providedIn:"root",factory:()=>({})}),Ba=new j(""),Pm=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(Sl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Nr(n.loadComponent()).pipe(ne(yC),Le(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),ni(()=>{this.componentLoaders.delete(n)})),i=new rs(r,()=>new ht).pipe(ns());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=WL(r,this.compiler,n,this.onLoadEndListener).pipe(ni(()=>{this.childrenLoaders.delete(r)})),o=new rs(s,()=>new ht).pipe(ns());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function WL(t,e,n,r){return Nr(t.loadChildren()).pipe(ne(yC),Fe(i=>i instanceof fa||Array.isArray(i)?G(i):Ce(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ba,[],{optional:!0,self:!0}).flat()),{routes:o.map(Rm),injector:s}}))}function KL(t){return t&&typeof t=="object"&&"default"in t}function yC(t){return KL(t)?t.default:t}var Mm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(QL),providedIn:"root"})}}return t})(),QL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),vC=new j(""),_C=new j("");function YL(t,e,n){let r=t.get(_C),i=t.get(ot);return t.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),JL(t))),{onViewTransitionCreated:u}=r;return u&&Jt(t,()=>u({transition:a,from:e,to:n})),o})}function JL(t){return new Promise(e=>{Il(e,{injector:t})})}var Om=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=M(Pm),this.environmentInjector=M(nt),this.urlSerializer=M(Ha),this.rootContexts=M(qa),this.location=M(Ls),this.inputBindingEnabled=M(rd,{optional:!0})!==null,this.titleStrategy=M(mC),this.options=M(Wa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Mm),this.createViewTransition=M(vC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new um(i)),r=i=>this.events.next(new lm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(_e(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(s=>s.id!==0),ne(s=>_e(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),It(s=>{let o=!1,a=!1;return G(s).pipe(It(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),Dt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?_e(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Rr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Kl.IgnoredSameUrlNavigation)),u.resolve(null),Dt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(It(p=>{let y=this.transitions?.getValue();return this.events.next(new zs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Dt:Promise.resolve(p)}),BL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Le(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=_e(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new Ql(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:A,extras:R}=u,N=new zs(p,this.urlSerializer.serialize(y),_,A);this.events.next(N);let k=sC(this.rootComponentType).snapshot;return this.currentTransition=s=_e(L({},u),{targetSnapshot:k,urlAfterRedirects:y,extras:_e(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,G(s)}else{let p="";return this.events.next(new Rr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Kl.IgnoredByUrlHandlingStrategy)),u.resolve(null),Dt}}),Le(u=>{let l=new sm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=s=_e(L({},u),{guards:sL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),gL(this.environmentInjector,u=>this.events.next(u)),Le(u=>{if(s.guardsResult=u.guardsResult,qs(u.guardsResult))throw uC(this.urlSerializer,u.guardsResult);let l=new om(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),_t(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",St.GuardRejected),!1)),Zg(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Le(l=>{let h=new am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),It(l=>{let h=!1;return G(l).pipe($L(this.paramsInheritanceStrategy,this.environmentInjector),Le({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",St.NoDataFromResolver)}}))}),Le(l=>{let h=new cm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Zg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Le(y=>{h.component=y}),ne(()=>{})));for(let y of h.children)p.push(...l(y));return p};return ta(l(u.targetSnapshot.root)).pipe(gr(null),On(1))}),Zg(()=>this.afterPreactivation()),It(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ce(h).pipe(ne(()=>s)):G(s)}),ne(u=>{let l=JF(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=_e(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Le(()=>{this.events.next(new Fa)}),iL(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),On(1),Le({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $n(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Bf(this.transitionAbortSubject.pipe(Le(u=>{throw u}))),ni(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(u=>{if(a=!0,dC(u))this.events.next(new Sr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),eL(u)?this.events.next(new La(u.url)):s.resolve(!1);else{this.events.next(new ka(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return Dt}))}))}cancelNavigationTransition(n,r,i){let s=new Sr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function XL(t){return t!==Pa}var ZL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(eV),providedIn:"root"})}}return t})(),Dm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},eV=(()=>{class t extends Dm{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_a(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),IC=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(tV),providedIn:"root"})}}return t})(),tV=(()=>{class t extends IC{constructor(){super(...arguments),this.location=M(Ls),this.urlSerializer=M(Ha),this.options=M(Wa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Mm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ar,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=sC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof zs)this.stateMemento=this.createStateMemento();else if(n instanceof Rr)this.rawUrlTree=r.initialUrl;else if(n instanceof Ql){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof Fa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Sr&&(n.code===St.GuardRejected||n.code===St.NoDataFromResolver)?this.restoreHistory(r):n instanceof ka?this.restoreHistory(r,!0):n instanceof $n&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_a(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ra=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ra||{});function wC(t,e){t.events.pipe(_t(n=>n instanceof $n||n instanceof Sr||n instanceof ka||n instanceof Rr),ne(n=>n instanceof $n||n instanceof Rr?Ra.COMPLETE:(n instanceof Sr?n.code===St.Redirect||n.code===St.SupersededByNewNavigation:!1)?Ra.REDIRECTING:Ra.FAILED),_t(n=>n!==Ra.REDIRECTING),On(1)).subscribe(()=>{e()})}function nV(t){throw t}var rV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(Cl),this.stateManager=M(IC),this.options=M(Wa,{optional:!0})||{},this.pendingTasks=M(Os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(Om),this.urlSerializer=M(Ha),this.location=M(Ls),this.urlHandlingStrategy=M(Mm),this._events=new ht,this.errorHandler=this.options.errorHandler||nV,this.navigated=!1,this.routeReuseStrategy=M(ZL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(Ba,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(rd,{optional:!0}),this.eventsSubscription=new xe,this.isNgZoneEnabled=M(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Sr&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $n)this.navigated=!0;else if(r instanceof La){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||XL(i.source)};this.scheduleNavigation(o,Pa,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Rm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=tC(y)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),p=this.currentUrlTree.root}return nC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=qs(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pa,null,r)}navigate(n,r={skipLocationChange:!1}){return sV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},rV):r===!1?i=L({},iV):i=r,qs(n))return LD(this.currentUrlTree,n,i);let s=this.parseUrl(n);return LD(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return wC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function oV(t){return!(t instanceof Fa)&&!(t instanceof La)}var nd=class{};var aV=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_t(n=>n instanceof $n),Mn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=wl(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ce(i).pipe(cs())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=G(null);let s=i.pipe(Fe(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ce([s,o]).pipe(cs())}else return s})}static{this.\u0275fac=function(r){return new(r||t)($(wt),$(Sl),$(nt),$(nd),$(Pm))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),EC=new j(""),cV=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=M(nt),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof $n?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Rr&&n.code===Kl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Yl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>m(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Il(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Yl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Db()}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function TC(t,...e){return Vt([{provide:Ba,multi:!0,useValue:t},[],{provide:Ti,useFactory:bC,deps:[wt]},{provide:Ia,multi:!0,useFactory:DC},e.map(n=>n.\u0275providers)])}function bC(t){return t.routerState.root}function Ka(t,e){return{\u0275kind:t,\u0275providers:e}}function DC(){let t=M(mt);return e=>{let n=t.get(ks);if(e!==n.components[0])return;let r=t.get(wt),i=t.get(CC);t.get(xm)===1&&r.initialNavigation(),t.get(AC,null,ie.Optional)?.setUpPreloading(),t.get(EC,null,ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var CC=new j("",{factory:()=>new ht}),xm=new j("",{providedIn:"root",factory:()=>1});function uV(){return Ka(2,[{provide:xm,useValue:0},{provide:Al,multi:!0,deps:[mt],useFactory:e=>{let n=e.get(hD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(wt),s=e.get(CC);wC(i,()=>{r(!0)}),e.get(Om).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function lV(){return Ka(3,[{provide:Al,multi:!0,useFactory:()=>{let e=M(wt);return()=>{e.setUpLocationChangeListener()}}},{provide:xm,useValue:2}])}var AC=new j("");function dV(t){return Ka(0,[{provide:AC,useExisting:aV},{provide:nd,useExisting:t}])}function hV(){return Ka(8,[BD,{provide:rd,useExisting:BD}])}function fV(t){let e=[{provide:vC,useValue:YL},{provide:_C,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ka(9,e)}var HD=new j("ROUTER_FORROOT_GUARD"),pV=[Ls,{provide:Ha,useClass:Oa},wt,qa,{provide:Ti,useFactory:bC,deps:[wt]},Pm,[]],SC=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[pV,[],{provide:Ba,multi:!0,useValue:n},{provide:HD,useFactory:vV,deps:[[wt,new it,new Gp]]},{provide:Wa,useValue:r||{}},r?.useHash?mV():yV(),gV(),r?.preloadingStrategy?dV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?_V(r):[],r?.bindToComponentInputs?hV().\u0275providers:[],r?.enableViewTransitions?fV().\u0275providers:[],IV()]}}static forChild(n){return{ngModule:t,providers:[{provide:Ba,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)($(HD,8))}}static{this.\u0275mod=Ln({type:t})}static{this.\u0275inj=Fn({})}}return t})();function gV(){return{provide:EC,useFactory:()=>{let t=M(yD),e=M(pe),n=M(Wa),r=M(Om),i=M(Ha);return n.scrollOffset&&t.setOffset(n.scrollOffset),new cV(i,r,t,e,n)}}}function mV(){return{provide:_i,useClass:pD}}function yV(){return{provide:_i,useClass:Fg}}function vV(t){return"guarded"}function _V(t){return[t.initialNavigation==="disabled"?lV().\u0275providers:[],t.initialNavigation==="enabledBlocking"?uV().\u0275providers:[]]}var qD=new j("");function IV(){return[{provide:qD,useFactory:DC},{provide:Ia,multi:!0,useExisting:qD}]}var RC=(()=>{class t{constructor(){this.title="Varenie \u{1F9D1}\u200D\u{1F373}"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Er({type:t,selectors:[["app-root"]],standalone:!0,features:[xs],decls:9,vars:0,consts:[[1,"container"],[1,"header"],[1,"content"],[1,"footer"]],template:function(r,i){r&1&&(Re(0,"div",0)(1,"header",1)(2,"h1"),st(3,"\u{1F372} V\xEDkendov\xE9 varenie \u{1F9D1}\u200D\u{1F373}"),Ne()(),Re(4,"main",2),mi(5,"router-outlet"),Ne(),Re(6,"footer",3)(7,"p"),st(8,"Barto\u0161ovci"),Ne()()())},dependencies:[SC,Sm],styles:[".container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;flex-direction:column;height:50vh;background-color:#fff;color:#333;padding-top:80px;padding-bottom:60px}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#7c9a92;color:#fff;text-align:center;padding:10px;font-size:2em;z-index:1000}.content[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#fff;border-top:2px solid #7c9a92;margin-top:80px;margin-bottom:60px}.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#2a4d33;color:#fff;text-align:center;padding:10px;font-size:1.2em;z-index:1000}"]})}}return t})();var NC={production:!1,firebaseConfig:{apiKey:"AIzaSyDHAdvxfmROp0o_zVQ8ijjcilahLMBOAOs",authDomain:"fir-backend-8e4cb.firebaseapp.com",projectId:"fir-backend-8e4cb",storageBucket:"fir-backend-8e4cb.firebasestorage.app",messagingSenderId:"812493462141",appId:"1:812493462141:web:82f1b452f3b11aeff66f14",measurementId:"G-PG0CKVD1D4"}};var MC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},OC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(n[h],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Lm;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Lm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},EV=function(t){let e=MC(t);return OC.encodeByteArray(e,!0)},Qa=function(t){return EV(t).replace(/\./g,"")},Um=function(t){try{return OC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bV=()=>TV().__FIREBASE_DEFAULTS__,DV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Um(t[1]);return e&&JSON.parse(e)},od=()=>{try{return bV()||DV()||CV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jm=t=>{var e,n;return(n=(e=od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xC=t=>{let e=jm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bm=()=>{var t;return(t=od())===null||t===void 0?void 0:t.config},$m=t=>{var e;return(e=od())===null||e===void 0?void 0:e[`_${t}`]};var sd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function kC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qa(JSON.stringify(n)),Qa(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function AV(){var t;let e=(t=od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jC(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BC(){return!AV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hm(){try{return typeof indexedDB=="object"}catch{return!1}}function $C(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var SV="FirebaseError",Rt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hn.prototype.create)}},Hn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rt(i,a,r)}};function RV(t,e){return t.replace(NV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NV=/\{\$([^}]+)}/g;function HC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(PC(s)&&PC(o)){if(!bi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function PC(t){return t!==null&&typeof t=="object"}function Ya(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qC(t,e){let n=new Vm(t,e);return n.subscribe.bind(n)}var Vm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fm),i.error===void 0&&(i.error=Fm),i.complete===void 0&&(i.complete=Fm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function PV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fm(){}var bK=4*60*60*1e3;function Ye(t){return t&&t._delegate?t._delegate:t}var $t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var qm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new sd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OV(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function MV(t){return t===Di?void 0:t}function OV(t){return t.instantiationMode==="EAGER"}var ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new qm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var xV=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),kV={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},FV=ce.INFO,LV={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},VV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=LV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pr=class{constructor(e){this.name=e,this._logLevel=FV,this._logHandler=VV,this._userLogHandler=null,xV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var UV=(t,e)=>e.some(n=>t instanceof n),zC,GC;function jV(){return zC||(zC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BV(){return GC||(GC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var WC=new WeakMap,Gm=new WeakMap,KC=new WeakMap,zm=new WeakMap,Km=new WeakMap;function $V(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_n(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WC.set(n,t)}).catch(()=>{}),Km.set(e,t),e}function HV(t){if(Gm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gm.set(t,e)}var Wm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QC(t){Wm=t(Wm)}function qV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(cd(this),e,...n);return KC.set(r,e.sort?e.sort():[e]),_n(r)}:BV().includes(t)?function(...e){return t.apply(cd(this),e),_n(WC.get(this))}:function(...e){return _n(t.apply(cd(this),e))}}function zV(t){return typeof t=="function"?qV(t):(t instanceof IDBTransaction&&HV(t),UV(t,jV())?new Proxy(t,Wm):t)}function _n(t){if(t instanceof IDBRequest)return $V(t);if(zm.has(t))return zm.get(t);let e=zV(t);return e!==t&&(zm.set(t,e),Km.set(e,t)),e}var cd=t=>Km.get(t);function ud(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=_n(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_n(o.result),u.oldVersion,u.newVersion,_n(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var GV=["get","getKey","getAll","getAllKeys","count"],WV=["put","add","delete","clear"],Qm=new Map;function YC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qm.get(e))return Qm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=WV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GV.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Qm.set(e,s),s}QC(t=>_e(L({},t),{get:(e,n,r)=>YC(e,n)||t.get(e,n,r),has:(e,n)=>!!YC(e,n)||t.has(e,n)}));var Jm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function KV(t){let e=t.getComponent();return e?.type==="VERSION"}var Xm="@firebase/app",JC="0.10.13";var qn=new Pr("@firebase/app"),QV="@firebase/app-compat",YV="@firebase/analytics-compat",JV="@firebase/analytics",XV="@firebase/app-check-compat",ZV="@firebase/app-check",eU="@firebase/auth",tU="@firebase/auth-compat",nU="@firebase/database",rU="@firebase/data-connect",iU="@firebase/database-compat",sU="@firebase/functions",oU="@firebase/functions-compat",aU="@firebase/installations",cU="@firebase/installations-compat",uU="@firebase/messaging",lU="@firebase/messaging-compat",dU="@firebase/performance",hU="@firebase/performance-compat",fU="@firebase/remote-config",pU="@firebase/remote-config-compat",gU="@firebase/storage",mU="@firebase/storage-compat",yU="@firebase/firestore",vU="@firebase/vertexai-preview",_U="@firebase/firestore-compat",IU="firebase",wU="10.14.1";var Zm="[DEFAULT]",EU={[Xm]:"fire-core",[QV]:"fire-core-compat",[JV]:"fire-analytics",[YV]:"fire-analytics-compat",[ZV]:"fire-app-check",[XV]:"fire-app-check-compat",[eU]:"fire-auth",[tU]:"fire-auth-compat",[nU]:"fire-rtdb",[rU]:"fire-data-connect",[iU]:"fire-rtdb-compat",[sU]:"fire-fn",[oU]:"fire-fn-compat",[aU]:"fire-iid",[cU]:"fire-iid-compat",[uU]:"fire-fcm",[lU]:"fire-fcm-compat",[dU]:"fire-perf",[hU]:"fire-perf-compat",[fU]:"fire-rc",[pU]:"fire-rc-compat",[gU]:"fire-gcs",[mU]:"fire-gcs-compat",[yU]:"fire-fst",[_U]:"fire-fst-compat",[vU]:"fire-vertex","fire-js":"fire-js",[IU]:"fire-js-all"};var Ja=new Map,TU=new Map,ey=new Map;function XC(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Or(t){let e=t.name;if(ey.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,t);for(let n of Ja.values())XC(n,t);for(let n of TU.values())XC(n,t);return!0}function Za(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}var bU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Hn("app","Firebase",bU);var ty=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}};var xr=wU;function iy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Zm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=Bm()),!n)throw Mr.create("no-options");let s=Ja.get(i);if(s){if(bi(n,s.options)&&bi(r,s.config))return s;throw Mr.create("duplicate-app",{appName:i})}let o=new ad(i);for(let u of ey.values())o.addComponent(u);let a=new ty(n,r,o);return Ja.set(i,a),a}function Ks(t=Zm){let e=Ja.get(t);if(!e&&t===Zm&&Bm())return iy();if(!e)throw Mr.create("no-app",{appName:t});return e}function ld(){return Array.from(Ja.values())}function je(t,e,n){var r;let i=(r=EU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(a.join(" "));return}Or(new $t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var DU="firebase-heartbeat-database",CU=1,Xa="firebase-heartbeat-store",Ym=null;function n0(){return Ym||(Ym=ud(DU,CU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),Ym}function AU(t){return m(this,null,function*(){try{let n=(yield n0()).transaction(Xa),r=yield n.objectStore(Xa).get(r0(t));return yield n.done,r}catch(e){if(e instanceof Rt)qn.warn(e.message);else{let n=Mr.create("idb-get",{originalErrorMessage:e?.message});qn.warn(n.message)}}})}function ZC(t,e){return m(this,null,function*(){try{let r=(yield n0()).transaction(Xa,"readwrite");yield r.objectStore(Xa).put(e,r0(t)),yield r.done}catch(n){if(n instanceof Rt)qn.warn(n.message);else{let r=Mr.create("idb-set",{originalErrorMessage:n?.message});qn.warn(r.message)}}})}function r0(t){return`${t.name}!${t.options.appId}`}var SU=1024,RU=30*24*60*60*1e3,ny=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ry(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=e0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=RU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=e0(),{heartbeatsToSend:r,unsentEntries:i}=NU(this._heartbeatsCache.heartbeats),s=Qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return qn.warn(n),""}})}};function e0(){return new Date().toISOString().substring(0,10)}function NU(t,e=SU){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),t0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),t0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ry=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Hm()?$C().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield AU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function t0(t){return Qa(JSON.stringify({version:2,heartbeats:t})).length}function PU(t){Or(new $t("platform-logger",e=>new Jm(e),"PRIVATE")),Or(new $t("heartbeat",e=>new ny(e),"PRIVATE")),je(Xm,JC,t),je(Xm,JC,"esm2017"),je("fire-js","")}PU("");var MU="firebase",OU="10.14.1";je(MU,OU,"app");var Ai=new kn("ANGULARFIRE2_VERSION");function hd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ec=(t,e)=>{let n=e?[e]:ld(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ys=class{constructor(){return ec(xU)}},xU="app-check";function Qs(){}var dd=class{zone;delegate;constructor(e,n=xf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},sy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qs,{},Qs,Qs)),n.pipe(Le({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Js=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new dd(Zone.current)),this.insideAngular=n.run(()=>new dd(Zone.current,Of)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)($(pe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function kU(t){return fd().ngZone.runOutsideAngular(()=>t())}function Ci(t){return fd().ngZone.run(()=>t())}function FU(t){return LU(fd())(t)}function LU(t){return function(n){return n=n.lift(new sy(t.ngZone)),n.pipe(fr(t.outsideAngular),hr(t.insideAngular))}}var VU=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ci(()=>t.apply(void 0,r))},Nt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ci(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qs,{},Qs,Qs))),r[s]=VU(r[s],n));let i=kU(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=fd();return i.pipe(fr(s.outsideAngular),hr(s.insideAngular))}else return Ci(()=>i);return i instanceof oe?i.pipe(FU):i instanceof Promise?Ci(()=>new Promise((s,o)=>i.then(a=>Ci(()=>s(a)),a=>Ci(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ci(()=>i)};var Gn=class{constructor(e){return e}},Si=class{constructor(){return ld()}};function UU(t){return t&&t.length===1?t[0]:new Gn(Ks())}var oy=new j("angularfire2._apps"),jU={provide:Gn,useFactory:UU,deps:[[new it,oy]]},BU={provide:Si,deps:[[new it,oy]]};function $U(t){return(e,n)=>{let r=n.get(jt);je("angularfire",Ai.full,"core"),je("angularfire",Ai.full,"app"),je("angular",Zb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Gn(i)}}function i0(t,...e){return Vt([jU,BU,{provide:oy,useFactory:$U(t),multi:!0,deps:[pe,mt,Js,...e]}])}var s0=Nt(iy,!0);var o0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(n[h],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new cy;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},cy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qU=function(t){let e=o0(t);return a0.encodeByteArray(e,!0)},ly=function(t){return qU(t).replace(/\./g,"")},pd=function(t){try{return a0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GU=()=>zU().__FIREBASE_DEFAULTS__,WU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pd(t[1]);return e&&JSON.parse(e)},QU=()=>{try{return GU()||WU()||KU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var c0=t=>{var e;return(e=QU())===null||e===void 0?void 0:e[`_${t}`]};function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function l0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function h0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f0(){try{return typeof indexedDB=="object"}catch{return!1}}function p0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var YU="FirebaseError",en=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wn.prototype.create)}},Wn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new en(i,a,r)}};function JU(t,e){return t.replace(XU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var XU=/\{\$([^}]+)}/g;function g0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function m0(t,e){let n=new uy(t,e);return n.subscribe.bind(n)}var uy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ay(){}var h7=4*60*60*1e3;function tc(t){return t&&t._delegate?t._delegate:t}var Kn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ej=[],Te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Te||{}),tj={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},nj=Te.INFO,rj={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},ij=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=rj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Zs=class{constructor(e){this.name=e,this._logLevel=nj,this._logHandler=ij,this._userLogHandler=null,ej.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var hy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function oj(t){let e=t.getComponent();return e?.type==="VERSION"}var fy="@firebase/app",y0="0.11.1";var Qn=new Zs("@firebase/app"),aj="@firebase/app-compat",cj="@firebase/analytics-compat",uj="@firebase/analytics",lj="@firebase/app-check-compat",dj="@firebase/app-check",hj="@firebase/auth",fj="@firebase/auth-compat",pj="@firebase/database",gj="@firebase/data-connect",mj="@firebase/database-compat",yj="@firebase/functions",vj="@firebase/functions-compat",_j="@firebase/installations",Ij="@firebase/installations-compat",wj="@firebase/messaging",Ej="@firebase/messaging-compat",Tj="@firebase/performance",bj="@firebase/performance-compat",Dj="@firebase/remote-config",Cj="@firebase/remote-config-compat",Aj="@firebase/storage",Sj="@firebase/storage-compat",Rj="@firebase/firestore",Nj="@firebase/vertexai",Pj="@firebase/firestore-compat",Mj="firebase",Oj="11.3.1";var xj={[fy]:"fire-core",[aj]:"fire-core-compat",[uj]:"fire-analytics",[cj]:"fire-analytics-compat",[dj]:"fire-app-check",[lj]:"fire-app-check-compat",[hj]:"fire-auth",[fj]:"fire-auth-compat",[pj]:"fire-rtdb",[gj]:"fire-data-connect",[mj]:"fire-rtdb-compat",[yj]:"fire-fn",[vj]:"fire-fn-compat",[_j]:"fire-iid",[Ij]:"fire-iid-compat",[wj]:"fire-fcm",[Ej]:"fire-fcm-compat",[Tj]:"fire-perf",[bj]:"fire-perf-compat",[Dj]:"fire-rc",[Cj]:"fire-rc-compat",[Aj]:"fire-gcs",[Sj]:"fire-gcs-compat",[Rj]:"fire-fst",[Pj]:"fire-fst-compat",[Nj]:"fire-vertex","fire-js":"fire-js",[Mj]:"fire-js-all"};var kj=new Map,Fj=new Map,v0=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){let e=t.name;if(v0.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;v0.set(e,t);for(let n of kj.values())_0(n,t);for(let n of Fj.values())_0(n,t);return!0}function Ht(t){return t==null?!1:t.settings!==void 0}var Lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},my=new Wn("app","Firebase",Lj);var no=Oj;function eo(t,e,n){var r;let i=(r=xj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}to(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Vj="firebase-heartbeat-database",Uj=1,nc="firebase-heartbeat-store",dy=null;function T0(){return dy||(dy=ud(Vj,Uj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw my.create("idb-open",{originalErrorMessage:t.message})})),dy}function jj(t){return m(this,null,function*(){try{let n=(yield T0()).transaction(nc),r=yield n.objectStore(nc).get(b0(t));return yield n.done,r}catch(e){if(e instanceof en)Qn.warn(e.message);else{let n=my.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}})}function I0(t,e){return m(this,null,function*(){try{let r=(yield T0()).transaction(nc,"readwrite");yield r.objectStore(nc).put(e,b0(t)),yield r.done}catch(n){if(n instanceof en)Qn.warn(n.message);else{let r=my.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(r.message)}}})}function b0(t){return`${t.name}!${t.options.appId}`}var Bj=1024,$j=30,py=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new gy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=w0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>$j){let o=qj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=w0(),{heartbeatsToSend:r,unsentEntries:i}=Hj(this._heartbeatsCache.heartbeats),s=ly(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qn.warn(n),""}})}};function w0(){return new Date().toISOString().substring(0,10)}function Hj(t,e=Bj){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),E0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var gy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return f0()?p0().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield jj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function E0(t){return ly(JSON.stringify({version:2,heartbeats:t})).length}function qj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function zj(t){to(new Kn("platform-logger",e=>new hy(e),"PRIVATE")),to(new Kn("heartbeat",e=>new py(e),"PRIVATE")),eo(fy,y0,t),eo(fy,y0,"esm2017"),eo("fire-js","")}zj("");function F0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var L0=F0,V0=new Wn("auth","Firebase",F0());var Id=new Zs("@firebase/auth");function Gj(t,...e){Id.logLevel<=Te.WARN&&Id.warn(`Auth (${no}): ${t}`,...e)}function md(t,...e){Id.logLevel<=Te.ERROR&&Id.error(`Auth (${no}): ${t}`,...e)}function Xn(t,...e){throw Oy(t,...e)}function tn(t,...e){return Oy(t,...e)}function My(t,e,n){let r=Object.assign(Object.assign({},L0()),{[e]:n});return new Wn("auth","Firebase",r).create(e,{appName:t.name})}function Fr(t){return My(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U0(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(t,"argument-error"),My(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return V0.create(t,...e)}function J(t,e,...n){if(!t)throw Oy(e,...n)}function Yn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw md(e),new Error(e)}function Zn(t,e){t||Yn(e)}function _y(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wj(){return D0()==="http:"||D0()==="https:"}function D0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Kj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wj()||d0()||"connection"in navigator)?navigator.onLine:!0}function Qj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ri=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=u0()||h0()}get(){return Kj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xy(t,e){Zn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var wd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Yj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Jj=new Ri(3e4,6e4);function ky(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function oo(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return j0(t,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Xs(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:y},l);return l0()||(_.referrerPolicy="no-referrer"),wd.fetch()(B0(t,t.config.apiHost,n,p),_)}))})}function j0(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Yj),e);try{let i=new Iy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw gd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw gd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw My(t,h,l);Xn(t,h)}}catch(i){if(i instanceof en)throw i;Xn(t,"network-request-failed",{message:String(i)})}})}function Xj(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield oo(t,e,n,r,i);return"mfaPendingCredential"in l&&Xn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function B0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?xy(t.config,i):`${t.config.apiScheme}://${i}`}var Iy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),Jj.get())})}};function gd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=tn(t,e,r);return i.customData._tokenResponse=n,i}function Zj(t,e){return m(this,null,function*(){return oo(t,"POST","/v1/accounts:delete",e)})}function $0(t,e){return m(this,null,function*(){return oo(t,"POST","/v1/accounts:lookup",e)})}function rc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function H0(t,e=!1){return m(this,null,function*(){let n=tc(t),r=yield n.getIdToken(e),i=Fy(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rc(yy(i.auth_time)),issuedAtTime:rc(yy(i.iat)),expirationTime:rc(yy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function yy(t){return Number(t)*1e3}function Fy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return md("JWT malformed, contained fewer than 3 sections"),null;try{let i=pd(n);return i?JSON.parse(i):(md("Failed to decode base64 JWT payload"),null)}catch(i){return md("Caught error parsing JWT payload as JSON",i?.toString()),null}}function C0(t){let e=Fy(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function sc(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof en&&e2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function e2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var oc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ed(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield sc(t,$0(n,{idToken:r}));J(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?z0(s.providerUserInfo):[],a=t2(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function q0(t){return m(this,null,function*(){let e=tc(t);yield Ed(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function t2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z0(t){return t.map(e=>{var{providerId:n}=e,r=ti(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function n2(t,e){return m(this,null,function*(){let n=yield j0(t,{},()=>m(this,null,function*(){let r=Xs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=B0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function r2(t,e){return m(this,null,function*(){return oo(t,"POST","/v2/accounts:revokeToken",ky(t,e))})}var ic=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");let n=C0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield n2(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Yn("not implemented")}};function kr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var io=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ti(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield sc(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return H0(this,e)}reload(){return q0(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ed(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Ht(this.auth.app))return Promise.reject(Fr(this.auth));let e=yield this.getIdToken();return yield sc(this,Zj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:Ie,providerData:W,stsTokenManager:T}=n;J(F&&T,e,"internal-error");let v=ic.fromJSON(this.name,T);J(typeof F=="string",e,"internal-error"),kr(p,e.name),kr(y,e.name),J(typeof ee=="boolean",e,"internal-error"),J(typeof Ie=="boolean",e,"internal-error"),kr(_,e.name),kr(A,e.name),kr(R,e.name),kr(N,e.name),kr(k,e.name),kr(z,e.name);let I=new t({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:Ie,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:k,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new ic;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ed(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?z0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ic;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new oc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var A0=new Map;function Jn(t){Zn(t instanceof Function,"Expected a class definition");let e=A0.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A0.set(t,e),e)}var i2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ey=i2;function yd(t,e,n){return`firebase:${t}:${e}:${n}`}var Td=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=yd(this.userKey,i.apiKey,s),this.fullPersistenceKey=yd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?io._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(Jn(Ey),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Jn(Ey),o=yd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=io._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function S0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J0(e))return"Blackberry";if(X0(e))return"Webos";if(W0(e))return"Safari";if((e.includes("chrome/")||K0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function G0(t=yt()){return/firefox\//i.test(t)}function W0(t=yt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K0(t=yt()){return/crios\//i.test(t)}function Q0(t=yt()){return/iemobile/i.test(t)}function Y0(t=yt()){return/android/i.test(t)}function J0(t=yt()){return/blackberry/i.test(t)}function X0(t=yt()){return/webos/i.test(t)}function Ly(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function s2(t=yt()){var e;return Ly(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o2(t=yt()){return Ly(t)||Y0(t)||X0(t)||J0(t)||/windows phone/i.test(t)||Q0(t)}function Z0(t,e=[]){let n;switch(t){case"Browser":n=S0(yt());break;case"Worker":n=`${S0(yt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}var Ty=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function a2(n){return m(this,arguments,function*(t,e={}){return oo(t,"GET","/v2/passwordPolicy",ky(t,e))})}var c2=6,by=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:c2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Dy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bd(this),this.idTokenSubscription=new bd(this),this.beforeStateQueue=new Ty(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Td.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield $0(this,{idToken:e}),r=yield io._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(Ht(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Ed(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Qj()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Ht(this.app))return Promise.reject(Fr(this));let n=e?tc(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Ht(this.app)?Promise.reject(Fr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ht(this.app)?Promise.reject(Fr(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield a2(this),n=new by(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield r2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Jn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=yield Td.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Gj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function lc(t){return tc(t)}var bd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=m0(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vy={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u2(t){Vy=t}function l2(t){return Vy.loadJS(t)}function d2(){return Vy.gapiScript}function eA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function h2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var ac=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}};function ro(t,e){return m(this,null,function*(){return Xj(t,"POST","/v1/accounts:signInWithIdp",ky(t,e))})}var f2="http://localhost",Dd=class t extends ac{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ti(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){let e={requestUri:f2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xs(n)}return e}};var so=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Cd=class extends so{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Rd=(()=>{class t extends Cd{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Dd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var cc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield io._fromIdTokenResponse(e,r,i),o=R0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=R0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Cy=class t extends en{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function tA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cy._fromErrorAndOperation(t,s,e,r):s})}function p2(t,e,n=!1){return m(this,null,function*(){let r=yield sc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return cc._forOperation(t,"link",r)})}function g2(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(Ht(r.app))return Promise.reject(Fr(r));let i="reauthenticate";try{let s=yield sc(t,tA(r,i,e,t),n);J(s.idToken,r,"internal-error");let o=Fy(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),cc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}})}function m2(t,e,n=!1){return m(this,null,function*(){if(Ht(t.app))return Promise.reject(Fr(t));let r="signIn",i=yield tA(t,r,e),s=yield cc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}var N0="__sak";var Ay=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(N0,"1"),this.storage.removeItem(N0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var y2=(()=>{class t extends Ay{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),nA=y2;function rA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}function Lr(){return window}function v2(t){Lr().location.href=t}var H7=eA("rcb"),q7=new Ri(3e4,6e4);function Uy(t,e){return e?Jn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var uc=class extends ac{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function _2(t){return m2(t.auth,new uc(t),t.bypassAuthState)}function I2(t){let{auth:e,user:n}=t;return J(n,e,"internal-error"),g2(n,new uc(t),t.bypassAuthState)}function w2(t){return m(this,null,function*(){let{auth:e,user:n}=t;return J(n,e,"internal-error"),p2(n,new uc(t),t.bypassAuthState)})}var Ad=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _2;case"linkViaPopup":case"linkViaRedirect":return w2;case"reauthViaPopup":case"reauthViaRedirect":return I2;default:Xn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var E2=new Ri(2e3,1e4);function jy(t,e,n){return m(this,null,function*(){if(Ht(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));let r=lc(t);U0(t,e,so);let i=Uy(r,n);return new T2(r,"signInViaPopup",e,i).executeNotNull()})}var T2=(()=>{class t extends Ad{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return J(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){Zn(this.filter.length===1,"Popup operations only handle one event");let n=rA();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,E2.get())};n()}}t.currentPopupAction=null;return t})(),b2="pendingRedirect",vd=new Map,Sy=class t extends Ad{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=vd.get(this.auth._key());if(!e){try{let r=(yield D2(this.resolver,this.auth))?yield Ot(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Ot(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ot(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function D2(t,e){return m(this,null,function*(){let n=sA(e),r=iA(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function C2(t,e){return m(this,null,function*(){return iA(t)._set(sA(e),"true")})}function A2(t,e){vd.set(t._key(),e)}function iA(t){return Jn(t._redirectPersistence)}function sA(t){return yd(b2,t.config.apiKey,t.name)}function By(t,e,n){return S2(t,e,n)}function S2(t,e,n){return m(this,null,function*(){if(Ht(t.app))return Promise.reject(Fr(t));let r=lc(t);U0(t,e,so),yield r._initializationPromise;let i=Uy(r,n);return yield C2(i,r),i._openRedirect(r,e,"signInViaRedirect")})}function $y(t,e){return m(this,null,function*(){return yield lc(t)._initializationPromise,oA(t,e,!1)})}function oA(t,e,n=!1){return m(this,null,function*(){if(Ht(t.app))return Promise.reject(Fr(t));let r=lc(t),i=Uy(r,e),o=yield new Sy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var R2=10*60*1e3,Ry=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R2&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}};function P0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function N2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aA(t);default:return!1}}function P2(n){return m(this,arguments,function*(t,e={}){return oo(t,"GET","/v1/projects",e)})}var M2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O2=/^https?/;function x2(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield P2(t);for(let n of e)try{if(k2(n))return}catch{}Xn(t,"unauthorized-domain")})}function k2(t){let e=_y(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!O2.test(n))return!1;if(M2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var F2=new Ri(3e4,6e4);function M0(){let t=Lr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L2(t){return new Promise((e,n)=>{var r,i,s;function o(){M0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M0(),n(tn(t,"network-request-failed"))},timeout:F2.get()})}if(!((i=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Lr().gapi)===null||s===void 0)&&s.load)o();else{let a=eA("iframefcb");return Lr()[a]=()=>{gapi.load?o():n(tn(t,"network-request-failed"))},l2(`${d2()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw _d=null,e})}var _d=null;function V2(t){return _d=_d||L2(t),_d}var U2=new Ri(5e3,15e3),j2="__/auth/iframe",B2="emulator/auth/iframe",$2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q2(t){let e=t.config;J(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?xy(e,B2):`https://${t.config.authDomain}/${j2}`,r={apiKey:e.apiKey,appName:t.name,v:no},i=H2.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xs(r).slice(1)}`}function z2(t){return m(this,null,function*(){let e=yield V2(t),n=Lr().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:q2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$2,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=tn(t,"network-request-failed"),a=Lr().setTimeout(()=>{s(o)},U2.get());function u(){Lr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var G2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W2=500,K2=600,Q2="_blank",Y2="http://localhost",Sd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function J2(t,e,n,r=W2,i=K2){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},G2),{width:r.toString(),height:i.toString(),top:s,left:o}),l=yt().toLowerCase();n&&(a=K0(l)?Q2:n),G0(l)&&(e=e||Y2,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(s2(l)&&a!=="_self")return X2(e||"",a),new Sd(null);let p=window.open(e||"",a,h);J(p,t,"popup-blocked");try{p.focus()}catch{}return new Sd(p)}function X2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Z2="__/auth/handler",eB="emulator/auth/handler",tB=encodeURIComponent("fac");function O0(t,e,n,r,i,s){return m(this,null,function*(){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:no,eventId:i};if(e instanceof so){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",g0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Cd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${tB}=${encodeURIComponent(u)}`:"";return`${nB(t)}?${Xs(a).slice(1)}${l}`})}function nB({config:t}){return t.emulator?xy(t,eB):`https://${t.authDomain}/${Z2}`}var vy="webStorageSupport",Ny=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nA,this._completeRedirectFn=oA,this._overrideRedirectResult=A2}_openPopup(e,n,r,i){return m(this,null,function*(){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield O0(e,n,r,_y(),i);return J2(e,o,rA())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield O0(e,n,r,_y(),i);return v2(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield z2(e),r=new Ry(e);return n.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vy,{type:vy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[vy];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return o2()||W0()||Ly()}},Nd=Ny;var x0="@firebase/auth",k0="1.9.0";var Py=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function rB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iB(t){to(new Kn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z0(t)},l=new Dy(r,i,s,u);return h2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),to(new Kn("auth-internal",e=>{let n=lc(e.getProvider("auth").getImmediate());return(r=>new Py(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),eo(x0,k0,rB(t)),eo(x0,k0,"esm2017")}var sB=5*60,z7=c0("authIdTokenMaxAge")||sB;function oB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}u2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=tn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",oB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iB("Browser");function EA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var TA=EA,bA=new Hn("auth","Firebase",EA());var Fd=new Pr("@firebase/auth");function aB(t,...e){Fd.logLevel<=ce.WARN&&Fd.warn(`Auth (${xr}): ${t}`,...e)}function Md(t,...e){Fd.logLevel<=ce.ERROR&&Fd.error(`Auth (${xr}): ${t}`,...e)}function Ur(t,...e){throw cv(t,...e)}function Pi(t,...e){return cv(t,...e)}function DA(t,e,n){let r=Object.assign(Object.assign({},TA()),{[e]:n});return new Hn("auth","Firebase",r).create(e,{appName:t.name})}function Ni(t){return DA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bA.create(t,...e)}function Y(t,e,...n){if(!t)throw cv(e,...n)}function er(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Md(e),new Error(e)}function jr(t,e){t||er(e)}function Gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cB(){return cA()==="http:"||cA()==="https:"}function cA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function uB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cB()||VC()||"connection"in navigator)?navigator.onLine:!0}function lB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Mi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=FC()||UC()}get(){return uB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uv(t,e){jr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ld=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hB=new Mi(3e4,6e4);function lv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function co(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return CA(t,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ya(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:y},l);return LC()||(_.referrerPolicy="no-referrer"),Ld.fetch()(AA(t,t.config.apiHost,n,p),_)}))})}function CA(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},dB),e);try{let i=new Wy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Pd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Pd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Pd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw DA(t,h,l);Ur(t,h)}}catch(i){if(i instanceof Rt)throw i;Ur(t,"network-request-failed",{message:String(i)})}})}function fB(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield co(t,e,n,r,i);return"mfaPendingCredential"in l&&Ur(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function AA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?uv(t.config,i):`${t.config.apiScheme}://${i}`}var Wy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pi(this.auth,"network-request-failed")),hB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Pd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Pi(t,e,r);return i.customData._tokenResponse=n,i}function pB(t,e){return m(this,null,function*(){return co(t,"POST","/v1/accounts:delete",e)})}function SA(t,e){return m(this,null,function*(){return co(t,"POST","/v1/accounts:lookup",e)})}function dc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function dv(t,e=!1){return m(this,null,function*(){let n=Ye(t),r=yield n.getIdToken(e),i=hv(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:dc(Hy(i.auth_time)),issuedAtTime:dc(Hy(i.iat)),expirationTime:dc(Hy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Hy(t){return Number(t)*1e3}function hv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{let i=Um(n);return i?JSON.parse(i):(Md("Failed to decode base64 JWT payload"),null)}catch(i){return Md("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uA(t){let e=hv(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fc(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Rt&&gB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function gB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ky=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vd(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield fc(t,SA(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?RA(s.providerUserInfo):[],a=mB(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function fv(t){return m(this,null,function*(){let e=Ye(t);yield Vd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function mB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RA(t){return t.map(e=>{var{providerId:n}=e,r=ti(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function yB(t,e){return m(this,null,function*(){let n=yield CA(t,{},()=>m(this,null,function*(){let r=Ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=AA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ld.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function vB(t,e){return m(this,null,function*(){return co(t,"POST","/v2/accounts:revokeToken",lv(t,e))})}var hc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=uA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield yB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return er("not implemented")}};function Vr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ao=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ti(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ky(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield fc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return dv(this,e)}reload(){return fv(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Vd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(zn(this.auth.app))return Promise.reject(Ni(this.auth));let e=yield this.getIdToken();return yield fc(this,pB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:ee,isAnonymous:Ie,providerData:W,stsTokenManager:T}=n;Y(F&&T,e,"internal-error");let v=hc.fromJSON(this.name,T);Y(typeof F=="string",e,"internal-error"),Vr(p,e.name),Vr(y,e.name),Y(typeof ee=="boolean",e,"internal-error"),Y(typeof Ie=="boolean",e,"internal-error"),Vr(_,e.name),Vr(A,e.name),Vr(R,e.name),Vr(N,e.name),Vr(k,e.name),Vr(z,e.name);let I=new t({uid:F,auth:e,email:y,emailVerified:ee,displayName:p,isAnonymous:Ie,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:k,lastLoginAt:z});return W&&Array.isArray(W)&&(I.providerData=W.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new hc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?RA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new hc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var lA=new Map;function tr(t){jr(t instanceof Function,"Expected a class definition");let e=lA.get(t);return e?(jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lA.set(t,e),e)}var _B=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Qy=_B;function Od(t,e,n){return`firebase:${t}:${e}:${n}`}var Ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Od(this.userKey,i.apiKey,s),this.fullPersistenceKey=Od("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ao._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(tr(Qy),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||tr(Qy),o=Od(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=ao._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function dA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kA(e))return"Blackberry";if(FA(e))return"Webos";if(PA(e))return"Safari";if((e.includes("chrome/")||MA(e))&&!e.includes("edge/"))return"Chrome";if(xA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function NA(t=ze()){return/firefox\//i.test(t)}function PA(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MA(t=ze()){return/crios\//i.test(t)}function OA(t=ze()){return/iemobile/i.test(t)}function xA(t=ze()){return/android/i.test(t)}function kA(t=ze()){return/blackberry/i.test(t)}function FA(t=ze()){return/webos/i.test(t)}function pv(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IB(t=ze()){var e;return pv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wB(){return jC()&&document.documentMode===10}function LA(t=ze()){return pv(t)||xA(t)||FA(t)||kA(t)||/windows phone/i.test(t)||OA(t)}function VA(t,e=[]){let n;switch(t){case"Browser":n=dA(ze());break;case"Worker":n=`${dA(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var Yy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function EB(n){return m(this,arguments,function*(t,e={}){return co(t,"GET","/v2/passwordPolicy",lv(t,e))})}var TB=6,Jy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new Yy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ud.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield SA(this,{idToken:e}),r=yield ao._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(zn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=lB()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(zn(this.app))return Promise.reject(Ni(this));let n=e?Ye(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return zn(this.app)?Promise.reject(Ni(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zn(this.app)?Promise.reject(Ni(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield EB(this),n=new Jy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&tr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield Ud.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&aB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function gv(t){return Ye(t)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var mv={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bB(t){mv=t}function DB(t){return mv.loadJS(t)}function CB(){return mv.gapiScript}function UA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function yv(t,e){let n=Za(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(bi(s,e??{}))return i;Ur(i,"already-initialized")}return n.initialize({options:e})}function AB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function vv(t,e,n){let r=gv(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=jA(e),{host:o,port:a}=SB(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RB()}function jA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SB(t){let e=jA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:hA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:hA(o)}}}function hA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function RB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}};function qy(t,e){return m(this,null,function*(){return fB(t,"POST","/v1/accounts:signInWithIdp",lv(t,e))})}var $d=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zy=class extends $d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield ao._fromIdTokenResponse(e,r,i),o=fA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=fA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function fA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ev=class t extends Rt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function BA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ev._fromErrorAndOperation(t,s,e,r):s})}function NB(t,e,n=!1){return m(this,null,function*(){let r=yield fc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return gc._forOperation(t,"link",r)})}function PB(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(zn(r.app))return Promise.reject(Ni(r));let i="reauthenticate";try{let s=yield fc(t,BA(r,i,e,t),n);Y(s.idToken,r,"internal-error");let o=hv(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),gc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ur(r,"user-mismatch"),s}})}function MB(t,e,n=!1){return m(this,null,function*(){if(zn(t.app))return Promise.reject(Ni(t));let r="signIn",i=yield BA(t,r,e),s=yield gc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function _v(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function Iv(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function wv(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}var Hd="__sak";var qd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var OB=1e3,xB=10,kB=(()=>{class t extends qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);wB()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,xB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},OB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield Ot(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield Ot(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield Ot(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),$A=kB;var FB=(()=>{class t extends qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ev=FB;function LB(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var VB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield LB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function HA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var tv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=HA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function In(){return window}function UB(t){In().location.href=t}function qA(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}function jB(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function BB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $B(){return qA()?self:null}var zA="firebaseLocalStorageDb",HB=1,zd="firebaseLocalStorage",GA="fbase_key",Oi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Wd(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function qB(){let t=indexedDB.deleteDatabase(zA);return new Oi(t).toPromise()}function nv(){let t=indexedDB.open(zA,HB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zd,{keyPath:GA})}catch(i){n(i)}}),t.addEventListener("success",()=>m(this,null,function*(){let r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),yield qB(),e(yield nv()))}))})}function pA(t,e,n){return m(this,null,function*(){let r=Wd(t,!0).put({[GA]:e,value:n});return new Oi(r).toPromise()})}function zB(t,e){return m(this,null,function*(){let n=Wd(t,!1).get(e),r=yield new Oi(n).toPromise();return r===void 0?null:r.value})}function gA(t,e){let n=Wd(t,!0).delete(e);return new Oi(n).toPromise()}var GB=800,WB=3,KB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield nv(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>WB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return qA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=VB._getInstance($B()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,r;if(this.activeServiceWorker=yield jB(),!this.activeServiceWorker)return;this.sender=new tv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||BB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield nv();return yield pA(n,Hd,"1"),yield gA(n,Hd),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>pA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>zB(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>gA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=Wd(s,!1).getAll();return new Oi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),GB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),WA=KB;var AY=UA("rcb"),SY=new Mi(3e4,6e4);function QB(t,e){return e?tr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var mc=class extends Bd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function YB(t){return MB(t.auth,new mc(t),t.bypassAuthState)}function JB(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),PB(n,new mc(t),t.bypassAuthState)}function XB(t){return m(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),NB(n,new mc(t),t.bypassAuthState)})}var rv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YB;case"linkViaPopup":case"linkViaRedirect":return XB;case"reauthViaPopup":case"reauthViaRedirect":return JB;default:Ur(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var RY=new Mi(2e3,1e4);var ZB="pendingRedirect",xd=new Map,iv=class t extends rv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=xd.get(this.auth._key());if(!e){try{let r=(yield e$(this.resolver,this.auth))?yield Ot(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xd.set(this.auth._key(),e)}return this.bypassAuthState||xd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Ot(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ot(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function e$(t,e){return m(this,null,function*(){let n=r$(e),r=n$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function t$(t,e){xd.set(t._key(),e)}function n$(t){return tr(t._redirectPersistence)}function r$(t){return Od(ZB,t.config.apiKey,t.name)}function i$(t,e,n=!1){return m(this,null,function*(){if(zn(t.app))return Promise.reject(Ni(t));let r=gv(t),i=QB(r,e),o=yield new iv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var s$=10*60*1e3,sv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!KA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s$&&this.cachedEventUids.clear(),this.cachedEventUids.has(mA(e))}saveEventToCache(e){this.cachedEventUids.add(mA(e)),this.lastProcessedEventTime=Date.now()}};function mA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function o$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KA(t);default:return!1}}function a$(n){return m(this,arguments,function*(t,e={}){return co(t,"GET","/v1/projects",e)})}var c$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u$=/^https?/;function l$(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield a$(t);for(let n of e)try{if(d$(n))return}catch{}Ur(t,"unauthorized-domain")})}function d$(t){let e=Gy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!u$.test(n))return!1;if(c$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var h$=new Mi(3e4,6e4);function yA(){let t=In().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f$(t){return new Promise((e,n)=>{var r,i,s;function o(){yA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yA(),n(Pi(t,"network-request-failed"))},timeout:h$.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=In().gapi)===null||s===void 0)&&s.load)o();else{let a=UA("iframefcb");return In()[a]=()=>{gapi.load?o():n(Pi(t,"network-request-failed"))},DB(`${CB()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw kd=null,e})}var kd=null;function p$(t){return kd=kd||f$(t),kd}var g$=new Mi(5e3,15e3),m$="__/auth/iframe",y$="emulator/auth/iframe",v$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I$(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?uv(e,y$):`https://${t.config.authDomain}/${m$}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=_$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ya(r).slice(1)}`}function w$(t){return m(this,null,function*(){let e=yield p$(t),n=In().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:I$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v$,dontclear:!0},r=>new Promise((i,s)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Pi(t,"network-request-failed"),a=In().setTimeout(()=>{s(o)},g$.get());function u(){In().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var E$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T$=500,b$=600,D$="_blank",C$="http://localhost",Gd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function A$(t,e,n,r=T$,i=b$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},E$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=MA(l)?D$:n),NA(l)&&(e=e||C$,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(IB(l)&&a!=="_self")return S$(e||"",a),new Gd(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new Gd(p)}function S$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var R$="__/auth/handler",N$="emulator/auth/handler",P$=encodeURIComponent("fac");function vA(t,e,n,r,i,s){return m(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof $d){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",HC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Zy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${P$}=${encodeURIComponent(u)}`:"";return`${M$(t)}?${Ya(a).slice(1)}${l}`})}function M$({config:t}){return t.emulator?uv(t,N$):`https://${t.authDomain}/${R$}`}var zy="webStorageSupport",ov=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=i$,this._overrideRedirectResult=t$}_openPopup(e,n,r,i){return m(this,null,function*(){var s;jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield vA(e,n,r,Gy(),i);return A$(e,o,HA())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield vA(e,n,r,Gy(),i);return UB(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(jr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield w$(e),r=new sv(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zy,{type:zy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[zy];o!==void 0&&n(!!o),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LA()||PA()||pv()}},QA=ov;var _A="@firebase/auth",IA="1.7.9";var av=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x$(t){Or(new $t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VA(t)},l=new Xy(r,i,s,u);return AB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Or(new $t("auth-internal",e=>{let n=gv(e.getProvider("auth").getImmediate());return(r=>new av(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(_A,IA,O$(t)),je(_A,IA,"esm2017")}var k$=5*60,F$=$m("authIdTokenMaxAge")||k$,wA=null,L$=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F$)return;let i=n?.token;wA!==i&&(wA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Tv(t=Ks()){let e=Za(t,"auth");if(e.isInitialized())return e.getImmediate();let n=yv(t,{popupRedirectResolver:QA,persistence:[WA,$A,Ev]}),r=$m("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=L$(s.toString());Iv(n,o,()=>o(n.currentUser)),_v(n,a=>o(a))}}let i=jm("auth");return i&&vv(n,`http://${i}`),n}function V$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Pi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",V$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x$("Browser");var YA="auth",nn=class{constructor(e){return e}},yc=class{constructor(){return ec(YA)}};var bv=new j("angularfire2.auth-instances");function PH(t,e){let n=hd(YA,t,e);return n&&new nn(n)}function MH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nn(r)}}var OH={provide:yc,deps:[[new it,bv]]},xH={provide:nn,useFactory:PH,deps:[[new it,bv],Gn]};function JA(t,...e){return je("angularfire",Ai.full,"auth"),Vt([xH,OH,{provide:bv,useFactory:MH(t),multi:!0,deps:[pe,mt,Js,Si,[new it,Ys],...e]}])}var XA=Nt(Tv,!0);var ZA=Nt(wv,!0);var eS=()=>{let t=M(nn),e=M(wt);return new Promise(n=>{ZA(t,r=>{r?(console.log("\u2705 User is logged in:",r.email),n(!0)):(console.log("\u274C User is NOT logged in, redirecting..."),e.navigate(["/auth"]),n(!1))})})};var tS=(()=>{class t{constructor(n){this.router=n,this.auth=M(nn),this.allowedUsers=["bartos.jan454@gmail.com","peterbartos17@gmail.com","pavolbartos411@gmail.com","veronika.bartosova26@gmail.com","jan.bartos051@gmail.com"]}setAuthStateChangeListener(n){this.auth.onAuthStateChanged(r=>m(this,null,function*(){console.log("h1",r,n.feedbackMessage),yield this.handleRedirectSignIn()}))}signinWithRedirect(){let n=new Rd;try{return By(this.auth,n,Nd),{status:!0,msg:"Prebieha presmerovanie na prihl\xE1senie",color:"blue"}}catch(r){return console.error("Error starting Google login redirect:",r),{status:!1,msg:"Chyba pri presmerovan\xED, sk\xFAs to znova",color:"red"}}}handleRedirectSignIn(){return m(this,null,function*(){return $y(this.auth).then(n=>{if(console.log(n),n){let r=n.user;return this.allowedUsers.includes(r.email??"")?(console.log("Logged in successfully with Google:",r),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie!",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Neautorizovan\xE1 emailov\xE1 adresa!",color:"red"})}else return{status:!1,msg:"\u017Diadny v\xFDsledok prihl\xE1senia sa nena\u0161iel",color:"gray"}}).catch(n=>(console.error("Error handling login redirect:",n),{status:!1,msg:"Chyba pri prihlasovan\xED, sk\xFAs to znova",color:"red"}))})}signInWithPopup(){return m(this,null,function*(){let n=new Rd;try{let i=(yield jy(this.auth,n,Nd)).user;return this.allowedUsers.includes(i.email??"")?(console.log("Logged in successfully with Google!"),{status:!0,msg:"\xDAspe\u0161n\xE9 prihl\xE1senie",color:"green"}):(console.log("Unauthorized email address!"),{status:!1,msg:"Nepovolen\xE1 emailov\xE1 adresa",color:"red"})}catch(r){return r.code==="auth/cancelled-popup-request"?(console.log("User closed the popup!"),{status:!1,msg:"Prihlasovacie okno bolo zatvoren\xE9, sk\xFAs to znova",color:"red"}):(console.error("Error logging in with Google:",r),{status:!1,msg:"Pri prihlasovan\xED do\u0161lo k chybe, sk\xFAs to znova",color:"red"})}})}logOut(){return m(this,null,function*(){try{yield this.auth.signOut(),console.log("Logged out successfully"),this.router.navigate(["/auth"])}catch(n){console.error("Error logging out:",n)}})}getCurrentUser(){return this.auth.currentUser}static{this.\u0275fac=function(r){return new(r||t)($(wt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nS=(()=>{class t{constructor(n,r){this.authService=n,this.router=r,this.feedbackMessage="Pri prihlasovan\xED vysko\u010D\xED okno pre prihlasovanie, je potrebn\xE9 povoli\u0165 vyskakovacie okn\xE1 v prehliada\u010Di",this.feedbackMessageColor="gray"}signIn(){return m(this,null,function*(){let n=yield this.authService.signInWithPopup();this.feedbackMessage=n.msg,this.feedbackMessageColor=n.color,n.status&&this.router.navigate(["/"])})}static{this.\u0275fac=function(r){return new(r||t)(be(tS),be(wt))}}static{this.\u0275cmp=Er({type:t,selectors:[["app-login"]],decls:10,vars:3,consts:[[1,"login-container"],[1,"login-h"],[1,"error-message"],[3,"click"],[1,"login-subtext"]],template:function(r,i){r&1&&(Re(0,"div",0)(1,"h2",1),st(2,"Prihl\xE1si\u0165 sa \u27A1\uFE0F\u{1F513}"),Ne(),Re(3,"div",2),st(4),Ne(),Re(5,"button",3),gn("click",function(){return i.signIn()}),st(6,"cez Gmail \u{1F4E7}"),Ne(),Re(7,"div",4)(8,"span"),st(9,"Potrebn\xE9 pre overenie toto\u017Enosti, \u017Ee si Barto\u0161 \u{1F609}"),Ne()()()),r&2&&(Qe(3),El("color",i.feedbackMessageColor),Qe(),Dr(" ",i.feedbackMessage," "))},styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto auto;padding:20px;background:#f9f9f9;box-shadow:0 2px 4px #0000001a;border-radius:8px;text-align:center}button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#357ae8}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-bottom:20px}.login-subtext[_ngcontent-%COMP%]{margin-top:20px;color:gray}.login-h[_ngcontent-%COMP%]{color:#357ae8}"]})}}return t})();var rS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iS={};var Br,Dv;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(E,b,C){for(var w=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)w[Sn-2]=arguments[Sn];return v.prototype[b].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)E[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var C=T.g[3],w=v+(C^I&(b^C))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[1]+3905402710&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[2]+606105819&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[5]+1200080426&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[6]+2821735955&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[9]+2336552879&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[10]+4294925233&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(C^I&(b^C))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=C+(b^v&(I^b))+E[13]+4254626195&4294967295,C=v+(w<<12&4294967295|w>>>20),w=b+(I^C&(v^I))+E[14]+2792965006&4294967295,b=C+(w<<17&4294967295|w>>>15),w=I+(v^b&(C^v))+E[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^C&(I^b))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[6]+3225465664&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[11]+643717713&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[10]+38016083&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[15]+3634488961&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[14]+3275163606&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[3]+4107603335&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^C&(I^b))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=C+(I^b&(v^I))+E[2]+4243563512&4294967295,C=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(C^v))+E[7]+1735328473&4294967295,b=C+(w<<14&4294967295|w>>>18),w=I+(C^v&(b^C))+E[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^C)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[8]+2272392833&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[11]+1839030562&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[4]+1272893353&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[7]+4139469664&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[0]+3936430074&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[3]+3572445317&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^C)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=C+(v^I^b)+E[12]+3873151461&4294967295,C=v+(w<<11&4294967295|w>>>21),w=b+(C^v^I)+E[15]+530742520&4294967295,b=C+(w<<16&4294967295|w>>>16),w=I+(b^C^v)+E[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~C))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[7]+1126891415&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[14]+2878612391&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[3]+2399980690&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[10]+4293915773&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[15]+4264355552&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[6]+2734768916&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~C))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=C+(I^(v|~b))+E[11]+3174756917&4294967295,C=v+(w<<10&4294967295|w>>>22),w=b+(v^(C|~I))+E[2]+718787259&4294967295,b=C+(w<<15&4294967295|w>>>17),w=I+(C^(b|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,E=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(E[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,E),b=0;break}}else for(;C<v;)if(E[b++]=T[C++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)T[I++]=this.g[v]>>>E&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],E=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;E&&C==v||(I[b]=C,E=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,E=0;T>=I;E++)v[E]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),y=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);T+=(0<=E?E:4294967296+E)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,E="";;){var b=ee(I,v).g;I=k(I,b.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,A(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=k(this,T),R(T)?-1:A(T)?0:1};function N(T){for(var v=T.g.length,I=[],E=0;E<v;E++)I[E]=~T.g[E];return new o(I,~T.h).add(y)}t.abs=function(){return R(this)?N(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0,b=0;b<=v;b++){var C=E+(this.i(b)&65535)+(T.i(b)&65535),w=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);E=w>>>16,C&=65535,w&=65535,I[b]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function k(T,v){return T.add(N(v))}t.j=function(T){if(A(this)||A(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<T.g.length;b++){var C=this.i(E)>>>16,w=this.i(E)&65535,Sn=T.i(b)>>>16,xo=T.i(b)&65535;I[2*E+2*b]+=w*xo,z(I,2*E+2*b),I[2*E+2*b+1]+=C*xo,z(I,2*E+2*b+1),I[2*E+2*b+1]+=w*Sn,z(I,2*E+2*b+1),I[2*E+2*b+2]+=C*Sn,z(I,2*E+2*b+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function z(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function F(T,v){this.g=T,this.h=v}function ee(T,v){if(A(v))throw Error("division by zero");if(A(T))return new F(p,p);if(R(T))return v=ee(N(T),v),new F(N(v.g),N(v.h));if(R(v))return v=ee(T,N(v)),new F(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,E=v;0>=E.l(T);)I=Ie(I),E=Ie(E);var b=W(I,1),C=W(E,1);for(E=W(E,2),I=W(I,2);!A(E);){var w=C.add(E);0>=w.l(T)&&(b=b.add(I),C=w),E=W(E,1),I=W(I,1)}return v=k(T,b.j(v)),new F(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),w=C.j(v);R(w)||0<w.l(T);)I-=E,C=l(I),w=C.j(v);A(C)&&(C=y),b=b.add(C),T=k(T,w)}return new F(b,T)}t.A=function(T){return ee(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function Ie(T){for(var v=T.g.length+1,I=[],E=0;E<v;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function W(T,v){var I=v>>5;v%=32;for(var E=T.g.length-I,b=[],C=0;C<E;C++)b[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dv=iS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Br=iS.Integer=o}).apply(typeof rS<"u"?rS:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var Cv,FH,uo,Av,vc,Qd,Sv,Rv,Nv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,S){for(var x=Array(arguments.length-2),we=2;we<arguments.length;we++)x[we-2]=arguments[we];return d.prototype[D].apply(g,x)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,S=g.length||0;c.length=D+S;for(let x=0;x<S;x++)c[D+x]=g[x]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var Ie=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function W(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let S=0;S<I.length;S++)f=I[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Gh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=xo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xo=new k(()=>new TN,c=>c.reset());class TN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ko,Fo=!1,Gh=new Sn,jI=()=>{let c=a.Promise.resolve(void 0);ko=()=>{c.then(bN)}};var bN=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){C(f)}var d=xo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Fo=!1};function ar(){this.s=this.s,this.C=this.C}ar.prototype.s=!1,ar.prototype.ma=function(){this.s||(this.s=!0,this.N())},ar.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var DN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Lo(c,d){if(Xe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{ee(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:CN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Lo.aa.h.call(this)}}A(Lo,Xe);var CN={2:"touch",3:"pen",4:"mouse"};Lo.prototype.h=function(){Lo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Vo="closure_listenable_"+(1e6*Math.random()|0),AN=0;function SN(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++AN,this.da=this.fa=!1}function Hc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qc(c){this.src=c,this.g={},this.h=0}qc.prototype.add=function(c,d,f,g,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var x=Kh(c,d,g,D);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new SN(d,this.src,S,!!g,D),d.fa=f,c.push(d)),d};function Wh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(Hc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Kh(c,d,f,g){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var Qh="closure_lm_"+(1e6*Math.random()|0),Yh={};function BI(c,d,f,g,D){if(g&&g.once)return HI(c,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)BI(c,d[S],f,g,D);return null}return f=ef(f),c&&c[Vo]?c.K(d,f,l(g)?!!g.capture:!!g,D):$I(c,d,f,!1,g,D)}function $I(c,d,f,g,D,S){if(!d)throw Error("Invalid event type");var x=l(D)?!!D.capture:!!D,we=Xh(c);if(we||(c[Qh]=we=new qc(c)),f=we.add(d,f,g,x,S),f.proxy)return f;if(g=RN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)DN||(D=x),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(zI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function RN(){function c(f){return d.call(c.src,c.listener,f)}let d=NN;return c}function HI(c,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)HI(c,d[S],f,g,D);return null}return f=ef(f),c&&c[Vo]?c.L(d,f,l(g)?!!g.capture:!!g,D):$I(c,d,f,!0,g,D)}function qI(c,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)qI(c,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=ef(f),c&&c[Vo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Kh(S,f,g,D),-1<f&&(Hc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Xh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Kh(d,f,g,D)),(f=-1<c?d[c]:null)&&Jh(f))}function Jh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Vo])Wh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(zI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Xh(d))?(Wh(f,c),f.h==0&&(f.src=null,d[Qh]=null)):Hc(c)}}}function zI(c){return c in Yh?Yh[c]:Yh[c]="on"+c}function NN(c,d){if(c.da)c=!0;else{d=new Lo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Jh(c),c=f.call(g,d)}return c}function Xh(c){return c=c[Qh],c instanceof qc?c:null}var Zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ef(c){return typeof c=="function"?c:(c[Zh]||(c[Zh]=function(d){return c.handleEvent(d)}),c[Zh])}function Ze(){ar.call(this),this.i=new qc(this),this.M=this,this.F=null}A(Ze,ar),Ze.prototype[Vo]=!0,Ze.prototype.removeEventListener=function(c,d,f,g){qI(this,c,d,f,g)};function lt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Xe(d,c);else if(d instanceof Xe)d.target=d.target||c;else{var D=d;d=new Xe(g,c),E(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var x=d.g=f[S];D=zc(x,g,!0,d)&&D}if(x=d.g=c,D=zc(x,g,!0,d)&&D,D=zc(x,g,!1,d)&&D,f)for(S=0;S<f.length;S++)x=d.g=f[S],D=zc(x,g,!1,d)&&D}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Hc(f[g]);delete c.g[d],c.h--}}this.F=null},Ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var x=d[S];if(x&&!x.da&&x.capture==f){var we=x.listener,We=x.ha||x.src;x.fa&&Wh(c.i,x),D=we.call(We,g)!==!1&&D}}return D&&!g.defaultPrevented}function GI(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function WI(c){c.g=GI(()=>{c.g=null,c.i&&(c.i=!1,WI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class PN extends ar{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:WI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uo(c){ar.call(this),this.h=c,this.g={}}A(Uo,ar);var KI=[];function QI(c){W(c.g,function(d,f){this.g.hasOwnProperty(f)&&Jh(d)},c),c.g={}}Uo.prototype.N=function(){Uo.aa.N.call(this),QI(this)},Uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tf=a.JSON.stringify,MN=a.JSON.parse,ON=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function nf(){}nf.prototype.h=null;function YI(c){return c.h||(c.h=c.i())}function JI(){}var jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rf(){Xe.call(this,"d")}A(rf,Xe);function sf(){Xe.call(this,"c")}A(sf,Xe);var Wr={},XI=null;function Gc(){return XI=XI||new Ze}Wr.La="serverreachability";function ZI(c){Xe.call(this,Wr.La,c)}A(ZI,Xe);function Bo(c){let d=Gc();lt(d,new ZI(d))}Wr.STAT_EVENT="statevent";function ew(c,d){Xe.call(this,Wr.STAT_EVENT,c),this.stat=d}A(ew,Xe);function dt(c){let d=Gc();lt(d,new ew(d,c))}Wr.Ma="timingevent";function tw(c,d){Xe.call(this,Wr.Ma,c),this.size=d}A(tw,Xe);function $o(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function xN(c,d,f,g,D,S){c.info(function(){if(c.g)if(S)for(var x="",we=S.split("&"),We=0;We<we.length;We++){var fe=we[We].split("=");if(1<fe.length){var et=fe[0];fe=fe[1];var tt=et.split("_");x=2<=tt.length&&tt[1]=="type"?x+(et+"="+fe+"&"):x+(et+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+x})}function kN(c,d,f,g,D,S,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+x})}function Wi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+LN(c,f)+(g?" "+g:"")})}function FN(c,d){c.info(function(){return"TIMEOUT: "+d})}Ho.prototype.info=function(){};function LN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<D.length;x++)D[x]=""}}}}return tf(f)}catch{return d}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},of;function Kc(){}A(Kc,nf),Kc.prototype.g=function(){return new XMLHttpRequest},Kc.prototype.i=function(){return{}},of=new Kc;function cr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rw}function rw(){this.i=null,this.g="",this.h=!1}var iw={},af={};function cf(c,d,f){c.L=1,c.v=Xc(Rn(d)),c.m=f,c.P=!0,sw(c,null)}function sw(c,d){c.F=Date.now(),Qc(c),c.A=Rn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),_w(f.i,"t",g),c.C=0,f=c.j.J,c.h=new rw,c.g=Lw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new PN(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(KI[0]=D.toString()),D=KI);for(var S=0;S<D.length;S++){var x=BI(f,D[S],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Bo(),xN(c.i,c.u,c.A,c.l,c.R,c.m)}cr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Nn(c)==3?d.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{let tt=Nn(this.g);var d=this.g.Ba();let Yi=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Cw(this.g)))){this.J||tt!=4||d==7||(d==8||0>=Yi?Bo(3):Bo(2)),uf(this);var f=this.g.Z();this.X=f;t:if(ow(this)){var g=Cw(this.g);c="";var D=g.length,S=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),qo(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,kN(this.i,this.u,this.A,this.l,this.R,tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,We=this.g;if((we=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(we)){var fe=we;break t}}fe=null}if(f=fe)Wi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lf(this,f);else{this.o=!1,this.s=3,dt(12),Kr(this),qo(this);break e}}if(this.P){f=!0;let zt;for(;!this.J&&this.C<x.length;)if(zt=VN(this,x),zt==af){tt==4&&(this.s=4,dt(14),f=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==iw){this.s=4,dt(15),Wi(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Wi(this.i,this.l,zt,null),lf(this,zt);if(ow(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||x.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)Wi(this.i,this.l,x,"[Invalid Chunked Response]"),Kr(this),qo(this);else if(0<x.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),mf(et),et.M=!0,dt(11))}}else Wi(this.i,this.l,x,null),lf(this,x);tt==4&&Kr(this),this.o&&!this.J&&(tt==4?Ow(this.j,this):(this.o=!1,Qc(this)))}else tP(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Kr(this),qo(this)}}}catch{}finally{}};function ow(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function VN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?af:(f=Number(d.substring(f,g)),isNaN(f)?iw:(g+=1,g+f>d.length?af:(d=d.slice(g,g+f),c.C=g+f,d)))}cr.prototype.cancel=function(){this.J=!0,Kr(this)};function Qc(c){c.S=Date.now()+c.I,aw(c,c.I)}function aw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=$o(y(c.ba,c),d)}function uf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}cr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(FN(this.i,this.A),this.L!=2&&(Bo(),dt(17)),Kr(this),this.s=2,qo(this)):aw(this,this.S-c)};function qo(c){c.j.G==0||c.J||Ow(c.j,c)}function Kr(c){uf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,QI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function lf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||df(f.h,c))){if(!c.K&&df(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ru(f),tu(f);else break e;gf(f),dt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=$o(y(f.Za,f),6e3));if(1>=lw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Yr(f,11)}else if((c.K||f.g==c)&&ru(f),!z(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let fe=D[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let et=fe[3];et!=null&&(f.la=et,f.j.info("VER="+f.la));let tt=fe[4];tt!=null&&(f.Aa=tt,f.j.info("SVER="+f.Aa));let Yi=fe[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(g=1.5*Yi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zt=c.g;if(zt){let su=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(su){var S=g.h;S.g||su.indexOf("spdy")==-1&&su.indexOf("quic")==-1&&su.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(hf(S,S.h),S.h=null))}if(g.D){let yf=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;yf&&(g.ya=yf,De(g.I,g.D,yf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=Fw(g,g.J?g.ia:null,g.W),x.K){dw(g.h,x);var we=x,We=g.L;We&&(we.I=We),we.B&&(uf(we),Qc(we)),g.g=x}else Pw(g);0<f.i.length&&nu(f)}else fe[0]!="stop"&&fe[0]!="close"||Yr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Yr(f,7):pf(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Bo(4)}catch{}}var UN=class{constructor(c,d){this.g=c,this.map=d}};function cw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lw(c){return c.h?1:c.g?c.g.size:0}function df(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function hf(c,d){c.g?c.g.add(d):c.h=d}function dw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}cw.prototype.cancel=function(){if(this.i=hw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function hw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function jN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function BN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function fw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=BN(c),g=jN(c),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],c)}var pw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $N(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var S=c[f].substring(0,g);D=c[f].substring(g+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qr){this.h=c.h,Yc(this,c.j),this.o=c.o,this.g=c.g,Jc(this,c.s),this.l=c.l;var d=c.i,f=new Wo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),gw(this,f),this.m=c.m}else c&&(d=String(c).match(pw))?(this.h=!1,Yc(this,d[1]||"",!0),this.o=zo(d[2]||""),this.g=zo(d[3]||"",!0),Jc(this,d[4]),this.l=zo(d[5]||"",!0),gw(this,d[6]||"",!0),this.m=zo(d[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}Qr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Go(d,mw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Go(d,mw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Go(f,f.charAt(0)=="/"?zN:qN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Go(f,WN)),c.join("")};function Rn(c){return new Qr(c)}function Yc(c,d,f){c.j=f?zo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Jc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function gw(c,d,f){d instanceof Wo?(c.i=d,KN(c.i,c.h)):(f||(d=Go(d,GN)),c.i=new Wo(d,c.h))}function De(c,d,f){c.i.set(d,f)}function Xc(c){return De(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Go(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,HN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function HN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var mw=/[#\/\?@]/g,qN=/[#\?:]/g,zN=/[#\?]/g,GN=/[#\?@]/g,WN=/#/g;function Wo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ur(c){c.g||(c.g=new Map,c.h=0,c.i&&$N(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Wo.prototype,t.add=function(c,d){ur(this),this.i=null,c=Ki(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function yw(c,d){ur(c),d=Ki(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function vw(c,d){return ur(c),d=Ki(c,d),c.g.has(d)}t.forEach=function(c,d){ur(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},t.na=function(){ur(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},t.V=function(c){ur(this);let d=[];if(typeof c=="string")vw(this,c)&&(d=d.concat(this.g.get(Ki(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ur(this),this.i=null,c=Ki(this,c),vw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function _w(c,d,f){yw(c,d),0<f.length&&(c.i=null,c.g.set(Ki(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var D=S;x[g]!==""&&(D+="="+encodeURIComponent(String(x[g]))),c.push(D)}}return this.i=c.join("&")};function Ki(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function KN(c,d){d&&!c.j&&(ur(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(yw(this,g),_w(this,D,f))},c)),c.j=d}function QN(c,d){let f=new Ho;if(a.Image){let g=new Image;g.onload=_(lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(lr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function YN(c,d){let f=new Ho,g=new AbortController,D=setTimeout(()=>{g.abort(),lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?lr(f,"TestPingServer: ok",!0,d):lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),lr(f,"TestPingServer: error",!1,d)})}function lr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function JN(){this.g=new ON}function XN(c,d,f){let g=f||"";try{fw(c,function(D,S){let x=D;l(D)&&(x=tf(D)),d.push(g+S+"="+encodeURIComponent(x))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Ko(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Ko,nf),Ko.prototype.g=function(){return new Zc(this.l,this.j)},Ko.prototype.i=function(c){return function(){return c}}({});function Zc(c,d){Ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Zc,Ze),t=Zc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Yo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yo(this)),this.g&&(this.readyState=3,Yo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Qo(this):Yo(this),this.readyState==3&&Iw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Qo(this))},t.Qa=function(c){this.g&&(this.response=c,Qo(this))},t.ga=function(){this.g&&Qo(this)};function Qo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Yo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Yo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ww(c){let d="";return W(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ff(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ww(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):De(c,d,f))}function Pe(c){Ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Pe,Ze);var ZN=/^https?$/i,eP=["POST","PUT"];t=Pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():of.g(),this.v=this.o?YI(this.o):YI(of),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Ew(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eP,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of f)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Ew(this,S)}};function Ew(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Tw(c),eu(c)}function Tw(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bw(this):this.bb())},t.bb=function(){bw(this)};function bw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)GI(c.Ea,0,c);else if(lt(c,"readystatechange"),Nn(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var D=String(c.D).match(pw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!ZN.test(D?D.toLowerCase():"")}f=g}if(f)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var S=2<Nn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",Tw(c)}}finally{eu(c)}}}}function eu(c,d){if(c.g){Dw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||lt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Dw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),MN(d)}};function Cw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tP(c){let d={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Aw(c){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jo("baseRetryDelayMs",5e3,c),this.cb=Jo("retryDelaySeedMs",1e4,c),this.Wa=Jo("forwardChannelMaxRetries",2,c),this.wa=Jo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cw(c&&c.concurrentRequestLimit),this.Da=new JN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Aw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Fw(this,null,this.W),nu(this)};function pf(c){if(Sw(c),c.G==3){var d=c.U++,f=Rn(c.I);if(De(f,"SID",c.K),De(f,"RID",d),De(f,"TYPE","terminate"),Xo(c,f),d=new cr(c,c.j,d),d.L=2,d.v=Xc(Rn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Lw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qc(d)}kw(c)}function tu(c){c.g&&(mf(c),c.g.cancel(),c.g=null)}function Sw(c){tu(c),c.u&&(a.clearTimeout(c.u),c.u=null),ru(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function nu(c){if(!uw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ko||jI(),Fo||(ko(),Fo=!0),Gh.add(d,c),c.B=0}}function nP(c,d){return lw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=$o(y(c.Ga,c,d),xw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new cr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Nw(this,D,d),f=Rn(this.I),De(f,"RID",c),De(f,"CVER",22),this.D&&De(f,"X-HTTP-Session-Id",this.D),Xo(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(ww(S)))+"&"+d:this.m&&ff(f,this.m,S)),hf(this.h,D),this.Ua&&De(f,"TYPE","init"),this.P?(De(f,"$req",d),De(f,"SID","null"),D.T=!0,cf(D,f,null)):cf(D,f,d),this.G=2}}else this.G==3&&(c?Rw(this,c):this.i.length==0||uw(this.h)||Rw(this))};function Rw(c,d){var f;d?f=d.l:f=c.U++;let g=Rn(c.I);De(g,"SID",c.K),De(g,"RID",f),De(g,"AID",c.T),Xo(c,g),c.m&&c.o&&ff(g,c.m,c.o),f=new cr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Nw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),hf(c.h,f),cf(f,g,d)}function Xo(c,d){c.H&&W(c.H,function(f,g){De(d,g,f)}),c.l&&fw({},function(f,g){De(d,g,f)})}function Nw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let x=["count="+f];S==-1?0<f?(S=D[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let we=!0;for(let We=0;We<f;We++){let fe=D[We].g,et=D[We].map;if(fe-=S,0>fe)S=Math.max(0,D[We].g-100),we=!1;else try{XN(et,x,"req"+fe+"_")}catch{g&&g(et)}}if(we){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Pw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ko||jI(),Fo||(ko(),Fo=!0),Gh.add(d,c),c.v=0}}function gf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=$o(y(c.Fa,c),xw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Mw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$o(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),tu(this),Mw(this))};function mf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Mw(c){c.g=new cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Rn(c.qa);De(d,"RID","rpc"),De(d,"SID",c.K),De(d,"AID",c.T),De(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&De(d,"TO",c.ja),De(d,"TYPE","xmlhttp"),Xo(c,d),c.m&&c.o&&ff(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Xc(Rn(d)),f.m=null,f.P=!0,sw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,tu(this),gf(this),dt(19))};function ru(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Ow(c,d){var f=null;if(c.g==d){ru(c),mf(c),c.g=null;var g=2}else if(df(c.h,d))f=d.D,dw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Gc(),lt(g,new tw(g,f)),nu(c)}else Pw(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&nP(c,d)||g==2&&gf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Yr(c,5);break;case 4:Yr(c,10);break;case 3:Yr(c,6);break;default:Yr(c,2)}}}function xw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Yr(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let D=!g;g=new Qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yc(g,"https"),Xc(g),D?QN(g.toString(),f):YN(g.toString(),f)}else dt(2);c.G=0,c.l&&c.l.sa(d),kw(c),Sw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function kw(c){if(c.G=0,c.ka=[],c.l){let d=hw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Fw(c,d,f){var g=f instanceof Qr?Rn(f):new Qr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Jc(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new Qr(null);g&&Yc(S,g),d&&(S.g=d),D&&Jc(S,D),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&De(g,f,d),De(g,"VER",c.la),Xo(c,g),g}function Lw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new Ko({eb:f})):new Pe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vw(){}t=Vw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function iu(){}iu.prototype.g=function(c,d){return new Tt(c,d)};function Tt(c,d){Ze.call(this),this.g=new Aw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Qi(this)}A(Tt,Ze),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){pf(this.g)},Tt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=tf(c),c=f);d.i.push(new UN(d.Ya++,c)),d.G==3&&nu(d)},Tt.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,Tt.aa.N.call(this)};function Uw(c){rf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(Uw,rf);function jw(){sf.call(this),this.status=1}A(jw,sf);function Qi(c){this.g=c}A(Qi,Vw),Qi.prototype.ua=function(){lt(this.g,"a")},Qi.prototype.ta=function(c){lt(this.g,new Uw(c))},Qi.prototype.sa=function(c){lt(this.g,new jw)},Qi.prototype.ra=function(){lt(this.g,"b")},iu.prototype.createWebChannel=iu.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Nv=nr.createWebChannelTransport=function(){return new iu},Rv=nr.getStatEventTarget=function(){return Gc()},Sv=nr.Event=Wr,Qd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,vc=nr.ErrorCode=Wc,nw.COMPLETE="complete",Av=nr.EventType=nw,JI.EventType=jo,jo.OPEN="a",jo.CLOSE="b",jo.ERROR="c",jo.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,uo=nr.WebChannel=JI,FH=nr.FetchXmlHttpFactory=Ko,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Cv=nr.XhrIo=Pe}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});var sS="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Po="10.14.0";var Li=new Pr("@firebase/firestore");function _c(){return Li.logLevel}function V(t,...e){if(Li.logLevel<=ce.DEBUG){let n=e.map(lI);Li.debug(`Firestore (${Po}): ${t}`,...n)}}function rr(t,...e){if(Li.logLevel<=ce.ERROR){let n=e.map(lI);Li.error(`Firestore (${Po}): ${t}`,...n)}}function yo(t,...e){if(Li.logLevel<=ce.WARN){let n=e.map(lI);Li.warn(`Firestore (${Po}): ${t}`,...n)}}function lI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function ve(t,e){t||K()}function X(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Rt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var eh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},Fv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Lv=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new eh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Ge(e)}},Vv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Vv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new jv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function LH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var th=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=LH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Je(0,0))}static max(){return new t(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends nh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},VH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class t extends nh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return VH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new U(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var $v=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};$v.UNKNOWN_ID=-1;function UH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Vi(i,q.empty(),e)}function jH(t){return new Vi(t.readTime,t.key,-1)}var Vi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),q.empty(),-1)}static max(){return new t(te.max(),q.empty(),-1)}};function BH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var $H="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fc(t){return m(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==$H)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function HH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lc(t){return t.name==="IndexedDbTransactionError"}var FS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function xh(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function qH(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UJ=[...zH,"documentOverlays"],GH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WH=GH,KH=[...WH,"indexConfiguration","indexState","indexEntries"];var jJ=[...KH,"globals"];function oS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new po(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new po(this.root,e,this.comparator,!1)}getReverseIterator(){return new po(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new po(this.root,e,this.comparator,!0)}},po=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,s){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ct=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},rh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qt=class t{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ct(Mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ih=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ih("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var QH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(t){if(ve(!!t),typeof t=="string"){let e=0,n=QH.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}function dI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hI(t){let e=t.mapValue.fields.__previous_value__;return dI(e)?hI(e):e}function Cc(t){let e=ir(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var qv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},sh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dI(t)?4:US(t)?9007199254740991:VS(t)?10:11:K()}function Dn(t,e){if(t===e)return!0;let n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cc(t).isEqual(Cc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ir(i.timestampValue),a=ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qr(i.bytesValue).isEqual(qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Se(i.doubleValue),a=Se(s.doubleValue);return o===a?Dc(o)===Dc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vo(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oS(o)!==oS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Dn(o[u],a[u])))return!1;return!0}(t,e);default:return K()}}function Ac(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function _o(t,e){if(t===e)return 0;let n=Ui(t),r=Ui(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return aS(t.timestampValue,e.timestampValue);case 4:return aS(Cc(t),Cc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=qr(s),u=qr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(Se(s.latitude),Se(o.latitude));return a!==0?a:ge(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=ge(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:cS(_,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yd.mapValue&&o===Yd.mapValue)return 0;if(s===Yd.mapValue)return 1;if(o===Yd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=ge(u[p],h[p]);if(y!==0)return y;let _=_o(a[u[p]],l[h[p]]);if(_!==0)return _}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function aS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=ir(t),r=ir(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function cS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=_o(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Io(t){return zv(t)}function zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=zv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${zv(n.fields[o])}`;return i+"}"}(t.mapValue):K()}function Gv(t){return!!t&&"integerValue"in t}function fI(t){return!!t&&"arrayValue"in t}function uS(t){return!!t&&"nullValue"in t}function lS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function VS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function US(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Mt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=wc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(wc(this.value))}};function jS(t){let e=[];return qi(t.fields,(n,r)=>{let i=new Mt([n]);if(Xd(r)){let s=jS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new qt(e)}var sn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wo=class{constructor(e,n){this.position=e,this.inclusive=n}};function dS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}var Eo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function YH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var oh=class{},Be=class t extends oh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Kv(e,n,r):n==="array-contains"?new Jv(e,r):n==="in"?new Xv(e,r):n==="not-in"?new Zv(e,r):n==="array-contains-any"?new e_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qv(e,r):new Yv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Cn=class t extends oh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return BS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function BS(t){return t.op==="and"}function $S(t){return JH(t)&&BS(t)}function JH(t){for(let e of t.filters)if(e instanceof Cn)return!1;return!0}function Wv(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+Io(t.value);if($S(t))return t.filters.map(e=>Wv(e)).join(",");{let e=t.filters.map(n=>Wv(n)).join(",");return`${t.op}(${e})`}}function HS(t,e){return t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&HS(o,i.filters[a]),!0):!1}(t,e):void K()}function qS(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(qS).join(" ,")+"}"}(t):"Filter"}var Kv=class extends Be{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},Qv=class extends Be{constructor(e,n){super(e,"in",n),this.keys=zS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Yv=class extends Be{constructor(e,n){super(e,"not-in",n),this.keys=zS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function zS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var Jv=class extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return fI(n)&&Ac(n.arrayValue,this.value)}},Xv=class extends Be{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ac(this.value.arrayValue,n)}},Zv=class extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ac(this.value.arrayValue,n)}},e_=class extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!fI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ac(this.value.arrayValue,r))}};var t_=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function fS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new t_(t,e,n,r,i,s,o)}function pI(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Io(r)).join(",")),e.ue=n}return e.ue}function gI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hS(t.startAt,e.startAt)&&hS(t.endAt,e.endAt)}function n_(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var To=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function XH(t,e,n,r,i,s,o,a){return new To(t,e,n,r,i,s,o,a)}function mI(t){return new To(t)}function pS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZH(t){return t.collectionGroup!==null}function Ec(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(Mt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Eo(s,r))}),n.has(Mt.keyField().canonicalString())||e.ce.push(new Eo(Mt.keyField(),r))}return e.ce}function Tn(t){let e=X(t);return e.le||(e.le=eq(e,Ec(t))),e.le}function eq(t,e){if(t.limitType==="F")return fS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Eo(i.field,s)});let n=t.endAt?new wo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wo(t.startAt.position,t.startAt.inclusive):null;return fS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r_(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return gI(Tn(t),Tn(e))&&t.limitType===e.limitType}function GS(t){return`${pI(Tn(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qS(i)).join(", ")}]`),xh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Io(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Io(i)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Fh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ec(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=dS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ec(r),i)||r.endAt&&!function(o,a,u){let l=dS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ec(r),i))}(t,e)}function tq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WS(t){return(e,n)=>{let r=!1;for(let i of Ec(t)){let s=nq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nq(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?_o(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var zr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return LS(this.inner)}size(){return this.innerSize}};var rq=new Oe(q.comparator);function sr(){return rq}var KS=new Oe(q.comparator);function Ic(...t){let e=KS;for(let n of t)e=e.insert(n.key,n);return e}function QS(t){let e=KS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xi(){return Tc()}function YS(){return Tc()}function Tc(){return new zr(t=>t.toString(),(t,e)=>t.isEqual(e))}var iq=new Oe(q.comparator),sq=new ct(q.comparator);function ue(...t){let e=sq;for(let n of t)e=e.add(n);return e}var oq=new ct(ge);function aq(){return oq}function yI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function JS(t){return{integerValue:""+t}}function cq(t,e){return qH(e)?JS(e):yI(t,e)}var bo=class{constructor(){this._=void 0}};function uq(t,e,n){return t instanceof Do?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dI(s)&&(s=hI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ji?ZS(t,e):t instanceof Bi?eR(t,e):function(i,s){let o=XS(i,s),a=gS(o)+gS(i.Pe);return Gv(o)&&Gv(i.Pe)?JS(a):yI(i.serializer,a)}(t,e)}function lq(t,e,n){return t instanceof ji?ZS(t,e):t instanceof Bi?eR(t,e):n}function XS(t,e){return t instanceof Co?function(r){return Gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Do=class extends bo{},ji=class extends bo{constructor(e){super(),this.elements=e}};function ZS(t,e){let n=tR(e);for(let r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Bi=class extends bo{constructor(e){super(),this.elements=e}};function eR(t,e){let n=tR(e);for(let r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}var Co=class extends bo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function gS(t){return Se(t.integerValue||t.doubleValue)}function tR(t){return fI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ji&&i instanceof ji||r instanceof Bi&&i instanceof Bi?vo(r.elements,i.elements,Dn):r instanceof Co&&i instanceof Co?Dn(r.Pe,i.Pe):r instanceof Do&&i instanceof Do}(t.transform,e.transform)}var i_=class{constructor(e,n){this.version=e,this.transformResults=n}},$r=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ao=class{};function nR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ah(t.key,$r.none()):new $i(t.key,t.data,$r.none());{let n=t.data,r=Pt.empty(),i=new ct(Mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new An(t.key,r,new qt(i.toArray()),$r.none())}}function hq(t,e,n){t instanceof $i?function(i,s,o){let a=i.value.clone(),u=yS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof An?function(i,s,o){if(!Zd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=yS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(rR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bc(t,e,n,r){return t instanceof $i?function(s,o,a,u){if(!Zd(s.precondition,o))return a;let l=s.value.clone(),h=vS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof An?function(s,o,a,u){if(!Zd(s.precondition,o))return a;let l=vS(s.fieldTransforms,u,o),h=o.data;return h.setAll(rR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Zd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function fq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=XS(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function mS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vo(r,i,(s,o)=>dq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $i=class extends Ao{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends Ao{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function rR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yS(t,e,n){let r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lq(o,a,n[i]))}return r}function vS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,uq(s,o,e))}return r}var ah=class extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},s_=class extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var o_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&hq(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=YS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=nR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,r)=>mS(n,r))&&vo(this.baseMutations,e.baseMutations,(n,r)=>mS(n,r))}},a_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return iq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var c_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var u_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,he;function pq(t){switch(t){default:return K();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function iR(t){if(t===void 0)return rr("GRPC error has no .code"),P.UNKNOWN;switch(t){case Ve.OK:return P.OK;case Ve.CANCELLED:return P.CANCELLED;case Ve.UNKNOWN:return P.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return P.INTERNAL;case Ve.UNAVAILABLE:return P.UNAVAILABLE;case Ve.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ve.NOT_FOUND:return P.NOT_FOUND;case Ve.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ve.ABORTED:return P.ABORTED;case Ve.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ve.DATA_LOSS:return P.DATA_LOSS;default:return K()}}(he=Ve||(Ve={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var _S=null;function gq(){return new TextEncoder}var mq=new Br([4294967295,4294967295],0);function IS(t){let e=gq().encode(t),n=new Dv;return n.update(e),new Uint8Array(n.digest())}function wS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,s],0)]}var l_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ki(`Invalid padding: ${n}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ki(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Br.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(mq)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=IS(e),[r,i]=wS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=IS(e),[r,i]=wS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ch=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Oe(ge),sr(),ue())}},Sc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var go=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},uh=class{constructor(e,n){this.targetId=e,this.me=n}},lh=class{constructor(e,n,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},dh=class{constructor(){this.fe=0,this.ge=TS(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Sc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=TS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},d_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=ES(),this.Qe=new Oe(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(n_(s))if(r===0){let o=new q(s.path);this.Ue(n,o,sn.newNoDocument(o,te.min()))}else ve(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}_S?.et(function(h,p,y,_,A){var R,N,k,z,F,ee;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},W=p.unchangedNames;return W&&(Ie.bloomFilter={applied:A===0,hashCount:(R=W?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(z=(k=(N=W?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&z!==void 0?z:0,padding:(ee=(F=W?.bits)===null||F===void 0?void 0:F.padding)!==null&&ee!==void 0?ee:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=qr(r).toUint8Array()}catch(u){if(u instanceof ih)return yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new l_(o,i,s)}catch(u){return yo(u instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&n_(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ch(e,n,this.Qe,this.ke,r);return this.ke=sr(),this.qe=ES(),this.Qe=new Oe(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function ES(){return new Oe(q.comparator)}function TS(){return new Oe(q.comparator)}var yq={asc:"ASCENDING",desc:"DESCENDING"},vq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_q={and:"AND",or:"OR"},h_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function f_(t,e){return t.useProto3Json||xh(e)?e:{value:e}}function hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Iq(t,e){return hh(t,e.toTimestamp())}function bn(t){return ve(!!t),te.fromTimestamp(function(n){let r=ir(n);return new Je(r.seconds,r.nanos)}(t))}function vI(t,e){return p_(t,e).canonicalString()}function p_(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oR(t){let e=Me.fromString(t);return ve(dR(e)),e}function g_(t,e){return vI(t.databaseId,e.path)}function Pv(t,e){let n=oR(e);if(n.get(1)!==t.databaseId.projectId)throw new U(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(cR(n))}function aR(t,e){return vI(t.databaseId,e)}function wq(t){let e=oR(t);return e.length===4?Me.emptyPath():cR(e)}function m_(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cR(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bS(t,e,n){return{name:g_(t,e),fields:n.value.mapValue.fields}}function Eq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string"),ut.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?P.UNKNOWN:iR(l.code);return new U(h,l.message||"")}(o);n=new lh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pv(t,r.document.name),s=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):te.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new go(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pv(t,r.document),s=r.readTime?bn(r.readTime):te.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new go([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pv(t,r.document),s=r.removedTargetIds||[];n=new go([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new u_(i,s),a=r.targetId;n=new uh(a,o)}}return n}function Tq(t,e){let n;if(e instanceof $i)n={update:bS(t,e.key,e.value)};else if(e instanceof ah)n={delete:g_(t,e.key)};else if(e instanceof An)n={update:bS(t,e.key,e.data),updateMask:Mq(e.fieldMask)};else{if(!(e instanceof s_))return K();n={verify:g_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Do)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ji)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Co)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Iq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function bq(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?bn(i.updateTime):bn(s);return o.isEqual(te.min())&&(o=bn(s)),new i_(o,i.transformResults||[])}(n,e))):[]}function Dq(t,e){return{documents:[aR(t,e.path)]}}function Cq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aR(t,i);let s=function(l){if(l.length!==0)return lR(Cn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:ho(y.field),direction:Rq(y.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=f_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Aq(t){let e=wq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let y=uR(p);return y instanceof Cn&&$S(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(A){return new Eo(fo(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,xh(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new wo(_,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new wo(_,y)}(n.endAt)),XH(e,i,o,s,a,"F",u,l)}function Sq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=fo(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fo(n.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=fo(n.unaryFilter.field);return Be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=fo(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>uR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function Rq(t){return yq[t]}function Nq(t){return vq[t]}function Pq(t){return _q[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return Mt.fromServerFormat(t.fieldPath)}function lR(t){return t instanceof Be?function(n){if(n.op==="=="){if(lS(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(uS(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lS(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(uS(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:Nq(n.op),value:n.value}}}(t):t instanceof Cn?function(n){let r=n.getFilters().map(i=>lR(i));return r.length===1?r[0]:{compositeFilter:{op:Pq(n.op),filters:r}}}(t):K()}function Mq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Rc=class t{constructor(e,n,r,i,s=te.min(),o=te.min(),a=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var y_=class{constructor(e){this.ct=e}};function Oq(t){let e=Aq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?r_(e,e.limit,"L"):e}var fh=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Dc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ir(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(qr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?US(e)?this.dt(n,Number.MAX_SAFE_INTEGER):VS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Se(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};fh.vt=new fh;var v_=class{constructor(){this.un=new __}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Vi.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},__=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ct(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ct(Me.comparator)).toArray()}};var $J=new Uint8Array(0);var wn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(41943040,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);var Nc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var I_=class{constructor(){this.changes=new zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var w_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var E_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bc(r.mutation,i,qt.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ic();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=sr(),o=Tc(),a=function(){return Tc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof An)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),bc(h.mutation,l,h.mutation.getFieldMask(),Je.now())):o.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new w_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Tc(),i=new Oe((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=YS();h.forEach(y=>{if(!s.has(y)){let _=nR(n.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(xi()),a=-1,u=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:QS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ic();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{let l=function(p,y){return new To(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let a=Ic();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&bc(h.mutation,l,qt.empty(),Je.now()),Fh(n,l)&&(a=a.insert(u,l))}),a})}};var T_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Oq(i.bundledQuery),readTime:bn(i.readTime)}}(n)),O.resolve()}};var b_=class{constructor(){this.overlays=new Oe(q.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xi();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=xi(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=xi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=xi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c_(n,r));let s=this.Ir.get(n);s===void 0&&(s=ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var D_=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var Pc=class{constructor(){this.Tr=new ct(Ue.Er),this.dr=new ct(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new Me([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new Me([])),r=new Ue(n,e),i=new Ue(n,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||q.comparator(e.key,n.key)}};var C_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(Ue.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new o_(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ue(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ge);return n.forEach(i=>{let s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new Ue(new q(s),0),a=new ct(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var A_=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=sr(),o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||BH(jH(h),r)<=0||(i.has(h.key)||Fh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new S_(this)}getSize(e){return O.resolve(this.size)}},S_=class extends I_{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var R_=class{constructor(e){this.persistence=e,this.Nr=new zr(n=>pI(n),gI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pc,this.targetCount=0,this.kr=Nc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Nc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var N_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new FS(0),this.Kr=!1,this.Kr=!0,this.$r=new D_,this.referenceDelegate=e(this),this.Ur=new R_(this),this.indexManager=new v_,this.remoteDocumentCache=function(i){return new A_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new y_(n),this.Gr=new T_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new b_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new C_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new P_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},P_=class extends Hv{constructor(e){super(),this.currentSequenceNumber=e}},M_=class t{constructor(e){this.persistence=e,this.Jr=new Pc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var O_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var x_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var k_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BC()?8:HH(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new x_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(_c()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(_c()<=ce.DEBUG&&V("QueryEngine","Query:",lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_c()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):O.resolve())}Yi(e,n){if(pS(n))return O.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=r_(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,r_(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return pS(n)||i.isEqual(te.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):(_c()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lo(n)),this.rs(e,o,n,UH(i,-1)).next(a=>a))})}ts(e,n){let r=new ct(WS(e));return n.forEach((i,s)=>{Fh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return _c()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",lo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var F_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Oe(ge),this._s=new zr(s=>pI(s),gI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function xq(t,e,n,r){return new F_(t,e,n,r)}function hR(t,e){return m(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function kq(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=O.resolve();return y.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(R=>{let N=l.docVersions.get(A);ve(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fR(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Fq(t,e){let n=X(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ut.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(R,N,k){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let u=sr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Lq(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function Lq(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=sr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Vq(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uq(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Rc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function L_(t,e,n){return m(this,null,function*(){let r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Lc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function DS(t,e,n){let r=X(t),i=te.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),y=p._s.get(h);return y!==void 0?O.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:ue())).next(a=>(jq(r,tq(e),a),{documents:a,Ts:s})))}function jq(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var ph=class{constructor(){this.activeTargetIds=aq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var V_=class{constructor(){this.so=new ph,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ph,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var U_=class{_o(e){}shutdown(){}};var gh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jd=null;function Mv(){return Jd===null?Jd=function(){return 268435456+Math.round(2147483648*Math.random())}():Jd++,"0x"+Jd.toString(16)}var Bq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var j_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var at="WebChannelConnection",B_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Mv(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw yo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=Bq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Mv();return new Promise((o,a)=>{let u=new Cv;u.setWithCredentials(!0),u.listenOnce(Av.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vc.NO_ERROR:let h=u.getResponseJson();V(at,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vc.TIMEOUT:V(at,`RPC '${e}' ${s} timed out`),a(new U(P.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:let p=u.getStatus();if(V(at,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(N){let k=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(k)>=0?k:P.UNKNOWN}(_.status);a(new U(A,_.message))}else a(new U(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new U(P.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(at,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(at,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Mv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nv(),a=Rv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(at,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),y=!1,_=!1,A=new j_({Io:N=>{_?V(at,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(V(at,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),V(at,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,k,z)=>{N.listen(k,F=>{try{z(F)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(p,uo.EventType.OPEN,()=>{_||(V(at,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),R(p,uo.EventType.CLOSE,()=>{_||(_=!0,V(at,`RPC '${e}' stream ${i} transport closed`),A.So())}),R(p,uo.EventType.ERROR,N=>{_||(_=!0,yo(at,`RPC '${e}' stream ${i} transport errored:`,N),A.So(new U(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,uo.EventType.MESSAGE,N=>{var k;if(!_){let z=N.data[0];ve(!!z);let F=z,ee=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(ee){V(at,`RPC '${e}' stream ${i} received error:`,ee);let Ie=ee.status,W=function(I){let E=Ve[I];if(E!==void 0)return iR(E)}(Ie),T=ee.message;W===void 0&&(W=P.INTERNAL,T="Unknown error status: "+Ie+" with message "+ee.message),_=!0,A.So(new U(W,T)),p.close()}else V(at,`RPC '${e}' stream ${i} received:`,z),A.bo(z)}}),R(a,Sv.STAT_EVENT,N=>{N.stat===Qd.PROXY?V(at,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Qd.NOPROXY&&V(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Ov(){return typeof document<"u"?document:null}function Lh(t){return new h_(t,!0)}var mh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yh=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new U(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$_=class extends yh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Eq(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?bn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=m_(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=n_(u)?{documents:Dq(s,u)}:{query:Cq(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sR(s,o.resumeToken);let l=f_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=hh(s,o.snapshotVersion.toTimestamp());let l=f_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Sq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=m_(this.serializer),n.removeTarget=e,this.a_(n)}},H_=class extends yh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=bq(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=m_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Tq(this.serializer,r))};this.a_(n)}};var q_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,p_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(P.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,p_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},z_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rr(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var G_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>m(this,null,function*(){zi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=X(u);l.L_.add(4),yield Vc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Vh(l)})}(this))}))}),this.q_=new z_(r,i)}};function Vh(t){return m(this,null,function*(){if(zi(t))for(let e of t.B_)yield e(!0)})}function Vc(t){return m(this,null,function*(){for(let e of t.B_)yield e(!1)})}function pR(t,e){let n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),EI(n)?wI(n):Mo(n).r_()&&II(n,e))}function _I(t,e){let n=X(t),r=Mo(n);n.N_.delete(e),r.r_()&&gR(n,e),n.N_.size===0&&(r.r_()?r.o_():zi(n)&&n.q_.set("Unknown"))}function II(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function gR(t,e){t.Q_.xe(e),Mo(t).R_(e)}function wI(t){t.Q_=new d_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function EI(t){return zi(t)&&!Mo(t).n_()&&t.N_.size>0}function zi(t){return X(t).L_.size===0}function mR(t){t.Q_=void 0}function $q(t){return m(this,null,function*(){t.q_.set("Online")})}function Hq(t){return m(this,null,function*(){t.N_.forEach((e,n)=>{II(t,e)})})}function qq(t,e){return m(this,null,function*(){mR(t),EI(t)?(t.q_.M_(e),wI(t)):t.q_.set("Unknown")})}function zq(t,e,n){return m(this,null,function*(){if(t.q_.set("Online"),e instanceof lh&&e.state===2&&e.cause)try{yield function(i,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vh(t,r)}else if(e instanceof go?t.Q_.Ke(e):e instanceof uh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{let r=yield fR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),gR(s,u);let p=new Rc(h.target,u,l,h.sequenceNumber);II(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield vh(t,r)}})}function vh(t,e,n){return m(this,null,function*(){if(!Lc(e))throw e;t.L_.add(1),yield Vc(t),t.q_.set("Offline"),n||(n=()=>fR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Vh(t)}))})}function yR(t,e){return e().catch(n=>vh(t,n,e))}function Uh(t){return m(this,null,function*(){let e=X(t),n=Gr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Gq(e);)try{let i=yield Vq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Wq(e,i)}catch(i){yield vh(e,i)}vR(e)&&_R(e)})}function Gq(t){return zi(t)&&t.O_.length<10}function Wq(t,e){t.O_.push(e);let n=Gr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vR(t){return zi(t)&&!Gr(t).n_()&&t.O_.length>0}function _R(t){Gr(t).start()}function Kq(t){return m(this,null,function*(){Gr(t).p_()})}function Qq(t){return m(this,null,function*(){let e=Gr(t);for(let n of t.O_)e.m_(n.mutations)})}function Yq(t,e,n){return m(this,null,function*(){let r=t.O_.shift(),i=a_.from(r,e,n);yield yR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Uh(t)})}function Jq(t,e){return m(this,null,function*(){e&&Gr(t).V_&&(yield function(r,i){return m(this,null,function*(){if(function(o){return pq(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();Gr(r).s_(),yield yR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Uh(r)}})}(t,e)),vR(t)&&_R(t)})}function CS(t,e){return m(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=zi(n);n.L_.add(3),yield Vc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Vh(n)})}function Xq(t,e){return m(this,null,function*(){let n=X(t);e?(n.L_.delete(2),yield Vh(n)):e||(n.L_.add(2),yield Vc(n),n.q_.set("Unknown"))})}function Mo(t){return t.K_||(t.K_=function(n,r,i){let s=X(n);return s.w_(),new $_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:$q.bind(null,t),Ro:Hq.bind(null,t),mo:qq.bind(null,t),d_:zq.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.K_.s_(),EI(t)?wI(t):t.q_.set("Unknown")):(yield t.K_.stop(),mR(t))}))),t.K_}function Gr(t){return t.U_||(t.U_=function(n,r,i){let s=X(n);return s.w_(),new H_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Kq.bind(null,t),mo:Jq.bind(null,t),f_:Qq.bind(null,t),g_:Yq.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.U_.s_(),yield Uh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var W_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function TI(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Lc(t))return new U(P.UNAVAILABLE,`${e}: ${t}`);throw t}var _h=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ic(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ih=class{constructor(){this.W_=new Oe(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},So=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,_h.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var K_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Q_=class{constructor(){this.queries=AS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=X(n),s=i.queries;i.queries=AS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new U(P.ABORTED,"Firestore shutting down"))}};function AS(){return new zr(t=>GS(t),kh)}function IR(t,e){return m(this,null,function*(){let n=X(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new K_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=TI(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bI(n)})}function wR(t,e){return m(this,null,function*(){let n=X(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Zq(t,e){let n=X(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bI(n)}function ez(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function bI(t){t.Y_.forEach(e=>{e.next()})}var Y_,SS;(SS=Y_||(Y_={})).ea="default",SS.Cache="cache";var wh=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Y_.Cache}};var Eh=class{constructor(e){this.key=e}},Th=class{constructor(e){this.key=e}},J_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=WS(e),this.Ra=new _h(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Ih,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=Fh(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;y&&_?y.data.isEqual(_.data)?A!==R&&(r.track({type:3,doc:_}),N=!0):this.ga(y,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),N=!0):y&&!_&&(r.track({type:1,doc:y}),N=!0,(u||l)&&(a=!0)),N&&(_?(o=o.add(_),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,A){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return R(_)-R(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new So(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ih,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Th(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Eh(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return So.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},X_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Z_=class{constructor(e){this.key=e,this.va=!1}},eI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new zr(a=>GS(a),kh),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(q.comparator),this.Na=new Map,this.La=new Pc,this.Ba={},this.ka=new Map,this.qa=Nc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function tz(t,e,n=!0){return m(this,null,function*(){let r=AR(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield ER(r,e,n,!0),i})}function nz(t,e){return m(this,null,function*(){let n=AR(t);yield ER(n,e,!0,!1)})}function ER(t,e,n,r){return m(this,null,function*(){let i=yield Uq(t.localStore,Tn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield rz(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&pR(t.remoteStore,i),a})}function rz(t,e,n,r,i){return m(this,null,function*(){t.Ka=(p,y,_)=>function(R,N,k,z){return m(this,null,function*(){let F=N.view.ma(k);F.ns&&(F=yield DS(R.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,F)));let ee=z&&z.targetChanges.get(N.targetId),Ie=z&&z.targetMismatches.get(N.targetId)!=null,W=N.view.applyChanges(F,R.isPrimaryClient,ee,Ie);return NS(R,N.targetId,W.wa),W.snapshot})}(t,p,y,_);let s=yield DS(t.localStore,e,!0),o=new J_(e,s.Ts),a=o.ma(s.documents),u=Sc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);NS(t,n,l.wa);let h=new X_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function iz(t,e,n){return m(this,null,function*(){let r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!kh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield L_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_I(r.remoteStore,i.targetId),tI(r,i.targetId)}).catch(Fc))):(tI(r,i.targetId),yield L_(r.localStore,i.targetId,!0))})}function sz(t,e){return m(this,null,function*(){let n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_I(n.remoteStore,r.targetId))})}function oz(t,e,n){return m(this,null,function*(){let r=fz(t);try{let i=yield function(o,a){let u=X(o),l=Je.now(),h=a.reduce((_,A)=>_.add(A.key),ue()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=sr(),R=ue();return u.cs.getEntries(_,h).next(N=>{A=N,A.forEach((k,z)=>{z.isValidDocument()||(R=R.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(N=>{p=N;let k=[];for(let z of a){let F=fq(z,p.get(z.key).overlayedDocument);F!=null&&k.push(new An(z.key,F,jS(F.value.mapValue),$r.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,k,a)}).next(N=>{y=N;let k=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(_,N.batchId,k)})}).then(()=>({batchId:y.batchId,changes:QS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Oe(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Uc(r,i.changes),yield Uh(r.remoteStore)}catch(i){let s=TI(i,"Failed to persist write");n.reject(s)}})}function TR(t,e){return m(this,null,function*(){let n=X(t);try{let r=yield Fq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ve(o.va):i.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield Uc(n,r,e)}catch(r){yield Fc(r)}})}function RS(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&bI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function az(t,e,n){return m(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Oe(q.comparator);o=o.insert(s,sn.newNoDocument(s,te.min()));let a=ue().add(s),u=new ch(te.min(),new Map,new Oe(ge),o,a);yield TR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),DI(r)}else yield L_(r.localStore,e,!1).then(()=>tI(r,e,n)).catch(Fc)})}function cz(t,e){return m(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield kq(n.localStore,e);DR(n,r,null),bR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Uc(n,i)}catch(i){yield Fc(i)}})}function uz(t,e,n){return m(this,null,function*(){let r=X(t);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);DR(r,e,n),bR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Uc(r,i)}catch(i){yield Fc(i)}})}function bR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function DR(t,e,n){let r=X(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CR(t,r)})}function CR(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(_I(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),DI(t))}function NS(t,e,n){for(let r of n)r instanceof Eh?(t.La.addReference(r.key,e),lz(t,r)):r instanceof Th?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CR(t,r.key)):K()}function lz(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),DI(t))}function DI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new Z_(n)),t.Oa=t.Oa.insert(n,r),pR(t.remoteStore,new Rc(Tn(mI(n.path)),r,"TargetPurposeLimboResolution",FS.oe))}}function Uc(t,e,n){return m(this,null,function*(){let r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=O_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,y=>O.forEach(y.$i,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>O.forEach(y.Ui,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!Lc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.os.get(y),A=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(y,R)}}})}(r.localStore,s))})}function dz(t,e){return m(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield hR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new U(P.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uc(n,r.hs)}})}function hz(t,e){let n=X(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function AR(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=az.bind(null,e),e.Ca.d_=Zq.bind(null,e.eventManager),e.Ca.$a=ez.bind(null,e.eventManager),e}function fz(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uz.bind(null,e),e}var PS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return m(this,null,function*(){this.serializer=Lh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return xq(this.persistence,new k_,n.initialUser,this.serializer)}Ga(n){return new N_(M_.Zr,this.serializer)}Wa(n){return new V_}terminate(){return m(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var pz=(()=>{class t{initialize(n,r){return m(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dz.bind(null,this.syncEngine),yield Xq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Q_}()}createDatastore(n){let r=Lh(n.databaseInfo.databaseId),i=function(o){return new B_(o)}(n.databaseInfo);return function(o,a,u,l){return new q_(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new G_(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>RS(this.syncEngine,r,0),function(){return gh.D()?new gh:new U_}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let y=new eI(s,o,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var n,r;yield function(s){return m(this,null,function*(){let o=X(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Vc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var bh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var nI=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>m(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=TI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xv(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield hR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function MS(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield gz(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>CS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>CS(e.remoteStore,i)),t._onlineComponents=e})}function gz(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),yield xv(t,new PS)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield xv(t,new PS);return t._offlineComponents})}function SR(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield MS(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield MS(t,new pz))),t._onlineComponents})}function mz(t){return SR(t).then(e=>e.syncEngine)}function RR(t){return m(this,null,function*(){let e=yield SR(t),n=e.eventManager;return n.onListen=tz.bind(null,e.syncEngine),n.onUnlisten=iz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sz.bind(null,e.syncEngine),n})}function yz(t,e,n={}){let r=new rn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,u,l){let h=new bh({next:y=>{h.Za(),o.enqueueAndForget(()=>wR(s,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new U(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new U(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new wh(mI(a.path),h,{includeMetadataChanges:!0,_a:!0});return IR(s,p)}(yield RR(t),t.asyncQueue,e,n,r)})),r.promise}function vz(t,e,n={}){let r=new rn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,u,l){let h=new bh({next:y=>{h.Za(),o.enqueueAndForget(()=>wR(s,p)),y.fromCache&&u.source==="server"?l.reject(new U(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new wh(a,h,{includeMetadataChanges:!0,_a:!0});return IR(s,p)}(yield RR(t),t.asyncQueue,e,n,r)})),r.promise}function NR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var OS=new Map;function PR(t,e,n){if(!n)throw new U(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _z(t,e,n,r){if(e===!0&&r===!0)throw new U(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xS(t){if(!q.isDocumentKey(t))throw new U(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kS(t){if(q.isDocumentKey(t))throw new U(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=CI(t);throw new U(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Dh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_z("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ro=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kv;switch(r.type){case"firstParty":return new Uv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=OS.get(n);r&&(V("ComponentProvider","Removing Datastore"),OS.delete(n),r.terminate())}(this),Promise.resolve()}};function MR(t,e,n,r={}){var i;let s=(t=or(t,Ro))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=kC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(l)}t._authCredentials=new Fv(new eh(a,u))}}var Ch=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Et=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Hr=class t extends Ch{constructor(e,n,r){super(e,n,mI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function OR(t,e,...n){if(t=Ye(t),PR("collection","path",e),t instanceof Ro){let r=Me.fromString(e,...n);return kS(r),new Hr(t,null,r)}{if(!(t instanceof Et||t instanceof Hr))throw new U(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return kS(r),new Hr(t.firestore,null,r)}}function xR(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=th.newId()),PR("doc","path",e),t instanceof Ro){let r=Me.fromString(e,...n);return xS(r),new Et(t,null,new q(r))}{if(!(t instanceof Et||t instanceof Hr))throw new U(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return xS(r),new Et(t.firestore,t instanceof Hr?t.converter:null,new q(r))}}var Ah=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mh(this,"async_queue_retry"),this.Vu=()=>{let r=Ov();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Ov();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Ov();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=W_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var Hi=class extends Ro{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ah,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ah(e),this._firestoreClient=void 0,yield e}})}};function kR(t,e){let n=typeof t=="object"?t:Ks(),r=typeof t=="string"?t:e||"(default)",i=Za(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=xC("firestore");s&&MR(i,...s)}return i}function AI(t){if(t._terminated)throw new U(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Iz(t),t._firestoreClient}function Iz(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new qv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Mc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ut.fromBase64String(e))}catch(n){throw new U(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var No=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Oc=class{constructor(e){this._methodName=e}};var xc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var kc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var wz=/^__.*__$/,rI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,n,this.fieldTransforms):new $i(e,this.data,n,this.fieldTransforms)}},Sh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new An(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function FR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var iI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(FR(this.Cu)&&wz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},sI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Qu(e,n,r,i=!1){return new iI({Cu:e,methodName:n,qu:r,path:Mt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function LR(t){let e=t._freezeSettings(),n=Lh(t._databaseId);return new sI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ez(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);SI("Data must be an object, but it was:",o,r);let a=VR(r,o),u,l;if(s.merge)u=new qt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=oI(e,p,n);if(!o.contains(y))throw new U(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);jR(h,y)||h.push(y)}u=new qt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new rI(new Pt(a),u,l)}var Rh=class t extends Oc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Tz(t,e,n,r){let i=t.Qu(1,e,n);SI("Data must be an object, but it was:",i,r);let s=[],o=Pt.empty();qi(r,(u,l)=>{let h=RI(e,u,n);l=Ye(l);let p=i.Nu(h);if(l instanceof Rh)s.push(h);else{let y=jh(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new qt(s);return new Sh(o,a,i.fieldTransforms)}function bz(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[oI(e,r,n)],u=[i];if(s.length%2!=0)throw new U(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(oI(e,s[y])),u.push(s[y+1]);let l=[],h=Pt.empty();for(let y=a.length-1;y>=0;--y)if(!jR(l,a[y])){let _=a[y],A=u[y];A=Ye(A);let R=o.Nu(_);if(A instanceof Rh)l.push(_);else{let N=jh(A,R);N!=null&&(l.push(_),h.set(_,N))}}let p=new qt(l);return new Sh(h,p,o.fieldTransforms)}function jh(t,e){if(UR(t=Ye(t)))return SI("Unsupported field value:",e,t),VR(t,e);if(t instanceof Oc)return function(r,i){if(!FR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=jh(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:hh(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hh(i.serializer,s)}}if(r instanceof xc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mc)return{bytesValue:sR(i.serializer,r._byteString)};if(r instanceof Et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return yI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${CI(r)}`)}(t,e)}function VR(t,e){let n={};return LS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,i)=>{let s=jh(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof xc||t instanceof Mc||t instanceof Et||t instanceof Oc||t instanceof kc)}function SI(t,e,n){if(!UR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=CI(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function oI(t,e,n){if((e=Ye(e))instanceof No)return e._internalPath;if(typeof e=="string")return RI(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,n)}var Dz=new RegExp("[~\\*/\\[\\]]");function RI(t,e,n){if(e.search(Dz)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new U(P.INVALID_ARGUMENT,a+t+u)}function jR(t,e){return t.some(n=>n.isEqual(e))}var Ph=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(BR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},aI=class extends Ph{data(){return super.data()}};function BR(t,e){return typeof e=="string"?RI(t,e):e instanceof No?e._internalPath:e._delegate._internalPath}function Cz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cI=class{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return qi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Se(o.doubleValue));return new kc(s)}convertGeoPoint(e){return new xc(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=hI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){let n=ir(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);ve(dR(r));let i=new sh(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Az(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mh=class extends Ph{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new mo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(BR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},mo=class extends Mh{data(e={}){return super.data(e)}},uI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mo(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Sz(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Sz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function $R(t){t=or(t,Et);let e=or(t.firestore,Hi);return yz(AI(e),t._key).then(n=>Rz(e,t,n))}var Oh=class extends cI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}};function HR(t){t=or(t,Ch);let e=or(t.firestore,Hi),n=AI(e),r=new Oh(e);return Cz(t._query),vz(n,t._query).then(i=>new uI(e,r,t,i))}function qR(t,e,n){t=or(t,Et);let r=or(t.firestore,Hi),i=Az(t.converter,e,n);return GR(r,[Ez(LR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$r.none())])}function zR(t,e,n,...r){t=or(t,Et);let i=or(t.firestore,Hi),s=LR(i),o;return o=typeof(e=Ye(e))=="string"||e instanceof No?bz(s,"updateDoc",t._key,e,n,r):Tz(s,"updateDoc",t._key,e),GR(i,[o.toMutation(t._key,$r.exists(!0))])}function GR(t,e){return function(r,i){let s=new rn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return oz(yield mz(r),i,s)})),s.promise}(AI(t),e)}function Rz(t,e,n){let r=n.docs.get(e._key),i=new Oh(t);return new Mh(t,i,e._key,r,new Fi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Po=i})(xr),Or(new $t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Hi(new Lv(r.getProvider("auth-internal")),new Bv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),je(sS,"4.7.3",e),je(sS,"4.7.3","esm2017")})();var Gi=class{constructor(e){return e}},WR="firestore",NI=class{constructor(){return ec(WR)}};var PI=new j("angularfire2.firestore-instances");function Nz(t,e){let n=hd(WR,t,e);return n&&new Gi(n)}function Pz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Gi(r)}}var Mz={provide:NI,deps:[[new it,PI]]},Oz={provide:Gi,useFactory:Nz,deps:[[new it,PI],Gn]};function KR(t,...e){return je("angularfire",Ai.full,"fst"),Vt([Oz,Mz,{provide:PI,useFactory:Pz(t),multi:!0,deps:[pe,mt,Js,Si,[new it,yc],[new it,Ys],...e]}])}var QR=Nt(OR,!0);var MI=Nt(xR,!0);var YR=Nt($R,!0);var JR=Nt(HR,!0);var XR=Nt(kR,!0);var ZR=Nt(qR,!0);var OI=Nt(zR,!0);var aN=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(be(Ns),be(pi))}}static{this.\u0275dir=Yt({type:t})}}return t})(),xz=(()=>{class t extends aN{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_a(t)))(i||t)}})()}static{this.\u0275dir=Yt({type:t,features:[Ms]})}}return t})(),cN=new j("");var kz={provide:cN,useExisting:ma(()=>qh),multi:!0};function Fz(){let t=Bn()?Bn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Lz=new j(""),qh=(()=>{class t extends aN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Fz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(be(Ns),be(pi),be(Lz,8))}}static{this.\u0275dir=Yt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&gn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ag([kz]),Ms]})}}return t})();var Vz=new j(""),Uz=new j("");function uN(t){return t!=null}function lN(t){return yi(t)?Ce(t):t}function dN(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function hN(t,e){return e.map(n=>n(t))}function jz(t){return!t.validate}function fN(t){return t.map(e=>jz(e)?e:n=>e.validate(n))}function Bz(t){if(!t)return null;let e=t.filter(uN);return e.length==0?null:function(n){return dN(hN(n,e))}}function pN(t){return t!=null?Bz(fN(t)):null}function $z(t){if(!t)return null;let e=t.filter(uN);return e.length==0?null:function(n){let r=hN(n,e).map(lN);return Ff(r).pipe(ne(dN))}}function gN(t){return t!=null?$z(fN(t)):null}function eN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Hz(t){return t._rawValidators}function qz(t){return t._rawAsyncValidators}function xI(t){return t?Array.isArray(t)?t:[t]:[]}function $h(t,e){return Array.isArray(t)?t.includes(e):t===e}function tN(t,e){let n=xI(e);return xI(t).forEach(i=>{$h(n,i)||n.push(i)}),n}function nN(t,e){return xI(e).filter(n=>!$h(t,n))}var Hh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},kI=class extends Hh{get formDirective(){return null}get path(){return null}},$c=class extends Hh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},FI=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},zz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DZ=_e(L({},zz),{"[class.ng-submitted]":"isSubmitted"}),mN=(()=>{class t extends FI{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(be($c,2))}}static{this.\u0275dir=Yt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&bg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ms]})}}return t})();var jc="VALID",Bh="INVALID",Oo="PENDING",Bc="DISABLED";function Gz(t){return(zh(t)?t.validators:t)||null}function Wz(t){return Array.isArray(t)?pN(t):t||null}function Kz(t,e){return(zh(e)?e.asyncValidators:t)||null}function Qz(t){return Array.isArray(t)?gN(t):t||null}function zh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var LI=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jc}get invalid(){return this.status===Bh}get pending(){return this.status==Oo}get disabled(){return this.status===Bc}get enabled(){return this.status!==Bc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nN(e,this._rawAsyncValidators))}hasValidator(e){return $h(this._rawValidators,e)}hasAsyncValidator(e){return $h(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bc,this.errors=null,this._forEachChild(r=>{r.disable(_e(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=jc,this._forEachChild(r=>{r.enable(_e(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_e(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jc||this.status===Oo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bc:jc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oo,this._hasOwnPendingAsyncValidator=!0;let n=lN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?Bc:this.errors?Bh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oo)?Oo:this._anyControlsHaveStatus(Bh)?Bh:jc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Wz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qz(this._rawAsyncValidators)}};var yN=new j("CallSetDisabledState",{providedIn:"root",factory:()=>VI}),VI="always";function Yz(t,e){return[...e.path,t]}function Jz(t,e,n=VI){Zz(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),eG(t,e),nG(t,e),tG(t,e),Xz(t,e)}function rN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Xz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Zz(t,e){let n=Hz(t);e.validator!==null?t.setValidators(eN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=qz(t);e.asyncValidator!==null?t.setAsyncValidators(eN(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();rN(e._rawValidators,i),rN(e._rawAsyncValidators,i)}function eG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vN(t,e)})}function tG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function rG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function iG(t){return Object.getPrototypeOf(t.constructor)===xz}function sG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===qh?n=s:iG(s)?r=s:i=s}),i||r||n||null}function iN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var oG=class extends LI{constructor(e=null,n,r){super(Gz(n),Kz(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aG={provide:$c,useExisting:ma(()=>UI)},oN=Promise.resolve(),UI=(()=>{class t extends $c{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new oG,this._registered=!1,this.name="",this.update=new pt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sG(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),rG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Jz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){oN.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Rl(r);oN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Yz(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(be(kI,9),be(Vz,10),be(Uz,10),be(cN,10),be(vi,8),be(yN,8))}}static{this.\u0275dir=Yt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Lt.None,"disabled","isDisabled"],model:[Lt.None,"ngModel","model"],options:[Lt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ag([aG]),Ms,As]})}}return t})();var cG=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ln({type:t})}static{this.\u0275inj=Fn({})}}return t})();var _N=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:yN,useValue:n.callSetDisabledState??VI}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ln({type:t})}static{this.\u0275inj=Fn({imports:[cG]})}}return t})();function lG(t,e){if(t&1){let n=Tl();Re(0,"input",7),Dl("ngModelChange",function(i){Ss(n);let s=He(2);return Cg(s.currentText,i)||(s.currentText=i),Rs(i)}),gn("keyup.enter",function(){Ss(n);let i=He().$implicit,s=He();return Rs(s.addNoteToWeek(i.week,s.currentText))}),Ne()}if(t&2){let n=He(2);bl("ngModel",n.currentText)}}function dG(t,e){if(t&1){let n=Tl();Re(0,"input",8),Dl("ngModelChange",function(i){Ss(n);let s=He(2);return Cg(s.currentText,i)||(s.currentText=i),Rs(i)}),gn("keyup.enter",function(){Ss(n);let i=He().$implicit,s=He();return Rs(s.addNoteToWeek(i.week,s.currentText))}),Ne()}if(t&2){let n=He(2);bl("ngModel",n.currentText)}}function hG(t,e){if(t&1){let n=Tl();Re(0,"button",14),gn("click",function(){Ss(n);let i=He(2).$implicit,s=He().$implicit,o=He();return Rs(o.removeNoteFromWeek(s.week,i))}),Re(1,"span"),st(2,"\u274C"),Ne()()}}function fG(t,e){t&1&&mi(0,"span",15)}function pG(t,e){if(t&1&&(Re(0,"div",11),st(1),gi(2,hG,3,0,"button",12)(3,fG,1,0,"span",13),Ne()),t&2){let n=He().$implicit,r=He().$implicit,i=He();Qe(),Dr(" ",n," "),Qe(),pn("ngIf",r.week>=i.currentWeek),Qe(),pn("ngIf",r.week<i.currentWeek)}}function gG(t,e){if(t&1&&(Re(0,"div",16),st(1),Re(2,"span"),st(3,"\u2705"),Ne()()),t&2){let n=He(2).$implicit;Qe(),Dr(" ",n.won," ")}}function mG(t,e){if(t&1&&(Re(0,"li"),gi(1,pG,4,3,"div",9)(2,gG,4,1,"div",10),Ne()),t&2){let n=e.$implicit,r=He().$implicit;Qe(),pn("ngIf",n!=r.won),Qe(),pn("ngIf",n===r.won)}}function yG(t,e){if(t&1&&(Re(0,"div")(1,"div",3)(2,"span")(3,"strong"),st(4),Ne(),st(5),Ne(),gi(6,lG,1,1,"input",4)(7,dG,1,1,"input",5),Re(8,"div",6)(9,"ul"),gi(10,mG,3,2,"li",2),Ne()()()()),t&2){let n=e.$implicit,r=He();Qe(4),Dr("",n.week,". t\xFD\u017Ede\u0148 "),Qe(),Dr("(",n.dateRange,")"),Qe(),pn("ngIf",n.week>r.currentWeek&&n.notes.length<r.maxNoteLength),Qe(),pn("ngIf",n.week>r.currentWeek&&n.notes.length>=r.maxNoteLength),Qe(3),pn("ngForOf",n.notes)}}var IN=(()=>{class t{constructor(){this.weeks=[],this.maxNoteLength=5,this.currentText="",this.currentWeek=0,this.currentYear=0,this.currentDay=0,this.currentMonth="",this.monthsInSlovak=["janu\xE1ra","febru\xE1ra","marca","apr\xEDla","m\xE1ja","j\xFAna","j\xFAla","augusta","septembra","okt\xF3bra","novembra","decembra"],this.auth=M(nn),this.email=this.auth.currentUser?.email??"",this.firestore=M(Gi),this.collectionName="foodWeeks";let n=new Date;this.currentYear=n.getFullYear(),this.currentDay=n.getDate(),this.currentMonth=this.monthsInSlovak[n.getMonth()],this.currentWeek=this.getWeekNumber(n),this.generateWeeks(n)}ngOnInit(){return m(this,null,function*(){yield this.fetchNotes()})}getWeekNumber(n){let r=new Date(n.getFullYear(),0,1),i=n.getTime()-r.getTime(),s=1e3*3600*24,o=Math.floor(i/s);return Math.ceil((o+1)/7)}generateWeeks(n){let r=new Date(this.currentYear,0,1),i=r.getDay(),s=i===0?6:i-1;r.setDate(r.getDate()-s);let o=r,a=1;for(;o<=n;){let u=new Date(o),l=new Date(o);l.setDate(l.getDate()+6);let h=new Date(this.currentYear,11,31);l>h&&l.setDate(h.getDate());let p=`${u.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})} - ${l.toLocaleDateString("sk-SK",{month:"short",day:"numeric"})}`;this.weeks.push({week:a,dateRange:p,notes:[],won:""}),o.setDate(o.getDate()+7),a++}}fetchNotes(){return m(this,null,function*(){let n=this.currentYear.toString(),r=QR(this.firestore,this.collectionName);(yield JR(r)).forEach(s=>{let o=s.data(),a=o.week.toString(),u=this.weeks.find(l=>l.week.toString()+"-"+n===a);u&&(u.notes=o.notes||[],u.won=o.won||"")})})}addNoteToWeek(n,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===n);if(!i?.notes.includes(r)&&i&&i.notes.length<this.maxNoteLength){let s=Array.from(i.notes);i.notes.push(r);try{let o=`${n.toString()}-${this.currentYear.toString()}`,a=MI(this.firestore,this.collectionName,o);(yield YR(a)).exists()?yield OI(a,{notes:i?.notes}):yield ZR(a,{week:o,notes:[r],won:""}),this.currentText=""}catch(o){i.notes=s,console.error(o)}}})}removeNoteFromWeek(n,r){return m(this,null,function*(){let i=this.weeks.find(s=>s.week===n);if(i){i.notes=i.notes.filter(o=>o!==r);let s=MI(this.firestore,this.collectionName,`${n.toString()}-${this.currentYear.toString()}`);yield OI(s,{notes:i.notes})}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Er({type:t,selectors:[["dashboard"]],standalone:!0,features:[xs],decls:4,vars:4,consts:[[1,"week-list-container"],[2,"color","green"],[4,"ngFor","ngForOf"],[1,"week-entry"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["placeholder","Maximum dosiahnut\xE9","disabled","","class","input-warning",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],[1,"notes"],["placeholder","Nap\xED\u0161 jedlo",3,"ngModelChange","keyup.enter","ngModel"],["placeholder","Maximum dosiahnut\xE9","disabled","",1,"input-warning",3,"ngModelChange","keyup.enter","ngModel"],["class","note",4,"ngIf"],["class","note-won",4,"ngIf"],[1,"note"],["class","remove-btn",3,"click",4,"ngIf"],["class","past-note",4,"ngIf"],[1,"remove-btn",3,"click"],[1,"past-note"],[1,"note-won"]],template:function(r,i){r&1&&(Re(0,"div",0)(1,"h2",1),st(2),Ne(),gi(3,yG,11,5,"div",2),Ne()),r&2&&(Qe(2),Dg("List t\xFD\u017Ed\u0148ov v roku ",i.currentYear," do ",i.currentDay,". ",i.currentMonth,""),Qe(),pn("ngForOf",i.weeks))},dependencies:[_N,qh,mN,UI,Lg,gD,mD],styles:[".week-list-container[_ngcontent-%COMP%]{margin:20px;font-family:Arial,sans-serif}.week-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.week-list-container[_ngcontent-%COMP%]   .week-entry[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;gap:10px}.week-list-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;font-size:16px;border:1px solid #ccc}.week-list-container[_ngcontent-%COMP%]   .input-warning[_ngcontent-%COMP%]::placeholder{color:red}.week-list-container[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;display:flex;flex-wrap:wrap}.week-list-container[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#a8a8a8;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .note-won[_ngcontent-%COMP%]{background-color:#4abe4a;display:flex;justify-content:space-between;align-items:center;color:#fff;padding-left:5px;padding-top:3px;padding-bottom:3px;border-radius:10px;margin-right:5px}.week-list-container[_ngcontent-%COMP%]   .past-note[_ngcontent-%COMP%]{padding-right:10px}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;color:red}.week-list-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#969696;border-radius:10px;padding-top:2px;padding-bottom:2px}"]})}}return t})();var wN=[{path:"auth",component:nS},{path:"",component:IN,canActivate:[eS]},{path:"**",redirectTo:"auth"}];var EN={providers:[TC(wN),AD(),i0(()=>s0(NC.firebaseConfig)),JA(()=>XA()),KR(()=>XR())]};kD(RC,EN).catch(t=>console.error(t));
